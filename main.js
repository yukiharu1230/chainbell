(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["main"],{

/***/ "+FYa":
/*!*****************************************************************!*\
  !*** ./src/app/class/core/synchronize-object/object-factory.ts ***!
  \*****************************************************************/
/*! exports provided: ObjectFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectFactory", function() { return ObjectFactory; });
var ObjectFactory = /** @class */ (function () {
    function ObjectFactory() {
        this.constructorMap = new Map();
        this.aliasMap = new Map();
        console.log('ObjectFactory ready...');
    }
    Object.defineProperty(ObjectFactory, "instance", {
        get: function () {
            if (!ObjectFactory._instance)
                ObjectFactory._instance = new ObjectFactory();
            return ObjectFactory._instance;
        },
        enumerable: false,
        configurable: true
    });
    ;
    ObjectFactory.prototype.register = function (constructor, alias) {
        if (!alias)
            alias = constructor.name || constructor.toString().match(/function\s*([^(]*)\(/)[1];
        if (this.constructorMap.has(alias)) {
            console.error('その alias<' + alias + '> はすでに割り当て済みじゃねー？');
            return;
        }
        if (this.aliasMap.has(constructor)) {
            console.error('その constructor はすでに登録済みじゃねー？', constructor);
            return;
        }
        console.log('addGameObjectFactory -> ' + alias);
        this.constructorMap.set(alias, constructor);
        this.aliasMap.set(constructor, alias);
    };
    ObjectFactory.prototype.create = function (alias, identifer) {
        var classConstructor = this.constructorMap.get(alias);
        if (!classConstructor) {
            console.error(alias + 'という名のＧameObjectクラスは定義されていません');
            return null;
        }
        var gameObject = new classConstructor(identifer);
        return gameObject;
    };
    ObjectFactory.prototype.getAlias = function (constructor) {
        return this.aliasMap.get(constructor);
    };
    return ObjectFactory;
}());



/***/ }),

/***/ "+Kyd":
/*!************************************************!*\
  !*** ./src/app/directive/movable.directive.ts ***!
  \************************************************/
/*! exports provided: MovableDirective */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MovableDirective", function() { return MovableDirective; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _input_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./input-handler */ "96Ug");
/* harmony import */ var service_batch_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! service/batch.service */ "taL5");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var service_coordinate_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/coordinate.service */ "TzEH");








var MovableDirective = /** @class */ (function () {
    function MovableDirective(ngZone, elementRef, batchService, pointerDeviceService, coordinateService) {
        this.ngZone = ngZone;
        this.elementRef = elementRef;
        this.batchService = batchService;
        this.pointerDeviceService = pointerDeviceService;
        this.coordinateService = coordinateService;
        this.layerName = '';
        this.colideLayers = [];
        this.transformCssOffset = '';
        this.isDisable = false;
        this.onstart = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.ondragstart = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.ondrag = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.ondragend = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onend = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this._posX = 0;
        this._posY = 0;
        this._posZ = 0;
        this.pointer3d = { x: 0, y: 0, z: 0 };
        this.pointerOffset3d = { x: 0, y: 0, z: 0 };
        this.pointerStart3d = { x: 0, y: 0, z: 0 };
        this.pointerPrev3d = { x: 0, y: 0, z: 0 };
        this.height = 0;
        this.width = 0;
        this.ratio = 1.0;
        this.updateTimer = null;
        this.collidableElements = [];
        this.input = null;
    }
    Object.defineProperty(MovableDirective.prototype, "option", {
        set: function (option) {
            this.tabletopObject = option.tabletopObject != null ? option.tabletopObject : this.tabletopObject;
            this.layerName = option.layerName != null ? option.layerName : this.layerName;
            this.colideLayers = option.colideLayers != null ? option.colideLayers : this.colideLayers;
            this.transformCssOffset = option.transformCssOffset != null ? option.transformCssOffset : this.transformCssOffset;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MovableDirective.prototype, "posX", {
        get: function () { return this._posX; },
        set: function (posX) { this._posX = posX; this.setUpdateTimer(); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MovableDirective.prototype, "posY", {
        get: function () { return this._posY; },
        set: function (posY) { this._posY = posY; this.setUpdateTimer(); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MovableDirective.prototype, "posZ", {
        get: function () { return this._posZ; },
        set: function (posZ) { this._posZ = posZ; this.setUpdateTimer(); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MovableDirective.prototype, "isGridSnap", {
        get: function () {
            var tableSelecter = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.get('tableSelecter');
            return tableSelecter ? tableSelecter.gridSnap : false;
        },
        enumerable: false,
        configurable: true
    });
    MovableDirective.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.input = new _input_handler__WEBPACK_IMPORTED_MODULE_3__["InputHandler"](_this.elementRef.nativeElement);
        });
        this.input.onStart = this.onInputStart.bind(this);
        this.input.onMove = this.onInputMove.bind(this);
        this.input.onEnd = this.onInputEnd.bind(this);
        this.input.onContextMenu = this.onContextMenu.bind(this);
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            if ((event.isSendFromSelf && _this.input.isGrabbing) || event.data.identifier !== _this.tabletopObject.identifier || !_this.shouldTransition(_this.tabletopObject))
                return;
            _this.batchService.add(function () {
                if (_this.input.isGrabbing) {
                    _this.cancel();
                }
                else {
                    _this.setAnimatedTransition(true);
                }
                _this.stopTransition();
                _this.setPosition(_this.tabletopObject);
            }, _this);
        });
        if (this.layerName.length < 1 && this.tabletopObject)
            this.layerName = this.tabletopObject.aliasName;
        this.register();
        this.findCollidableElements();
        this.setPosition(this.tabletopObject);
    };
    MovableDirective.prototype.ngOnDestroy = function () {
        this.cancel();
        this.input.destroy();
        this.unregister();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].unregister(this);
        this.batchService.remove(this);
    };
    MovableDirective.prototype.cancel = function () {
        this.input.cancel();
        this.setPointerEvents(true);
        this.setAnimatedTransition(true);
        this.setCollidableLayer(false);
    };
    MovableDirective.prototype.onInputStart = function (e) {
        this.callSelectedEvent();
        if (this.collidableElements.length < 1)
            this.findCollidableElements(); // 稀にcollidableElementsの取得に失敗している
        if (this.isDisable || e.button === 1 || e.button === 2)
            return this.cancel();
        this.onstart.emit(e);
        this.setPointerEvents(false);
        this.setAnimatedTransition(false);
        this.setCollidableLayer(true);
        var target = document.elementFromPoint(this.input.pointer.x, this.input.pointer.y);
        this.pointer3d = this.coordinateService.calcTabletopLocalCoordinate(this.input.pointer, target);
        this.setPointerEvents(true);
        this.pointerOffset3d.x = this.posX - this.pointer3d.x;
        this.pointerOffset3d.y = this.posY - this.pointer3d.y;
        this.pointerOffset3d.z = this.posZ - this.pointer3d.z;
        this.pointerStart3d.x = this.pointerPrev3d.x = this.pointer3d.x;
        this.pointerStart3d.y = this.pointerPrev3d.y = this.pointer3d.y;
        this.pointerStart3d.z = this.pointerPrev3d.z = this.pointer3d.z;
        this.ratio = 1.0;
        if (this.pointer3d.z !== this.posZ) {
            this.ratio /= Math.abs(this.pointer3d.z - this.posZ) / 2;
        }
        this.width = this.input.target.clientWidth;
        this.height = this.input.target.clientHeight;
    };
    MovableDirective.prototype.onInputMove = function (e) {
        if (this.input.isGrabbing && !this.pointerDeviceService.isDragging) {
            return this.cancel(); // todo
        }
        if (this.isDisable || !this.input.isGrabbing)
            return this.cancel();
        if (e.cancelable)
            e.preventDefault();
        if (!this.input.isDragging)
            this.setPointerEvents(false);
        var target = document.elementFromPoint(this.input.pointer.x, this.input.pointer.y);
        if (target == null)
            return;
        this.pointer3d = this.coordinateService.calcTabletopLocalCoordinate(this.input.pointer, target);
        if (this.pointerPrev3d.x === this.pointer3d.x && this.pointerPrev3d.y === this.pointer3d.y && this.pointerPrev3d.z === this.pointer3d.z)
            return;
        if (!this.input.isDragging)
            this.ondragstart.emit(e);
        this.ondrag.emit(e);
        var ratio = this.calcDistanceRatio(this.pointerStart3d, this.pointer3d);
        if (ratio < this.ratio)
            this.ratio = ratio;
        this.pointerPrev3d.x = this.pointer3d.x;
        this.pointerPrev3d.y = this.pointer3d.y;
        this.pointerPrev3d.z = this.pointer3d.z;
        this.posX = this.pointer3d.x + (this.pointerOffset3d.x * this.ratio) + (-(this.width / 2) * (1.0 - this.ratio));
        this.posY = this.pointer3d.y + (this.pointerOffset3d.y * this.ratio) + (-(this.height / 2) * (1.0 - this.ratio));
        this.posZ = this.pointer3d.z;
    };
    MovableDirective.prototype.onInputEnd = function (e) {
        if (this.isDisable)
            return this.cancel();
        if (this.input.isDragging)
            this.ondragend.emit(e);
        if (this.isGridSnap && this.input.isDragging)
            this.snapToGrid();
        this.cancel();
        this.onend.emit(e);
    };
    MovableDirective.prototype.onContextMenu = function (e) {
        var _this = this;
        if (this.isDisable)
            return this.cancel();
        if (e.cancelable)
            e.preventDefault();
        if (this.isGridSnap && this.input.isDragging)
            this.snapToGrid();
        var needsDispatch = this.input.isGrabbing && e.isTrusted;
        this.cancel();
        if (needsDispatch) {
            // ロングプレスによるタッチ操作でコンテキストメニューを開く場合、イベントを適切なDOMに伝搬させる
            e.stopPropagation();
            var ev_1 = new MouseEvent(e.type, e);
            this.ngZone.run(function () { return _this.input.target.dispatchEvent(ev_1); });
        }
    };
    MovableDirective.prototype.callSelectedEvent = function () {
        if (this.tabletopObject)
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: this.tabletopObject.identifier, className: this.tabletopObject.aliasName });
    };
    MovableDirective.prototype.calcDistanceRatio = function (start, now) {
        var width = this.collidableElements[0].clientWidth;
        var height = this.collidableElements[0].clientHeight;
        var ratio = Math.sqrt(width * width + height * height);
        ratio = ratio < 1 ? 1 : ratio * 3;
        var distanceY = start.y - now.y;
        var distanceX = start.x - now.x;
        var distanceZ = (start.z - now.z) * 100;
        var distance = Math.sqrt(Math.pow(distanceY, 2) + Math.pow(distanceX, 2) + Math.pow(distanceZ, 2));
        return ratio / (distance + ratio);
    };
    MovableDirective.prototype.snapToGrid = function (gridSize) {
        if (gridSize === void 0) { gridSize = 25; }
        this.posX = this.calcSnapNum(this.posX, gridSize);
        this.posY = this.calcSnapNum(this.posY, gridSize);
    };
    MovableDirective.prototype.calcSnapNum = function (num, interval) {
        if (interval <= 0)
            return num;
        num = num < 0 ? num - interval / 2 : num + interval / 2;
        return num - (num % interval);
    };
    MovableDirective.prototype.setPosition = function (object) {
        this._posX = object.location.x;
        this._posY = object.location.y;
        this._posZ = object.posZ;
        this.updateTransformCss();
    };
    MovableDirective.prototype.setUpdateTimer = function () {
        var _this = this;
        if (this.updateTimer === null && this.tabletopObject) {
            this.updateTimer = setTimeout(function () {
                _this.tabletopObject.location.x = _this.posX;
                _this.tabletopObject.location.y = _this.posY;
                _this.tabletopObject.posZ = _this.posZ;
                _this.updateTimer = null;
            }, 66);
        }
        this.updateTransformCss();
    };
    MovableDirective.prototype.findCollidableElements = function () {
        this.collidableElements = [];
        if (getComputedStyle(this.input.target).pointerEvents !== 'none') {
            this.collidableElements = [this.input.target];
            return;
        }
        this.findNestedCollidableElements(this.input.target);
    };
    MovableDirective.prototype.findNestedCollidableElements = function (element) {
        // TODO:不完全
        var children = element.children;
        for (var i = 0; i < children.length; i++) {
            var child = children[i];
            if (!(child instanceof HTMLElement))
                continue;
            if (getComputedStyle(child).pointerEvents !== 'none') {
                this.collidableElements.push(child);
            }
        }
        if (this.collidableElements.length < 1) {
            for (var i = 0; i < children.length; i++) {
                var child = children[i];
                if (!(child instanceof HTMLElement))
                    continue;
                this.findNestedCollidableElements(child);
            }
        }
    };
    MovableDirective.prototype.setPointerEvents = function (isEnable) {
        var css = isEnable ? 'auto' : 'none';
        this.collidableElements.forEach(function (element) { return element.style.pointerEvents = css; });
    };
    MovableDirective.prototype.setAnimatedTransition = function (isEnable) {
        if (!this.input)
            return;
        this.input.target.style.transition = isEnable ? 'transform 132ms linear' : '';
    };
    MovableDirective.prototype.shouldTransition = function (object) {
        return object.location.x !== this.posX || object.location.y !== this.posY || object.posZ !== this.posZ;
    };
    MovableDirective.prototype.stopTransition = function () {
        this.input.target.style.transform = window.getComputedStyle(this.input.target).transform;
    };
    MovableDirective.prototype.updateTransformCss = function () {
        if (!this.input)
            return;
        var css = this.transformCssOffset + ' translateX(' + this.posX + 'px) translateY(' + this.posY + 'px) translateZ(' + this.posZ + 'px)';
        this.input.target.style.transform = css;
    };
    MovableDirective.prototype.setCollidableLayer = function (isCollidable) {
        var _this = this;
        // todo
        var isEnable = isCollidable;
        for (var layerName in MovableDirective.layerHash) {
            if (-1 < this.colideLayers.indexOf(layerName)) {
                isEnable = this.input.isGrabbing ? isCollidable : true;
            }
            else {
                isEnable = !isCollidable;
            }
            MovableDirective.layerHash[layerName].forEach(function (movable) {
                if (movable === _this || movable.input.isGrabbing)
                    return;
                movable.setPointerEvents(isEnable);
            });
        }
    };
    MovableDirective.prototype.register = function () {
        if (!(this.layerName in MovableDirective.layerHash))
            MovableDirective.layerHash[this.layerName] = [];
        var index = MovableDirective.layerHash[this.layerName].indexOf(this);
        if (index < 0)
            MovableDirective.layerHash[this.layerName].push(this);
    };
    MovableDirective.prototype.unregister = function () {
        if (!(this.layerName in MovableDirective.layerHash))
            return;
        var index = MovableDirective.layerHash[this.layerName].indexOf(this);
        if (-1 < index)
            MovableDirective.layerHash[this.layerName].splice(index, 1);
    };
    MovableDirective.layerHash = {};
    MovableDirective.ɵfac = function MovableDirective_Factory(t) { return new (t || MovableDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_batch_service__WEBPACK_IMPORTED_MODULE_4__["BatchService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_5__["PointerDeviceService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_coordinate_service__WEBPACK_IMPORTED_MODULE_6__["CoordinateService"])); };
    MovableDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: MovableDirective, selectors: [["", "appMovable", ""]], inputs: { option: ["movable.option", "option"], isDisable: ["movable.disable", "isDisable"] }, outputs: { onstart: "movable.onstart", ondragstart: "movable.ondragstart", ondrag: "movable.ondrag", ondragend: "movable.ondragend", onend: "movable.onend" } });
    return MovableDirective;
}());



/***/ }),

/***/ "+UEV":
/*!**************************************!*\
  !*** ./src/app/class/peer-cursor.ts ***!
  \**************************************/
/*! exports provided: PeerCursor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PeerCursor", function() { return PeerCursor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/game-object */ "xdgh");
/* harmony import */ var _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./core/system */ "yNnI");






var PeerCursor = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(PeerCursor, _super);
    function PeerCursor() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.userId = '';
        _this.peerId = '';
        _this.name = '';
        _this.imageIdentifier = '';
        return _this;
    }
    PeerCursor_1 = PeerCursor;
    Object.defineProperty(PeerCursor.prototype, "isMine", {
        get: function () { return (PeerCursor_1.myCursor && PeerCursor_1.myCursor === this); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PeerCursor.prototype, "image", {
        get: function () { return _core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_1__["ImageStorage"].instance.get(this.imageIdentifier); },
        enumerable: false,
        configurable: true
    });
    // GameObject Lifecycle
    PeerCursor.prototype.onStoreAdded = function () {
        var _this = this;
        _super.prototype.onStoreAdded.call(this);
        if (!this.isMine) {
            _core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].register(this)
                .on('DISCONNECT_PEER', -1000, function (event) {
                if (event.data.peerId !== _this.peerId)
                    return;
                PeerCursor_1.userIdMap.delete(_this.userId);
                PeerCursor_1.peerIdMap.delete(_this.peerId);
                _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.remove(_this);
            });
        }
    };
    // GameObject Lifecycle
    PeerCursor.prototype.onStoreRemoved = function () {
        _super.prototype.onStoreRemoved.call(this);
        _core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].unregister(this);
        PeerCursor_1.userIdMap.delete(this.userId);
        PeerCursor_1.peerIdMap.delete(this.peerId);
    };
    PeerCursor.findByUserId = function (userId) {
        return this.find(PeerCursor_1.userIdMap, userId, true);
    };
    PeerCursor.findByPeerId = function (peerId) {
        return this.find(PeerCursor_1.peerIdMap, peerId, false);
    };
    PeerCursor.find = function (map, key, isUserId) {
        var e_1, _a;
        var identifier = map.get(key);
        if (identifier != null && _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.get(identifier))
            return _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.get(identifier);
        var cursors = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.getObjects(PeerCursor_1);
        try {
            for (var cursors_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(cursors), cursors_1_1 = cursors_1.next(); !cursors_1_1.done; cursors_1_1 = cursors_1.next()) {
                var cursor = cursors_1_1.value;
                var id = isUserId ? cursor.userId : cursor.peerId;
                if (id === key) {
                    map.set(id, cursor.identifier);
                    return cursor;
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (cursors_1_1 && !cursors_1_1.done && (_a = cursors_1.return)) _a.call(cursors_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return null;
    };
    PeerCursor.createMyCursor = function () {
        if (PeerCursor_1.myCursor) {
            console.warn('It is already created.');
            return PeerCursor_1.myCursor;
        }
        PeerCursor_1.myCursor = new PeerCursor_1();
        PeerCursor_1.myCursor.peerId = _core_system__WEBPACK_IMPORTED_MODULE_5__["Network"].peerId;
        PeerCursor_1.myCursor.initialize();
        return PeerCursor_1.myCursor;
    };
    // override
    PeerCursor.prototype.apply = function (context) {
        var userId = context.syncData['userId'];
        var peerId = context.syncData['peerId'];
        if (userId !== this.userId) {
            PeerCursor_1.userIdMap.set(userId, this.identifier);
            PeerCursor_1.userIdMap.delete(this.userId);
        }
        if (peerId !== this.peerId) {
            PeerCursor_1.peerIdMap.set(peerId, this.identifier);
            PeerCursor_1.peerIdMap.delete(this.peerId);
        }
        _super.prototype.apply.call(this, context);
    };
    PeerCursor.prototype.isPeerAUdon = function () {
        return /u.*d.*o.*n/ig.exec(this.peerId) != null;
    };
    var PeerCursor_1;
    PeerCursor.myCursor = null;
    PeerCursor.userIdMap = new Map();
    PeerCursor.peerIdMap = new Map();
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], PeerCursor.prototype, "userId", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], PeerCursor.prototype, "peerId", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], PeerCursor.prototype, "name", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], PeerCursor.prototype, "imageIdentifier", void 0);
    PeerCursor = PeerCursor_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncObject"])('PeerCursor')
    ], PeerCursor);
    return PeerCursor;
}(_core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_3__["GameObject"]));



/***/ }),

/***/ "+l6h":
/*!**************************************************************!*\
  !*** ./src/app/component/chat-input/chat-input.component.ts ***!
  \**************************************************************/
/*! exports provided: ChatInputComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatInputComponent", function() { return ChatInputComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/system/network/peer-context */ "ztsr");
/* harmony import */ var _udonarium_core_system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/system/util/resettable-timeout */ "9ht1");
/* harmony import */ var _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/dice-bot */ "JUIv");
/* harmony import */ var _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @udonarium/game-character */ "M/aK");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var component_text_view_text_view_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! component/text-view/text-view.component */ "AsCv");
/* harmony import */ var service_chat_message_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! service/chat-message.service */ "PEfN");
/* harmony import */ var service_batch_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! service/batch.service */ "taL5");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");



















var _c0 = ["textArea"];
function ChatInputComponent_img_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "img", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](1, "safe");
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](1, 1, ctx_r0.imageFile.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"]);
} }
function ChatInputComponent_option_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "option", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("value", ctx_r1.myPeer == null ? null : ctx_r1.myPeer.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", ctx_r1.myPeer == null ? null : ctx_r1.myPeer.name, "\uFF08\u3042\u306A\u305F\uFF09");
} }
function ChatInputComponent_option_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "option", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var gameCharacter_r7 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("value", gameCharacter_r7.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", gameCharacter_r7.name, " ");
} }
function ChatInputComponent_option_12_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "\uFF08\u3042\u306A\u305F\uFF09");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
function ChatInputComponent_option_12_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "option", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, ChatInputComponent_option_12_ng_container_2_Template, 2, 0, "ng-container", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var peer_r8 = ctx.$implicit;
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("value", peer_r8.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", peer_r8.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", peer_r8 === ctx_r3.myPeer);
} }
function ChatInputComponent_option_16_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "option", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var diceBotInfo_r10 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("value", diceBotInfo_r10.script);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](diceBotInfo_r10.game);
} }
function ChatInputComponent_ng_container_26_span_1_span_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, ", ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function ChatInputComponent_ng_container_26_span_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, ChatInputComponent_ng_container_26_span_1_span_2_Template, 2, 0, "span", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var peerName_r12 = ctx.$implicit;
    var i_r13 = ctx.index;
    var ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](peerName_r12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r11.writingPeerNames.length !== i_r13 + 1);
} }
function ChatInputComponent_ng_container_26_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, ChatInputComponent_ng_container_26_span_1_Template, 3, 2, "span", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3, " \u304C\u5165\u529B\u4E2D...");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r6.writingPeerNames);
} }
var _c1 = function (a0) { return { "direct-message": a0 }; };
var _c2 = function () { return { standalone: true }; };
var ChatInputComponent = /** @class */ (function () {
    function ChatInputComponent(ngZone, chatMessageService, batchService, panelService, pointerDeviceService) {
        this.ngZone = ngZone;
        this.chatMessageService = chatMessageService;
        this.batchService = batchService;
        this.panelService = panelService;
        this.pointerDeviceService = pointerDeviceService;
        this.onlyCharacters = false;
        this.chatTabidentifier = '';
        this._gameType = '';
        this.gameTypeChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this._sendFrom = this.myPeer ? this.myPeer.identifier : '';
        this.sendFromChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this._sendTo = '';
        this.sendToChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this._text = '';
        this.textChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.chat = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.gameHelp = '';
        this.shouldUpdateCharacterList = true;
        this._gameCharacters = [];
        this.writingEventInterval = null;
        this.previousWritingLength = 0;
        this.writingPeers = new Map();
        this.writingPeerNames = [];
    }
    Object.defineProperty(ChatInputComponent.prototype, "gameType", {
        get: function () { return this._gameType; },
        set: function (gameType) { this._gameType = gameType; this.gameTypeChange.emit(gameType); },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(ChatInputComponent.prototype, "sendFrom", {
        get: function () { return this._sendFrom; },
        set: function (sendFrom) { this._sendFrom = sendFrom; this.sendFromChange.emit(sendFrom); },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(ChatInputComponent.prototype, "sendTo", {
        get: function () { return this._sendTo; },
        set: function (sendTo) { this._sendTo = sendTo; this.sendToChange.emit(sendTo); },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(ChatInputComponent.prototype, "text", {
        get: function () { return this._text; },
        set: function (text) { this._text = text; this.textChange.emit(text); },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(ChatInputComponent.prototype, "isDirect", {
        get: function () { return this.sendTo != null && this.sendTo.length ? true : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "imageFile", {
        get: function () {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendFrom);
            var image = null;
            if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]) {
                image = object.imageFile;
            }
            else if (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"]) {
                image = object.image;
            }
            return image ? image : _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__["ImageFile"].Empty;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "gameCharacters", {
        get: function () {
            var _this = this;
            if (this.shouldUpdateCharacterList) {
                this.shouldUpdateCharacterList = false;
                this._gameCharacters = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance
                    .getObjects(_udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"])
                    .filter(function (character) { return _this.allowsChat(character); });
            }
            return this._gameCharacters;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "diceBotInfos", {
        get: function () { return _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_7__["DiceBot"].diceBotInfos; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "myPeer", {
        get: function () { return _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"].myCursor; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "otherPeers", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.getObjects(_udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"]); },
        enumerable: false,
        configurable: true
    });
    ChatInputComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(this)
            .on('MESSAGE_ADDED', function (event) {
            if (event.data.tabIdentifier !== _this.chatTabidentifier)
                return;
            var message = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(event.data.messageIdentifier);
            var peerCursor = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.getObjects(_udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"]).find(function (obj) { return obj.userId === message.from; });
            var sendFrom = peerCursor ? peerCursor.peerId : '?';
            if (_this.writingPeers.has(sendFrom)) {
                _this.writingPeers.get(sendFrom).stop();
                _this.writingPeers.delete(sendFrom);
                _this.updateWritingPeerNames();
            }
        })
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            if (event.data.aliasName !== _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"].aliasName)
                return;
            _this.shouldUpdateCharacterList = true;
            if (event.data.identifier !== _this.sendFrom)
                return;
            var gameCharacter = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(event.data.identifier);
            if (gameCharacter && !_this.allowsChat(gameCharacter)) {
                if (0 < _this.gameCharacters.length && _this.onlyCharacters) {
                    _this.sendFrom = _this.gameCharacters[0].identifier;
                }
                else {
                    _this.sendFrom = _this.myPeer.identifier;
                }
            }
        })
            .on('DISCONNECT_PEER', function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(_this.sendTo);
            if (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"] && object.peerId === event.data.peerId) {
                _this.sendTo = '';
            }
        })
            .on('WRITING_A_MESSAGE', function (event) {
            if (event.isSendFromSelf || event.data !== _this.chatTabidentifier)
                return;
            if (!_this.writingPeers.has(event.sendFrom)) {
                _this.writingPeers.set(event.sendFrom, new _udonarium_core_system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_6__["ResettableTimeout"](function () {
                    _this.writingPeers.delete(event.sendFrom);
                    _this.updateWritingPeerNames();
                    _this.ngZone.run(function () { });
                }, 2000));
            }
            _this.writingPeers.get(event.sendFrom).reset();
            _this.updateWritingPeerNames();
            _this.batchService.add(function () { return _this.ngZone.run(function () { }); }, _this);
        });
    };
    ChatInputComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(this);
        this.batchService.remove(this);
    };
    ChatInputComponent.prototype.updateWritingPeerNames = function () {
        this.writingPeerNames = Array.from(this.writingPeers.keys()).map(function (peerId) {
            var peer = _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"].findByPeerId(peerId);
            return peer ? peer.name : '';
        });
    };
    ChatInputComponent.prototype.onInput = function () {
        var _this = this;
        if (this.writingEventInterval === null && this.previousWritingLength <= this.text.length) {
            var sendTo = null;
            if (this.isDirect) {
                var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendTo);
                if (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"]) {
                    var peer = _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_5__["PeerContext"].parse(object.peerId);
                    if (peer)
                        sendTo = peer.peerId;
                }
            }
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].call('WRITING_A_MESSAGE', this.chatTabidentifier, sendTo);
            this.writingEventInterval = setTimeout(function () {
                _this.writingEventInterval = null;
            }, 200);
        }
        this.previousWritingLength = this.text.length;
        this.calcFitHeight();
    };
    ChatInputComponent.prototype.sendChat = function (event) {
        if (event)
            event.preventDefault();
        if (!this.text.length)
            return;
        if (event && event.keyCode !== 13)
            return;
        if (!this.sendFrom.length)
            this.sendFrom = this.myPeer.identifier;
        this.chat.emit({ text: this.text, gameType: this.gameType, sendFrom: this.sendFrom, sendTo: this.sendTo });
        this.text = '';
        this.previousWritingLength = this.text.length;
        var textArea = this.textAreaElementRef.nativeElement;
        textArea.value = '';
        this.calcFitHeight();
    };
    ChatInputComponent.prototype.calcFitHeight = function () {
        var textArea = this.textAreaElementRef.nativeElement;
        textArea.style.height = '';
        if (textArea.scrollHeight >= textArea.offsetHeight) {
            textArea.style.height = textArea.scrollHeight + 'px';
        }
    };
    ChatInputComponent.prototype.loadDiceBot = function (gameType) {
        console.log('onChangeGameType ready');
        _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_7__["DiceBot"].getHelpMessage(gameType).then(function (help) {
            console.log('onChangeGameType done\n' + help);
        });
    };
    ChatInputComponent.prototype.showDicebotHelp = function () {
        var _this = this;
        _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_7__["DiceBot"].getHelpMessage(this.gameType).then(function (help) {
            var e_1, _a;
            _this.gameHelp = help;
            var gameName = 'ダイスボット';
            try {
                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(_udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_7__["DiceBot"].diceBotInfos), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var diceBotInfo = _c.value;
                    if (diceBotInfo.script === _this.gameType) {
                        gameName = 'ダイスボット<' + diceBotInfo.game + '＞';
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
            gameName += 'の説明';
            var coordinate = _this.pointerDeviceService.pointers[0];
            var option = { left: coordinate.x, top: coordinate.y, width: 600, height: 500 };
            var textView = _this.panelService.open(component_text_view_text_view_component__WEBPACK_IMPORTED_MODULE_10__["TextViewComponent"], option);
            textView.title = gameName;
            textView.text =
                '【ダイスボット】チャットにダイス用の文字を入力するとダイスロールが可能\n'
                    + '入力例）２ｄ６＋１　攻撃！\n'
                    + '出力例）2d6+1　攻撃！\n'
                    + '　　　　  diceBot: (2d6) → 7\n'
                    + '上記のようにダイス文字の後ろに空白を入れて発言する事も可能。\n'
                    + '以下、使用例\n'
                    + '　3D6+1>=9 ：3d6+1で目標値9以上かの判定\n'
                    + '　1D100<=50 ：D100で50％目標の下方ロールの例\n'
                    + '　3U6[5] ：3d6のダイス目が5以上の場合に振り足しして合計する(上方無限)\n'
                    + '　3B6 ：3d6のダイス目をバラバラのまま出力する（合計しない）\n'
                    + '　10B6>=4 ：10d6を振り4以上のダイス目の個数を数える\n'
                    + '　(8/2)D(4+6)<=(5*3)：個数・ダイス・達成値には四則演算も使用可能\n'
                    + '　C(10-4*3/2+2)：C(計算式）で計算だけの実行も可能\n'
                    + '　choice[a,b,c]：列挙した要素から一つを選択表示。ランダム攻撃対象決定などに\n'
                    + '　S3d6 ： 各コマンドの先頭に「S」を付けると他人結果の見えないシークレットロール\n'
                    + '　3d6/2 ： ダイス出目を割り算（切り捨て）。切り上げは /2U、四捨五入は /2R。\n'
                    + '　D66 ： D66ダイス。順序はゲームに依存。D66N：そのまま、D66S：昇順。\n'
                    + '===================================\n'
                    + _this.gameHelp;
        });
    };
    ChatInputComponent.prototype.allowsChat = function (gameCharacter) {
        var e_2, _a;
        switch (gameCharacter.location.name) {
            case 'table':
            case this.myPeer.peerId:
                return true;
            case 'graveyard':
                return false;
            default:
                try {
                    for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(_udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerContexts), _c = _b.next(); !_c.done; _c = _b.next()) {
                        var conn = _c.value;
                        if (conn.isOpen && gameCharacter.location.name === conn.peerId) {
                            return false;
                        }
                    }
                }
                catch (e_2_1) { e_2 = { error: e_2_1 }; }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                    }
                    finally { if (e_2) throw e_2.error; }
                }
                return true;
        }
    };
    ChatInputComponent.ɵfac = function ChatInputComponent_Factory(t) { return new (t || ChatInputComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_chat_message_service__WEBPACK_IMPORTED_MODULE_11__["ChatMessageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_batch_service__WEBPACK_IMPORTED_MODULE_12__["BatchService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_13__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_14__["PointerDeviceService"])); };
    ChatInputComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: ChatInputComponent, selectors: [["chat-input"]], viewQuery: function ChatInputComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵviewQuery"](_c0, 3);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.textAreaElementRef = _t.first);
        } }, inputs: { onlyCharacters: "onlyCharacters", chatTabidentifier: "chatTabidentifier", _gameType: ["gameType", "_gameType"], _sendFrom: ["sendFrom", "_sendFrom"], _sendTo: ["sendTo", "_sendTo"], _text: ["text", "_text"] }, outputs: { gameTypeChange: "gameTypeChange", sendFromChange: "sendFromChange", sendToChange: "sendToChange", textChange: "textChange", chat: "chat" }, decls: 27, vars: 17, consts: [[1, "table", 3, "ngClass"], [1, "table-cell", "imagebox"], ["class", "image", 3, "src", 4, "ngIf"], [1, "table-cell"], [2, "width", "12em", 3, "ngModel", "ngModelChange"], [3, "value", 4, "ngIf"], [3, "value", 4, "ngFor", "ngForOf"], [2, "width", "10em", 3, "ngModel", "ngModelChange"], ["value", ""], [2, "width", "12em", 3, "ngModel", "ngModelOptions", "change", "ngModelChange"], [3, "click"], ["placeholder", "Enter\u3067\u9001\u4FE1  Shift+Enter\u3067\u6539\u884C", 1, "chat-input", 3, "ngModel", "ngModelOptions", "ngModelChange", "input", "keydown.enter"], ["textArea", ""], ["type", "submit", 3, "click"], [1, "writing-info"], [4, "ngIf"], [1, "image", 3, "src"], [3, "value"], ["style", "font-weight: bold;", 4, "ngFor", "ngForOf"], [2, "font-weight", "bold"]], template: function ChatInputComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, ChatInputComponent_img_2_Template, 2, 4, "img", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "select", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function ChatInputComponent_Template_select_ngModelChange_5_listener($event) { return ctx.sendFrom = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, ChatInputComponent_option_6_Template, 2, 2, "option", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](7, ChatInputComponent_option_7_Template, 2, 2, "option", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](8, " \uFF1E ");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "select", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function ChatInputComponent_Template_select_ngModelChange_9_listener($event) { return ctx.sendTo = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "option", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](11, "\u5168\u54E1");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](12, ChatInputComponent_option_12_Template, 3, 3, "option", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](13, "select", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("change", function ChatInputComponent_Template_select_change_13_listener($event) { return ctx.loadDiceBot($event.target.value); })("ngModelChange", function ChatInputComponent_Template_select_ngModelChange_13_listener($event) { return ctx.gameType = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](14, "option", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](15, "\u30C0\u30A4\u30B9\u30DC\u30C3\u30C8\u6307\u5B9A\u306A\u3057");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](16, ChatInputComponent_option_16_Template, 2, 2, "option", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](17, "button", 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatInputComponent_Template_button_click_17_listener() { return ctx.showDicebotHelp(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](18, "?");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](19, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](20, "form");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](21, "textarea", 11, 12);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function ChatInputComponent_Template_textarea_ngModelChange_21_listener($event) { return ctx.text = $event; })("input", function ChatInputComponent_Template_textarea_input_21_listener() { return ctx.onInput(); })("keydown.enter", function ChatInputComponent_Template_textarea_keydown_enter_21_listener($event) { return ctx.sendChat($event); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](23, "button", 13);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatInputComponent_Template_button_click_23_listener() { return ctx.sendChat(null); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](24, "SEND");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](25, "div", 14);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](26, ChatInputComponent_ng_container_26_Template, 4, 1, "ng-container", 15);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](13, _c1, ctx.isDirect));
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < ctx.imageFile.url.length);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.sendFrom);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.onlyCharacters);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.gameCharacters);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.sendTo);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.otherPeers);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.gameType)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction0"](15, _c2));
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.diceBotInfos);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.text)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction0"](16, _c2));
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < ctx.writingPeerNames.length);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_15__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["SelectControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgModel"], _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgForOf"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgSelectOption"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["ɵangular_packages_forms_forms_x"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgForm"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["DefaultValueAccessor"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_17__["SafePipe"]], styles: [".table[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  padding : 5px;\n  \n  \n  display: table;\n  \n  width: 100%;\n}\n\n.table[_ngcontent-%COMP%]   .table-cell[_ngcontent-%COMP%] {\n  display: table-cell;\n}\n\n.imagebox[_ngcontent-%COMP%] {\n  display: inline-block;\n  width: 50px;\n  height: 50px;\n  max-width: 50px;\n  max-height: 50px;\n  vertical-align: top;\n  text-align: center;\n}\n\n.image[_ngcontent-%COMP%]{\n  width: 100%;\n  height: 100%;\n  vertical-align: bottom;\n  object-fit: cover;\n  object-position: 50% 0%;\n}\n\n.chat-input[_ngcontent-%COMP%] {\n  font-family: inherit;\n  font-size: 13px;\n\n  width: calc(100% - 100px);\n  height: calc(1em + 4px);\n  min-height: calc(1em + 7px);\n  max-height: calc(6em + 7px);\n  resize: none;\n  overflow: auto;\n\n  padding: 1px;\n  margin: 5px;\n\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  overflow-wrap: anywhere;\n  word-break: break-word;\n  vertical-align: bottom;\n}\n\n.writing-info[_ngcontent-%COMP%] {\n  font-size: 8px;\n  height: 1.3em;\n}\n\n.direct-message[_ngcontent-%COMP%] {\n  background-color: #555;\n  color: #CCC;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtaW5wdXQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHNCQUFzQjtFQUN0QixhQUFhO0VBQ2Isb0JBQW9CO0VBQ3BCLGNBQWM7RUFDZCxjQUFjO0VBQ2QsNEJBQTRCO0VBQzVCLFdBQVc7QUFDYjs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQixXQUFXO0VBQ1gsWUFBWTtFQUNaLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLGlCQUFpQjtFQUNqQix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxvQkFBb0I7RUFDcEIsZUFBZTs7RUFFZix5QkFBeUI7RUFDekIsdUJBQXVCO0VBQ3ZCLDJCQUEyQjtFQUMzQiwyQkFBMkI7RUFDM0IsWUFBWTtFQUNaLGNBQWM7O0VBRWQsWUFBWTtFQUNaLFdBQVc7O0VBRVgscUJBQXFCO0VBQ3JCLHFCQUFxQjtFQUNyQix1QkFBdUI7RUFDdkIsc0JBQXNCO0VBQ3RCLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsV0FBVztBQUNiIiwiZmlsZSI6ImNoYXQtaW5wdXQuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi50YWJsZSB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIHBhZGRpbmcgOiA1cHg7XG4gIC8qcG9zaXRpb24gOiBmaXhlZDsqL1xuICAvKmJvdHRvbSA6IDA7Ki9cbiAgZGlzcGxheTogdGFibGU7XG4gIC8qd2lkdGg6IGNhbGMoMTAwJSAtIDMwcHgpOyovXG4gIHdpZHRoOiAxMDAlO1xufVxuXG4udGFibGUgLnRhYmxlLWNlbGwge1xuICBkaXNwbGF5OiB0YWJsZS1jZWxsO1xufVxuXG4uaW1hZ2Vib3gge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHdpZHRoOiA1MHB4O1xuICBoZWlnaHQ6IDUwcHg7XG4gIG1heC13aWR0aDogNTBweDtcbiAgbWF4LWhlaWdodDogNTBweDtcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4uaW1hZ2V7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XG4gIG9iamVjdC1maXQ6IGNvdmVyO1xuICBvYmplY3QtcG9zaXRpb246IDUwJSAwJTtcbn1cblxuLmNoYXQtaW5wdXQge1xuICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgZm9udC1zaXplOiAxM3B4O1xuXG4gIHdpZHRoOiBjYWxjKDEwMCUgLSAxMDBweCk7XG4gIGhlaWdodDogY2FsYygxZW0gKyA0cHgpO1xuICBtaW4taGVpZ2h0OiBjYWxjKDFlbSArIDdweCk7XG4gIG1heC1oZWlnaHQ6IGNhbGMoNmVtICsgN3B4KTtcbiAgcmVzaXplOiBub25lO1xuICBvdmVyZmxvdzogYXV0bztcblxuICBwYWRkaW5nOiAxcHg7XG4gIG1hcmdpbjogNXB4O1xuXG4gIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbiAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICBvdmVyZmxvdy13cmFwOiBhbnl3aGVyZTtcbiAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbn1cblxuLndyaXRpbmctaW5mbyB7XG4gIGZvbnQtc2l6ZTogOHB4O1xuICBoZWlnaHQ6IDEuM2VtO1xufVxuXG4uZGlyZWN0LW1lc3NhZ2Uge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTU1O1xuICBjb2xvcjogI0NDQztcbn0iXX0= */"] });
    return ChatInputComponent;
}());



/***/ }),

/***/ 0:
/*!***************************!*\
  !*** multi ./src/main.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! /Users/shiyohtohyama/PhpstormProjects/udonarium/src/main.ts */"zUnb");


/***/ }),

/***/ "0cI7":
/*!******************************************************************************************!*\
  !*** ./src/app/component/game-character-generator/game-character-generator.component.ts ***!
  \******************************************************************************************/
/*! exports provided: GameCharacterGeneratorComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameCharacterGeneratorComponent", function() { return GameCharacterGeneratorComponent; });
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-serializer */ "MDT1");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_game_character__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/game-character */ "M/aK");
/* harmony import */ var _udonarium_game_table_mask__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/game-table-mask */ "AyjR");
/* harmony import */ var component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! component/file-selecter/file-selecter.component */ "FR7b");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");













var GameCharacterGeneratorComponent = /** @class */ (function () {
    function GameCharacterGeneratorComponent(viewContainerRef, modalService, panelService) {
        this.viewContainerRef = viewContainerRef;
        this.modalService = modalService;
        this.panelService = panelService;
        this.name = "ゲームキャラクター";
        this.size = 1;
        this.xml = '';
        this.minSize = 1;
        this.maxSize = 20;
        this.tableBackgroundImage = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_0__["ImageFile"].createEmpty('null');
    }
    GameCharacterGeneratorComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.panelService.title = 'キャラクタージェネレーター'; });
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(this)
            .on('SELECT_FILE', function (event) {
            console.log('SELECT_FILE GameCharacterGeneratorComponent ' + event.data.fileIdentifier);
            var fileIdentifier = event.data.fileIdentifier;
            var file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_1__["ImageStorage"].instance.get(fileIdentifier);
            if (file)
                _this.tableBackgroundImage = file;
        });
    };
    GameCharacterGeneratorComponent.prototype.ngAfterViewInit = function () { };
    GameCharacterGeneratorComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(this);
    };
    GameCharacterGeneratorComponent.prototype.createGameCharacter = function () {
        _udonarium_game_character__WEBPACK_IMPORTED_MODULE_5__["GameCharacter"].create(this.name, this.size, this.tableBackgroundImage.identifier);
    };
    GameCharacterGeneratorComponent.prototype.createGameTableMask = function () {
        var viewTable = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get('tableSelecter').viewTable;
        if (!viewTable)
            return;
        var tableMask = _udonarium_game_table_mask__WEBPACK_IMPORTED_MODULE_6__["GameTableMask"].create('マップマスク', 5, 5, 100);
        viewTable.appendChild(tableMask);
    };
    GameCharacterGeneratorComponent.prototype.createGameCharacterForXML = function (xml) {
        _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_2__["ObjectSerializer"].instance.parseXml(xml);
    };
    GameCharacterGeneratorComponent.prototype.openModal = function () {
        this.modalService.open(component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_7__["FileSelecterComponent"]);
    };
    GameCharacterGeneratorComponent.ɵfac = function GameCharacterGeneratorComponent_Factory(t) { return new (t || GameCharacterGeneratorComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_8__["ViewContainerRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_9__["ModalService"]), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_10__["PanelService"])); };
    GameCharacterGeneratorComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdefineComponent"]({ type: GameCharacterGeneratorComponent, selectors: [["game-character-generator"]], decls: 15, vars: 11, consts: [[3, "click"], ["height", "120", 3, "src"], ["placeholder", "Name", "name", "name", 3, "ngModel", "ngModelChange"], ["type", "range", "name", "size", 3, "ngModel", "min", "max", "ngModelChange"], ["type", "number", 3, "ngModel", "min", "max", "ngModelChange"]], template: function GameCharacterGeneratorComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "button", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function GameCharacterGeneratorComponent_Template_button_click_0_listener() { return ctx.openModal(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](1, "\u753B\u50CF\u3092\u9078\u3076");
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](2, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](3, "img", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](4, "safe");
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](5, "input", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function GameCharacterGeneratorComponent_Template_input_ngModelChange_5_listener($event) { return ctx.name = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](6, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](7, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](8, "input", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function GameCharacterGeneratorComponent_Template_input_ngModelChange_8_listener($event) { return ctx.size = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](9, " Size : ");
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](10, "input", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function GameCharacterGeneratorComponent_Template_input_ngModelChange_10_listener($event) { return ctx.size = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](11, "button", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function GameCharacterGeneratorComponent_Template_button_click_11_listener() { return ctx.createGameCharacter(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](12, "\u30AD\u30E3\u30E9\u30AF\u30BF\u30FC\u3092\u4F5C\u308B");
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](13, "button", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function GameCharacterGeneratorComponent_Template_button_click_13_listener() { return ctx.createGameTableMask(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](14, "\u30DE\u30C3\u30D7\u30DE\u30B9\u30AF\u3092\u4F5C\u308B");
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind2"](4, 8, ctx.tableBackgroundImage.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵsanitizeUrl"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", ctx.name);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpropertyInterpolate"]("min", ctx.minSize);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpropertyInterpolate"]("max", ctx.maxSize);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", ctx.size);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpropertyInterpolate"]("min", ctx.minSize);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpropertyInterpolate"]("max", ctx.maxSize);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", ctx.size);
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_11__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["NgModel"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["RangeValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["NumberValueAccessor"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_12__["SafePipe"]], styles: ["\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJnYW1lLWNoYXJhY3Rlci1nZW5lcmF0b3IuY29tcG9uZW50LmNzcyJ9 */"] });
    return GameCharacterGeneratorComponent;
}());



/***/ }),

/***/ "1lIu":
/*!************************************************************!*\
  !*** ./src/app/class/core/synchronize-object/decorator.ts ***!
  \************************************************************/
/*! exports provided: SyncObject, SyncVar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SyncObject", function() { return SyncObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SyncVar", function() { return SyncVar; });
/* harmony import */ var _decorator_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./decorator-core */ "rl/O");
/* harmony import */ var _object_node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./object-node */ "F67Z");


function SyncObject(alias) {
    return function (constructor) {
        Object(_decorator_core__WEBPACK_IMPORTED_MODULE_0__["defineSyncObject"])(alias)(constructor);
    };
}
function SyncVar() {
    return function (target, key) {
        if (target instanceof _object_node__WEBPACK_IMPORTED_MODULE_1__["ObjectNode"]) {
            Object(_decorator_core__WEBPACK_IMPORTED_MODULE_0__["defineSyncAttribute"])()(target, key);
        }
        else {
            Object(_decorator_core__WEBPACK_IMPORTED_MODULE_0__["defineSyncVariable"])()(target, key);
        }
    };
}


/***/ }),

/***/ "23G+":
/*!*************************************!*\
  !*** ./src/app/class/card-stack.ts ***!
  \*************************************/
/*! exports provided: CardStack */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CardStack", function() { return CardStack; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _card__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./card */ "jiu3");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/system */ "yNnI");
/* harmony import */ var _data_element__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./data-element */ "gkrD");
/* harmony import */ var _peer_cursor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./peer-cursor */ "+UEV");
/* harmony import */ var _tabletop_object__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./tabletop-object */ "e8gA");
/* harmony import */ var _tabletop_object_util__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./tabletop-object-util */ "g6Hf");









var CardStack = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(CardStack, _super);
    function CardStack() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.rotate = 0;
        _this.zindex = 0;
        _this.owner = '';
        _this.isShowTotal = true;
        return _this;
    }
    CardStack_1 = CardStack;
    Object.defineProperty(CardStack.prototype, "name", {
        get: function () { return this.getCommonValue('name', ''); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStack.prototype, "ownerName", {
        get: function () {
            var object = _peer_cursor__WEBPACK_IMPORTED_MODULE_6__["PeerCursor"].findByUserId(this.owner);
            return object ? object.name : '';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStack.prototype, "hasOwner", {
        get: function () { return 0 < this.owner.length; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStack.prototype, "cardRoot", {
        get: function () {
            var e_1, _a;
            try {
                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var node = _c.value;
                    if (node.getAttribute('name') === 'cardRoot')
                        return node;
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return null;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStack.prototype, "cards", {
        get: function () { return this.cardRoot ? this.cardRoot.children : []; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStack.prototype, "topCard", {
        get: function () { return this.isEmpty ? null : this.cards[0]; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStack.prototype, "isEmpty", {
        get: function () { return this.cards.length < 1; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStack.prototype, "imageFile", {
        get: function () { return this.topCard ? this.topCard.imageFile : null; },
        enumerable: false,
        configurable: true
    });
    // ObjectNode Lifecycle
    CardStack.prototype.onChildRemoved = function (child) {
        _super.prototype.onChildRemoved.call(this, child);
        if (child instanceof _card__WEBPACK_IMPORTED_MODULE_1__["Card"]) {
            _core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].trigger('CARD_STACK_DECREASED', { cardStackIdentifier: this.identifier, cardIdentifier: child.identifier });
        }
    };
    CardStack.prototype.shuffle = function () {
        var e_2, _a;
        if (!this.cardRoot)
            return;
        var length = this.cardRoot.children.length;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.cards), _c = _b.next(); !_c.done; _c = _b.next()) {
                var card = _c.value;
                card.index = Math.random() * length;
                card.rotate = Math.floor(Math.random() * 2) * 180;
                this.setSamePositionFor(card);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
        return this.cards;
    };
    CardStack.prototype.drawCard = function () {
        var card = this.topCard ? this.cardRoot.removeChild(this.topCard) : null;
        if (card) {
            card.rotate += this.rotate;
            if (360 < card.rotate)
                card.rotate -= 360;
            this.setSamePositionFor(card);
            card.toTopmost();
        }
        return card;
    };
    CardStack.prototype.drawCardAll = function () {
        var e_3, _a;
        var cards = this.cards;
        try {
            for (var cards_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(cards), cards_1_1 = cards_1.next(); !cards_1_1.done; cards_1_1 = cards_1.next()) {
                var card = cards_1_1.value;
                this.cardRoot.removeChild(card);
                card.rotate += this.rotate;
                this.setSamePositionFor(card);
                if (360 < card.rotate)
                    card.rotate -= 360;
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (cards_1_1 && !cards_1_1.done && (_a = cards_1.return)) _a.call(cards_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return cards;
    };
    CardStack.prototype.faceUp = function () {
        if (this.topCard) {
            this.topCard.faceUp();
            this.setSamePositionFor(this.topCard);
        }
    };
    CardStack.prototype.faceDown = function () {
        if (this.topCard) {
            this.topCard.faceDown();
            this.setSamePositionFor(this.topCard);
        }
    };
    CardStack.prototype.faceUpAll = function () {
        var e_4, _a;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.cards), _c = _b.next(); !_c.done; _c = _b.next()) {
                var card = _c.value;
                card.faceUp();
                this.setSamePositionFor(card);
            }
        }
        catch (e_4_1) { e_4 = { error: e_4_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_4) throw e_4.error; }
        }
    };
    CardStack.prototype.faceDownAll = function () {
        var e_5, _a;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.cards), _c = _b.next(); !_c.done; _c = _b.next()) {
                var card = _c.value;
                card.faceDown();
                this.setSamePositionFor(card);
            }
        }
        catch (e_5_1) { e_5 = { error: e_5_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_5) throw e_5.error; }
        }
    };
    CardStack.prototype.uprightAll = function () {
        var e_6, _a;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.cards), _c = _b.next(); !_c.done; _c = _b.next()) {
                var card = _c.value;
                card.rotate = 0;
                this.setSamePositionFor(card);
            }
        }
        catch (e_6_1) { e_6 = { error: e_6_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_6) throw e_6.error; }
        }
    };
    CardStack.prototype.unifyCardsSize = function (size) {
        var e_7, _a;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.cards), _c = _b.next(); !_c.done; _c = _b.next()) {
                var card = _c.value;
                if (card.size !== size)
                    card.size = size;
            }
        }
        catch (e_7_1) { e_7 = { error: e_7_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_7) throw e_7.error; }
        }
    };
    CardStack.prototype.putOnTop = function (card) {
        if (!this.cardRoot)
            return null;
        if (!this.topCard)
            return this.putOnBottom(card);
        card.owner = '';
        card.zindex = 0;
        var delta = Math.abs(card.rotate - this.rotate);
        if (180 < delta)
            delta = 360 - delta;
        card.rotate = delta <= 90 ? 0 : 180;
        this.setSamePositionFor(card);
        return this.cardRoot.insertBefore(card, this.topCard);
    };
    CardStack.prototype.putOnBottom = function (card) {
        if (!this.cardRoot)
            return null;
        card.owner = '';
        card.zindex = 0;
        var delta = Math.abs(card.rotate - this.rotate);
        if (180 < delta)
            delta = 360 - delta;
        card.rotate = delta <= 90 ? 0 : 180;
        this.setSamePositionFor(card);
        return this.cardRoot.appendChild(card);
    };
    CardStack.prototype.toTopmost = function () {
        Object(_tabletop_object_util__WEBPACK_IMPORTED_MODULE_8__["moveToTopmost"])(this, ['card']);
    };
    // override
    CardStack.prototype.setLocation = function (location) {
        var e_8, _a;
        _super.prototype.setLocation.call(this, location);
        var cards = this.cards;
        try {
            for (var cards_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(cards), cards_2_1 = cards_2.next(); !cards_2_1.done; cards_2_1 = cards_2.next()) {
                var card = cards_2_1.value;
                card.setLocation(location);
            }
        }
        catch (e_8_1) { e_8 = { error: e_8_1 }; }
        finally {
            try {
                if (cards_2_1 && !cards_2_1.done && (_a = cards_2.return)) _a.call(cards_2);
            }
            finally { if (e_8) throw e_8.error; }
        }
    };
    CardStack.prototype.setSamePositionFor = function (card) {
        card.location.name = this.location.name;
        card.location.x = this.location.x;
        card.location.y = this.location.y;
        card.posZ = this.posZ;
    };
    CardStack.create = function (name, identifier) {
        var object = null;
        if (identifier) {
            object = new CardStack_1(identifier);
        }
        else {
            object = new CardStack_1();
        }
        object.createDataElements();
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_5__["DataElement"].create('name', name, {}, 'name_' + object.identifier));
        var cardRoot = new _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__["ObjectNode"]('cardRoot_' + object.identifier);
        cardRoot.setAttribute('name', 'cardRoot');
        cardRoot.initialize();
        object.appendChild(cardRoot);
        object.initialize();
        return object;
    };
    var CardStack_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], CardStack.prototype, "rotate", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], CardStack.prototype, "zindex", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], CardStack.prototype, "owner", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], CardStack.prototype, "isShowTotal", void 0);
    CardStack = CardStack_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncObject"])('card-stack')
    ], CardStack);
    return CardStack;
}(_tabletop_object__WEBPACK_IMPORTED_MODULE_7__["TabletopObject"]));



/***/ }),

/***/ "39Ym":
/*!*****************************************************!*\
  !*** ./src/app/class/core/system/event/listener.ts ***!
  \*****************************************************/
/*! exports provided: Listener */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Listener", function() { return Listener; });
var Listener = /** @class */ (function () {
    function Listener(subject, key) {
        this._priority = 0;
        this._isRegistered = false;
        this._subject = subject;
        this._key = key;
    }
    Object.defineProperty(Listener.prototype, "subject", {
        get: function () { return this._subject; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Listener.prototype, "key", {
        get: function () { return this._key; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Listener.prototype, "eventName", {
        get: function () { return this._eventName; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Listener.prototype, "priority", {
        get: function () { return this._priority; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Listener.prototype, "callback", {
        get: function () { return this._callback; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Listener.prototype, "isOnlyOnce", {
        get: function () { return this._isOnlyOnce; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Listener.prototype, "isRegistered", {
        get: function () { return this._isRegistered; },
        enumerable: false,
        configurable: true
    });
    Listener.prototype.on = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        this._isOnlyOnce = false;
        if (args.length === 2) {
            return this.register(args[0], 0, args[1]);
        }
        else {
            return this.register(args[0], args[1], args[2]);
        }
    };
    Listener.prototype.once = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        var listener = this.on.apply(this, args);
        this._isOnlyOnce = true;
        return listener;
    };
    Listener.prototype.register = function (eventName, priority, callback) {
        if (this.isRegistered)
            this.unregister();
        this._eventName = eventName ? eventName : '*';
        this._priority = priority;
        this._callback = callback;
        this.subject.registerListener(this);
        this._isRegistered = true;
        return new Listener(this.subject, this.key);
    };
    Listener.prototype.unregister = function () {
        this.subject.unregisterListener(this);
        this._callback = null;
        this._isRegistered = false;
        return this;
    };
    Listener.prototype.trigger = function (event) {
        if (this.callback && this.isRegistered) {
            this.callback.apply(this.key, [event, this]);
            if (this.isOnlyOnce)
                this.unregister();
        }
    };
    Listener.prototype.isEqual = function (key, eventName, callback) {
        var matchTarget = (key == null || key === this.key);
        var matchEventName = (eventName == null || eventName === this.eventName);
        var matchCallback = (callback == null || callback === this.callback);
        return matchTarget && matchEventName && matchCallback;
    };
    return Listener;
}());



/***/ }),

/***/ "3jYK":
/*!************************************************!*\
  !*** ./src/app/directive/rotable.directive.ts ***!
  \************************************************/
/*! exports provided: RotableDirective */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RotableDirective", function() { return RotableDirective; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _input_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./input-handler */ "96Ug");
/* harmony import */ var service_batch_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! service/batch.service */ "taL5");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var service_coordinate_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! service/coordinate.service */ "TzEH");







var RotableDirective = /** @class */ (function () {
    function RotableDirective(ngZone, elementRef, batchService, pointerDeviceService, coordinateService) {
        this.ngZone = ngZone;
        this.elementRef = elementRef;
        this.batchService = batchService;
        this.pointerDeviceService = pointerDeviceService;
        this.coordinateService = coordinateService;
        this.transformCssOffset = '';
        this.grabbingSelecter = '.rotate-grab';
        this.isDisable = false;
        this.onstart = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.ondragstart = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.ondrag = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.ondragend = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onend = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this._rotate = 0;
        this.valueChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.rotateOffset = 0;
        this.updateTimer = null;
        this.grabbingElement = null;
        this.input = null;
    }
    Object.defineProperty(RotableDirective.prototype, "option", {
        set: function (option) {
            this.tabletopObject = option.tabletopObject != null ? option.tabletopObject : this.tabletopObject;
            this.grabbingSelecter = option.grabbingSelecter != null ? option.grabbingSelecter : this.grabbingSelecter;
            this.transformCssOffset = option.transformCssOffset != null ? option.transformCssOffset : this.transformCssOffset;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RotableDirective.prototype, "rotate", {
        get: function () { return this._rotate; },
        set: function (rotate) { this._rotate = rotate; this.setUpdateTimer(); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RotableDirective.prototype, "value", {
        set: function (value) { this._rotate = value; this.updateTransformCss(); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RotableDirective.prototype, "isAllowedToRotate", {
        get: function () {
            if (!this.grabbingElement || !this.input.target)
                return false;
            if (this.grabbingSelecter.length < 1)
                return true;
            var elements = this.input.target.querySelectorAll(this.grabbingSelecter);
            var macth = false;
            for (var i = 0; i < elements.length; i++) {
                macth = elements[i].contains(this.grabbingElement);
                if (macth)
                    return true;
            }
            return false;
        },
        enumerable: false,
        configurable: true
    });
    RotableDirective.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.input = new _input_handler__WEBPACK_IMPORTED_MODULE_2__["InputHandler"](_this.elementRef.nativeElement);
        });
        this.input.onStart = this.onInputStart.bind(this);
        this.input.onMove = this.onInputMove.bind(this);
        this.input.onEnd = this.onInputEnd.bind(this);
        this.input.onContextMenu = this.onContextMenu.bind(this);
        if (this.tabletopObject) {
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(this)
                .on('UPDATE_GAME_OBJECT', -1000, function (event) {
                if ((event.isSendFromSelf && _this.input.isGrabbing) || event.data.identifier !== _this.tabletopObject.identifier || !_this.shouldTransition(_this.tabletopObject))
                    return;
                _this.batchService.add(function () {
                    if (_this.input.isGrabbing) {
                        _this.cancel();
                    }
                    else {
                        _this.setAnimatedTransition(true);
                    }
                    _this.stopTransition();
                    _this.setRotate(_this.tabletopObject);
                }, _this);
            });
            this.setRotate(this.tabletopObject);
        }
        else {
            this.updateTransformCss();
        }
    };
    RotableDirective.prototype.ngOnDestroy = function () {
        this.cancel();
        this.input.destroy();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(this);
        this.batchService.remove(this);
    };
    RotableDirective.prototype.cancel = function () {
        this.input.cancel();
        this.grabbingElement = null;
        this.setAnimatedTransition(true);
    };
    RotableDirective.prototype.onInputStart = function (e) {
        this.grabbingElement = e.target;
        if (this.isDisable || !this.isAllowedToRotate || e.button === 1 || e.button === 2)
            return this.cancel();
        e.stopPropagation();
        this.onstart.emit(e);
        var pointer = this.coordinateService.convertLocalToLocal(this.input.pointer, this.grabbingElement, this.input.target.parentElement);
        this.rotateOffset = this.calcRotate(pointer, this.rotate);
        this.setAnimatedTransition(false);
    };
    RotableDirective.prototype.onInputMove = function (e) {
        if (this.input.isGrabbing && !this.pointerDeviceService.isDragging) {
            return this.cancel(); // todo
        }
        if (this.isDisable || !this.input.isGrabbing)
            return this.cancel();
        if (e.cancelable)
            e.preventDefault();
        e.stopPropagation();
        var pointer3d = this.coordinateService.convertLocalToLocal(this.input.pointer, this.grabbingElement, this.input.target.parentElement);
        var angle = this.calcRotate(pointer3d, this.rotateOffset);
        if (!this.input.isDragging)
            this.ondragstart.emit(e);
        this.ondrag.emit(e);
        this.rotate = angle;
    };
    RotableDirective.prototype.onInputEnd = function (e) {
        if (this.isDisable)
            return this.cancel();
        e.stopPropagation();
        if (this.input.isDragging)
            this.ondragend.emit(e);
        this.cancel();
        this.snapToPolygonal();
        this.onend.emit(e);
    };
    RotableDirective.prototype.onContextMenu = function (e) {
        if (this.isDisable)
            return this.cancel();
        if (e.cancelable)
            e.preventDefault();
        this.cancel();
        this.snapToPolygonal();
    };
    RotableDirective.prototype.calcRotate = function (pointer, rotateOffset) {
        var centerX = this.input.target.clientWidth / 2;
        var centerY = this.input.target.clientHeight / 2;
        var x = pointer.x - centerX;
        var y = pointer.y - centerY;
        var rad = Math.atan2(y, x);
        return ((rad * 180 / Math.PI) - rotateOffset) % 360;
    };
    RotableDirective.prototype.snapToPolygonal = function (polygonal) {
        if (polygonal === void 0) { polygonal = 24; }
        if (polygonal <= 1)
            return;
        this.rotate = this.rotate < 0 ? this.rotate - (180 / polygonal) : this.rotate + (180 / polygonal);
        this.rotate -= (this.rotate) % (360 / polygonal);
    };
    RotableDirective.prototype.setUpdateTimer = function () {
        var _this = this;
        if (this.updateTimer === null) {
            this.updateTimer = setTimeout(function () {
                _this.valueChange.emit(_this.rotate);
                if (_this.tabletopObject)
                    _this.tabletopObject.rotate = _this.rotate;
                _this.updateTimer = null;
            }, 66);
        }
        this.updateTransformCss();
    };
    RotableDirective.prototype.setRotate = function (object) {
        if (object)
            this._rotate = object.rotate;
        this.updateTransformCss();
    };
    RotableDirective.prototype.setAnimatedTransition = function (isEnable) {
        if (!this.input)
            return;
        this.input.target.style.transition = isEnable ? 'transform 132ms linear' : '';
    };
    RotableDirective.prototype.shouldTransition = function (object) {
        return object.rotate !== this.rotate;
    };
    RotableDirective.prototype.stopTransition = function () {
        this.input.target.style.transform = window.getComputedStyle(this.input.target).transform;
    };
    RotableDirective.prototype.updateTransformCss = function () {
        if (!this.input)
            return;
        var css = this.transformCssOffset + ' rotateZ(' + this.rotate + 'deg)';
        this.input.target.style.transform = css;
    };
    RotableDirective.ɵfac = function RotableDirective_Factory(t) { return new (t || RotableDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_batch_service__WEBPACK_IMPORTED_MODULE_3__["BatchService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_4__["PointerDeviceService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_coordinate_service__WEBPACK_IMPORTED_MODULE_5__["CoordinateService"])); };
    RotableDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: RotableDirective, selectors: [["", "appRotable", ""]], inputs: { option: ["rotable.option", "option"], isDisable: ["rotable.disable", "isDisable"], value: ["rotable.value", "value"] }, outputs: { onstart: "rotable.onstart", ondragstart: "rotable.ondragstart", ondrag: "rotable.ondrag", ondragend: "rotable.ondragend", onend: "rotable.onend", valueChange: "rotable.valueChange" } });
    return RotableDirective;
}());



/***/ }),

/***/ "3v9A":
/*!************************************************************************!*\
  !*** ./src/app/component/game-table-mask/game-table-mask.component.ts ***!
  \************************************************************************/
/*! exports provided: GameTableMaskComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameTableMaskComponent", function() { return GameTableMaskComponent; });
/* harmony import */ var _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var directive_input_handler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! directive/input-handler */ "96Ug");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_tabletop_action_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/tabletop-action.service */ "AFBa");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var service_coordinate_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! service/coordinate.service */ "TzEH");
/* harmony import */ var directive_movable_directive__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! directive/movable.directive */ "+Kyd");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");
















function GameTableMaskComponent_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](0, "div");
} }
function GameTableMaskComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](0, "div", 5);
} if (rf & 2) {
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵstyleProp"]("background-color", "rgba(10, 10, 10," + ctx_r2.opacity + ")");
} }
function GameTableMaskComponent_ng_template_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](1, "img", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵstyleProp"]("opacity", ctx_r4.opacity);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind2"](2, 3, ctx_r4.imageFile.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵsanitizeUrl"]);
} }
function GameTableMaskComponent_div_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](1, "i", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](2, "lock");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
} }
var _c0 = function (a0) { return { "is-grab": a0 }; };
var GameTableMaskComponent = /** @class */ (function () {
    function GameTableMaskComponent(ngZone, tabletopActionService, contextMenuService, elementRef, panelService, changeDetector, pointerDeviceService, coordinateService) {
        this.ngZone = ngZone;
        this.tabletopActionService = tabletopActionService;
        this.contextMenuService = contextMenuService;
        this.elementRef = elementRef;
        this.panelService = panelService;
        this.changeDetector = changeDetector;
        this.pointerDeviceService = pointerDeviceService;
        this.coordinateService = coordinateService;
        this.gameTableMask = null;
        this.is3D = false;
        this.gridSize = 50;
        this.movableOption = {};
        this.input = null;
    }
    Object.defineProperty(GameTableMaskComponent.prototype, "name", {
        get: function () { return this.gameTableMask.name; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableMaskComponent.prototype, "width", {
        get: function () { return this.adjustMinBounds(this.gameTableMask.width); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableMaskComponent.prototype, "height", {
        get: function () { return this.adjustMinBounds(this.gameTableMask.height); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableMaskComponent.prototype, "opacity", {
        get: function () { return this.gameTableMask.opacity; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableMaskComponent.prototype, "imageFile", {
        get: function () { return this.gameTableMask.imageFile; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableMaskComponent.prototype, "isLock", {
        get: function () { return this.gameTableMask.isLock; },
        set: function (isLock) { this.gameTableMask.isLock = isLock; },
        enumerable: false,
        configurable: true
    });
    GameTableMaskComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.get(event.data.identifier);
            if (!_this.gameTableMask || !object)
                return;
            if (_this.gameTableMask === object || (object instanceof _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_0__["ObjectNode"] && _this.gameTableMask.contains(object))) {
                _this.changeDetector.markForCheck();
            }
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('UPDATE_FILE_RESOURE', -1000, function (event) {
            _this.changeDetector.markForCheck();
        });
        this.movableOption = {
            tabletopObject: this.gameTableMask,
            transformCssOffset: 'translateZ(0.15px)',
            colideLayers: ['terrain']
        };
    };
    GameTableMaskComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.input = new directive_input_handler__WEBPACK_IMPORTED_MODULE_5__["InputHandler"](_this.elementRef.nativeElement);
        });
        this.input.onStart = this.onInputStart.bind(this);
    };
    GameTableMaskComponent.prototype.ngOnDestroy = function () {
        this.input.destroy();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].unregister(this);
    };
    GameTableMaskComponent.prototype.onDragstart = function (e) {
        e.stopPropagation();
        e.preventDefault();
    };
    GameTableMaskComponent.prototype.onInputStart = function (e) {
        this.input.cancel();
        // TODO:もっと良い方法考える
        if (this.isLock) {
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].trigger('DRAG_LOCKED_OBJECT', {});
        }
    };
    GameTableMaskComponent.prototype.onContextMenu = function (e) {
        var _this = this;
        e.stopPropagation();
        e.preventDefault();
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu)
            return;
        var menuPosition = this.pointerDeviceService.pointers[0];
        var objectPosition = this.coordinateService.calcTabletopLocalCoordinate();
        this.contextMenuService.open(menuPosition, [
            (this.isLock
                ? {
                    name: '固定解除',
                    action: function () {
                        _this.isLock = false;
                        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].unlock);
                    }
                }
                : {
                    name: '固定する',
                    action: function () {
                        _this.isLock = true;
                        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].lock);
                    }
                }),
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_6__["ContextMenuSeparator"],
            { name: 'マップマスクを編集', action: function () { _this.showDetail(_this.gameTableMask); } },
            {
                name: 'コピーを作る',
                action: function () {
                    var cloneObject = _this.gameTableMask.clone();
                    console.log('コピー', cloneObject);
                    cloneObject.location.x += _this.gridSize;
                    cloneObject.location.y += _this.gridSize;
                    cloneObject.isLock = false;
                    if (_this.gameTableMask.parent)
                        _this.gameTableMask.parent.appendChild(cloneObject);
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].cardPut);
                }
            },
            {
                name: '削除する',
                action: function () {
                    _this.gameTableMask.destroy();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].sweep);
                }
            },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_6__["ContextMenuSeparator"],
            { name: 'オブジェクト作成', action: null, subActions: this.tabletopActionService.makeDefaultContextMenuActions(objectPosition) }
        ], this.name);
    };
    GameTableMaskComponent.prototype.onMove = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].cardPick);
    };
    GameTableMaskComponent.prototype.onMoved = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].cardPut);
    };
    GameTableMaskComponent.prototype.adjustMinBounds = function (value, min) {
        if (min === void 0) { min = 0; }
        return value < min ? min : value;
    };
    GameTableMaskComponent.prototype.showDetail = function (gameObject) {
        var coordinate = this.pointerDeviceService.pointers[0];
        var title = 'マップマスク設定';
        if (gameObject.name.length)
            title += ' - ' + gameObject.name;
        var option = { title: title, left: coordinate.x - 200, top: coordinate.y - 150, width: 400, height: 300 };
        var component = this.panelService.open(component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_4__["GameCharacterSheetComponent"], option);
        component.tabletopObject = gameObject;
    };
    GameTableMaskComponent.ɵfac = function GameTableMaskComponent_Factory(t) { return new (t || GameTableMaskComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_7__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](service_tabletop_action_service__WEBPACK_IMPORTED_MODULE_8__["TabletopActionService"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_6__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_7__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_9__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_7__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_10__["PointerDeviceService"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](service_coordinate_service__WEBPACK_IMPORTED_MODULE_11__["CoordinateService"])); };
    GameTableMaskComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdefineComponent"]({ type: GameTableMaskComponent, selectors: [["game-table-mask"]], hostBindings: function GameTableMaskComponent_HostBindings(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("dragstart", function GameTableMaskComponent_dragstart_HostBindingHandler($event) { return ctx.onDragstart($event); })("contextmenu", function GameTableMaskComponent_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });
        } }, inputs: { gameTableMask: "gameTableMask", is3D: "is3D" }, decls: 7, vars: 13, consts: [["appMovable", "", 1, "component", 3, "ngClass", "movable.option", "movable.disable", "movable.ondragstart", "movable.ondragend"], [4, "ngIf", "ngIfThen", "ngIfElse"], ["blackMask", ""], ["imageMask", ""], ["class", "lock-icon is-center", 4, "ngIf"], [1, "border", "is-fit-full"], [1, "image", "is-fit-full", 3, "src"], [1, "lock-icon", "is-center"], [1, "material-icons"]], template: function GameTableMaskComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("movable.ondragstart", function GameTableMaskComponent_Template_div_movable_ondragstart_0_listener() { return ctx.onMove(); })("movable.ondragend", function GameTableMaskComponent_Template_div_movable_ondragend_0_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](1, GameTableMaskComponent_div_1_Template, 1, 0, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](2, GameTableMaskComponent_ng_template_2_Template, 1, 2, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](4, GameTableMaskComponent_ng_template_4_Template, 3, 6, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](6, GameTableMaskComponent_div_6_Template, 3, 0, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
        } if (rf & 2) {
            var _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵreference"](3);
            var _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵreference"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵstyleProp"]("width", ctx.width * ctx.gridSize, "px")("height", ctx.height * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpureFunction1"](11, _c0, !ctx.isLock))("movable.option", ctx.movableOption)("movable.disable", ctx.isLock);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx.imageFile.url.length < 1)("ngIfThen", _r1)("ngIfElse", _r3);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx.isLock);
        } }, directives: [directive_movable_directive__WEBPACK_IMPORTED_MODULE_12__["MovableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_13__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_13__["NgIf"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_14__["SafePipe"]], styles: [".is-grab[_ngcontent-%COMP%] {\n  cursor: grab;\n}\n\n.is-grabbing[_ngcontent-%COMP%] {\n  cursor: grabbing;\n}\n\n.is-transition[_ngcontent-%COMP%] {\n  transition: transform 132ms linear;\n}\n\n.component[_ngcontent-%COMP%] {\n  position: absolute;\n  height: 50px;\n  width: 50px;\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n  -webkit-user-select: none;\n  user-select: none;\n  \n  -moz-user-drag: none;\n  -webkit-user-drag: none;\n}\n\n.image[_ngcontent-%COMP%] {\n  display: block;\n}\n\n.lock-icon[_ngcontent-%COMP%] {\n  background-color: #CCCCCC;\n  border-radius: 100%;\n  color: #444;\n  width: 25px;\n  height: 25px;\n}\n\n.is-center[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n}\n\n.border[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  border: solid 2px #CCCCCC;\n}\n\n.is-fit-full[_ngcontent-%COMP%] {\n  height: 100%;\n  width: 100%;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUtdGFibGUtbWFzay5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBR0UsWUFBWTtBQUNkOztBQUVBO0VBR0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBRUUsa0NBQWtDO0FBQ3BDOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixXQUFXO0VBQ1gsbUNBQTJCO1VBQTNCLDJCQUEyQjtFQUUzQix5QkFBeUI7RUFDekIsaUJBQWlCOztFQUVqQixvQkFBb0I7RUFDcEIsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixtQkFBbUI7RUFDbkIsV0FBVztFQUNYLFdBQVc7RUFDWCxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsTUFBTTtFQUNOLFNBQVM7RUFDVCxPQUFPO0VBQ1AsUUFBUTtFQUNSLFlBQVk7QUFDZDs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0Qix5QkFBeUI7QUFDM0I7O0FBRUE7RUFDRSxZQUFZO0VBQ1osV0FBVztBQUNiIiwiZmlsZSI6ImdhbWUtdGFibGUtbWFzay5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmlzLWdyYWIge1xuICBjdXJzb3I6IC1tb3otZ3JhYjtcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWI7XG4gIGN1cnNvcjogZ3JhYjtcbn1cblxuLmlzLWdyYWJiaW5nIHtcbiAgY3Vyc29yOiAtbW96LWdyYWJiaW5nO1xuICBjdXJzb3I6IC13ZWJraXQtZ3JhYmJpbmc7XG4gIGN1cnNvcjogZ3JhYmJpbmc7XG59XG5cbi5pcy10cmFuc2l0aW9uIHtcbiAgLXdlYmtpdC10cmFuc2l0aW9uOiAtd2Via2l0LXRyYW5zZm9ybSAxMzJtcyBsaW5lYXI7XG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAxMzJtcyBsaW5lYXI7XG59XG5cbi5jb21wb25lbnQge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGhlaWdodDogNTBweDtcbiAgd2lkdGg6IDUwcHg7XG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIFxuICAtbW96LXVzZXItZHJhZzogbm9uZTtcbiAgLXdlYmtpdC11c2VyLWRyYWc6IG5vbmU7XG59XG5cbi5pbWFnZSB7XG4gIGRpc3BsYXk6IGJsb2NrO1xufVxuXG4ubG9jay1pY29uIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI0NDQ0NDQztcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgY29sb3I6ICM0NDQ7XG4gIHdpZHRoOiAyNXB4O1xuICBoZWlnaHQ6IDI1cHg7XG59XG5cbi5pcy1jZW50ZXIge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgbWFyZ2luOiBhdXRvO1xufVxuXG4uYm9yZGVyIHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiBzb2xpZCAycHggI0NDQ0NDQztcbn1cblxuLmlzLWZpdC1mdWxsIHtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbn1cbiJdfQ== */"], changeDetection: 0 });
    return GameTableMaskComponent;
}());



/***/ }),

/***/ "4fXm":
/*!**************************************************!*\
  !*** ./src/app/component/card/card.component.ts ***!
  \**************************************************/
/*! exports provided: CardComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CardComponent", function() { return CardComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _udonarium_card__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/card */ "jiu3");
/* harmony import */ var _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/card-stack */ "23G+");
/* harmony import */ var _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var directive_input_handler__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! directive/input-handler */ "96Ug");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_tabletop_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! service/tabletop.service */ "Sdfd");
/* harmony import */ var service_image_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! service/image.service */ "Hvpu");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var directive_movable_directive__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! directive/movable.directive */ "+Kyd");
/* harmony import */ var directive_rotable_directive__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! directive/rotable.directive */ "3jYK");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");





















function CardComponent_img_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelement"](0, "img", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵpipe"](1, "safe");
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵpipeBind2"](1, 1, ctx_r0.isFront ? ctx_r0.frontImage.url : ctx_r0.backImage.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵsanitizeUrl"]);
} }
var _c0 = function (a0) { return { "transform": a0 }; };
function CardComponent_div_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementStart"](0, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementStart"](1, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵpureFunction1"](2, _c0, "translateY(-75%) translateX(-50%) translateX(" + ctx_r1.size * ctx_r1.gridSize / 2 + "px)"));
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵtextInterpolate"](ctx_r1.ownerName);
} }
function CardComponent_img_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelement"](0, "img", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵpipe"](1, "safe");
} if (rf & 2) {
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵpipeBind2"](1, 1, ctx_r2.frontImage.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵsanitizeUrl"]);
} }
function CardComponent_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementStart"](1, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementStart"](2, "i", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵtext"](3, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementStart"](4, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementStart"](5, "i", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵtext"](6, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementStart"](7, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementStart"](8, "i", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵtext"](9, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementStart"](10, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementStart"](11, "i", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵtext"](12, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelement"](13, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementContainerEnd"]();
} }
var CardComponent = /** @class */ (function () {
    function CardComponent(ngZone, contextMenuService, panelService, elementRef, changeDetector, tabletopService, imageService, pointerDeviceService) {
        this.ngZone = ngZone;
        this.contextMenuService = contextMenuService;
        this.panelService = panelService;
        this.elementRef = elementRef;
        this.changeDetector = changeDetector;
        this.tabletopService = tabletopService;
        this.imageService = imageService;
        this.pointerDeviceService = pointerDeviceService;
        this.card = null;
        this.is3D = false;
        this.iconHiddenTimer = null;
        this.gridSize = 50;
        this.movableOption = {};
        this.rotableOption = {};
        this.doubleClickTimer = null;
        this.doubleClickPoint = { x: 0, y: 0 };
        this.input = null;
    }
    Object.defineProperty(CardComponent.prototype, "name", {
        get: function () { return this.card.name; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "state", {
        get: function () { return this.card.state; },
        set: function (state) { this.card.state = state; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "rotate", {
        get: function () { return this.card.rotate; },
        set: function (rotate) { this.card.rotate = rotate; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "owner", {
        get: function () { return this.card.owner; },
        set: function (owner) { this.card.owner = owner; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "zindex", {
        get: function () { return this.card.zindex; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "size", {
        get: function () { return this.adjustMinBounds(this.card.size); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "isHand", {
        get: function () { return this.card.isHand; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "isFront", {
        get: function () { return this.card.isFront; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "isVisible", {
        get: function () { return this.card.isVisible; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "hasOwner", {
        get: function () { return this.card.hasOwner; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "ownerName", {
        get: function () { return this.card.ownerName; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "imageFile", {
        get: function () { return this.imageService.getSkeletonOr(this.card.imageFile); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "frontImage", {
        get: function () { return this.imageService.getSkeletonOr(this.card.frontImage); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "backImage", {
        get: function () { return this.imageService.getSkeletonOr(this.card.backImage); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "isIconHidden", {
        get: function () { return this.iconHiddenTimer != null; },
        enumerable: false,
        configurable: true
    });
    ;
    CardComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.get(event.data.identifier);
            if (!_this.card || !object)
                return;
            if ((_this.card === object)
                || (object instanceof _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__["ObjectNode"] && _this.card.contains(object))
                || (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_6__["PeerCursor"] && object.userId === _this.card.owner)) {
                _this.changeDetector.markForCheck();
            }
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('UPDATE_FILE_RESOURE', -1000, function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('DISCONNECT_PEER', function (event) {
            var cursor = _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_6__["PeerCursor"].findByPeerId(event.data.peerId);
            if (!cursor || _this.card.owner === cursor.userId)
                _this.changeDetector.markForCheck();
        });
        this.movableOption = {
            tabletopObject: this.card,
            transformCssOffset: 'translateZ(0.15px)',
            colideLayers: ['terrain']
        };
        this.rotableOption = {
            tabletopObject: this.card
        };
    };
    CardComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.input = new directive_input_handler__WEBPACK_IMPORTED_MODULE_9__["InputHandler"](_this.elementRef.nativeElement);
        });
        this.input.onStart = function (e) { return _this.ngZone.run(function () { return _this.onInputStart(e); }); };
    };
    CardComponent.prototype.ngOnDestroy = function () {
        this.input.destroy();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].unregister(this);
    };
    CardComponent.prototype.onCardDrop = function (e) {
        if (this.card === e.detail || (e.detail instanceof _udonarium_card__WEBPACK_IMPORTED_MODULE_1__["Card"] === false && e.detail instanceof _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_2__["CardStack"] === false)) {
            return;
        }
        e.stopPropagation();
        e.preventDefault();
        if (e.detail instanceof _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_2__["CardStack"]) {
            var cardStack = e.detail;
            var distance = Math.pow((cardStack.location.x - this.card.location.x), 2) + Math.pow((cardStack.location.y - this.card.location.y), 2) + Math.pow((cardStack.posZ - this.card.posZ), 2);
            if (distance < Math.pow(25, 2)) {
                cardStack.location.x = this.card.location.x;
                cardStack.location.y = this.card.location.y;
                cardStack.posZ = this.card.posZ;
                cardStack.putOnBottom(this.card);
            }
        }
    };
    CardComponent.prototype.startDoubleClickTimer = function (e) {
        var _this = this;
        if (!this.doubleClickTimer) {
            this.stopDoubleClickTimer();
            this.doubleClickTimer = setTimeout(function () { return _this.stopDoubleClickTimer(); }, e.touches ? 500 : 300);
            this.doubleClickPoint = this.input.pointer;
            return;
        }
        if (e.touches) {
            this.input.onEnd = this.onDoubleClick.bind(this);
        }
        else {
            this.onDoubleClick();
        }
    };
    CardComponent.prototype.stopDoubleClickTimer = function () {
        clearTimeout(this.doubleClickTimer);
        this.doubleClickTimer = null;
        this.input.onEnd = null;
    };
    CardComponent.prototype.onDoubleClick = function () {
        this.stopDoubleClickTimer();
        var distance = Math.pow((this.doubleClickPoint.x - this.input.pointer.x), 2) + Math.pow((this.doubleClickPoint.y - this.input.pointer.y), 2);
        if (distance < Math.pow(10, 2)) {
            console.log('onDoubleClick !!!!');
            if (this.hasOwner && !this.isHand)
                return;
            this.state = this.isVisible && !this.isHand ? _udonarium_card__WEBPACK_IMPORTED_MODULE_1__["CardState"].BACK : _udonarium_card__WEBPACK_IMPORTED_MODULE_1__["CardState"].FRONT;
            this.owner = '';
            _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["PresetSound"].cardDraw);
        }
    };
    CardComponent.prototype.onDragstart = function (e) {
        e.stopPropagation();
        e.preventDefault();
    };
    CardComponent.prototype.onInputStart = function (e) {
        this.startDoubleClickTimer(e);
        this.card.toTopmost();
        this.startIconHiddenTimer();
    };
    CardComponent.prototype.onContextMenu = function (e) {
        var _this = this;
        e.stopPropagation();
        e.preventDefault();
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu)
            return;
        var position = this.pointerDeviceService.pointers[0];
        this.contextMenuService.open(position, [
            (!this.isVisible || this.isHand
                ? {
                    name: '表にする',
                    action: function () {
                        _this.card.faceUp();
                        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["PresetSound"].cardDraw);
                    }
                }
                : {
                    name: '裏にする',
                    action: function () {
                        _this.card.faceDown();
                        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["PresetSound"].cardDraw);
                    }
                }),
            (this.isHand
                ? {
                    name: '裏にする',
                    action: function () {
                        _this.card.faceDown();
                        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["PresetSound"].cardDraw);
                    }
                }
                : {
                    name: '自分だけ見る',
                    action: function () {
                        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["PresetSound"].cardDraw);
                        _this.card.faceDown();
                        _this.owner = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["Network"].peerContext.userId;
                    }
                }),
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_10__["ContextMenuSeparator"],
            {
                name: '重なったカードで山札を作る',
                action: function () {
                    _this.createStack();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["PresetSound"].cardPut);
                }
            },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_10__["ContextMenuSeparator"],
            { name: 'カードを編集', action: function () { _this.showDetail(_this.card); } },
            {
                name: 'コピーを作る',
                action: function () {
                    var cloneObject = _this.card.clone();
                    cloneObject.location.x += _this.gridSize;
                    cloneObject.location.y += _this.gridSize;
                    cloneObject.toTopmost();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["PresetSound"].cardPut);
                }
            },
            {
                name: '削除する',
                action: function () {
                    _this.card.destroy();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["PresetSound"].sweep);
                }
            },
        ], this.isVisible ? this.name : 'カード');
    };
    CardComponent.prototype.onMove = function () {
        this.input.cancel();
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["PresetSound"].cardPick);
    };
    CardComponent.prototype.onMoved = function () {
        var _this = this;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["PresetSound"].cardPut);
        this.ngZone.run(function () { return _this.dispatchCardDropEvent(); });
    };
    CardComponent.prototype.createStack = function () {
        var e_1, _a;
        var _this = this;
        var cardStack = _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_2__["CardStack"].create('山札');
        cardStack.location.x = this.card.location.x;
        cardStack.location.y = this.card.location.y;
        cardStack.posZ = this.card.posZ;
        cardStack.location.name = this.card.location.name;
        cardStack.rotate = this.rotate;
        cardStack.zindex = this.card.zindex;
        var cards = this.tabletopService.cards.filter(function (card) {
            var distance = Math.pow((card.location.x - _this.card.location.x), 2) + Math.pow((card.location.y - _this.card.location.y), 2) + Math.pow((card.posZ - _this.card.posZ), 2);
            return distance < Math.pow(100, 2);
        });
        cards.sort(function (a, b) {
            if (a.zindex < b.zindex)
                return 1;
            if (a.zindex > b.zindex)
                return -1;
            return 0;
        });
        try {
            for (var cards_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(cards), cards_1_1 = cards_1.next(); !cards_1_1.done; cards_1_1 = cards_1.next()) {
                var card = cards_1_1.value;
                cardStack.putOnBottom(card);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (cards_1_1 && !cards_1_1.done && (_a = cards_1.return)) _a.call(cards_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
    };
    CardComponent.prototype.dispatchCardDropEvent = function () {
        console.log('dispatchCardDropEvent');
        var element = this.elementRef.nativeElement;
        var parent = element.parentElement;
        var children = parent.children;
        var event = new CustomEvent('carddrop', { detail: this.card, bubbles: true });
        for (var i = 0; i < children.length; i++) {
            children[i].dispatchEvent(event);
        }
    };
    CardComponent.prototype.startIconHiddenTimer = function () {
        var _this = this;
        clearTimeout(this.iconHiddenTimer);
        this.iconHiddenTimer = setTimeout(function () {
            _this.iconHiddenTimer = null;
            _this.changeDetector.markForCheck();
        }, 300);
        this.changeDetector.markForCheck();
    };
    CardComponent.prototype.adjustMinBounds = function (value, min) {
        if (min === void 0) { min = 0; }
        return value < min ? min : value;
    };
    CardComponent.prototype.showDetail = function (gameObject) {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });
        var coordinate = this.pointerDeviceService.pointers[0];
        var title = 'カード設定';
        if (gameObject.name.length)
            title += ' - ' + gameObject.name;
        var option = { title: title, left: coordinate.x - 300, top: coordinate.y - 300, width: 600, height: 600 };
        var component = this.panelService.open(component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_8__["GameCharacterSheetComponent"], option);
        component.tabletopObject = gameObject;
    };
    CardComponent.ɵfac = function CardComponent_Factory(t) { return new (t || CardComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_11__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_10__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_12__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_11__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_11__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵdirectiveInject"](service_tabletop_service__WEBPACK_IMPORTED_MODULE_13__["TabletopService"]), _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵdirectiveInject"](service_image_service__WEBPACK_IMPORTED_MODULE_14__["ImageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_15__["PointerDeviceService"])); };
    CardComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵdefineComponent"]({ type: CardComponent, selectors: [["card"]], hostBindings: function CardComponent_HostBindings(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵlistener"]("carddrop", function CardComponent_carddrop_HostBindingHandler($event) { return ctx.onCardDrop($event); })("dragstart", function CardComponent_dragstart_HostBindingHandler($event) { return ctx.onDragstart($event); })("contextmenu", function CardComponent_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });
        } }, inputs: { card: "card", is3D: "is3D" }, decls: 6, vars: 8, consts: [["appMovable", "", 1, "component", "is-3d", "is-pointer-events-none", "is-grab", 3, "movable.option", "movable.ondragstart", "movable.ondragend"], ["appRotable", "", 1, "component-content", "is-pointer-events-auto", 3, "rotable.option", "rotable.ondragstart", "rotable.ondragend"], ["class", "card-image", 3, "src", 4, "ngIf"], ["class", "name-tag is-nowrap has-length-limit is-black-background", 3, "ngStyle", 4, "ngIf"], ["class", "card-image thumbnail-transform is-translucent", 3, "src", 4, "ngIf"], [4, "ngIf"], [1, "card-image", 3, "src"], [1, "name-tag", "is-nowrap", "has-length-limit", "is-black-background", 3, "ngStyle"], [1, "card-image", "thumbnail-transform", "is-translucent", 3, "src"], [1, "rotate-grab", "of-left-top"], [1, "material-icons"], [1, "rotate-grab", "of-left-bottom"], [1, "rotate-grab", "of-right-bottom"], [1, "rotate-grab", "of-right-top"], [1, "border-bg", "is-pointer-events-none"]], template: function CardComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵlistener"]("movable.ondragstart", function CardComponent_Template_div_movable_ondragstart_0_listener() { return ctx.onMove(); })("movable.ondragend", function CardComponent_Template_div_movable_ondragend_0_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵlistener"]("rotable.ondragstart", function CardComponent_Template_div_rotable_ondragstart_1_listener() { return ctx.onMove(); })("rotable.ondragend", function CardComponent_Template_div_rotable_ondragend_1_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵtemplate"](2, CardComponent_img_2_Template, 2, 4, "img", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵtemplate"](3, CardComponent_div_3_Template, 3, 4, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵtemplate"](4, CardComponent_img_4_Template, 2, 4, "img", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵtemplate"](5, CardComponent_ng_container_5_Template, 14, 0, "ng-container", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵstyleProp"]("width", ctx.size * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵproperty"]("movable.option", ctx.movableOption);
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵproperty"]("rotable.option", ctx.rotableOption);
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵproperty"]("ngIf", ctx.imageFile);
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵproperty"]("ngIf", !ctx.isFront && ctx.hasOwner && 0 < ctx.ownerName.length);
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵproperty"]("ngIf", ctx.isHand && ctx.frontImage);
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵproperty"]("ngIf", !ctx.isIconHidden);
        } }, directives: [directive_movable_directive__WEBPACK_IMPORTED_MODULE_16__["MovableDirective"], directive_rotable_directive__WEBPACK_IMPORTED_MODULE_17__["RotableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_18__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_18__["NgStyle"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_19__["SafePipe"]], styles: [".is-grab[_ngcontent-%COMP%] {\n  cursor: grab;\n}\n\n.is-grabbing[_ngcontent-%COMP%] {\n  cursor: grabbing;\n}\n\n.is-3d[_ngcontent-%COMP%] {\n  transform-style: preserve-3d;\n}\n\n.is-transition[_ngcontent-%COMP%] {\n  transition: transform 132ms linear;\n}\n\n.is-pointer-events-none[_ngcontent-%COMP%] {\n  pointer-events: none;\n}\n\n.is-pointer-events-auto[_ngcontent-%COMP%] {\n  pointer-events: auto;\n}\n\n.component[_ngcontent-%COMP%] {\n  position: absolute;\n  height: auto;\n  width: auto;\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n  -webkit-user-select: none;\n  user-select: none;\n  -moz-user-drag: none;\n  -webkit-user-drag: none;\n  min-width: 25px;\n  min-height: 25px;\n}\n\n.component-content[_ngcontent-%COMP%] {\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n  height: 100%;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.card-image[_ngcontent-%COMP%] {\n  display: block;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  margin: auto;\n  height: auto;\n  width: 100%;\n}\n\n.thumbnail-transform[_ngcontent-%COMP%] {\n  position: absolute;\n  transform: scale(0.9);\n}\n\n.is-translucent[_ngcontent-%COMP%] {\n  filter: opacity(0.8);\n}\n\n.rotate-grab[_ngcontent-%COMP%] {\n  position: absolute;\n  width: 28px;\n  height: 28px;\n  box-sizing: border-box;\n  cursor: -moz-default;\n  cursor: -webkit-default;\n  cursor: default;\n  z-index: 1;\n  padding: 2px;\n  background-color: #CCCCCC;\n  border-radius: 100%;\n  color: #444;\n  font-size: 8px;\n}\n\n.rotate-grab[_ngcontent-%COMP%] {\n  display: none;\n}\n\n.component[_ngcontent-%COMP%]:hover   .rotate-grab[_ngcontent-%COMP%] {\n  display: block;\n  opacity: 0.5;\n}\n\n.component[_ngcontent-%COMP%]:active   .rotate-grab[_ngcontent-%COMP%] {\n  display: none;\n}\n\n.component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:hover, .component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:active {\n  display: block;\n  opacity: 1;\n}\n\n.of-left-top[_ngcontent-%COMP%] {\n  top: -10px;\n  left: -10px;\n  border-radius: 14px;\n}\n\n.of-left-bottom[_ngcontent-%COMP%] {\n  bottom: -10px;\n  left: -10px;\n  border-radius: 14px;\n}\n\n.of-right-bottom[_ngcontent-%COMP%] {\n  bottom: -10px;\n  right: -10px;\n  border-radius: 14px;\n}\n\n.of-right-top[_ngcontent-%COMP%] {\n  top: -10px;\n  right: -10px;\n  border-radius: 14px;\n}\n\n.border-bg[_ngcontent-%COMP%] {\n  position: absolute;\n  box-sizing: border-box;\n  border-radius: 8px;\n  background-color: rgba(204, 204, 204, 0.5);\n  top: -2px;\n  left: -2px;\n  right: -2px;\n  bottom: -2px;\n  z-index: -1;\n}\n\n.border-bg[_ngcontent-%COMP%] {\n  display: none;\n}\n\n.component[_ngcontent-%COMP%]:hover   .border-bg[_ngcontent-%COMP%] {\n  display: block;\n}\n\n.component[_ngcontent-%COMP%]:active   .border-bg[_ngcontent-%COMP%] {\n  display: none;\n}\n\n.name-tag[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  font-size: 15px;\n  padding: 3px 9px;\n  border-radius: 24px;\n  position: absolute;\n  top: 0;\n}\n\n.has-length-limit[_ngcontent-%COMP%] {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 18em;\n}\n\n.is-nowrap[_ngcontent-%COMP%] {\n  white-space: nowrap;\n}\n\n.is-black-background[_ngcontent-%COMP%] {\n  color: #CCC;\n  background-color: rgba(30, 30, 30, 0.8);\n}\n\n.material-icons[_ngcontent-%COMP%] {\n  display: none;\n}\n\n.component[_ngcontent-%COMP%]:hover   .material-icons[_ngcontent-%COMP%], .component[_ngcontent-%COMP%]:active   .material-icons[_ngcontent-%COMP%] {\n  display: inline;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcmQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUdFLFlBQVk7QUFDZDs7QUFFQTtFQUdFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUVFLDRCQUE0QjtBQUM5Qjs7QUFFQTtFQUVFLGtDQUFrQztBQUNwQzs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1osV0FBVztFQUNYLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFFM0IseUJBQXlCO0VBQ3pCLGlCQUFpQjtFQUNqQixvQkFBb0I7RUFDcEIsdUJBQXVCO0VBQ3ZCLGVBQWU7RUFDZixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxtQ0FBMkI7VUFBM0IsMkJBQTJCO0VBQzNCLFlBQVk7RUFDWixXQUFXO0VBQ1gsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsY0FBYztFQUNkLE1BQU07RUFDTixPQUFPO0VBQ1AsU0FBUztFQUNULFFBQVE7RUFDUixZQUFZO0VBQ1osWUFBWTtFQUNaLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsb0JBQW9CO0VBQ3BCLHVCQUF1QjtFQUN2QixlQUFlO0VBQ2YsVUFBVTtFQUNWLFlBQVk7RUFDWix5QkFBeUI7RUFDekIsbUJBQW1CO0VBQ25CLFdBQVc7RUFDWCxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsY0FBYztFQUNkLFlBQVk7QUFDZDs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxVQUFVO0FBQ1o7O0FBRUE7RUFDRSxVQUFVO0VBQ1YsV0FBVztFQUNYLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixXQUFXO0VBQ1gsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLFlBQVk7RUFDWixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxVQUFVO0VBQ1YsWUFBWTtFQUNaLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLDBDQUEwQztFQUMxQyxTQUFTO0VBQ1QsVUFBVTtFQUNWLFdBQVc7RUFDWCxZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQixrQkFBa0I7RUFDbEIsTUFBTTtBQUNSOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCx1Q0FBdUM7QUFDekM7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBQ0E7RUFDRSxlQUFlO0FBQ2pCIiwiZmlsZSI6ImNhcmQuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pcy1ncmFiIHtcbiAgY3Vyc29yOiAtbW96LWdyYWI7XG4gIGN1cnNvcjogLXdlYmtpdC1ncmFiO1xuICBjdXJzb3I6IGdyYWI7XG59XG5cbi5pcy1ncmFiYmluZyB7XG4gIGN1cnNvcjogLW1vei1ncmFiYmluZztcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWJiaW5nO1xuICBjdXJzb3I6IGdyYWJiaW5nO1xufVxuXG4uaXMtM2Qge1xuICAtd2Via2l0LXRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XG4gIHRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XG59XG5cbi5pcy10cmFuc2l0aW9uIHtcbiAgLXdlYmtpdC10cmFuc2l0aW9uOiAtd2Via2l0LXRyYW5zZm9ybSAxMzJtcyBsaW5lYXI7XG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAxMzJtcyBsaW5lYXI7XG59XG5cbi5pcy1wb2ludGVyLWV2ZW50cy1ub25lIHtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG5cbi5pcy1wb2ludGVyLWV2ZW50cy1hdXRvIHtcbiAgcG9pbnRlci1ldmVudHM6IGF1dG87XG59XG5cbi5jb21wb25lbnQge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGhlaWdodDogYXV0bztcbiAgd2lkdGg6IGF1dG87XG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIC1tb3otdXNlci1kcmFnOiBub25lO1xuICAtd2Via2l0LXVzZXItZHJhZzogbm9uZTtcbiAgbWluLXdpZHRoOiAyNXB4O1xuICBtaW4taGVpZ2h0OiAyNXB4O1xufVxuXG4uY29tcG9uZW50LWNvbnRlbnQge1xuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XG4gIGhlaWdodDogMTAwJTtcbiAgd2lkdGg6IDEwMCU7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG59XG5cbi5jYXJkLWltYWdlIHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgYm90dG9tOiAwO1xuICByaWdodDogMDtcbiAgbWFyZ2luOiBhdXRvO1xuICBoZWlnaHQ6IGF1dG87XG4gIHdpZHRoOiAxMDAlO1xufVxuXG4udGh1bWJuYWlsLXRyYW5zZm9ybSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdHJhbnNmb3JtOiBzY2FsZSgwLjkpO1xufVxuXG4uaXMtdHJhbnNsdWNlbnQge1xuICBmaWx0ZXI6IG9wYWNpdHkoMC44KTtcbn1cblxuLnJvdGF0ZS1ncmFiIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB3aWR0aDogMjhweDtcbiAgaGVpZ2h0OiAyOHB4O1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBjdXJzb3I6IC1tb3otZGVmYXVsdDtcbiAgY3Vyc29yOiAtd2Via2l0LWRlZmF1bHQ7XG4gIGN1cnNvcjogZGVmYXVsdDtcbiAgei1pbmRleDogMTtcbiAgcGFkZGluZzogMnB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDQ0NDO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBjb2xvcjogIzQ0NDtcbiAgZm9udC1zaXplOiA4cHg7XG59XG5cbi5yb3RhdGUtZ3JhYiB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbi5jb21wb25lbnQ6aG92ZXIgLnJvdGF0ZS1ncmFiIHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIG9wYWNpdHk6IDAuNTtcbn1cblxuLmNvbXBvbmVudDphY3RpdmUgLnJvdGF0ZS1ncmFiIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cblxuLmNvbXBvbmVudCAucm90YXRlLWdyYWI6aG92ZXIsIC5jb21wb25lbnQgLnJvdGF0ZS1ncmFiOmFjdGl2ZSB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBvcGFjaXR5OiAxO1xufVxuXG4ub2YtbGVmdC10b3Age1xuICB0b3A6IC0xMHB4O1xuICBsZWZ0OiAtMTBweDtcbiAgYm9yZGVyLXJhZGl1czogMTRweDtcbn1cblxuLm9mLWxlZnQtYm90dG9tIHtcbiAgYm90dG9tOiAtMTBweDtcbiAgbGVmdDogLTEwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDE0cHg7XG59XG5cbi5vZi1yaWdodC1ib3R0b20ge1xuICBib3R0b206IC0xMHB4O1xuICByaWdodDogLTEwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDE0cHg7XG59XG5cbi5vZi1yaWdodC10b3Age1xuICB0b3A6IC0xMHB4O1xuICByaWdodDogLTEwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDE0cHg7XG59XG5cbi5ib3JkZXItYmcge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyMDQsIDIwNCwgMjA0LCAwLjUpO1xuICB0b3A6IC0ycHg7XG4gIGxlZnQ6IC0ycHg7XG4gIHJpZ2h0OiAtMnB4O1xuICBib3R0b206IC0ycHg7XG4gIHotaW5kZXg6IC0xO1xufVxuXG4uYm9yZGVyLWJnIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cblxuLmNvbXBvbmVudDpob3ZlciAuYm9yZGVyLWJnIHtcbiAgZGlzcGxheTogYmxvY2s7XG59XG5cbi5jb21wb25lbnQ6YWN0aXZlIC5ib3JkZXItYmcge1xuICBkaXNwbGF5OiBub25lO1xufVxuXG4ubmFtZS10YWcge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBmb250LXNpemU6IDE1cHg7XG4gIHBhZGRpbmc6IDNweCA5cHg7XG4gIGJvcmRlci1yYWRpdXM6IDI0cHg7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xufVxuXG4uaGFzLWxlbmd0aC1saW1pdCB7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICBtYXgtd2lkdGg6IDE4ZW07XG59XG5cbi5pcy1ub3dyYXAge1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xufVxuXG4uaXMtYmxhY2stYmFja2dyb3VuZCB7XG4gIGNvbG9yOiAjQ0NDO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDMwLCAzMCwgMzAsIDAuOCk7XG59XG5cbi5tYXRlcmlhbC1pY29ucyB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG4uY29tcG9uZW50OmhvdmVyIC5tYXRlcmlhbC1pY29ucywgLmNvbXBvbmVudDphY3RpdmUgLm1hdGVyaWFsLWljb25zIHtcbiAgZGlzcGxheTogaW5saW5lO1xufVxuIl19 */"], changeDetection: 0 });
    return CardComponent;
}());



/***/ }),

/***/ "4v+P":
/*!********************************************************!*\
  !*** ./src/app/component/terrain/terrain.component.ts ***!
  \********************************************************/
/*! exports provided: TerrainComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TerrainComponent", function() { return TerrainComponent; });
/* harmony import */ var _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var _udonarium_terrain__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/terrain */ "gKYc");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var directive_input_handler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! directive/input-handler */ "96Ug");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_image_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! service/image.service */ "Hvpu");
/* harmony import */ var service_tabletop_action_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/tabletop-action.service */ "AFBa");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var service_coordinate_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! service/coordinate.service */ "TzEH");
/* harmony import */ var directive_movable_directive__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! directive/movable.directive */ "+Kyd");
/* harmony import */ var directive_rotable_directive__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! directive/rotable.directive */ "3jYK");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");



















var _c0 = function (a0) { return { "blinking-animation": a0 }; };
var _c1 = function (a0) { return { "transform": a0 }; };
function TerrainComponent_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](1, "div", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind2"](2, 4, "url(" + ctx_r0.floorImage.url + ")", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction1"](7, _c0, !ctx_r0.isLocked))("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction1"](9, _c1, "translateZ(" + ctx_r0.height * ctx_r0.gridSize + "px)"));
} }
function TerrainComponent_ng_container_3_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](1, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind2"](1, 7, "url(" + ctx_r3.wallImage.url + ")", "style"))("width", ctx_r3.width * ctx_r3.gridSize, "px")("height", ctx_r3.height * ctx_r3.gridSize, "px");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction1"](10, _c0, !ctx_r3.isLocked));
} }
function TerrainComponent_ng_container_3_div_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](1, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind2"](1, 7, "url(" + ctx_r4.wallImage.url + ")", "style"))("width", ctx_r4.width * ctx_r4.gridSize, "px")("height", ctx_r4.height * ctx_r4.gridSize, "px");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction1"](10, _c0, !ctx_r4.isLocked));
} }
function TerrainComponent_ng_container_3_div_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](1, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind2"](1, 7, "url(" + ctx_r5.wallImage.url + ")", "style"))("width", ctx_r5.depth * ctx_r5.gridSize, "px")("height", ctx_r5.height * ctx_r5.gridSize, "px");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction1"](10, _c0, !ctx_r5.isLocked));
} }
function TerrainComponent_ng_container_3_div_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](1, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind2"](1, 7, "url(" + ctx_r6.wallImage.url + ")", "style"))("width", ctx_r6.depth * ctx_r6.gridSize, "px")("height", ctx_r6.height * ctx_r6.gridSize, "px");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction1"](10, _c0, !ctx_r6.isLocked));
} }
function TerrainComponent_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](1, TerrainComponent_ng_container_3_div_1_Template, 2, 12, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](2, TerrainComponent_ng_container_3_div_2_Template, 2, 12, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](3, TerrainComponent_ng_container_3_div_3_Template, 2, 12, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](4, TerrainComponent_ng_container_3_div_4_Template, 2, 12, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx_r1.isVisibleWallTopBottom);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx_r1.isVisibleWallTopBottom);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx_r1.isVisibleWallLeftRight);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx_r1.isVisibleWallLeftRight);
} }
function TerrainComponent_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](1, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](2, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](3, "i", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](4, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](5, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](6, "i", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](7, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](8, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](9, "i", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](10, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](11, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](12, "i", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](13, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementContainerEnd"]();
} }
var _c2 = function (a0) { return { "is-grab": a0 }; };
var TerrainComponent = /** @class */ (function () {
    function TerrainComponent(ngZone, imageService, tabletopActionService, contextMenuService, elementRef, panelService, changeDetector, pointerDeviceService, coordinateService) {
        this.ngZone = ngZone;
        this.imageService = imageService;
        this.tabletopActionService = tabletopActionService;
        this.contextMenuService = contextMenuService;
        this.elementRef = elementRef;
        this.panelService = panelService;
        this.changeDetector = changeDetector;
        this.pointerDeviceService = pointerDeviceService;
        this.coordinateService = coordinateService;
        this.terrain = null;
        this.is3D = false;
        this.gridSize = 50;
        this.movableOption = {};
        this.rotableOption = {};
        this.input = null;
    }
    Object.defineProperty(TerrainComponent.prototype, "name", {
        get: function () { return this.terrain.name; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "mode", {
        get: function () { return this.terrain.mode; },
        set: function (mode) { this.terrain.mode = mode; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "isLocked", {
        get: function () { return this.terrain.isLocked; },
        set: function (isLocked) { this.terrain.isLocked = isLocked; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "hasWall", {
        get: function () { return this.terrain.hasWall; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "hasFloor", {
        get: function () { return this.terrain.hasFloor; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "wallImage", {
        get: function () { return this.imageService.getSkeletonOr(this.terrain.wallImage); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "floorImage", {
        get: function () { return this.imageService.getSkeletonOr(this.terrain.floorImage); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "height", {
        get: function () { return this.adjustMinBounds(this.terrain.height); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "width", {
        get: function () { return this.adjustMinBounds(this.terrain.width); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "depth", {
        get: function () { return this.adjustMinBounds(this.terrain.depth); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "isVisibleFloor", {
        get: function () { return 0 < this.width * this.depth; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "isVisibleWallTopBottom", {
        get: function () { return 0 < this.width * this.height; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "isVisibleWallLeftRight", {
        get: function () { return 0 < this.depth * this.height; },
        enumerable: false,
        configurable: true
    });
    TerrainComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.get(event.data.identifier);
            if (!_this.terrain || !object)
                return;
            if (_this.terrain === object || (object instanceof _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_0__["ObjectNode"] && _this.terrain.contains(object))) {
                _this.changeDetector.markForCheck();
            }
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('UPDATE_FILE_RESOURE', -1000, function (event) {
            _this.changeDetector.markForCheck();
        });
        this.movableOption = {
            tabletopObject: this.terrain,
            colideLayers: ['terrain']
        };
        this.rotableOption = {
            tabletopObject: this.terrain
        };
    };
    TerrainComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.input = new directive_input_handler__WEBPACK_IMPORTED_MODULE_6__["InputHandler"](_this.elementRef.nativeElement);
        });
        this.input.onStart = this.onInputStart.bind(this);
    };
    TerrainComponent.prototype.ngOnDestroy = function () {
        this.input.destroy();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].unregister(this);
    };
    TerrainComponent.prototype.onDragstart = function (e) {
        e.stopPropagation();
        e.preventDefault();
    };
    TerrainComponent.prototype.onInputStart = function (e) {
        this.input.cancel();
        // TODO:もっと良い方法考える
        if (this.isLocked) {
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].trigger('DRAG_LOCKED_OBJECT', {});
        }
    };
    TerrainComponent.prototype.onContextMenu = function (e) {
        var _this = this;
        e.stopPropagation();
        e.preventDefault();
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu)
            return;
        var menuPosition = this.pointerDeviceService.pointers[0];
        var objectPosition = this.coordinateService.calcTabletopLocalCoordinate();
        this.contextMenuService.open(menuPosition, [
            (this.isLocked
                ? {
                    name: '固定解除',
                    action: function () {
                        _this.isLocked = false;
                        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].unlock);
                    }
                } : {
                name: '固定する',
                action: function () {
                    _this.isLocked = true;
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].lock);
                }
            }),
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_7__["ContextMenuSeparator"],
            (this.hasWall
                ? {
                    name: '壁を非表示',
                    action: function () {
                        _this.mode = _udonarium_terrain__WEBPACK_IMPORTED_MODULE_4__["TerrainViewState"].FLOOR;
                        if (_this.depth * _this.width === 0) {
                            _this.terrain.width = _this.width <= 0 ? 1 : _this.width;
                            _this.terrain.depth = _this.depth <= 0 ? 1 : _this.depth;
                        }
                    }
                } : {
                name: '壁を表示',
                action: function () {
                    _this.mode = _udonarium_terrain__WEBPACK_IMPORTED_MODULE_4__["TerrainViewState"].ALL;
                }
            }),
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_7__["ContextMenuSeparator"],
            { name: '地形設定を編集', action: function () { _this.showDetail(_this.terrain); } },
            {
                name: 'コピーを作る',
                action: function () {
                    var cloneObject = _this.terrain.clone();
                    cloneObject.location.x += _this.gridSize;
                    cloneObject.location.y += _this.gridSize;
                    cloneObject.isLocked = false;
                    if (_this.terrain.parent)
                        _this.terrain.parent.appendChild(cloneObject);
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].blockPut);
                }
            },
            {
                name: '削除する',
                action: function () {
                    _this.terrain.destroy();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].sweep);
                }
            },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_7__["ContextMenuSeparator"],
            { name: 'オブジェクト作成', action: null, subActions: this.tabletopActionService.makeDefaultContextMenuActions(objectPosition) }
        ], this.name);
    };
    TerrainComponent.prototype.onMove = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].blockPick);
    };
    TerrainComponent.prototype.onMoved = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].blockPut);
    };
    TerrainComponent.prototype.adjustMinBounds = function (value, min) {
        if (min === void 0) { min = 0; }
        return value < min ? min : value;
    };
    TerrainComponent.prototype.showDetail = function (gameObject) {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });
        var coordinate = this.pointerDeviceService.pointers[0];
        var title = '地形設定';
        if (gameObject.name.length)
            title += ' - ' + gameObject.name;
        var option = { title: title, left: coordinate.x - 250, top: coordinate.y - 150, width: 500, height: 300 };
        var component = this.panelService.open(component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_5__["GameCharacterSheetComponent"], option);
        component.tabletopObject = gameObject;
    };
    TerrainComponent.ɵfac = function TerrainComponent_Factory(t) { return new (t || TerrainComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_8__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](service_image_service__WEBPACK_IMPORTED_MODULE_9__["ImageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](service_tabletop_action_service__WEBPACK_IMPORTED_MODULE_10__["TabletopActionService"]), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_7__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_8__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_11__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_8__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_12__["PointerDeviceService"]), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](service_coordinate_service__WEBPACK_IMPORTED_MODULE_13__["CoordinateService"])); };
    TerrainComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdefineComponent"]({ type: TerrainComponent, selectors: [["terrain"]], hostBindings: function TerrainComponent_HostBindings(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("dragstart", function TerrainComponent_dragstart_HostBindingHandler($event) { return ctx.onDragstart($event); })("contextmenu", function TerrainComponent_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });
        } }, inputs: { terrain: "terrain", is3D: "is3D" }, decls: 5, vars: 14, consts: [["appMovable", "", 1, "component", "is-3d", "is-pointer-events-none", 3, "movable.option", "movable.disable", "movable.ondragstart", "movable.ondragend"], ["appRotable", "", 1, "component-content", "is-3d", "is-pointer-events-auto", 3, "ngClass", "rotable.option", "rotable.disable", "rotable.ondragstart", "rotable.ondragend"], [4, "ngIf"], [1, "texture", 3, "ngClass", "ngStyle"], ["class", "texture of-wall-top", 3, "ngClass", "background-image", "width", "height", 4, "ngIf"], ["class", "texture of-wall-bottom", 3, "ngClass", "background-image", "width", "height", 4, "ngIf"], ["class", "texture of-wall-left", 3, "ngClass", "background-image", "width", "height", 4, "ngIf"], ["class", "texture of-wall-right", 3, "ngClass", "background-image", "width", "height", 4, "ngIf"], [1, "texture", "of-wall-top", 3, "ngClass"], [1, "texture", "of-wall-bottom", 3, "ngClass"], [1, "texture", "of-wall-left", 3, "ngClass"], [1, "texture", "of-wall-right", 3, "ngClass"], [1, "pedestal-grab", "rotate-grab"], [1, "rotate-grab", "of-left-top", "rotate-grab-icon"], [1, "material-icons"], [1, "rotate-grab", "of-left-bottom", "rotate-grab-icon"], [1, "rotate-grab", "of-right-bottom", "rotate-grab-icon"], [1, "rotate-grab", "of-right-top", "rotate-grab-icon"]], template: function TerrainComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("movable.ondragstart", function TerrainComponent_Template_div_movable_ondragstart_0_listener() { return ctx.onMove(); })("movable.ondragend", function TerrainComponent_Template_div_movable_ondragend_0_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("rotable.ondragstart", function TerrainComponent_Template_div_rotable_ondragstart_1_listener() { return ctx.onMove(); })("rotable.ondragend", function TerrainComponent_Template_div_rotable_ondragend_1_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](2, TerrainComponent_ng_container_2_Template, 3, 11, "ng-container", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](3, TerrainComponent_ng_container_3_Template, 5, 4, "ng-container", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](4, TerrainComponent_ng_container_4_Template, 14, 0, "ng-container", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵstyleProp"]("width", ctx.width * ctx.gridSize, "px")("height", ctx.depth * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("movable.option", ctx.movableOption)("movable.disable", ctx.isLocked);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction1"](12, _c2, !ctx.isLocked))("rotable.option", ctx.rotableOption)("rotable.disable", ctx.isLocked);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.hasFloor && ctx.isVisibleFloor && 0 < (ctx.floorImage == null ? null : ctx.floorImage.url.length));
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.hasWall && 0 < (ctx.wallImage == null ? null : ctx.wallImage.url.length));
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", !ctx.isLocked);
        } }, directives: [directive_movable_directive__WEBPACK_IMPORTED_MODULE_14__["MovableDirective"], directive_rotable_directive__WEBPACK_IMPORTED_MODULE_15__["RotableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_16__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_16__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_16__["NgStyle"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_17__["SafePipe"]], styles: [".is-grab[_ngcontent-%COMP%] {\n  cursor: grab;\n}\n\n.is-grabbing[_ngcontent-%COMP%] {\n  cursor: grabbing;\n}\n\n.is-3d[_ngcontent-%COMP%] {\n  transform-style: preserve-3d;\n}\n\n.is-transition[_ngcontent-%COMP%] {\n  transition: transform 132ms linear;\n}\n\n.is-pointer-events-none[_ngcontent-%COMP%] {\n  pointer-events: none;\n}\n\n.is-pointer-events-auto[_ngcontent-%COMP%] {\n  pointer-events: auto;\n}\n\n.component[_ngcontent-%COMP%] {\n  position: absolute;\n  height: 50px;\n  width: 50px;\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n  -webkit-user-select: none;\n  user-select: none;\n  \n  -moz-user-drag: none;\n  -webkit-user-drag: none;\n}\n\n.component-content[_ngcontent-%COMP%] {\n  height: 100%;\n  width: 100%;\n}\n\n.texture[_ngcontent-%COMP%] {\n  position: absolute;\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n  background-repeat: no-repeat;\n  background-size: 100% 100%;\n  height: 100%;\n  width: 100%;\n}\n\n.of-wall-top[_ngcontent-%COMP%] {\n  top: 0px;\n  left: 0px;\n\n  transform-origin: 50% 100%;\n  transform: translateY(-100%) rotateX(90deg) rotateZ(180deg) scaleX(-1.0);\n  filter: brightness(0.3);\n}\n\n.of-wall-bottom[_ngcontent-%COMP%] {\n  bottom: 0px;\n  left: 0px;\n\n  transform-origin: 50% 100%;\n  transform: rotateX(-90deg);\n  \n}\n\n.of-wall-left[_ngcontent-%COMP%] {\n  top: 0px;\n  left: 0px;\n\n  transform-origin: 0% 0%;\n  transform: rotateZ(90deg) rotateX(-90deg) scaleX(-1.0) translateX(-100%) translateY(-100%);\n  filter: brightness(0.5);\n}\n\n.of-wall-right[_ngcontent-%COMP%] {\n  top: 0px;\n  right: 0px;\n\n  transform-origin: 100% 0%;\n  transform: rotateZ(-90deg) rotateX(-90deg) translateY(-100%);\n  filter: brightness(0.8);\n}\n\n.pedestal-grab[_ngcontent-%COMP%] {\n  z-index: -1;\n  position: absolute;\n  top: -14px;\n  left: -14px;\n  right: -14px;\n  bottom: -14px;\n  cursor: default;\n\n  box-sizing: border-box;\n  border-top: solid 7px #CCC;\n  border-left: solid 7px #CCC;\n  border-right: solid 7px #CCC;\n  border-bottom: solid 7px #CCC;\n  border-radius: 14px;\n}\n\n.rotate-grab[_ngcontent-%COMP%] {\n  opacity: 0;\n  z-index: -1;\n}\n\n.rotate-grab-icon[_ngcontent-%COMP%] {\n  position: absolute;\n  width: 28px;\n  height: 28px;\n  box-sizing: border-box;\n  border: solid 2px #CCCCCC;\n  cursor: -moz-default;\n  cursor: -webkit-default;\n  cursor: default;\n  z-index: 1;\n  padding: 0;\n  background-color: #CCCCCC;\n  border-radius: 100%;\n  color: #444;\n  font-size: 8px;\n\n  transform-style: preserve-3d;\n  transform: translateZ(0.1px);\n}\n\n.component[_ngcontent-%COMP%]:hover   .rotate-grab[_ngcontent-%COMP%], .component[_ngcontent-%COMP%]:active   .rotate-grab[_ngcontent-%COMP%] {\n  opacity: 1;\n}\n\n.of-left-top[_ngcontent-%COMP%] {\n  top: -14px;\n  left: -14px;\n  border-radius: 14px 7px 14px 7px;\n}\n\n.of-left-bottom[_ngcontent-%COMP%] {\n  bottom: -14px;\n  left: -14px;\n  border-radius: 7px 14px 7px 14px;\n}\n\n.of-right-bottom[_ngcontent-%COMP%] {\n  bottom: -14px;\n  right: -14px;\n  border-radius: 14px 7px 14px 7px;\n}\n\n.of-right-top[_ngcontent-%COMP%] {\n  top: -14px;\n  right: -14px;\n  border-radius: 7px 14px 7px 14px;\n}\n\n.blinking-animation[_ngcontent-%COMP%] {\n animation: blink 1.0s linear infinite alternate;\n}\n\n@keyframes blink {\n  0% { opacity:0.9; }\n  100% { opacity:0.5; }\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlcnJhaW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUdFLFlBQVk7QUFDZDs7QUFFQTtFQUdFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUVFLDRCQUE0QjtBQUM5Qjs7QUFFQTtFQUVFLGtDQUFrQztBQUNwQzs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1osV0FBVztFQUNYLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFFM0IseUJBQXlCO0VBQ3pCLGlCQUFpQjs7RUFFakIsb0JBQW9CO0VBQ3BCLHVCQUF1QjtBQUN6Qjs7QUFFQTtFQUNFLFlBQVk7RUFDWixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsbUNBQTJCO1VBQTNCLDJCQUEyQjtFQUMzQiw0QkFBNEI7RUFDNUIsMEJBQTBCO0VBQzFCLFlBQVk7RUFDWixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxRQUFRO0VBQ1IsU0FBUzs7RUFFVCwwQkFBMEI7RUFDMUIsd0VBQXdFO0VBQ3hFLHVCQUF1QjtBQUN6Qjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxTQUFTOztFQUVULDBCQUEwQjtFQUMxQiwwQkFBMEI7RUFDMUIsMkJBQTJCO0FBQzdCOztBQUVBO0VBQ0UsUUFBUTtFQUNSLFNBQVM7O0VBRVQsdUJBQXVCO0VBQ3ZCLDBGQUEwRjtFQUMxRix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxRQUFRO0VBQ1IsVUFBVTs7RUFFVix5QkFBeUI7RUFDekIsNERBQTREO0VBQzVELHVCQUF1QjtBQUN6Qjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIsVUFBVTtFQUNWLFdBQVc7RUFDWCxZQUFZO0VBQ1osYUFBYTtFQUNiLGVBQWU7O0VBRWYsc0JBQXNCO0VBQ3RCLDBCQUEwQjtFQUMxQiwyQkFBMkI7RUFDM0IsNEJBQTRCO0VBQzVCLDZCQUE2QjtFQUM3QixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxVQUFVO0VBQ1YsV0FBVztBQUNiOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLHlCQUF5QjtFQUN6QixvQkFBb0I7RUFDcEIsdUJBQXVCO0VBQ3ZCLGVBQWU7RUFDZixVQUFVO0VBQ1YsVUFBVTtFQUNWLHlCQUF5QjtFQUN6QixtQkFBbUI7RUFDbkIsV0FBVztFQUNYLGNBQWM7O0VBRWQsNEJBQTRCO0VBQzVCLDRCQUE0QjtBQUM5Qjs7QUFFQTtFQUNFLFVBQVU7QUFDWjs7QUFFQTtFQUNFLFVBQVU7RUFDVixXQUFXO0VBQ1gsZ0NBQWdDO0FBQ2xDOztBQUVBO0VBQ0UsYUFBYTtFQUNiLFdBQVc7RUFDWCxnQ0FBZ0M7QUFDbEM7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsWUFBWTtFQUNaLGdDQUFnQztBQUNsQzs7QUFFQTtFQUNFLFVBQVU7RUFDVixZQUFZO0VBQ1osZ0NBQWdDO0FBQ2xDOztBQUVBO0NBR0csK0NBQStDO0FBQ2xEOztBQVlBO0VBQ0UsS0FBSyxXQUFXLEVBQUU7RUFDbEIsT0FBTyxXQUFXLEVBQUU7QUFDdEIiLCJmaWxlIjoidGVycmFpbi5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmlzLWdyYWIge1xuICBjdXJzb3I6IC1tb3otZ3JhYjtcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWI7XG4gIGN1cnNvcjogZ3JhYjtcbn1cblxuLmlzLWdyYWJiaW5nIHtcbiAgY3Vyc29yOiAtbW96LWdyYWJiaW5nO1xuICBjdXJzb3I6IC13ZWJraXQtZ3JhYmJpbmc7XG4gIGN1cnNvcjogZ3JhYmJpbmc7XG59XG5cbi5pcy0zZCB7XG4gIC13ZWJraXQtdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcbiAgdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcbn1cblxuLmlzLXRyYW5zaXRpb24ge1xuICAtd2Via2l0LXRyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcbn1cblxuLmlzLXBvaW50ZXItZXZlbnRzLW5vbmUge1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbn1cblxuLmlzLXBvaW50ZXItZXZlbnRzLWF1dG8ge1xuICBwb2ludGVyLWV2ZW50czogYXV0bztcbn1cblxuLmNvbXBvbmVudCB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgaGVpZ2h0OiA1MHB4O1xuICB3aWR0aDogNTBweDtcbiAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuO1xuICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgXG4gIC1tb3otdXNlci1kcmFnOiBub25lO1xuICAtd2Via2l0LXVzZXItZHJhZzogbm9uZTtcbn1cblxuLmNvbXBvbmVudC1jb250ZW50IHtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbn1cblxuLnRleHR1cmUge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgYmFja2dyb3VuZC1zaXplOiAxMDAlIDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5vZi13YWxsLXRvcCB7XG4gIHRvcDogMHB4O1xuICBsZWZ0OiAwcHg7XG5cbiAgdHJhbnNmb3JtLW9yaWdpbjogNTAlIDEwMCU7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTAwJSkgcm90YXRlWCg5MGRlZykgcm90YXRlWigxODBkZWcpIHNjYWxlWCgtMS4wKTtcbiAgZmlsdGVyOiBicmlnaHRuZXNzKDAuMyk7XG59XG5cbi5vZi13YWxsLWJvdHRvbSB7XG4gIGJvdHRvbTogMHB4O1xuICBsZWZ0OiAwcHg7XG5cbiAgdHJhbnNmb3JtLW9yaWdpbjogNTAlIDEwMCU7XG4gIHRyYW5zZm9ybTogcm90YXRlWCgtOTBkZWcpO1xuICAvKmZpbHRlcjogYnJpZ2h0bmVzcygxLjApOyovXG59XG5cbi5vZi13YWxsLWxlZnQge1xuICB0b3A6IDBweDtcbiAgbGVmdDogMHB4O1xuXG4gIHRyYW5zZm9ybS1vcmlnaW46IDAlIDAlO1xuICB0cmFuc2Zvcm06IHJvdGF0ZVooOTBkZWcpIHJvdGF0ZVgoLTkwZGVnKSBzY2FsZVgoLTEuMCkgdHJhbnNsYXRlWCgtMTAwJSkgdHJhbnNsYXRlWSgtMTAwJSk7XG4gIGZpbHRlcjogYnJpZ2h0bmVzcygwLjUpO1xufVxuXG4ub2Ytd2FsbC1yaWdodCB7XG4gIHRvcDogMHB4O1xuICByaWdodDogMHB4O1xuXG4gIHRyYW5zZm9ybS1vcmlnaW46IDEwMCUgMCU7XG4gIHRyYW5zZm9ybTogcm90YXRlWigtOTBkZWcpIHJvdGF0ZVgoLTkwZGVnKSB0cmFuc2xhdGVZKC0xMDAlKTtcbiAgZmlsdGVyOiBicmlnaHRuZXNzKDAuOCk7XG59XG5cbi5wZWRlc3RhbC1ncmFiIHtcbiAgei1pbmRleDogLTE7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAtMTRweDtcbiAgbGVmdDogLTE0cHg7XG4gIHJpZ2h0OiAtMTRweDtcbiAgYm90dG9tOiAtMTRweDtcbiAgY3Vyc29yOiBkZWZhdWx0O1xuXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlci10b3A6IHNvbGlkIDdweCAjQ0NDO1xuICBib3JkZXItbGVmdDogc29saWQgN3B4ICNDQ0M7XG4gIGJvcmRlci1yaWdodDogc29saWQgN3B4ICNDQ0M7XG4gIGJvcmRlci1ib3R0b206IHNvbGlkIDdweCAjQ0NDO1xuICBib3JkZXItcmFkaXVzOiAxNHB4O1xufVxuXG4ucm90YXRlLWdyYWIge1xuICBvcGFjaXR5OiAwO1xuICB6LWluZGV4OiAtMTtcbn1cblxuLnJvdGF0ZS1ncmFiLWljb24ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiAyOHB4O1xuICBoZWlnaHQ6IDI4cHg7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlcjogc29saWQgMnB4ICNDQ0NDQ0M7XG4gIGN1cnNvcjogLW1vei1kZWZhdWx0O1xuICBjdXJzb3I6IC13ZWJraXQtZGVmYXVsdDtcbiAgY3Vyc29yOiBkZWZhdWx0O1xuICB6LWluZGV4OiAxO1xuICBwYWRkaW5nOiAwO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDQ0NDO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBjb2xvcjogIzQ0NDtcbiAgZm9udC1zaXplOiA4cHg7XG5cbiAgdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDAuMXB4KTtcbn1cblxuLmNvbXBvbmVudDpob3ZlciAucm90YXRlLWdyYWIsIC5jb21wb25lbnQ6YWN0aXZlIC5yb3RhdGUtZ3JhYiB7XG4gIG9wYWNpdHk6IDE7XG59XG5cbi5vZi1sZWZ0LXRvcCB7XG4gIHRvcDogLTE0cHg7XG4gIGxlZnQ6IC0xNHB4O1xuICBib3JkZXItcmFkaXVzOiAxNHB4IDdweCAxNHB4IDdweDtcbn1cblxuLm9mLWxlZnQtYm90dG9tIHtcbiAgYm90dG9tOiAtMTRweDtcbiAgbGVmdDogLTE0cHg7XG4gIGJvcmRlci1yYWRpdXM6IDdweCAxNHB4IDdweCAxNHB4O1xufVxuXG4ub2YtcmlnaHQtYm90dG9tIHtcbiAgYm90dG9tOiAtMTRweDtcbiAgcmlnaHQ6IC0xNHB4O1xuICBib3JkZXItcmFkaXVzOiAxNHB4IDdweCAxNHB4IDdweDtcbn1cblxuLm9mLXJpZ2h0LXRvcCB7XG4gIHRvcDogLTE0cHg7XG4gIHJpZ2h0OiAtMTRweDtcbiAgYm9yZGVyLXJhZGl1czogN3B4IDE0cHggN3B4IDE0cHg7XG59XG5cbi5ibGlua2luZy1hbmltYXRpb24ge1xuXHQtd2Via2l0LWFuaW1hdGlvbjogYmxpbmsgMS4wcyBsaW5lYXIgaW5maW5pdGUgYWx0ZXJuYXRlO1xuICAtbW96LWFuaW1hdGlvbjogYmxpbmsgMS4wcyBsaW5lYXIgaW5maW5pdGUgYWx0ZXJuYXRlO1xuICAgYW5pbWF0aW9uOiBibGluayAxLjBzIGxpbmVhciBpbmZpbml0ZSBhbHRlcm5hdGU7XG59XG5cbkAtd2Via2l0LWtleWZyYW1lcyBibGluayB7XG4gIDAlIHsgb3BhY2l0eTowLjk7IH1cbiAgMTAwJSB7IG9wYWNpdHk6MC41OyB9XG59XG5cbkAtbW96LWtleWZyYW1lcyBibGluayB7XG4gIDAlIHsgb3BhY2l0eTowLjk7IH1cbiAgMTAwJSB7IG9wYWNpdHk6MC41OyB9XG59XG5cbkBrZXlmcmFtZXMgYmxpbmsge1xuICAwJSB7IG9wYWNpdHk6MC45OyB9XG4gIDEwMCUgeyBvcGFjaXR5OjAuNTsgfVxufSJdfQ== */"], changeDetection: 0 });
    return TerrainComponent;
}());



/***/ }),

/***/ "5MtU":
/*!**************************************************!*\
  !*** ./src/app/class/core/system/event/event.ts ***!
  \**************************************************/
/*! exports provided: Event */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Event", function() { return Event; });
/* harmony import */ var _network_network__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../network/network */ "qBBt");

var Event = /** @class */ (function () {
    function Event(eventName, data, sendFrom) {
        if (sendFrom === void 0) { sendFrom = _network_network__WEBPACK_IMPORTED_MODULE_0__["Network"].instance.peerId; }
        this.eventName = eventName;
        this.data = data;
        this.sendFrom = sendFrom;
        this.isSendFromSelf = false;
        this.isSendFromSelf = this.sendFrom === _network_network__WEBPACK_IMPORTED_MODULE_0__["Network"].instance.peerId;
    }
    Event.prototype.toContext = function () {
        return {
            sendFrom: this.sendFrom,
            eventName: this.eventName,
            data: this.data,
        };
    };
    return Event;
}());



/***/ }),

/***/ "5d7p":
/*!*************************************************************!*\
  !*** ./src/app/component/game-table/table-touch-gesture.ts ***!
  \*************************************************************/
/*! exports provided: TableTouchGestureEvent, TableTouchGesture */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TableTouchGestureEvent", function() { return TableTouchGestureEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TableTouchGesture", function() { return TableTouchGesture; });
var TableTouchGestureEvent;
(function (TableTouchGestureEvent) {
    TableTouchGestureEvent["PAN"] = "pan";
    TableTouchGestureEvent["TAP_PINCH"] = "tappinch";
    TableTouchGestureEvent["PINCH"] = "pinch";
    TableTouchGestureEvent["ROTATE"] = "rotate";
})(TableTouchGestureEvent || (TableTouchGestureEvent = {}));
var TableTouchGesture = /** @class */ (function () {
    function TableTouchGesture(targetElement, ngZone) {
        this.targetElement = targetElement;
        this.ngZone = ngZone;
        this.hammer = null;
        this.deltaHammerDeltaX = 0;
        this.deltaHammerDeltaY = 1.0;
        this.deltaHammerScale = 1.0;
        this.deltaHammerRotation = 0;
        this.prevHammerDeltaX = 0;
        this.prevHammerDeltaY = 0;
        this.prevHammerScale = 0;
        this.prevHammerRotation = 0;
        this.tappedPanTimer = null;
        this.tappedPanCenter = { x: 0, y: 0 };
        this.onstart = null;
        this.onend = null;
        this.ongesture = null;
        this.ontransform = null;
        this.initializeHammer();
    }
    TableTouchGesture.prototype.destroy = function () {
        this.clearTappedPanTimer();
        this.hammer.destroy();
    };
    TableTouchGesture.prototype.initializeHammer = function () {
        var _this = this;
        this.hammer = new Hammer.Manager(this.targetElement, { inputClass: Hammer.TouchInput });
        var tap = new Hammer.Tap();
        var pan1p = new Hammer.Pan({ event: 'pan1p', pointers: 1, threshold: 0 });
        var pan2p = new Hammer.Pan({ event: 'pan2p', pointers: 2, threshold: 0 });
        var pinch = new Hammer.Pinch();
        var rotate = new Hammer.Rotate();
        pan1p.recognizeWith(pan2p);
        pan1p.recognizeWith(rotate);
        pan1p.recognizeWith(pinch);
        pan2p.recognizeWith(pinch);
        pan2p.recognizeWith(rotate);
        pinch.recognizeWith(rotate);
        this.hammer.add([tap, pan1p, pan2p, pinch, rotate]);
        this.hammer.on('hammer.input', this.onHammer.bind(this));
        this.hammer.on('tap', this.onTap.bind(this));
        this.hammer.on('pan1pstart', this.onTappedPanStart.bind(this));
        this.hammer.on('pan1pmove', this.onTappedPanMove.bind(this));
        this.hammer.on('pan1pend', this.onTappedPanEnd.bind(this));
        this.hammer.on('pan1pcancel', this.onTappedPanEnd.bind(this));
        this.hammer.on('pan2pmove', this.onPanMove.bind(this));
        this.hammer.on('pinchmove', this.onPinchMove.bind(this));
        this.hammer.on('rotatemove', this.onRotateMove.bind(this));
        // iOS で contextmenu が発火しない問題へのworkaround.
        var ua = window.navigator.userAgent.toLowerCase();
        var isiOS = ua.indexOf('iphone') > -1 || ua.indexOf('ipad') > -1 || ua.indexOf('macintosh') > -1 && 'ontouchend' in document;
        if (!isiOS)
            return;
        this.hammer.add(new Hammer.Press({ time: 251 }));
        this.hammer.on('press', function (ev) {
            var event = new MouseEvent('contextmenu', {
                bubbles: true,
                cancelable: true,
                clientX: ev.center.x,
                clientY: ev.center.y,
            });
            _this.ngZone.run(function () { return ev.srcEvent.target.dispatchEvent(event); });
        });
    };
    TableTouchGesture.prototype.onHammer = function (ev) {
        if (ev.isFirst) {
            this.deltaHammerScale = ev.scale;
            this.deltaHammerRotation = ev.rotation;
            this.deltaHammerDeltaX = ev.deltaX;
            this.deltaHammerDeltaY = ev.deltaY;
            if (this.onstart)
                this.onstart(ev.srcEvent);
        }
        else if (ev.isFinal) {
            if (this.onend)
                this.onend(ev.srcEvent);
        }
        else {
            this.deltaHammerScale = ev.scale - this.prevHammerScale;
            this.deltaHammerRotation = ev.rotation - this.prevHammerRotation;
            this.deltaHammerDeltaX = ev.deltaX - this.prevHammerDeltaX;
            this.deltaHammerDeltaY = ev.deltaY - this.prevHammerDeltaY;
        }
        this.prevHammerScale = ev.scale;
        this.prevHammerRotation = ev.rotation;
        this.prevHammerDeltaX = ev.deltaX;
        this.prevHammerDeltaY = ev.deltaY;
        if (this.tappedPanTimer == null || ev.eventType != Hammer.INPUT_START)
            return;
        var distance = Math.pow((this.tappedPanCenter.x - ev.center.x), 2) + Math.pow((this.tappedPanCenter.y - ev.center.y), 2);
        if (Math.pow(50, 2) < distance) {
            this.clearTappedPanTimer();
        }
    };
    TableTouchGesture.prototype.onTap = function (ev) {
        var _this = this;
        this.tappedPanCenter = ev.center;
        this.tappedPanTimer = setTimeout(function () { _this.tappedPanTimer = null; }, 400);
        if (this.ongesture)
            this.ongesture(ev.srcEvent);
    };
    TableTouchGesture.prototype.onTappedPanStart = function (ev) {
        if (this.tappedPanTimer == null)
            return;
        this.clearTappedPanTimer(false);
        if (this.ongesture)
            this.ongesture(ev.srcEvent);
    };
    TableTouchGesture.prototype.onTappedPanEnd = function (ev) {
        this.clearTappedPanTimer();
    };
    TableTouchGesture.prototype.onTappedPanMove = function (ev) {
        if (this.tappedPanTimer == null) {
            var transformX = this.deltaHammerDeltaX;
            var transformY = this.deltaHammerDeltaY;
            var transformZ = 0;
            if (this.ontransform)
                this.ontransform(transformX, transformY, transformZ, 0, 0, 0, TableTouchGestureEvent.PAN, ev.srcEvent);
        }
        else {
            this.clearTappedPanTimer(false);
            var scale = this.deltaHammerDeltaY;
            var transformZ = scale * 7.5;
            if (this.ongesture)
                this.ongesture(ev.srcEvent);
            if (this.ontransform)
                this.ontransform(0, 0, transformZ, 0, 0, 0, TableTouchGestureEvent.TAP_PINCH, ev.srcEvent);
        }
    };
    TableTouchGesture.prototype.onPanMove = function (ev) {
        this.clearTappedPanTimer();
        var rotateX = -this.deltaHammerDeltaY / window.innerHeight * 100;
        if (this.ongesture)
            this.ongesture(ev.srcEvent);
        if (this.ontransform)
            this.ontransform(0, 0, 0, rotateX, 0, 0, TableTouchGestureEvent.ROTATE, ev.srcEvent);
    };
    TableTouchGesture.prototype.onPinchMove = function (ev) {
        this.clearTappedPanTimer();
        var transformZ = this.deltaHammerScale * 500;
        if (this.ongesture)
            this.ongesture(ev.srcEvent);
        if (this.ontransform)
            this.ontransform(0, 0, transformZ, 0, 0, 0, TableTouchGestureEvent.PINCH, ev.srcEvent);
    };
    TableTouchGesture.prototype.onRotateMove = function (ev) {
        this.clearTappedPanTimer();
        var rotateZ = this.deltaHammerRotation;
        if (this.ongesture)
            this.ongesture(ev.srcEvent);
        if (this.ontransform)
            this.ontransform(0, 0, 0, 0, 0, rotateZ, TableTouchGestureEvent.ROTATE, ev.srcEvent);
    };
    TableTouchGesture.prototype.clearTappedPanTimer = function (needsSetNull) {
        if (needsSetNull === void 0) { needsSetNull = true; }
        clearTimeout(this.tappedPanTimer);
        if (needsSetNull)
            this.tappedPanTimer = null;
    };
    return TableTouchGesture;
}());



/***/ }),

/***/ "5zlT":
/*!*********************************************!*\
  !*** ./src/app/directive/resize-handler.ts ***!
  \*********************************************/
/*! exports provided: HandleType, ResizeHandler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HandleType", function() { return HandleType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResizeHandler", function() { return ResizeHandler; });
/* harmony import */ var _input_handler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./input-handler */ "96Ug");

var HandleType;
(function (HandleType) {
    HandleType["N"] = "n";
    HandleType["E"] = "e";
    HandleType["W"] = "w";
    HandleType["S"] = "s";
    HandleType["NE"] = "ne";
    HandleType["NW"] = "nw";
    HandleType["SE"] = "se";
    HandleType["SW"] = "sw";
})(HandleType || (HandleType = {}));
var ResizeHandler = /** @class */ (function () {
    function ResizeHandler(target, type) {
        this.target = target;
        this.type = type;
        this.input = null;
        this.handle = null;
        this.width = 12;
        this.initialize();
    }
    ResizeHandler.prototype.initialize = function () {
        this.handle = this.target.ownerDocument.createElement('div');
        this.handle.classList.add('ui-resize-handler-' + this.type);
        this.input = new _input_handler__WEBPACK_IMPORTED_MODULE_0__["InputHandler"](this.handle);
        this.target.appendChild(this.handle);
        var style = this.handle.style;
        style.position = 'absolute';
        style.zIndex = '1';
        style.backgroundColor = 'transparent';
        switch (this.type) {
            case HandleType.N:
                style.top = -this.width * 3 / 4 + "px";
                style.left = '0px';
                style.right = '0px';
                style.height = this.width + "px";
                style.cursor = 'ns-resize';
                break;
            case HandleType.E:
                style.top = '0px';
                style.bottom = '0px';
                style.right = -this.width * 3 / 4 + "px";
                style.width = this.width + "px";
                style.cursor = 'ew-resize';
                break;
            case HandleType.W:
                style.top = '0px';
                style.bottom = '0px';
                style.left = -this.width * 3 / 4 + "px";
                style.width = this.width + "px";
                style.cursor = 'ew-resize';
                break;
            case HandleType.S:
                style.bottom = -this.width * 3 / 4 + "px";
                style.left = '0px';
                style.right = '0px';
                style.height = this.width + "px";
                style.cursor = 'ns-resize';
                break;
            case HandleType.NE:
                style.top = -this.width * 3 / 4 + "px";
                style.right = -this.width * 3 / 4 + "px";
                style.width = this.width * 3 / 2 + "px";
                style.height = this.width * 3 / 2 + "px";
                style.cursor = 'nesw-resize';
                style.zIndex = '2';
                break;
            case HandleType.NW:
                style.top = -this.width * 3 / 4 + "px";
                style.left = -this.width * 3 / 4 + "px";
                style.width = this.width * 3 / 2 + "px";
                style.height = this.width * 3 / 2 + "px";
                style.cursor = 'nwse-resize';
                style.zIndex = '2';
                break;
            case HandleType.SE:
                style.bottom = -this.width * 3 / 4 + "px";
                style.right = -this.width * 3 / 4 + "px";
                style.width = this.width * 3 / 2 + "px";
                style.height = this.width * 3 / 2 + "px";
                style.cursor = 'nwse-resize';
                style.zIndex = '2';
                break;
            case HandleType.SW:
                style.bottom = -this.width * 3 / 4 + "px";
                style.left = -this.width * 3 / 4 + "px";
                style.width = this.width * 3 / 2 + "px";
                style.height = this.width * 3 / 2 + "px";
                style.cursor = 'nesw-resize';
                style.zIndex = '2';
                break;
        }
    };
    ResizeHandler.prototype.destroy = function () {
        this.handle.remove();
        this.input.destroy();
    };
    return ResizeHandler;
}());



/***/ }),

/***/ "6HCy":
/*!***********************************!*\
  !*** ./src/app/pipe/safe.pipe.ts ***!
  \***********************************/
/*! exports provided: SafePipe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SafePipe", function() { return SafePipe; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ "jhN1");


var SafePipe = /** @class */ (function () {
    function SafePipe(_sanitizer) {
        this._sanitizer = _sanitizer;
    }
    SafePipe.prototype.transform = function (value, type) {
        if (type === void 0) { type = 'html'; }
        switch (type) {
            case 'html': return this._sanitizer.bypassSecurityTrustHtml(value);
            case 'style': return this._sanitizer.bypassSecurityTrustStyle(value);
            case 'script': return this._sanitizer.bypassSecurityTrustScript(value);
            case 'url': return this._sanitizer.bypassSecurityTrustUrl(value);
            case 'resourceUrl': return this._sanitizer.bypassSecurityTrustResourceUrl(value);
            default: throw new Error("Invalid safe type specified: " + type);
        }
    };
    SafePipe.ɵfac = function SafePipe_Factory(t) { return new (t || SafePipe)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__["DomSanitizer"])); };
    SafePipe.ɵpipe = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefinePipe"]({ name: "safe", type: SafePipe, pure: true });
    return SafePipe;
}());



/***/ }),

/***/ "6VpD":
/*!***********************************************!*\
  !*** ./src/app/service/app-config.service.ts ***!
  \***********************************************/
/*! exports provided: AppConfigService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppConfigService", function() { return AppConfigService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_database_database__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/database/database */ "dQSv");
/* harmony import */ var js_yaml__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js-yaml */ "4sH1");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ "fXoL");





var objectPropertyKeys = Object.getOwnPropertyNames(Object.prototype);
var arrayPropertyKeys = Object.getOwnPropertyNames(Array.prototype);
var AppConfigService = /** @class */ (function () {
    function AppConfigService() {
        this.peerHistory = [];
        this.isOpen = false;
    }
    AppConfigService.prototype.initialize = function () {
        this.initAppConfig();
        this.initDatabase();
    };
    AppConfigService.prototype.initDatabase = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var db, history, i, _a, _b, historyId;
            var e_1, _c;
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        console.log('initDatabase...');
                        if (!window.indexedDB) {
                            console.warn('このブラウザは安定板の IndexedDB をサポートしていません。IndexedDB の機能は利用できません。');
                            return [2 /*return*/];
                        }
                        db = new _udonarium_database_database__WEBPACK_IMPORTED_MODULE_2__["Database"]();
                        return [4 /*yield*/, db.getPeerHistory()];
                    case 1:
                        history = _d.sent();
                        history.sort(function (a, b) {
                            if (a.timestamp < b.timestamp)
                                return 1;
                            if (a.timestamp > b.timestamp)
                                return -1;
                            return 0;
                        });
                        for (i = 1; i < history.length; i++) {
                            db.deletePeerHistory(history[i].peerId);
                        }
                        console.log('履歴: ', history);
                        this.peerHistory = [];
                        if (history.length) {
                            try {
                                for (_a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(history[0].history), _b = _a.next(); !_b.done; _b = _a.next()) {
                                    historyId = _b.value;
                                    if (historyId !== history[0].peerId) {
                                        this.peerHistory.push(historyId);
                                    }
                                }
                            }
                            catch (e_1_1) { e_1 = { error: e_1_1 }; }
                            finally {
                                try {
                                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);
                                }
                                finally { if (e_1) throw e_1.error; }
                            }
                        }
                        console.log('最終履歴: ', this.peerHistory);
                        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(this)
                            .on('CONNECT_PEER', -1000, function () {
                            console.log('AppConfigService CONNECT_PEER', _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerIds);
                            if (!_this.isOpen) {
                                _this.isOpen = true;
                            }
                            db.addPeerHistory(_udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerId, _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerIds);
                        })
                            .on('DISCONNECT_PEER', -1000, function () {
                            console.log('AppConfigService DISCONNECT_PEER', _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerIds);
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    AppConfigService.prototype.initAppConfig = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var config, obj, e_2;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 2, , 3]);
                        console.log('YAML読み込み...');
                        return [4 /*yield*/, this.loadYaml()];
                    case 1:
                        config = _a.sent();
                        obj = js_yaml__WEBPACK_IMPORTED_MODULE_3__["load"](config);
                        AppConfigService.applyConfig(obj);
                        return [3 /*break*/, 3];
                    case 2:
                        e_2 = _a.sent();
                        console.warn(e_2);
                        return [3 /*break*/, 3];
                    case 3:
                        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].trigger('LOAD_CONFIG', AppConfigService.appConfig);
                        return [2 /*return*/];
                }
            });
        });
    };
    AppConfigService.prototype.loadYaml = function () {
        return new Promise(function (resolve, reject) {
            var config = document.querySelector('script[type$="yaml"]');
            if (!config) {
                console.warn('loadYaml element not found.');
                resolve('');
                return;
            }
            var configString = config.textContent;
            var url = config.getAttribute('src');
            if (url == null) {
                console.warn('loadYaml url undefined.');
                resolve(configString);
                return;
            }
            var http = new XMLHttpRequest();
            http.open('get', url, true);
            http.onerror = function (event) {
                console.error(event);
                resolve(configString);
            };
            http.onreadystatechange = function (event) {
                if (http.readyState !== 4) {
                    return;
                }
                if (http.status === 200) {
                    console.log('loadYaml success!');
                    configString = http.responseText;
                }
                else {
                    console.warn('loadYaml fail...? status:' + http.status);
                }
                resolve(configString);
            };
            console.log('loadYaml start');
            http.send(null);
        });
    };
    AppConfigService.applyConfig = function (config, root) {
        var e_3, _a;
        if (root === void 0) { root = AppConfigService.appConfig; }
        if (config == null)
            return root;
        var keys = Object.getOwnPropertyNames(config);
        try {
            for (var keys_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {
                var key = keys_1_1.value;
                var invalidPropertyKeys = Array.isArray(config) || Array.isArray(root) ? objectPropertyKeys.concat(arrayPropertyKeys) : objectPropertyKeys;
                if (invalidPropertyKeys.includes(key)) {
                    console.log("skip invalid key (" + key + ")");
                    continue;
                }
                else if (config[key] != null && typeof config[key] === 'object') {
                    if (root[key] == null)
                        root[key] = Array.isArray(config[key]) ? [] : {};
                    AppConfigService.applyConfig(config[key], root[key]);
                }
                else if (typeof config[key] !== 'function' && typeof root[key] !== 'function') {
                    root[key] = config[key];
                }
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (keys_1_1 && !keys_1_1.done && (_a = keys_1.return)) _a.call(keys_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return root;
    };
    AppConfigService.appConfig = {
        webrtc: {
            key: ''
        },
        app: {
            title: '',
            mode: ''
        }
    };
    AppConfigService.ɵfac = function AppConfigService_Factory(t) { return new (t || AppConfigService)(); };
    AppConfigService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineInjectable"]({ token: AppConfigService, factory: AppConfigService.ɵfac });
    return AppConfigService;
}());



/***/ }),

/***/ "7AbD":
/*!************************************************************!*\
  !*** ./src/app/component/text-note/text-note.component.ts ***!
  \************************************************************/
/*! exports provided: TextNoteComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextNoteComponent", function() { return TextNoteComponent; });
/* harmony import */ var _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var directive_movable_directive__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! directive/movable.directive */ "+Kyd");
/* harmony import */ var directive_rotable_directive__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! directive/rotable.directive */ "3jYK");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");














var _c0 = ["textArea"];
function TextNoteComponent_div_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](ctx_r0.title);
} }
var _c1 = function (a0, a1, a2) { return { "is-pointer-events-none": a0, "is-pointer-events-auto": a1, "is-outline-text": a2 }; };
var TextNoteComponent = /** @class */ (function () {
    function TextNoteComponent(ngZone, contextMenuService, panelService, changeDetector, pointerDeviceService) {
        var _this = this;
        this.ngZone = ngZone;
        this.contextMenuService = contextMenuService;
        this.panelService = panelService;
        this.changeDetector = changeDetector;
        this.pointerDeviceService = pointerDeviceService;
        this.textNote = null;
        this.is3D = false;
        this.callbackOnMouseUp = function (e) { return _this.onMouseUp(e); };
        this.gridSize = 50;
        this.calcFitHeightTimer = null;
        this.movableOption = {};
        this.rotableOption = {};
    }
    Object.defineProperty(TextNoteComponent.prototype, "title", {
        get: function () { return this.textNote.title; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNoteComponent.prototype, "text", {
        get: function () { this.calcFitHeightIfNeeded(); return this.textNote.text; },
        set: function (text) { this.calcFitHeightIfNeeded(); this.textNote.text = text; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNoteComponent.prototype, "fontSize", {
        get: function () { this.calcFitHeightIfNeeded(); return this.textNote.fontSize; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNoteComponent.prototype, "imageFile", {
        get: function () { return this.textNote.imageFile; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNoteComponent.prototype, "rotate", {
        get: function () { return this.textNote.rotate; },
        set: function (rotate) { this.textNote.rotate = rotate; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNoteComponent.prototype, "height", {
        get: function () { return this.adjustMinBounds(this.textNote.height); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNoteComponent.prototype, "width", {
        get: function () { return this.adjustMinBounds(this.textNote.width); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNoteComponent.prototype, "isSelected", {
        get: function () { return document.activeElement === this.textAreaElementRef.nativeElement; },
        enumerable: false,
        configurable: true
    });
    TextNoteComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.get(event.data.identifier);
            if (!_this.textNote || !object)
                return;
            if (_this.textNote === object || (object instanceof _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_0__["ObjectNode"] && _this.textNote.contains(object))) {
                _this.changeDetector.markForCheck();
            }
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('UPDATE_FILE_RESOURE', -1000, function (event) {
            _this.changeDetector.markForCheck();
        });
        this.movableOption = {
            tabletopObject: this.textNote,
            transformCssOffset: 'translateZ(0.15px)',
            colideLayers: ['terrain']
        };
        this.rotableOption = {
            tabletopObject: this.textNote
        };
    };
    TextNoteComponent.prototype.ngAfterViewInit = function () { };
    TextNoteComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].unregister(this);
    };
    TextNoteComponent.prototype.onDragstart = function (e) {
        e.stopPropagation();
        e.preventDefault();
    };
    TextNoteComponent.prototype.onMouseDown = function (e) {
        if (this.isSelected)
            return;
        e.preventDefault();
        this.textNote.toTopmost();
        // TODO:もっと良い方法考える
        if (e.button === 2) {
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].trigger('DRAG_LOCKED_OBJECT', {});
            return;
        }
        this.addMouseEventListeners();
    };
    TextNoteComponent.prototype.onMouseUp = function (e) {
        if (this.pointerDeviceService.isAllowedToOpenContextMenu) {
            var selection = window.getSelection();
            if (!selection.isCollapsed)
                selection.removeAllRanges();
            this.textAreaElementRef.nativeElement.focus();
        }
        this.removeMouseEventListeners();
        e.preventDefault();
    };
    TextNoteComponent.prototype.onRotateMouseDown = function (e) {
        e.stopPropagation();
        e.preventDefault();
    };
    TextNoteComponent.prototype.onContextMenu = function (e) {
        var _this = this;
        this.removeMouseEventListeners();
        if (this.isSelected)
            return;
        e.stopPropagation();
        e.preventDefault();
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu)
            return;
        var position = this.pointerDeviceService.pointers[0];
        this.contextMenuService.open(position, [
            { name: 'メモを編集', action: function () { _this.showDetail(_this.textNote); } },
            {
                name: 'コピーを作る',
                action: function () {
                    var cloneObject = _this.textNote.clone();
                    console.log('コピー', cloneObject);
                    cloneObject.location.x += _this.gridSize;
                    cloneObject.location.y += _this.gridSize;
                    cloneObject.toTopmost();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].cardPut);
                }
            },
            {
                name: '削除する',
                action: function () {
                    _this.textNote.destroy();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].sweep);
                }
            },
        ], this.title);
    };
    TextNoteComponent.prototype.onMove = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].cardPick);
    };
    TextNoteComponent.prototype.onMoved = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].cardPut);
    };
    TextNoteComponent.prototype.calcFitHeightIfNeeded = function () {
        var _this = this;
        if (this.calcFitHeightTimer)
            return;
        this.ngZone.runOutsideAngular(function () {
            _this.calcFitHeightTimer = setTimeout(function () {
                _this.calcFitHeight();
                _this.calcFitHeightTimer = null;
            }, 0);
        });
    };
    TextNoteComponent.prototype.calcFitHeight = function () {
        var textArea = this.textAreaElementRef.nativeElement;
        textArea.style.height = '0';
        if (textArea.scrollHeight > textArea.offsetHeight) {
            textArea.style.height = textArea.scrollHeight + 'px';
        }
    };
    TextNoteComponent.prototype.adjustMinBounds = function (value, min) {
        if (min === void 0) { min = 0; }
        return value < min ? min : value;
    };
    TextNoteComponent.prototype.addMouseEventListeners = function () {
        document.body.addEventListener('mouseup', this.callbackOnMouseUp, false);
    };
    TextNoteComponent.prototype.removeMouseEventListeners = function () {
        document.body.removeEventListener('mouseup', this.callbackOnMouseUp, false);
    };
    TextNoteComponent.prototype.showDetail = function (gameObject) {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });
        var coordinate = this.pointerDeviceService.pointers[0];
        var title = '共有メモ設定';
        if (gameObject.title.length)
            title += ' - ' + gameObject.title;
        var option = { title: title, left: coordinate.x - 350, top: coordinate.y - 200, width: 700, height: 400 };
        var component = this.panelService.open(component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_4__["GameCharacterSheetComponent"], option);
        component.tabletopObject = gameObject;
    };
    TextNoteComponent.ɵfac = function TextNoteComponent_Factory(t) { return new (t || TextNoteComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_5__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_6__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_5__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_8__["PointerDeviceService"])); };
    TextNoteComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({ type: TextNoteComponent, selectors: [["text-note"]], viewQuery: function TextNoteComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵviewQuery"](_c0, 3);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵloadQuery"]()) && (ctx.textAreaElementRef = _t.first);
        } }, hostBindings: function TextNoteComponent_HostBindings(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("dragstart", function TextNoteComponent_dragstart_HostBindingHandler($event) { return ctx.onDragstart($event); })("mousedown", function TextNoteComponent_mousedown_HostBindingHandler($event) { return ctx.onMouseDown($event); })("contextmenu", function TextNoteComponent_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });
        } }, inputs: { textNote: "textNote", is3D: "is3D" }, decls: 14, vars: 23, consts: [["appMovable", "", 1, "component", "is-3d", "is-pointer-events-none", 3, "movable.option", "movable.disable", "movable.ondragstart", "movable.ondragend"], ["appRotable", "", 1, "is-3d", 3, "rotable.option", "rotable.ondragstart", "rotable.ondragend"], [1, "component-content", "is-3d", "is-pointer-events-auto"], [1, "upright-transform", "is-3d", "is-bg-color", "is-bg-texture"], ["class", "title is-black-background is-pointer-events-none", 4, "ngIf"], ["spellcheck", "false", 1, "textarea", 3, "ngClass", "ngModel", "input", "ngModelChange"], ["textArea", ""], [1, "rotate-grab", "of-left-top"], [1, "material-icons"], [1, "rotate-grab", "of-right-top"], [1, "title", "is-black-background", "is-pointer-events-none"]], template: function TextNoteComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("movable.ondragstart", function TextNoteComponent_Template_div_movable_ondragstart_0_listener() { return ctx.onMove(); })("movable.ondragend", function TextNoteComponent_Template_div_movable_ondragend_0_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("rotable.ondragstart", function TextNoteComponent_Template_div_rotable_ondragstart_1_listener() { return ctx.onMove(); })("rotable.ondragend", function TextNoteComponent_Template_div_rotable_ondragend_1_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](2, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](4, "safe");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](5, TextNoteComponent_div_5_Template, 2, 1, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](6, "textarea", 5, 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("input", function TextNoteComponent_Template_textarea_input_6_listener() { return ctx.calcFitHeight(); })("ngModelChange", function TextNoteComponent_Template_textarea_ngModelChange_6_listener($event) { return ctx.text = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](8, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](9, "i", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](10, "autorenew");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](11, "div", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](12, "i", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](13, "autorenew");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("movable.option", ctx.movableOption)("movable.disable", ctx.isSelected);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("rotable.option", ctx.rotableOption);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵstyleProp"]("width", ctx.width * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind2"](4, 16, "url(" + (ctx.imageFile == null ? null : ctx.imageFile.url) + ")", "style"))("width", ctx.width * ctx.gridSize, "px")("min-height", ctx.height * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.title.length);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵstyleProp"]("font-size", ctx.fontSize + 9, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction3"](19, _c1, !ctx.isSelected, ctx.isSelected, !ctx.isSelected))("ngModel", ctx.text);
        } }, directives: [directive_movable_directive__WEBPACK_IMPORTED_MODULE_9__["MovableDirective"], directive_rotable_directive__WEBPACK_IMPORTED_MODULE_10__["RotableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["DefaultValueAccessor"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgClass"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["NgModel"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_13__["SafePipe"]], styles: [".is-grab[_ngcontent-%COMP%] {\n  cursor: grab;\n}\n\n.is-grabbing[_ngcontent-%COMP%] {\n  cursor: grabbing;\n}\n\n.is-3d[_ngcontent-%COMP%] {\n  transform-style: preserve-3d;\n}\n\n.is-transition[_ngcontent-%COMP%] {\n  transition: transform 132ms linear;\n}\n\n.is-pointer-events-none[_ngcontent-%COMP%] {\n  pointer-events: none;\n}\n\n.is-pointer-events-auto[_ngcontent-%COMP%] {\n  pointer-events: auto;\n}\n\n.component[_ngcontent-%COMP%] {\n  position: absolute;\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n  -webkit-user-select: none;\n  user-select: none;\n  \n  -moz-user-drag: none;\n  -webkit-user-drag: none;\n\n  width: 0;\n  height:0;\n}\n\n.component-content[_ngcontent-%COMP%] {\n  height: 100%;\n  width: 100%;\n  transform : translateX(-50%);\n}\n\n.upright-transform[_ngcontent-%COMP%] {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  transform-origin: 50% 100%;\n  transform: rotateX(-90deg);\n}\n\n.is-bg-texture[_ngcontent-%COMP%] {\n  background-repeat: no-repeat;\n  background-size: 100% 100%;\n}\n\n.is-bg-color[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  color: #444;\n  background-color: rgba(240,218,189, 0.9);\n  border: solid 1px #999;\n}\n\n.title[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  font-size: 15px;\n  padding: 3px 9px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n}\n\n.is-black-background[_ngcontent-%COMP%] {\n  color: #CCC;\n  background-color: rgba(30, 30, 30, 0.8);\n}\n\n.textarea[_ngcontent-%COMP%] {\n  width: 100%;\n  height: 100%;\n  resize: none;\n  overflow: hidden;\n  \n  box-sizing: border-box;\n  background: none;\n  border: none;\n  border-radius: 0px;\n  outline: none;\n\n  color: #444;\n  font-family: Cambria, Georgia;\n  font-size: 1.0rem;\n  padding: 2px;\n  margin: 0;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  overflow-wrap: anywhere;\n  word-break: break-word;\n\n  -webkit-backface-visibility: hidden;\n\n          backface-visibility: hidden;\n}\n\n.textarea[_ngcontent-%COMP%]:focus {\n  background: rgba(255, 255, 255, 0.75);\n}\n\n.is-black-background[_ngcontent-%COMP%] {\n  color: #CCC;\n  background-color: rgba(30, 30, 30, 0.8);\n}\n\n.is-outline-text[_ngcontent-%COMP%] {\n  font-size: 24px;\n  color: #444;\n  text-shadow: \n  #f2f2f2 0px 0px 0.5px, \n  #f2f2f2 0px 0px 0.5px, \n  #f2f2f2 0px 0px 0.5px, \n  #f2f2f2 0px 0px 0.5px, \n  #f2f2f2 0px 0px 0.5px, \n  #f2f2f2 0px 0px 0.5px,\n  #f2f2f2 0px 0px 0.5px,\n  #f2f2f2 0px 0px 0.5px;\n}\n\n.rotate-grab[_ngcontent-%COMP%] {\n  position: absolute;\n  width: 42px;\n  height: 28px;\n  box-sizing: border-box;\n  cursor: -moz-default;\n  cursor: -webkit-default;\n  cursor: default;\n  z-index: 1;\n  text-align: center;\n  padding: 2px;\n  background-color: #CCCCCC;\n  border-radius: 28px;\n  color: #444;\n  font-size: 8px;\n}\n\n.of-left-top[_ngcontent-%COMP%] {\n  top: -14px;\n  left: -21px;\n}\n\n.of-right-top[_ngcontent-%COMP%] {\n  top: -14px;\n  right: -21px;\n}\n\n.rotate-grab[_ngcontent-%COMP%] {\n  opacity: 0;\n}\n\n.component[_ngcontent-%COMP%]:hover   .rotate-grab[_ngcontent-%COMP%] {\n  opacity: 0.5;\n}\n\n.component[_ngcontent-%COMP%]:active   .rotate-grab[_ngcontent-%COMP%] {\n  opacity: 0;\n}\n\n.component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:hover, .component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:active {\n  opacity: 1;\n}\n\n.material-icons[_ngcontent-%COMP%] {\n  display: none;\n}\n\n.component[_ngcontent-%COMP%]:hover   .material-icons[_ngcontent-%COMP%], .component[_ngcontent-%COMP%]:active   .material-icons[_ngcontent-%COMP%] {\n  display: inline;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRleHQtbm90ZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBR0UsWUFBWTtBQUNkOztBQUVBO0VBR0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBRUUsNEJBQTRCO0FBQzlCOztBQUVBO0VBRUUsa0NBQWtDO0FBQ3BDOztBQUVBO0VBQ0Usb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0Usb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFFM0IseUJBQXlCO0VBQ3pCLGlCQUFpQjs7RUFFakIsb0JBQW9CO0VBQ3BCLHVCQUF1Qjs7RUFFdkIsUUFBUTtFQUNSLFFBQVE7QUFDVjs7QUFFQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsNEJBQTRCO0FBQzlCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFNBQVM7RUFDVCxPQUFPO0VBQ1AsUUFBUTtFQUNSLDBCQUEwQjtFQUMxQiwwQkFBMEI7QUFDNUI7O0FBRUE7RUFDRSw0QkFBNEI7RUFDNUIsMEJBQTBCO0FBQzVCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFdBQVc7RUFDWCx3Q0FBd0M7RUFDeEMsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsbUNBQTJCO1VBQTNCLDJCQUEyQjtBQUM3Qjs7QUFFQTtFQUNFLFdBQVc7RUFDWCx1Q0FBdUM7QUFDekM7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLFlBQVk7RUFDWixnQkFBZ0I7O0VBRWhCLHNCQUFzQjtFQUN0QixnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixhQUFhOztFQUViLFdBQVc7RUFDWCw2QkFBNkI7RUFDN0IsaUJBQWlCO0VBQ2pCLFlBQVk7RUFDWixTQUFTO0VBQ1QscUJBQXFCO0VBQ3JCLHFCQUFxQjtFQUNyQix1QkFBdUI7RUFDdkIsc0JBQXNCOztFQUV0QixtQ0FBMkI7O1VBQTNCLDJCQUEyQjtBQUM3Qjs7QUFFQTtFQUNFLHFDQUFxQztBQUN2Qzs7QUFFQTtFQUNFLFdBQVc7RUFDWCx1Q0FBdUM7QUFDekM7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsV0FBVztFQUNYOzs7Ozs7Ozt1QkFRcUI7QUFDdkI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsb0JBQW9CO0VBQ3BCLHVCQUF1QjtFQUN2QixlQUFlO0VBQ2YsVUFBVTtFQUNWLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1oseUJBQXlCO0VBQ3pCLG1CQUFtQjtFQUNuQixXQUFXO0VBQ1gsY0FBYztBQUNoQjs7QUFFQTtFQUNFLFVBQVU7RUFDVixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxVQUFVO0VBQ1YsWUFBWTtBQUNkOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsZUFBZTtBQUNqQiIsImZpbGUiOiJ0ZXh0LW5vdGUuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pcy1ncmFiIHtcbiAgY3Vyc29yOiAtbW96LWdyYWI7XG4gIGN1cnNvcjogLXdlYmtpdC1ncmFiO1xuICBjdXJzb3I6IGdyYWI7XG59XG5cbi5pcy1ncmFiYmluZyB7XG4gIGN1cnNvcjogLW1vei1ncmFiYmluZztcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWJiaW5nO1xuICBjdXJzb3I6IGdyYWJiaW5nO1xufVxuXG4uaXMtM2Qge1xuICAtd2Via2l0LXRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XG4gIHRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XG59XG5cbi5pcy10cmFuc2l0aW9uIHtcbiAgLXdlYmtpdC10cmFuc2l0aW9uOiAtd2Via2l0LXRyYW5zZm9ybSAxMzJtcyBsaW5lYXI7XG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAxMzJtcyBsaW5lYXI7XG59XG5cbi5pcy1wb2ludGVyLWV2ZW50cy1ub25lIHtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG5cbi5pcy1wb2ludGVyLWV2ZW50cy1hdXRvIHtcbiAgcG9pbnRlci1ldmVudHM6IGF1dG87XG59XG5cbi5jb21wb25lbnQge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIFxuICAtbW96LXVzZXItZHJhZzogbm9uZTtcbiAgLXdlYmtpdC11c2VyLWRyYWc6IG5vbmU7XG5cbiAgd2lkdGg6IDA7XG4gIGhlaWdodDowO1xufVxuXG4uY29tcG9uZW50LWNvbnRlbnQge1xuICBoZWlnaHQ6IDEwMCU7XG4gIHdpZHRoOiAxMDAlO1xuICB0cmFuc2Zvcm0gOiB0cmFuc2xhdGVYKC01MCUpO1xufVxuXG4udXByaWdodC10cmFuc2Zvcm0ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIHRyYW5zZm9ybS1vcmlnaW46IDUwJSAxMDAlO1xuICB0cmFuc2Zvcm06IHJvdGF0ZVgoLTkwZGVnKTtcbn1cblxuLmlzLWJnLXRleHR1cmUge1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXNpemU6IDEwMCUgMTAwJTtcbn1cblxuLmlzLWJnLWNvbG9yIHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgY29sb3I6ICM0NDQ7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjQwLDIxOCwxODksIDAuOSk7XG4gIGJvcmRlcjogc29saWQgMXB4ICM5OTk7XG59XG5cbi50aXRsZSB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGZvbnQtc2l6ZTogMTVweDtcbiAgcGFkZGluZzogM3B4IDlweDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbn1cblxuLmlzLWJsYWNrLWJhY2tncm91bmQge1xuICBjb2xvcjogI0NDQztcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjgpO1xufVxuXG4udGV4dGFyZWEge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICByZXNpemU6IG5vbmU7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBiYWNrZ3JvdW5kOiBub25lO1xuICBib3JkZXI6IG5vbmU7XG4gIGJvcmRlci1yYWRpdXM6IDBweDtcbiAgb3V0bGluZTogbm9uZTtcblxuICBjb2xvcjogIzQ0NDtcbiAgZm9udC1mYW1pbHk6IENhbWJyaWEsIEdlb3JnaWE7XG4gIGZvbnQtc2l6ZTogMS4wcmVtO1xuICBwYWRkaW5nOiAycHg7XG4gIG1hcmdpbjogMDtcbiAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xuICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XG4gIG92ZXJmbG93LXdyYXA6IGFueXdoZXJlO1xuICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xuXG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbn1cblxuLnRleHRhcmVhOmZvY3VzIHtcbiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjc1KTtcbn1cblxuLmlzLWJsYWNrLWJhY2tncm91bmQge1xuICBjb2xvcjogI0NDQztcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjgpO1xufVxuXG4uaXMtb3V0bGluZS10ZXh0IHtcbiAgZm9udC1zaXplOiAyNHB4O1xuICBjb2xvcjogIzQ0NDtcbiAgdGV4dC1zaGFkb3c6IFxuICAjZjJmMmYyIDBweCAwcHggMC41cHgsIFxuICAjZjJmMmYyIDBweCAwcHggMC41cHgsIFxuICAjZjJmMmYyIDBweCAwcHggMC41cHgsIFxuICAjZjJmMmYyIDBweCAwcHggMC41cHgsIFxuICAjZjJmMmYyIDBweCAwcHggMC41cHgsIFxuICAjZjJmMmYyIDBweCAwcHggMC41cHgsXG4gICNmMmYyZjIgMHB4IDBweCAwLjVweCxcbiAgI2YyZjJmMiAwcHggMHB4IDAuNXB4O1xufVxuXG4ucm90YXRlLWdyYWIge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiA0MnB4O1xuICBoZWlnaHQ6IDI4cHg7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGN1cnNvcjogLW1vei1kZWZhdWx0O1xuICBjdXJzb3I6IC13ZWJraXQtZGVmYXVsdDtcbiAgY3Vyc29yOiBkZWZhdWx0O1xuICB6LWluZGV4OiAxO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDJweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI0NDQ0NDQztcbiAgYm9yZGVyLXJhZGl1czogMjhweDtcbiAgY29sb3I6ICM0NDQ7XG4gIGZvbnQtc2l6ZTogOHB4O1xufVxuXG4ub2YtbGVmdC10b3Age1xuICB0b3A6IC0xNHB4O1xuICBsZWZ0OiAtMjFweDtcbn1cblxuLm9mLXJpZ2h0LXRvcCB7XG4gIHRvcDogLTE0cHg7XG4gIHJpZ2h0OiAtMjFweDtcbn1cblxuLnJvdGF0ZS1ncmFiIHtcbiAgb3BhY2l0eTogMDtcbn1cblxuLmNvbXBvbmVudDpob3ZlciAucm90YXRlLWdyYWIge1xuICBvcGFjaXR5OiAwLjU7XG59XG5cbi5jb21wb25lbnQ6YWN0aXZlIC5yb3RhdGUtZ3JhYiB7XG4gIG9wYWNpdHk6IDA7XG59XG5cbi5jb21wb25lbnQgLnJvdGF0ZS1ncmFiOmhvdmVyLCAuY29tcG9uZW50IC5yb3RhdGUtZ3JhYjphY3RpdmUge1xuICBvcGFjaXR5OiAxO1xufVxuXG4ubWF0ZXJpYWwtaWNvbnMge1xuICBkaXNwbGF5OiBub25lO1xufVxuXG4uY29tcG9uZW50OmhvdmVyIC5tYXRlcmlhbC1pY29ucywgLmNvbXBvbmVudDphY3RpdmUgLm1hdGVyaWFsLWljb25zIHtcbiAgZGlzcGxheTogaW5saW5lO1xufSJdfQ== */"], changeDetection: 0 });
    return TextNoteComponent;
}());



/***/ }),

/***/ "96Ug":
/*!********************************************!*\
  !*** ./src/app/directive/input-handler.ts ***!
  \********************************************/
/*! exports provided: InputHandler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InputHandler", function() { return InputHandler; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");

var MOUSE_IDENTIFIER = -9999;
var InputHandler = /** @class */ (function () {
    function InputHandler(target, option) {
        if (option === void 0) { option = { capture: false, passive: false, always: false }; }
        this.target = target;
        this.callbackOnMouse = this.onMouse.bind(this);
        this.callbackOnTouch = this.onTouch.bind(this);
        this.callbackOnMenu = this.onMenu.bind(this);
        this.lastPointers = [];
        this.primaryPointer = { x: 0, y: 0, z: 0, identifier: MOUSE_IDENTIFIER };
        this._isDragging = false;
        this._isGrabbing = false;
        this._isDestroyed = false;
        this.option = null;
        this.option = {
            capture: option.capture === true,
            passive: option.passive === true,
            always: option.always === true
        };
        this.initialize();
    }
    Object.defineProperty(InputHandler.prototype, "pointer", {
        get: function () { return this.primaryPointer; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "isDragging", {
        get: function () { return this._isDragging; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "isGrabbing", {
        get: function () { return this._isGrabbing; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "isDestroyed", {
        get: function () { return this._isDestroyed; },
        enumerable: false,
        configurable: true
    });
    InputHandler.prototype.initialize = function () {
        this.target.addEventListener('mousedown', this.callbackOnMouse, this.option.capture);
        this.target.addEventListener('touchstart', this.callbackOnTouch, this.option.capture);
        if (this.option.always)
            this.addEventListeners();
    };
    InputHandler.prototype.destroy = function () {
        this.cancel();
        this._isDestroyed = true;
        this.target.removeEventListener('mousedown', this.callbackOnMouse, this.option.capture);
        this.target.removeEventListener('touchstart', this.callbackOnTouch, this.option.capture);
        this.removeEventListeners();
    };
    InputHandler.prototype.cancel = function () {
        this._isDragging = this._isGrabbing = false;
        if (!this.option.always)
            this.removeEventListeners();
    };
    InputHandler.prototype.onMouse = function (e) {
        var mosuePointer = { x: e.pageX, y: e.pageY, z: 0, identifier: MOUSE_IDENTIFIER };
        if (this.isSyntheticEvent(mosuePointer))
            return;
        this.lastPointers = [mosuePointer];
        this.primaryPointer = mosuePointer;
        this.onPointer(e);
    };
    InputHandler.prototype.onTouch = function (e) {
        var _this = this;
        var length = e.changedTouches.length;
        if (length < 1)
            return;
        this.lastPointers = [];
        for (var i = 0; i < length; i++) {
            var touch = e.changedTouches[i];
            var touchPointer = { x: touch.pageX, y: touch.pageY, z: 0, identifier: touch.identifier };
            this.lastPointers.push(touchPointer);
        }
        if (e.type === 'touchstart') {
            this.primaryPointer = this.lastPointers[0];
        }
        else {
            var changedTouches = Array.from(e.changedTouches);
            var touch = changedTouches.find(function (touch) { return touch.identifier === _this.primaryPointer.identifier; });
            if (touch == null) {
                var isTouchContinues = Array.from(e.touches).find(function (touch) { return touch.identifier === _this.primaryPointer.identifier; }) != null;
                if (!isTouchContinues) {
                    // タッチを追跡できなくなったら終了
                    if (this.onEnd)
                        this.onEnd(e);
                    this.cancel();
                }
                return;
            }
            var touchPointer = { x: touch.pageX, y: touch.pageY, z: 0, identifier: touch.identifier };
            this.primaryPointer = touchPointer;
        }
        this.onPointer(e);
    };
    InputHandler.prototype.onPointer = function (e) {
        switch (e.type) {
            case 'mousedown':
            case 'touchstart':
                this._isGrabbing = true;
                this._isDragging = false;
                this.addEventListeners();
                if (this.onStart)
                    this.onStart(e);
                break;
            case 'mousemove':
            case 'touchmove':
                if (this.onMove)
                    this.onMove(e);
                this._isDragging = this._isGrabbing;
                break;
            default:
                if (this.onEnd)
                    this.onEnd(e);
                this.cancel();
                break;
        }
    };
    InputHandler.prototype.onMenu = function (e) {
        if (this.onContextMenu)
            this.onContextMenu(e);
    };
    InputHandler.prototype.isSyntheticEvent = function (mosuePointer, threshold) {
        var e_1, _a;
        if (threshold === void 0) { threshold = 15; }
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.lastPointers), _c = _b.next(); !_c.done; _c = _b.next()) {
                var pointer = _c.value;
                if (pointer.identifier === mosuePointer.identifier)
                    continue;
                var distance = Math.pow((mosuePointer.x - pointer.x), 2) + Math.pow((mosuePointer.y - pointer.y), 2);
                if (distance < Math.pow(threshold, 2)) {
                    return true;
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return false;
    };
    InputHandler.prototype.addEventListeners = function () {
        var option = {
            capture: this.option.capture,
            passive: this.option.passive
        };
        this.target.ownerDocument.addEventListener('mousemove', this.callbackOnMouse, option);
        this.target.ownerDocument.addEventListener('mouseup', this.callbackOnMouse, option);
        this.target.ownerDocument.addEventListener('touchmove', this.callbackOnTouch, option);
        this.target.ownerDocument.addEventListener('touchend', this.callbackOnTouch, option);
        this.target.ownerDocument.addEventListener('touchcancel', this.callbackOnTouch, option);
        this.target.ownerDocument.addEventListener('contextmenu', this.callbackOnMenu, option);
        this.target.ownerDocument.addEventListener('drop', this.callbackOnMouse, option);
    };
    InputHandler.prototype.removeEventListeners = function () {
        var option = {
            capture: this.option.capture
        };
        this.target.ownerDocument.removeEventListener('mousemove', this.callbackOnMouse, option);
        this.target.ownerDocument.removeEventListener('mouseup', this.callbackOnMouse, option);
        this.target.ownerDocument.removeEventListener('touchmove', this.callbackOnTouch, option);
        this.target.ownerDocument.removeEventListener('touchend', this.callbackOnTouch, option);
        this.target.ownerDocument.removeEventListener('touchcancel', this.callbackOnTouch, option);
        this.target.ownerDocument.removeEventListener('contextmenu', this.callbackOnMenu, option);
        this.target.ownerDocument.removeEventListener('drop', this.callbackOnMouse, option);
    };
    return InputHandler;
}());



/***/ }),

/***/ "9FhF":
/*!*************************************************!*\
  !*** ./src/app/service/context-menu.service.ts ***!
  \*************************************************/
/*! exports provided: ContextMenuType, ContextMenuSeparator, ContextMenuService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextMenuType", function() { return ContextMenuType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextMenuSeparator", function() { return ContextMenuSeparator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextMenuService", function() { return ContextMenuService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");

var ContextMenuType;
(function (ContextMenuType) {
    ContextMenuType["ACTION"] = "action";
    ContextMenuType["SEPARATOR"] = "separator";
})(ContextMenuType || (ContextMenuType = {}));
var ContextMenuSeparator = {
    name: '',
    enabled: true,
    type: ContextMenuType.SEPARATOR
};
var ContextMenuService = /** @class */ (function () {
    function ContextMenuService(componentFactoryResolver) {
        this.componentFactoryResolver = componentFactoryResolver;
        this.title = '';
        this.actions = [];
        this.position = { x: 0, y: 0 };
    }
    Object.defineProperty(ContextMenuService.prototype, "isShow", {
        get: function () {
            return this.panelComponentRef ? true : false;
        },
        enumerable: false,
        configurable: true
    });
    ContextMenuService.prototype.open = function (position, actions, title, parentViewContainerRef) {
        this.close();
        if (!parentViewContainerRef) {
            parentViewContainerRef = ContextMenuService.defaultParentViewContainerRef;
            console.log('Context Open');
        }
        var panelComponentRef;
        var injector = parentViewContainerRef.injector;
        var panelComponentFactory = this.componentFactoryResolver.resolveComponentFactory(ContextMenuService.ContextMenuComponentClass);
        panelComponentRef = parentViewContainerRef.createComponent(panelComponentFactory, parentViewContainerRef.length, injector);
        var childPanelService = panelComponentRef.injector.get(ContextMenuService);
        childPanelService.panelComponentRef = panelComponentRef;
        if (actions) {
            childPanelService.actions = actions;
        }
        if (position) {
            childPanelService.position.x = position.x;
            childPanelService.position.y = position.y;
        }
        childPanelService.title = title != null ? title : '';
        panelComponentRef.onDestroy(function () {
            childPanelService.panelComponentRef = null;
        });
    };
    ContextMenuService.prototype.close = function () {
        if (this.panelComponentRef) {
            this.panelComponentRef.destroy();
            this.panelComponentRef = null;
        }
    };
    ContextMenuService.ContextMenuComponentClass = null;
    ContextMenuService.ɵfac = function ContextMenuService_Factory(t) { return new (t || ContextMenuService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ComponentFactoryResolver"])); };
    ContextMenuService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: ContextMenuService, factory: ContextMenuService.ɵfac });
    return ContextMenuService;
}());



/***/ }),

/***/ "9Fxf":
/*!********************************************************!*\
  !*** ./src/app/class/core/file-storage/canvas-util.ts ***!
  \********************************************************/
/*! exports provided: CanvasUtil */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CanvasUtil", function() { return CanvasUtil; });
var CanvasUtil;
(function (CanvasUtil) {
    /**
     * https://github.com/viliusle/Hermite-resize
     * Hermite resize - fast image resize/resample using Hermite filter. 1 cpu version!
     *
     * @param {HtmlElement} canvas
     * @param {int} width
     * @param {int} height
     * @param {boolean} resize_canvas if true, canvas will be resized. Optional.
     */
    function resize(canvas, width, height, resize_canvas) {
        var width_source = canvas.width;
        var height_source = canvas.height;
        width = Math.round(width);
        height = Math.round(height);
        var ratio_w = width_source / width;
        var ratio_h = height_source / height;
        var ratio_w_half = Math.ceil(ratio_w / 2);
        var ratio_h_half = Math.ceil(ratio_h / 2);
        var ctx = canvas.getContext('2d');
        var img = ctx.getImageData(0, 0, width_source, height_source);
        var img2 = ctx.createImageData(width, height);
        var data = img.data;
        var data2 = img2.data;
        for (var j = 0; j < height; j++) {
            for (var i = 0; i < width; i++) {
                var x2 = (i + j * width) * 4;
                var weight = 0;
                var weights = 0;
                var weights_alpha = 0;
                var gx_r = 0;
                var gx_g = 0;
                var gx_b = 0;
                var gx_a = 0;
                var center_y = (j + 0.5) * ratio_h;
                var yy_start = Math.floor(j * ratio_h);
                var yy_stop = Math.ceil((j + 1) * ratio_h);
                for (var yy = yy_start; yy < yy_stop; yy++) {
                    var dy = Math.abs(center_y - (yy + 0.5)) / ratio_h_half;
                    var center_x = (i + 0.5) * ratio_w;
                    var w0 = dy * dy; //pre-calc part of w
                    var xx_start = Math.floor(i * ratio_w);
                    var xx_stop = Math.ceil((i + 1) * ratio_w);
                    for (var xx = xx_start; xx < xx_stop; xx++) {
                        var dx = Math.abs(center_x - (xx + 0.5)) / ratio_w_half;
                        var w = Math.sqrt(w0 + dx * dx);
                        if (w >= 1) {
                            //pixel too far
                            continue;
                        }
                        //hermite filter
                        weight = 2 * w * w * w - 3 * w * w + 1;
                        var pos_x = 4 * (xx + yy * width_source);
                        //alpha
                        gx_a += weight * data[pos_x + 3];
                        weights_alpha += weight;
                        //colors
                        if (data[pos_x + 3] < 255)
                            weight = weight * data[pos_x + 3] / 250;
                        gx_r += weight * data[pos_x];
                        gx_g += weight * data[pos_x + 1];
                        gx_b += weight * data[pos_x + 2];
                        weights += weight;
                    }
                }
                data2[x2] = gx_r / weights;
                data2[x2 + 1] = gx_g / weights;
                data2[x2 + 2] = gx_b / weights;
                data2[x2 + 3] = gx_a / weights_alpha;
            }
        }
        //clear and resize canvas
        if (resize_canvas === true) {
            canvas.width = width;
            canvas.height = height;
        }
        else {
            ctx.clearRect(0, 0, width_source, height_source);
        }
        //draw
        ctx.putImageData(img2, 0, 0);
    }
    CanvasUtil.resize = resize;
})(CanvasUtil || (CanvasUtil = {}));


/***/ }),

/***/ "9ht1":
/*!**************************************************************!*\
  !*** ./src/app/class/core/system/util/resettable-timeout.ts ***!
  \**************************************************************/
/*! exports provided: ResettableTimeout */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResettableTimeout", function() { return ResettableTimeout; });
var ResettableTimeout = /** @class */ (function () {
    function ResettableTimeout(callback, ms) {
        this.timerMilliSecond = 0;
        this.timeoutDate = 0;
        this.isStopped = false;
        this.callback = callback;
        this.timerMilliSecond = ms;
        this.reset();
    }
    Object.defineProperty(ResettableTimeout.prototype, "isActive", {
        get: function () { return this.timeoutTimer != null; },
        enumerable: false,
        configurable: true
    });
    ResettableTimeout.prototype.stop = function () {
        this.isStopped = true;
    };
    ResettableTimeout.prototype.clear = function () {
        this.callback = null;
        this.timerMilliSecond = 0;
        this.timeoutDate = 0;
        if (this.timeoutTimer)
            clearTimeout(this.timeoutTimer);
        this.timeoutTimer = null;
        this.isStopped = false;
    };
    ResettableTimeout.prototype.reset = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (args.length === 1) {
            this.timerMilliSecond = args[0];
        }
        else if (1 < args.length) {
            this.callback = args[0];
            this.timerMilliSecond = args[1];
        }
        this.isStopped = false;
        var oldTimeoutDate = this.timeoutDate;
        this.timeoutDate = performance.now() + this.timerMilliSecond;
        if (this.timeoutTimer && oldTimeoutDate <= this.timeoutDate)
            return;
        this.setTimeout();
    };
    ResettableTimeout.prototype.setTimeout = function () {
        var _this = this;
        if (this.timeoutTimer)
            clearTimeout(this.timeoutTimer);
        this.timeoutTimer = null;
        if (!this.callback)
            return;
        this.timeoutTimer = setTimeout(function () {
            _this.timeoutTimer = null;
            if (_this.isStopped)
                return;
            if (performance.now() < _this.timeoutDate) {
                _this.setTimeout();
            }
            else {
                if (_this.callback)
                    _this.callback();
            }
        }, this.timeoutDate - performance.now());
    };
    return ResettableTimeout;
}());



/***/ }),

/***/ "AFBa":
/*!****************************************************!*\
  !*** ./src/app/service/tabletop-action.service.ts ***!
  \****************************************************/
/*! exports provided: TabletopActionService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabletopActionService", function() { return TabletopActionService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _udonarium_card__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/card */ "jiu3");
/* harmony import */ var _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/card-stack */ "23G+");
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/dice-symbol */ "l22b");
/* harmony import */ var _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @udonarium/game-character */ "M/aK");
/* harmony import */ var _udonarium_game_table__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @udonarium/game-table */ "RDF6");
/* harmony import */ var _udonarium_game_table_mask__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @udonarium/game-table-mask */ "AyjR");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var _udonarium_table_selecter__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @udonarium/table-selecter */ "GvTa");
/* harmony import */ var _udonarium_terrain__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @udonarium/terrain */ "gKYc");
/* harmony import */ var _udonarium_text_note__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @udonarium/text-note */ "WeD8");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/core */ "fXoL");
















var TabletopActionService = /** @class */ (function () {
    function TabletopActionService() {
    }
    TabletopActionService.prototype.createGameCharacter = function (position) {
        var character = _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"].create('新しいキャラクター', 1, '');
        character.location.x = position.x - 25;
        character.location.y = position.y - 25;
        character.posZ = position.z;
        return character;
    };
    TabletopActionService.prototype.createGameTableMask = function (position) {
        var viewTable = this.getViewTable();
        if (!viewTable)
            return;
        var tableMask = _udonarium_game_table_mask__WEBPACK_IMPORTED_MODULE_10__["GameTableMask"].create('マップマスク', 5, 5, 100);
        tableMask.location.x = position.x - 25;
        tableMask.location.y = position.y - 25;
        tableMask.posZ = position.z;
        viewTable.appendChild(tableMask);
        return tableMask;
    };
    TabletopActionService.prototype.createTerrain = function (position) {
        var url = './assets/images/tex.jpg';
        var image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_4__["ImageStorage"].instance.get(url);
        if (!image)
            image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_4__["ImageStorage"].instance.add(url);
        var viewTable = this.getViewTable();
        if (!viewTable)
            return;
        var terrain = _udonarium_terrain__WEBPACK_IMPORTED_MODULE_13__["Terrain"].create('地形', 2, 2, 2, image.identifier, image.identifier);
        terrain.location.x = position.x - 50;
        terrain.location.y = position.y - 50;
        terrain.posZ = position.z;
        viewTable.appendChild(terrain);
        return terrain;
    };
    TabletopActionService.prototype.createTextNote = function (position) {
        var textNote = _udonarium_text_note__WEBPACK_IMPORTED_MODULE_14__["TextNote"].create('共有メモ', 'テキストを入力してください', 5, 4, 3);
        textNote.location.x = position.x;
        textNote.location.y = position.y;
        textNote.posZ = position.z;
        return textNote;
    };
    TabletopActionService.prototype.createDiceSymbol = function (position, name, diceType, imagePathPrefix) {
        var diceSymbol = _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_7__["DiceSymbol"].create(name, diceType, 1);
        var image = null;
        diceSymbol.faces.forEach(function (face) {
            var url = "./assets/images/dice/" + imagePathPrefix + "/" + imagePathPrefix + "[" + face + "].png";
            image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_4__["ImageStorage"].instance.get(url);
            if (!image) {
                image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_4__["ImageStorage"].instance.add(url);
            }
            diceSymbol.imageDataElement.getFirstElementByName(face).value = image.identifier;
        });
        diceSymbol.location.x = position.x - 25;
        diceSymbol.location.y = position.y - 25;
        diceSymbol.posZ = position.z;
        return diceSymbol;
    };
    TabletopActionService.prototype.createTrump = function (position) {
        var e_1, _a, e_2, _b;
        var cardStack = _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_2__["CardStack"].create('トランプ山札');
        cardStack.location.x = position.x - 25;
        cardStack.location.y = position.y - 25;
        cardStack.posZ = position.z;
        var back = './assets/images/trump/z02.gif';
        if (!_udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_4__["ImageStorage"].instance.get(back)) {
            _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_4__["ImageStorage"].instance.add(back);
        }
        var suits = ['c', 'd', 'h', 's'];
        var trumps = [];
        try {
            for (var suits_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(suits), suits_1_1 = suits_1.next(); !suits_1_1.done; suits_1_1 = suits_1.next()) {
                var suit = suits_1_1.value;
                for (var i = 1; i <= 13; i++) {
                    trumps.push(suit + (('00' + i).slice(-2)));
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (suits_1_1 && !suits_1_1.done && (_a = suits_1.return)) _a.call(suits_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        trumps.push('x01');
        trumps.push('x02');
        try {
            for (var trumps_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(trumps), trumps_1_1 = trumps_1.next(); !trumps_1_1.done; trumps_1_1 = trumps_1.next()) {
                var trump = trumps_1_1.value;
                var url = './assets/images/trump/' + trump + '.gif';
                if (!_udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_4__["ImageStorage"].instance.get(url)) {
                    _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_4__["ImageStorage"].instance.add(url);
                }
                var card = _udonarium_card__WEBPACK_IMPORTED_MODULE_1__["Card"].create('カード', url, back);
                cardStack.putOnBottom(card);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (trumps_1_1 && !trumps_1_1.done && (_b = trumps_1.return)) _b.call(trumps_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        return cardStack;
    };
    TabletopActionService.prototype.makeDefaultTable = function () {
        var tableSelecter = new _udonarium_table_selecter__WEBPACK_IMPORTED_MODULE_12__["TableSelecter"]('tableSelecter');
        tableSelecter.initialize();
        var gameTable = new _udonarium_game_table__WEBPACK_IMPORTED_MODULE_9__["GameTable"]('gameTable');
        var testBgFile = null;
        var bgFileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_3__["ImageFile"].createEmpty('testTableBackgroundImage_image').toContext();
        bgFileContext.url = './assets/images/BG10a_80.jpg';
        testBgFile = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_4__["ImageStorage"].instance.add(bgFileContext);
        gameTable.name = '最初のテーブル';
        gameTable.imageIdentifier = testBgFile.identifier;
        gameTable.width = 20;
        gameTable.height = 15;
        gameTable.initialize();
        tableSelecter.viewTableIdentifier = gameTable.identifier;
    };
    TabletopActionService.prototype.makeDefaultTabletopObjects = function () {
        var testCharacter = null;
        var testFile = null;
        var fileContext = null;
        testCharacter = new _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]('testCharacter_1');
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_3__["ImageFile"].createEmpty('testCharacter_1_image').toContext();
        fileContext.url = './assets/images/mon_052.gif';
        testFile = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_4__["ImageStorage"].instance.add(fileContext);
        testCharacter.location.x = 5 * 50;
        testCharacter.location.y = 9 * 50;
        testCharacter.initialize();
        testCharacter.createTestGameDataElement('モンスターA', 1, testFile.identifier);
        testCharacter = new _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]('testCharacter_2');
        testCharacter.location.x = 8 * 50;
        testCharacter.location.y = 8 * 50;
        testCharacter.initialize();
        testCharacter.createTestGameDataElement('モンスターB', 1, testFile.identifier);
        testCharacter = new _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]('testCharacter_3');
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_3__["ImageFile"].createEmpty('testCharacter_3_image').toContext();
        fileContext.url = './assets/images/mon_128.gif';
        testFile = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_4__["ImageStorage"].instance.add(fileContext);
        testCharacter.location.x = 4 * 50;
        testCharacter.location.y = 2 * 50;
        testCharacter.initialize();
        testCharacter.createTestGameDataElement('モンスターC', 3, testFile.identifier);
        testCharacter = new _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]('testCharacter_4');
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_3__["ImageFile"].createEmpty('testCharacter_4_image').toContext();
        fileContext.url = './assets/images/mon_150.gif';
        testFile = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_4__["ImageStorage"].instance.add(fileContext);
        testCharacter.location.x = 6 * 50;
        testCharacter.location.y = 11 * 50;
        testCharacter.initialize();
        testCharacter.createTestGameDataElement('キャラクターA', 1, testFile.identifier);
        testCharacter = new _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]('testCharacter_5');
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_3__["ImageFile"].createEmpty('testCharacter_5_image').toContext();
        fileContext.url = './assets/images/mon_211.gif';
        testFile = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_4__["ImageStorage"].instance.add(fileContext);
        testCharacter.location.x = 12 * 50;
        testCharacter.location.y = 12 * 50;
        testCharacter.initialize();
        testCharacter.createTestGameDataElement('キャラクターB', 1, testFile.identifier);
        testCharacter = new _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]('testCharacter_6');
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_3__["ImageFile"].createEmpty('testCharacter_6_image').toContext();
        fileContext.url = './assets/images/mon_135.gif';
        testFile = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_4__["ImageStorage"].instance.add(fileContext);
        testCharacter.initialize();
        testCharacter.location.x = 5 * 50;
        testCharacter.location.y = 13 * 50;
        testCharacter.createTestGameDataElement('キャラクターC', 1, testFile.identifier);
    };
    TabletopActionService.prototype.makeDefaultContextMenuActions = function (position) {
        return [
            this.getCreateCharacterMenu(position),
            this.getCreateTableMaskMenu(position),
            this.getCreateTerrainMenu(position),
            this.getCreateTextNoteMenu(position),
            this.getCreateTrumpMenu(position),
            this.getCreateDiceSymbolMenu(position),
        ];
    };
    TabletopActionService.prototype.getCreateCharacterMenu = function (position) {
        var _this = this;
        return {
            name: 'キャラクターを作成',
            action: function () {
                var character = _this.createGameCharacter(position);
                _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: character.identifier, className: character.aliasName });
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_11__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_11__["PresetSound"].piecePut);
            }
        };
    };
    TabletopActionService.prototype.getCreateTableMaskMenu = function (position) {
        var _this = this;
        return {
            name: 'マップマスクを作成',
            action: function () {
                _this.createGameTableMask(position);
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_11__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_11__["PresetSound"].cardPut);
            }
        };
    };
    TabletopActionService.prototype.getCreateTerrainMenu = function (position) {
        var _this = this;
        return {
            name: '地形を作成',
            action: function () {
                _this.createTerrain(position);
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_11__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_11__["PresetSound"].blockPut);
            }
        };
    };
    TabletopActionService.prototype.getCreateTextNoteMenu = function (position) {
        var _this = this;
        return {
            name: '共有メモを作成',
            action: function () {
                _this.createTextNote(position);
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_11__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_11__["PresetSound"].cardPut);
            }
        };
    };
    TabletopActionService.prototype.getCreateTrumpMenu = function (position) {
        var _this = this;
        return {
            name: 'トランプの山札を作成',
            action: function () {
                _this.createTrump(position);
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_11__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_11__["PresetSound"].cardPut);
            }
        };
    };
    TabletopActionService.prototype.getCreateDiceSymbolMenu = function (position) {
        var _this = this;
        var dices = [
            { menuName: 'D4', diceName: 'D4', type: _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_7__["DiceType"].D4, imagePathPrefix: '4_dice' },
            { menuName: 'D6', diceName: 'D6', type: _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_7__["DiceType"].D6, imagePathPrefix: '6_dice' },
            { menuName: 'D8', diceName: 'D8', type: _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_7__["DiceType"].D8, imagePathPrefix: '8_dice' },
            { menuName: 'D10', diceName: 'D10', type: _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_7__["DiceType"].D10, imagePathPrefix: '10_dice' },
            { menuName: 'D10 (00-90)', diceName: 'D10', type: _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_7__["DiceType"].D10_10TIMES, imagePathPrefix: '100_dice' },
            { menuName: 'D12', diceName: 'D12', type: _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_7__["DiceType"].D12, imagePathPrefix: '12_dice' },
            { menuName: 'D20', diceName: 'D20', type: _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_7__["DiceType"].D20, imagePathPrefix: '20_dice' },
        ];
        var subMenus = [];
        dices.forEach(function (item) {
            subMenus.push({
                name: item.menuName,
                action: function () {
                    _this.createDiceSymbol(position, item.diceName, item.type, item.imagePathPrefix);
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_11__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_11__["PresetSound"].dicePut);
                }
            });
        });
        return { name: 'ダイスを作成', action: null, subActions: subMenus };
    };
    TabletopActionService.prototype.getViewTable = function () {
        var tableSelecter = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get('tableSelecter');
        return tableSelecter ? tableSelecter.viewTable : null;
    };
    TabletopActionService.ɵfac = function TabletopActionService_Factory(t) { return new (t || TabletopActionService)(); };
    TabletopActionService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_15__["ɵɵdefineInjectable"]({ token: TabletopActionService, factory: TabletopActionService.ɵfac, providedIn: 'root' });
    return TabletopActionService;
}());



/***/ }),

/***/ "AHLi":
/*!**********************************************************************!*\
  !*** ./src/app/component/game-character/game-character.component.ts ***!
  \**********************************************************************/
/*! exports provided: GameCharacterComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameCharacterComponent", function() { return GameCharacterComponent; });
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/animations */ "R0Ic");
/* harmony import */ var _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var component_chat_palette_chat_palette_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! component/chat-palette/chat-palette.component */ "jC/+");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var directive_movable_directive__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! directive/movable.directive */ "+Kyd");
/* harmony import */ var directive_rotable_directive__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! directive/rotable.directive */ "3jYK");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");
















var _c0 = function (a0) { return { "transform": a0 }; };
function GameCharacterComponent_div_14_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](1, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](3, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction1"](3, _c0, "translateX(-50%) translateX(" + ctx_r0.size * ctx_r0.gridSize / 2 + "px)"));
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate"](ctx_r0.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate"](ctx_r0.name);
} }
function GameCharacterComponent_img_15_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](0, "img", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](1, "safe");
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind2"](1, 1, ctx_r1.imageFile.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵsanitizeUrl"]);
} }
var GameCharacterComponent = /** @class */ (function () {
    function GameCharacterComponent(contextMenuService, panelService, changeDetector, pointerDeviceService) {
        this.contextMenuService = contextMenuService;
        this.panelService = panelService;
        this.changeDetector = changeDetector;
        this.pointerDeviceService = pointerDeviceService;
        this.gameCharacter = null;
        this.is3D = false;
        this.gridSize = 50;
        this.movableOption = {};
        this.rotableOption = {};
    }
    Object.defineProperty(GameCharacterComponent.prototype, "name", {
        get: function () { return this.gameCharacter.name; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameCharacterComponent.prototype, "size", {
        get: function () { return this.adjustMinBounds(this.gameCharacter.size); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameCharacterComponent.prototype, "imageFile", {
        get: function () { return this.gameCharacter.imageFile; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameCharacterComponent.prototype, "rotate", {
        get: function () { return this.gameCharacter.rotate; },
        set: function (rotate) { this.gameCharacter.rotate = rotate; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameCharacterComponent.prototype, "roll", {
        get: function () { return this.gameCharacter.roll; },
        set: function (roll) { this.gameCharacter.roll = roll; },
        enumerable: false,
        configurable: true
    });
    GameCharacterComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(event.data.identifier);
            if (!_this.gameCharacter || !object)
                return;
            if (_this.gameCharacter === object || (object instanceof _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_1__["ObjectNode"] && _this.gameCharacter.contains(object))) {
                _this.changeDetector.markForCheck();
            }
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('UPDATE_FILE_RESOURE', -1000, function (event) {
            _this.changeDetector.markForCheck();
        });
        this.movableOption = {
            tabletopObject: this.gameCharacter,
            transformCssOffset: 'translateZ(1.0px)',
            colideLayers: ['terrain']
        };
        this.rotableOption = {
            tabletopObject: this.gameCharacter
        };
    };
    GameCharacterComponent.prototype.ngAfterViewInit = function () { };
    GameCharacterComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].unregister(this);
    };
    GameCharacterComponent.prototype.onDragstart = function (e) {
        console.log('Dragstart Cancel !!!!');
        e.stopPropagation();
        e.preventDefault();
    };
    GameCharacterComponent.prototype.onContextMenu = function (e) {
        var _this = this;
        e.stopPropagation();
        e.preventDefault();
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu)
            return;
        var position = this.pointerDeviceService.pointers[0];
        this.contextMenuService.open(position, [
            { name: '詳細を表示', action: function () { _this.showDetail(_this.gameCharacter); } },
            { name: 'チャットパレットを表示', action: function () { _this.showChatPalette(_this.gameCharacter); } },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_7__["ContextMenuSeparator"],
            {
                name: '共有イベントリに移動',
                action: function () {
                    _this.gameCharacter.setLocation('common');
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].piecePut);
                }
            },
            {
                name: '個人イベントリに移動',
                action: function () {
                    _this.gameCharacter.setLocation(_udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId);
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].piecePut);
                }
            },
            {
                name: '墓場に移動',
                action: function () {
                    _this.gameCharacter.setLocation('graveyard');
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].sweep);
                }
            },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_7__["ContextMenuSeparator"],
            {
                name: 'コピーを作る',
                action: function () {
                    var cloneObject = _this.gameCharacter.clone();
                    cloneObject.location.x += _this.gridSize;
                    cloneObject.location.y += _this.gridSize;
                    cloneObject.update();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].piecePut);
                }
            },
        ], this.name);
    };
    GameCharacterComponent.prototype.onMove = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].piecePick);
    };
    GameCharacterComponent.prototype.onMoved = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].piecePut);
    };
    GameCharacterComponent.prototype.adjustMinBounds = function (value, min) {
        if (min === void 0) { min = 0; }
        return value < min ? min : value;
    };
    GameCharacterComponent.prototype.showDetail = function (gameObject) {
        var coordinate = this.pointerDeviceService.pointers[0];
        var title = 'キャラクターシート';
        if (gameObject.name.length)
            title += ' - ' + gameObject.name;
        var option = { title: title, left: coordinate.x - 400, top: coordinate.y - 300, width: 800, height: 600 };
        var component = this.panelService.open(component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_6__["GameCharacterSheetComponent"], option);
        component.tabletopObject = gameObject;
    };
    GameCharacterComponent.prototype.showChatPalette = function (gameObject) {
        var coordinate = this.pointerDeviceService.pointers[0];
        var option = { left: coordinate.x - 250, top: coordinate.y - 175, width: 615, height: 350 };
        var component = this.panelService.open(component_chat_palette_chat_palette_component__WEBPACK_IMPORTED_MODULE_5__["ChatPaletteComponent"], option);
        component.character = gameObject;
    };
    GameCharacterComponent.ɵfac = function GameCharacterComponent_Factory(t) { return new (t || GameCharacterComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_7__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_9__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_8__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_10__["PointerDeviceService"])); };
    GameCharacterComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdefineComponent"]({ type: GameCharacterComponent, selectors: [["game-character"]], hostBindings: function GameCharacterComponent_HostBindings(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("dragstart", function GameCharacterComponent_dragstart_HostBindingHandler($event) { return ctx.onDragstart($event); })("contextmenu", function GameCharacterComponent_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });
        } }, inputs: { gameCharacter: "gameCharacter", is3D: "is3D" }, decls: 23, vars: 20, consts: [["appMovable", "", 1, "component", "is-3d", "is-grab", "is-pointer-events-none", 3, "movable.option", "movable.ondragstart", "movable.ondragend"], [1, "component-content", "is-3d"], ["appRotable", "", 1, "component-content", "is-3d", "is-pointer-events-auto", 3, "rotable.option", "rotable.ondragstart", "rotable.ondragend"], [1, "pedestal-inner"], [1, "pedestal-outer"], [1, "pedestal-grab", "rotate-grab"], [1, "pedestal-grab-border"], [1, "material-icons", "of-front"], [1, "material-icons", "of-back"], [1, "upright-transform", "is-fit-width", "is-3d"], ["appRotable", "", 1, "rotate-frame", "is-3d", 3, "rotable.value", "rotable.valueChange", "rotable.ondragstart", "rotable.ondragend"], [1, "rotate-inner", "is-3d"], ["class", "name-tag is-nowrap is-black-background is-3d", 3, "ngStyle", 4, "ngIf"], ["class", "image", 3, "src", 4, "ngIf"], [1, "grab-group"], [1, "rotate-grab", "rotate-grab-icon", "of-top", 3, "ngStyle"], [1, "material-icons"], [1, "rotate-grab", "rotate-grab-icon", "of-bottom", 3, "ngStyle"], [1, "name-tag", "is-nowrap", "is-black-background", "is-3d", 3, "ngStyle"], [1, "fornt-tag", "has-length-limit", "is-3d"], [1, "back-tag", "has-length-limit", "is-3d"], [1, "image", 3, "src"]], template: function GameCharacterComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("movable.ondragstart", function GameCharacterComponent_Template_div_movable_ondragstart_0_listener() { return ctx.onMove(); })("movable.ondragend", function GameCharacterComponent_Template_div_movable_ondragend_0_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](2, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("rotable.ondragstart", function GameCharacterComponent_Template_div_rotable_ondragstart_2_listener() { return ctx.onMove(); })("rotable.ondragend", function GameCharacterComponent_Template_div_rotable_ondragend_2_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](3, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](4, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](5, "div", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](6, "div", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](7, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](8, "autorenew");
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](9, "div", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](10, "autorenew");
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](11, "div", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](12, "div", 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("rotable.valueChange", function GameCharacterComponent_Template_div_rotable_valueChange_12_listener($event) { return ctx.roll = $event; })("rotable.ondragstart", function GameCharacterComponent_Template_div_rotable_ondragstart_12_listener() { return ctx.onMove(); })("rotable.ondragend", function GameCharacterComponent_Template_div_rotable_ondragend_12_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](13, "div", 11);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](14, GameCharacterComponent_div_14_Template, 5, 5, "div", 12);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](15, GameCharacterComponent_img_15_Template, 2, 4, "img", 13);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](16, "div", 14);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](17, "div", 15);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](18, "i", 16);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](19, "autorenew");
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](20, "div", 17);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](21, "i", 16);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](22, "autorenew");
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵstyleProp"]("width", ctx.size * ctx.gridSize, "px")("height", ctx.size * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("movable.option", ctx.movableOption);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("@bounceInOut", "in");
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("rotable.option", ctx.rotableOption);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](10);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵstyleProp"]("width", ctx.size * ctx.gridSize, "px")("height", ctx.size * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("rotable.value", ctx.roll);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", 0 < ctx.name.length);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", 0 < ctx.imageFile.url.length);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction1"](16, _c0, "translateX(-50%) translateX(" + ctx.size * ctx.gridSize / 2 + "px)"));
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction1"](18, _c0, "translateX(-50%) translateX(" + ctx.size * ctx.gridSize / 2 + "px"));
        } }, directives: [directive_movable_directive__WEBPACK_IMPORTED_MODULE_11__["MovableDirective"], directive_rotable_directive__WEBPACK_IMPORTED_MODULE_12__["RotableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_13__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_13__["NgStyle"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_14__["SafePipe"]], styles: [".is-grab[_ngcontent-%COMP%] {\n  cursor: grab;\n}\n\n.is-grabbing[_ngcontent-%COMP%] {\n  cursor: grabbing;\n}\n\n.is-3d[_ngcontent-%COMP%] {\n  transform-style: preserve-3d;\n}\n\n.is-transition[_ngcontent-%COMP%] {\n  transition: transform 132ms linear;\n}\n\n.is-pointer-events-none[_ngcontent-%COMP%] {\n  pointer-events: none;\n}\n\n.is-pointer-events-auto[_ngcontent-%COMP%] {\n  pointer-events: auto;\n}\n\n.component[_ngcontent-%COMP%] {\n  position: absolute;\n  height: 50px;\n  width: 50px;\n  -webkit-user-select: none;\n  user-select: none;\n  -moz-user-drag: none;\n  -webkit-user-drag: none;\n}\n\n.component-content[_ngcontent-%COMP%] {\n  width: 100%;\n  height: 100%;\n}\n\n.pedestal-grab[_ngcontent-%COMP%] {\n  z-index: -1;\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n  position: absolute;\n  top: -22px;\n  left: -6px;\n  height: calc(100% + 44px);\n  width: calc(100% + 12px);\n  cursor: default;\n  border-radius: 37px;\n}\n\n.pedestal-grab-border[_ngcontent-%COMP%] {\n  pointer-events: none;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  border-top: solid 28px #999;\n  border-left: solid 12px #999;\n  border-right: solid 12px #CCC;\n  border-bottom: solid 28px #CCC;\n  border-radius: 37px;\n}\n\n.pedestal-inner[_ngcontent-%COMP%] {\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  box-sizing: border-box;\n  border: solid 6px #FFCC80;\n  border-radius: 25px;\n}\n\n.pedestal-outer[_ngcontent-%COMP%] {\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  box-sizing: border-box;\n  border: solid 2px #212121;\n  border-radius: 25px;\n}\n\n.upright-transform[_ngcontent-%COMP%] {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  transform: rotateX(-90deg) translateY(-50%);\n}\n\n.is-fit-width[_ngcontent-%COMP%] {\n  height: auto;\n  width: 100%;\n}\n\n.fill-frame[_ngcontent-%COMP%] {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n\n.image[_ngcontent-%COMP%] {\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n\n  width: 100%;\n  height: auto;\n  vertical-align: bottom;\n}\n\n.name-tag[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  font-size: 15px;\n  padding: 3px 9px;\n  border-radius: 24px;\n  position: absolute;\n  top: -30px;\n}\n\n.rotate-frame[_ngcontent-%COMP%] {\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n\n.rotate-inner[_ngcontent-%COMP%] {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n\n  width: 100%;\n  height: auto;\n}\n\n.is-nowrap[_ngcontent-%COMP%] {\n  white-space: nowrap;\n}\n\n.is-black-background[_ngcontent-%COMP%] {\n  color: #CCC;\n  background-color: rgba(30, 30, 30, 0.8);\n}\n\n.fornt-tag[_ngcontent-%COMP%] {\n -webkit-backface-visibility: hidden;\n         backface-visibility: hidden;\n}\n\n.back-tag[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 3px;\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n  transform: rotateY(-180deg);\n}\n\n.has-length-limit[_ngcontent-%COMP%] {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 24em;\n}\n\n.rotate-grab-icon[_ngcontent-%COMP%] {\n  position: absolute;\n  width: 28px;\n  height: 28px;\n  box-sizing: border-box;\n  cursor: -moz-default;\n  cursor: -webkit-default;\n  cursor: default;\n  z-index: 1;\n  padding: 2px;\n  background-color: #CCCCCC;\n  border-radius: 100%;\n  color: #444;\n  font-size: 8px;\n}\n\n.of-top[_ngcontent-%COMP%] {\n  top: -42px;\n}\n\n.of-bottom[_ngcontent-%COMP%] {\n  bottom: -30px;\n}\n\n.of-front[_ngcontent-%COMP%] {\n  position: absolute;\n  width: 24px;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  margin: auto;\n  color: #444;\n}\n\n.of-back[_ngcontent-%COMP%] {\n  position: absolute;\n  width: 24px;\n  top: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  color: #444;\n}\n\n.rotate-grab[_ngcontent-%COMP%] {\n  opacity: 0;\n}\n\n.component[_ngcontent-%COMP%]:hover   .rotate-grab[_ngcontent-%COMP%] {\n  opacity: 0.5;\n}\n\n.component[_ngcontent-%COMP%]:active   .rotate-grab[_ngcontent-%COMP%] {\n  opacity: 0;\n}\n\n.component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:hover, .component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:active {\n  opacity: 1;\n}\n\n.material-icons[_ngcontent-%COMP%] {\n  display: none;\n}\n\n.component[_ngcontent-%COMP%]:hover   .material-icons[_ngcontent-%COMP%], .component[_ngcontent-%COMP%]:active   .material-icons[_ngcontent-%COMP%] {\n  display: inline;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUtY2hhcmFjdGVyLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFHRSxZQUFZO0FBQ2Q7O0FBRUE7RUFHRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFFRSw0QkFBNEI7QUFDOUI7O0FBRUE7RUFFRSxrQ0FBa0M7QUFDcEM7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLFdBQVc7RUFHWCx5QkFBeUI7RUFDekIsaUJBQWlCO0VBQ2pCLG9CQUFvQjtFQUNwQix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBO0VBQ0UsV0FBVztFQUNYLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFDM0Isa0JBQWtCO0VBQ2xCLFVBQVU7RUFDVixVQUFVO0VBQ1YseUJBQXlCO0VBQ3pCLHdCQUF3QjtFQUN4QixlQUFlO0VBQ2YsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0Usb0JBQW9CO0VBQ3BCLFdBQVc7RUFDWCxZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLDJCQUEyQjtFQUMzQiw0QkFBNEI7RUFDNUIsNkJBQTZCO0VBQzdCLDhCQUE4QjtFQUM5QixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxtQ0FBMkI7VUFBM0IsMkJBQTJCO0VBQzNCLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1osV0FBVztFQUNYLHNCQUFzQjtFQUN0Qix5QkFBeUI7RUFDekIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsbUNBQTJCO1VBQTNCLDJCQUEyQjtFQUMzQixrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIseUJBQXlCO0VBQ3pCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7RUFDUiwyQ0FBMkM7QUFDN0M7O0FBRUE7RUFDRSxZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFNBQVM7RUFDVCxPQUFPO0VBQ1AsUUFBUTtBQUNWOztBQUVBO0VBQ0UsU0FBUztFQUNULE9BQU87RUFDUCxRQUFRO0VBQ1IsWUFBWTs7RUFFWixXQUFXO0VBQ1gsWUFBWTtFQUNaLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQixrQkFBa0I7RUFDbEIsVUFBVTtBQUNaOztBQUVBO0VBQ0UsU0FBUztFQUNULE9BQU87RUFDUCxRQUFRO0FBQ1Y7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsU0FBUztFQUNULE9BQU87RUFDUCxRQUFROztFQUVSLFdBQVc7RUFDWCxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsdUNBQXVDO0FBQ3pDOztBQUVBO0NBQ0MsbUNBQTJCO1NBQTNCLDJCQUEyQjtBQUM1Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixRQUFRO0VBQ1IsbUNBQTJCO1VBQTNCLDJCQUEyQjtFQUMzQiwyQkFBMkI7QUFDN0I7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixlQUFlO0FBQ2pCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLG9CQUFvQjtFQUNwQix1QkFBdUI7RUFDdkIsZUFBZTtFQUNmLFVBQVU7RUFDVixZQUFZO0VBQ1oseUJBQXlCO0VBQ3pCLG1CQUFtQjtFQUNuQixXQUFXO0VBQ1gsY0FBYztBQUNoQjs7QUFFQTtFQUNFLFVBQVU7QUFDWjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsT0FBTztFQUNQLFFBQVE7RUFDUixTQUFTO0VBQ1QsWUFBWTtFQUNaLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsTUFBTTtFQUNOLE9BQU87RUFDUCxRQUFRO0VBQ1IsWUFBWTtFQUNaLFdBQVc7QUFDYjs7QUFFQTtFQUNFLFVBQVU7QUFDWjs7QUFFQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLFVBQVU7QUFDWjs7QUFFQTtFQUNFLFVBQVU7QUFDWjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGVBQWU7QUFDakIiLCJmaWxlIjoiZ2FtZS1jaGFyYWN0ZXIuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pcy1ncmFiIHtcbiAgY3Vyc29yOiAtbW96LWdyYWI7XG4gIGN1cnNvcjogLXdlYmtpdC1ncmFiO1xuICBjdXJzb3I6IGdyYWI7XG59XG5cbi5pcy1ncmFiYmluZyB7XG4gIGN1cnNvcjogLW1vei1ncmFiYmluZztcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWJiaW5nO1xuICBjdXJzb3I6IGdyYWJiaW5nO1xufVxuXG4uaXMtM2Qge1xuICAtd2Via2l0LXRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XG4gIHRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XG59XG5cbi5pcy10cmFuc2l0aW9uIHtcbiAgLXdlYmtpdC10cmFuc2l0aW9uOiAtd2Via2l0LXRyYW5zZm9ybSAxMzJtcyBsaW5lYXI7XG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAxMzJtcyBsaW5lYXI7XG59XG5cbi5pcy1wb2ludGVyLWV2ZW50cy1ub25lIHtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG5cbi5pcy1wb2ludGVyLWV2ZW50cy1hdXRvIHtcbiAgcG9pbnRlci1ldmVudHM6IGF1dG87XG59XG5cbi5jb21wb25lbnQge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGhlaWdodDogNTBweDtcbiAgd2lkdGg6IDUwcHg7XG5cbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIC1tb3otdXNlci1kcmFnOiBub25lO1xuICAtd2Via2l0LXVzZXItZHJhZzogbm9uZTtcbn1cblxuLmNvbXBvbmVudC1jb250ZW50IHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbn1cblxuLnBlZGVzdGFsLWdyYWIge1xuICB6LWluZGV4OiAtMTtcbiAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogLTIycHg7XG4gIGxlZnQ6IC02cHg7XG4gIGhlaWdodDogY2FsYygxMDAlICsgNDRweCk7XG4gIHdpZHRoOiBjYWxjKDEwMCUgKyAxMnB4KTtcbiAgY3Vyc29yOiBkZWZhdWx0O1xuICBib3JkZXItcmFkaXVzOiAzN3B4O1xufVxuXG4ucGVkZXN0YWwtZ3JhYi1ib3JkZXIge1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyLXRvcDogc29saWQgMjhweCAjOTk5O1xuICBib3JkZXItbGVmdDogc29saWQgMTJweCAjOTk5O1xuICBib3JkZXItcmlnaHQ6IHNvbGlkIDEycHggI0NDQztcbiAgYm9yZGVyLWJvdHRvbTogc29saWQgMjhweCAjQ0NDO1xuICBib3JkZXItcmFkaXVzOiAzN3B4O1xufVxuXG4ucGVkZXN0YWwtaW5uZXIge1xuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiBzb2xpZCA2cHggI0ZGQ0M4MDtcbiAgYm9yZGVyLXJhZGl1czogMjVweDtcbn1cblxuLnBlZGVzdGFsLW91dGVyIHtcbiAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGhlaWdodDogMTAwJTtcbiAgd2lkdGg6IDEwMCU7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlcjogc29saWQgMnB4ICMyMTIxMjE7XG4gIGJvcmRlci1yYWRpdXM6IDI1cHg7XG59XG5cbi51cHJpZ2h0LXRyYW5zZm9ybSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgdHJhbnNmb3JtOiByb3RhdGVYKC05MGRlZykgdHJhbnNsYXRlWSgtNTAlKTtcbn1cblxuLmlzLWZpdC13aWR0aCB7XG4gIGhlaWdodDogYXV0bztcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5maWxsLWZyYW1lIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBib3R0b206IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xufVxuXG4uaW1hZ2Uge1xuICBib3R0b206IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBtYXJnaW46IGF1dG87XG5cbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogYXV0bztcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbn1cblxuLm5hbWUtdGFnIHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgZm9udC1zaXplOiAxNXB4O1xuICBwYWRkaW5nOiAzcHggOXB4O1xuICBib3JkZXItcmFkaXVzOiAyNHB4O1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogLTMwcHg7XG59XG5cbi5yb3RhdGUtZnJhbWUge1xuICBib3R0b206IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xufVxuXG4ucm90YXRlLWlubmVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBib3R0b206IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuXG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IGF1dG87XG59XG5cbi5pcy1ub3dyYXAge1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xufVxuXG4uaXMtYmxhY2stYmFja2dyb3VuZCB7XG4gIGNvbG9yOiAjQ0NDO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDMwLCAzMCwgMzAsIDAuOCk7XG59XG5cbi5mb3JudC10YWcge1xuIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbn1cblxuLmJhY2stdGFnIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDNweDtcbiAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuO1xuICB0cmFuc2Zvcm06IHJvdGF0ZVkoLTE4MGRlZyk7XG59XG5cbi5oYXMtbGVuZ3RoLWxpbWl0IHtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gIG1heC13aWR0aDogMjRlbTtcbn1cblxuLnJvdGF0ZS1ncmFiLWljb24ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiAyOHB4O1xuICBoZWlnaHQ6IDI4cHg7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGN1cnNvcjogLW1vei1kZWZhdWx0O1xuICBjdXJzb3I6IC13ZWJraXQtZGVmYXVsdDtcbiAgY3Vyc29yOiBkZWZhdWx0O1xuICB6LWluZGV4OiAxO1xuICBwYWRkaW5nOiAycHg7XG4gIGJhY2tncm91bmQtY29sb3I6ICNDQ0NDQ0M7XG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIGNvbG9yOiAjNDQ0O1xuICBmb250LXNpemU6IDhweDtcbn1cblxuLm9mLXRvcCB7XG4gIHRvcDogLTQycHg7XG59XG5cbi5vZi1ib3R0b20ge1xuICBib3R0b206IC0zMHB4O1xufVxuXG4ub2YtZnJvbnQge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiAyNHB4O1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgYm90dG9tOiAwO1xuICBtYXJnaW46IGF1dG87XG4gIGNvbG9yOiAjNDQ0O1xufVxuXG4ub2YtYmFjayB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDI0cHg7XG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIG1hcmdpbjogYXV0bztcbiAgY29sb3I6ICM0NDQ7XG59XG5cbi5yb3RhdGUtZ3JhYiB7XG4gIG9wYWNpdHk6IDA7XG59XG5cbi5jb21wb25lbnQ6aG92ZXIgLnJvdGF0ZS1ncmFiIHtcbiAgb3BhY2l0eTogMC41O1xufVxuXG4uY29tcG9uZW50OmFjdGl2ZSAucm90YXRlLWdyYWIge1xuICBvcGFjaXR5OiAwO1xufVxuXG4uY29tcG9uZW50IC5yb3RhdGUtZ3JhYjpob3ZlciwgLmNvbXBvbmVudCAucm90YXRlLWdyYWI6YWN0aXZlIHtcbiAgb3BhY2l0eTogMTtcbn1cblxuLm1hdGVyaWFsLWljb25zIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cblxuLmNvbXBvbmVudDpob3ZlciAubWF0ZXJpYWwtaWNvbnMsIC5jb21wb25lbnQ6YWN0aXZlIC5tYXRlcmlhbC1pY29ucyB7XG4gIGRpc3BsYXk6IGlubGluZTtcbn1cbiJdfQ== */"], data: { animation: [
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('bounceInOut', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('600ms ease', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0, 0, 0)', offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.5, 1.5, 1.5)', offset: 0.5 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0.75, 0.75, 0.75)', offset: 0.75 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.125, 1.125, 1.125)', offset: 0.875 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.0, 1.0, 1.0)', offset: 1.0 })
                        ]))
                    ]),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => void', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(100, Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0, 0, 0)' }))
                    ])
                ])
            ] }, changeDetection: 0 });
    return GameCharacterComponent;
}());



/***/ }),

/***/ "AsCv":
/*!************************************************************!*\
  !*** ./src/app/component/text-view/text-view.component.ts ***!
  \************************************************************/
/*! exports provided: TextViewComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextViewComponent", function() { return TextViewComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! service/modal.service */ "CE6K");



var TextViewComponent = /** @class */ (function () {
    function TextViewComponent(panelService, modalService) {
        this.panelService = panelService;
        this.modalService = modalService;
        this.text = '';
        this.title = '';
    }
    TextViewComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () {
            _this.panelService.title = _this.title;
            if (_this.modalService.option && _this.modalService.option.title != null) {
                _this.modalService.title = _this.modalService.option.title ? _this.modalService.option.title : '';
                _this.text = _this.modalService.option.text ? _this.modalService.option.text : '';
            }
        });
    };
    TextViewComponent.ɵfac = function TextViewComponent_Factory(t) { return new (t || TextViewComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_1__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_2__["ModalService"])); };
    TextViewComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: TextViewComponent, selectors: [["text-view"]], inputs: { text: "text", title: "title" }, decls: 3, vars: 1, consts: [[1, "text"]], template: function TextViewComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "pre", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx.text);
        } }, styles: [".text[_ngcontent-%COMP%] {\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", Verdana, Meiryo, sans-serif;\n  font-size: 12px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRleHQtdmlldy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsNkZBQTZGO0VBQzdGLGVBQWU7QUFDakIiLCJmaWxlIjoidGV4dC12aWV3LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudGV4dCB7XG4gIGZvbnQtZmFtaWx5OiAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsIFwiSGVsdmV0aWNhIE5ldWVcIiwgVmVyZGFuYSwgTWVpcnlvLCBzYW5zLXNlcmlmO1xuICBmb250LXNpemU6IDEycHg7XG59Il19 */"] });
    return TextViewComponent;
}());



/***/ }),

/***/ "AyjR":
/*!******************************************!*\
  !*** ./src/app/class/game-table-mask.ts ***!
  \******************************************/
/*! exports provided: GameTableMask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameTableMask", function() { return GameTableMask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _data_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./data-element */ "gkrD");
/* harmony import */ var _tabletop_object__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tabletop-object */ "e8gA");




var GameTableMask = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(GameTableMask, _super);
    function GameTableMask() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.isLock = false;
        return _this;
    }
    GameTableMask_1 = GameTableMask;
    Object.defineProperty(GameTableMask.prototype, "name", {
        get: function () { return this.getCommonValue('name', ''); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableMask.prototype, "width", {
        get: function () { return this.getCommonValue('width', 1); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableMask.prototype, "height", {
        get: function () { return this.getCommonValue('height', 1); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableMask.prototype, "opacity", {
        get: function () {
            var element = this.getElement('opacity', this.commonDataElement);
            var num = element ? element.currentValue / element.value : 1;
            return Number.isNaN(num) ? 1 : num;
        },
        enumerable: false,
        configurable: true
    });
    GameTableMask.create = function (name, width, height, opacity, identifier) {
        var object = null;
        if (identifier) {
            object = new GameTableMask_1(identifier);
        }
        else {
            object = new GameTableMask_1();
        }
        object.createDataElements();
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('name', name, {}, 'name_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('width', width, {}, 'width_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('height', height, {}, 'height_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('opacity', opacity, { type: 'numberResource', currentValue: opacity }, 'opacity_' + object.identifier));
        object.initialize();
        return object;
    };
    var GameTableMask_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTableMask.prototype, "isLock", void 0);
    GameTableMask = GameTableMask_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('table-mask')
    ], GameTableMask);
    return GameTableMask;
}(_tabletop_object__WEBPACK_IMPORTED_MODULE_3__["TabletopObject"]));



/***/ }),

/***/ "AytR":
/*!*****************************************!*\
  !*** ./src/environments/environment.ts ***!
  \*****************************************/
/*! exports provided: environment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "environment", function() { return environment; });
// This file can be replaced during build by using the `fileReplacements` array.
// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.
// The list of file replacements can be found in `angular.json`.
var environment = {
    production: false
};
/*
 * For easier debugging in development mode, you can import the following file
 * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.
 *
 * This import should be commented out in production mode because it will have a negative impact
 * on performance if an error is thrown.
 */
// import 'zone.js/dist/zone-error';  // Included with Angular CLI.


/***/ }),

/***/ "BLsz":
/*!**********************************************************************!*\
  !*** ./src/app/component/overview-panel/overview-panel.component.ts ***!
  \**********************************************************************/
/*! exports provided: OverviewPanelComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OverviewPanelComponent", function() { return OverviewPanelComponent; });
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/animations */ "R0Ic");
/* harmony import */ var _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_game_object_inventory_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! service/game-object-inventory.service */ "LjVp");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var directive_draggable_directive__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! directive/draggable.directive */ "z2Us");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");











var _c0 = ["draggablePanel"];
function OverviewPanelComponent_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainer"](0);
} }
function OverviewPanelComponent_ng_container_4_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainer"](0);
} }
var _c1 = function (a0) { return { card: a0 }; };
function OverviewPanelComponent_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, OverviewPanelComponent_ng_container_4_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    var _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngTemplateOutlet", _r9)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction1"](2, _c1, ctx_r2.tabletopObject));
} }
function OverviewPanelComponent_ng_container_5_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainer"](0);
} }
function OverviewPanelComponent_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, OverviewPanelComponent_ng_container_5_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    var _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngTemplateOutlet", _r9)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction1"](2, _c1, ctx_r3.tabletopObject));
} }
function OverviewPanelComponent_ng_container_6_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainer"](0);
} }
var _c2 = function (a0) { return { note: a0 }; };
function OverviewPanelComponent_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, OverviewPanelComponent_ng_container_6_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    var _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](14);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngTemplateOutlet", _r11)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction1"](2, _c2, ctx_r4.tabletopObject));
} }
function OverviewPanelComponent_ng_container_7_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainer"](0);
} }
var _c3 = function (a0) { return { character: a0 }; };
function OverviewPanelComponent_ng_container_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, OverviewPanelComponent_ng_container_7_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    var _r13 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](16);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngTemplateOutlet", _r13)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction1"](2, _c3, ctx_r5.tabletopObject));
} }
function OverviewPanelComponent_ng_container_8_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainer"](0);
} }
var _c4 = function (a0) { return { dice: a0 }; };
function OverviewPanelComponent_ng_container_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, OverviewPanelComponent_ng_container_8_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    var _r15 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](18);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngTemplateOutlet", _r15)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction1"](2, _c4, ctx_r6.tabletopObject));
} }
function OverviewPanelComponent_ng_container_9_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainer"](0);
} }
function OverviewPanelComponent_ng_container_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, OverviewPanelComponent_ng_container_9_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    var _r13 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](16);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngTemplateOutlet", _r13)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction1"](2, _c3, ctx_r7.tabletopObject));
} }
function OverviewPanelComponent_ng_container_10_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainer"](0);
} }
function OverviewPanelComponent_ng_container_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, OverviewPanelComponent_ng_container_10_ng_container_1_Template, 1, 0, "ng-container", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    var _r19 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](22);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngTemplateOutlet", _r19);
} }
var _c5 = function (a0) { return { "with-button-marign": a0 }; };
function OverviewPanelComponent_ng_template_11_div_1_div_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} if (rf & 2) {
    var card_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2).card;
    var ctx_r32 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction1"](2, _c5, ctx_r32.hasImage));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](card_r28.ownerName);
} }
function OverviewPanelComponent_ng_template_11_div_1_Template(rf, ctx) { if (rf & 1) {
    var _r35 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](1, "img", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "button", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function OverviewPanelComponent_ng_template_11_div_1_Template_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r35); var ctx_r34 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2); return ctx_r34.chanageImageView(true); });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "i", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](5, "zoom_in");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](6, OverviewPanelComponent_ng_template_11_div_1_div_6_Template, 3, 4, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} if (rf & 2) {
    var card_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]().card;
    var ctx_r29 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind2"](2, 2, ctx_r29.imageUrl, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵsanitizeUrl"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", card_r28.hasOwner && 0 < card_r28.ownerName.length);
} }
function OverviewPanelComponent_ng_template_11_div_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var card_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2).card;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](card_r28.name);
} }
function OverviewPanelComponent_ng_template_11_div_2_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](1, "\u30AB\u30FC\u30C9");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} }
function OverviewPanelComponent_ng_template_11_div_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_11_div_2_ng_container_1_Template, 2, 1, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](2, OverviewPanelComponent_ng_template_11_div_2_ng_container_2_Template, 2, 0, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} if (rf & 2) {
    var card_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]().card;
    var ctx_r30 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction1"](3, _c5, ctx_r30.hasImage));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", card_r28.isVisible == null || card_r28.isVisible);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", card_r28.isVisible != null && !card_r28.isVisible);
} }
function OverviewPanelComponent_ng_template_11_div_4_ng_container_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainer"](0);
} }
var _c6 = function (a0) { return { dataElm: a0 }; };
function OverviewPanelComponent_ng_template_11_div_4_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_11_div_4_ng_container_2_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r42 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](3);
    var _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](20);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngTemplateOutlet", _r17)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction1"](2, _c6, dataElm_r42));
} }
function OverviewPanelComponent_ng_template_11_div_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "div", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](2, OverviewPanelComponent_ng_template_11_div_4_ng_container_2_Template, 2, 4, "ng-container", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r31 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", ctx_r31.dataElms);
} }
var _c7 = function (a0, a1) { return { "is-pointer-events-auto": a0, "pointer-events-none": a1 }; };
function OverviewPanelComponent_ng_template_11_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_11_div_1_Template, 7, 5, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](2, OverviewPanelComponent_ng_template_11_div_2_Template, 3, 5, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](4, OverviewPanelComponent_ng_template_11_div_4_Template, 3, 1, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} if (rf & 2) {
    var card_r28 = ctx.card;
    var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction2"](4, _c7, !ctx_r10.isPointerDragging, ctx_r10.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r10.hasImage);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", 0 < (card_r28 == null ? null : card_r28.name == null ? null : card_r28.name.length));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r10.hasDataElms && card_r28.isVisible);
} }
function OverviewPanelComponent_ng_template_13_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "div", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "div", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](5, "div", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "textarea", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("ngModelChange", function OverviewPanelComponent_ng_template_13_Template_textarea_ngModelChange_6_listener($event) { var note_r44 = ctx.note; return note_r44.text = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](7, "div", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} if (rf & 2) {
    var note_r44 = ctx.note;
    var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction2"](4, _c7, !ctx_r12.isPointerDragging, ctx_r12.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](note_r44.title);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngModel", note_r44.text);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](note_r44.text);
} }
function OverviewPanelComponent_ng_template_15_div_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](1, "img", 43);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r47 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction2"](5, _c7, !ctx_r47.isPointerDragging, ctx_r47.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind2"](2, 2, ctx_r47.imageUrl, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵsanitizeUrl"]);
} }
function OverviewPanelComponent_ng_template_15_div_7_ng_container_1_ng_container_1_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainer"](0);
} }
function OverviewPanelComponent_ng_template_15_div_7_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "div", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](2, OverviewPanelComponent_ng_template_15_div_7_ng_container_1_ng_container_1_ng_container_2_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r50 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](3);
    var _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](20);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngTemplateOutlet", _r17)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction1"](2, _c6, dataElm_r50));
} }
function OverviewPanelComponent_ng_template_15_div_7_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_15_div_7_ng_container_1_ng_container_1_Template, 3, 4, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r50 = ctx.$implicit;
    var ctx_r49 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", dataElm_r50 && dataElm_r50.name !== ctx_r49.newLineString);
} }
function OverviewPanelComponent_ng_template_15_div_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_15_div_7_ng_container_1_Template, 2, 1, "ng-container", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r48 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", ctx_r48.inventoryDataElms);
} }
function OverviewPanelComponent_ng_template_15_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](1, "div", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](2, OverviewPanelComponent_ng_template_15_div_2_Template, 3, 8, "div", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "div", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](5, "div", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "div", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](7, OverviewPanelComponent_ng_template_15_div_7_Template, 2, 1, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} if (rf & 2) {
    var character_r46 = ctx.character;
    var ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction2"](6, _c7, !ctx_r14.isPointerDragging, ctx_r14.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r14.hasImage);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction2"](9, _c7, !ctx_r14.isPointerDragging, ctx_r14.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](character_r46.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction2"](12, _c7, !ctx_r14.isPointerDragging, ctx_r14.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r14.hasDataElms);
} }
function OverviewPanelComponent_ng_template_17_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dice_r54 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]().dice;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](dice_r54.face);
} }
function OverviewPanelComponent_ng_template_17_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](1, "???");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} }
function OverviewPanelComponent_ng_template_17_div_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} if (rf & 2) {
    var dice_r54 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]().dice;
    var ctx_r57 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction2"](2, _c7, !ctx_r57.isPointerDragging, ctx_r57.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"]("", dice_r54.ownerName, " ");
} }
var _c8 = function (a0, a1) { return { "is-black-mask": a0, "is-harf-black-mask": a1 }; };
function OverviewPanelComponent_ng_template_17_div_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](1, "img", 46);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} if (rf & 2) {
    var dice_r54 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]().dice;
    var ctx_r58 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction2"](6, _c7, !ctx_r58.isPointerDragging, ctx_r58.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction2"](9, _c8, !dice_r54.isVisible, dice_r54.isMine))("src", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind2"](2, 3, ctx_r58.imageUrl, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵsanitizeUrl"]);
} }
function OverviewPanelComponent_ng_template_17_div_10_ng_container_2_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainer"](0);
} }
function OverviewPanelComponent_ng_template_17_div_10_ng_container_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_17_div_10_ng_container_2_ng_container_1_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r64 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](3);
    var _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](20);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngTemplateOutlet", _r17)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction1"](2, _c6, dataElm_r64));
} }
function OverviewPanelComponent_ng_template_17_div_10_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_17_div_10_ng_container_2_ng_container_1_Template, 2, 4, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r64 = ctx.$implicit;
    var ctx_r63 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", dataElm_r64 && dataElm_r64.name !== ctx_r63.newLineString);
} }
function OverviewPanelComponent_ng_template_17_div_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "div", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](2, OverviewPanelComponent_ng_template_17_div_10_ng_container_2_Template, 2, 1, "ng-container", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r59 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", ctx_r59.dataElms);
} }
function OverviewPanelComponent_ng_template_17_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](1, "div", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](2, "div", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](4, OverviewPanelComponent_ng_template_17_ng_container_4_Template, 2, 1, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](5, OverviewPanelComponent_ng_template_17_ng_container_5_Template, 2, 0, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](6, OverviewPanelComponent_ng_template_17_div_6_Template, 3, 5, "div", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](7, OverviewPanelComponent_ng_template_17_div_7_Template, 3, 12, "div", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](8, "div", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](9, "div", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](10, OverviewPanelComponent_ng_template_17_div_10_Template, 3, 1, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} if (rf & 2) {
    var dice_r54 = ctx.dice;
    var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction2"](9, _c7, !ctx_r16.isPointerDragging, ctx_r16.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction2"](12, _c7, !ctx_r16.isPointerDragging, ctx_r16.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", dice_r54.name, ": ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", dice_r54.isVisible);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", !dice_r54.isVisible);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", dice_r54.hasOwner && 0 < dice_r54.ownerName.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r16.hasImage);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction2"](15, _c7, !ctx_r16.isPointerDragging, ctx_r16.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r16.hasDataElms && dice_r54.isVisible);
} }
function OverviewPanelComponent_ng_template_19_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainer"](0);
} }
function OverviewPanelComponent_ng_template_19_ng_template_1_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 53);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} if (rf & 2) {
    var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2).dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](dataElm_r68.name);
} }
function OverviewPanelComponent_ng_template_19_ng_template_1_ng_container_3_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainer"](0);
} }
function OverviewPanelComponent_ng_template_19_ng_template_1_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_19_ng_template_1_ng_container_3_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var childElm_r77 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](3);
    var _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](20);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngTemplateOutlet", _r17)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction1"](2, _c6, childElm_r77));
} }
function OverviewPanelComponent_ng_template_19_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 50);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_19_ng_template_1_div_1_Template, 2, 1, "div", 51);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](2, "div", 52);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](3, OverviewPanelComponent_ng_template_19_ng_template_1_ng_container_3_Template, 2, 4, "ng-container", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} if (rf & 2) {
    var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]().dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", 0 < dataElm_r68.name.trim().length);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", dataElm_r68.children);
} }
function OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    var _r85 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "div", 55);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "div", 56);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](5, "div", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "textarea", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("ngModelChange", function OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_1_Template_textarea_ngModelChange_6_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r85); var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2).dataElm; return dataElm_r68.value = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](7, "div", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2).dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](dataElm_r68.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngModel", dataElm_r68.value);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](dataElm_r68.value);
} }
function OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    var _r89 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "div", 57);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "div", 58);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "div", 59);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](5, "div", 60);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](7, "input", 61);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("ngModelChange", function OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_2_Template_input_ngModelChange_7_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r89); var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2).dataElm; return dataElm_r68.currentValue = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](8, "div", 62);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](10, "div", 63);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](11, "input", 64);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("ngModelChange", function OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_2_Template_input_ngModelChange_11_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r89); var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2).dataElm; return dataElm_r68.currentValue = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](12, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2).dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](dataElm_r68.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](dataElm_r68.currentValue);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngModel", dataElm_r68.currentValue);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" / ", dataElm_r68.value, "");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵstyleMap"](_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind2"](12, 8, "font-size: 0.8em; width: 100%; --min: 0; --max:" + dataElm_r68.value + "; --val:" + dataElm_r68.currentValue + ";", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpropertyInterpolate"]("max", dataElm_r68.value);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngModel", dataElm_r68.currentValue);
} }
function OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    var _r95 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "div", 57);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "div", 58);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "div", 65);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "input", 66);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("ngModelChange", function OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_3_Template_input_ngModelChange_6_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r95); var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2).dataElm; return dataElm_r68.value = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2).dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](dataElm_r68.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](dataElm_r68.value);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngModel", dataElm_r68.value);
} }
function OverviewPanelComponent_ng_template_19_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_1_Template, 9, 3, "ng-container", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](2, OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_2_Template, 13, 11, "ng-container", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](3, OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_3_Template, 7, 3, "ng-container", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](4, "div", 54);
} if (rf & 2) {
    var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]().dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngSwitch", dataElm_r68.type);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngSwitchCase", "note");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngSwitchCase", "numberResource");
} }
function OverviewPanelComponent_ng_template_19_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](0, OverviewPanelComponent_ng_template_19_ng_container_0_Template, 1, 0, "ng-container", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_19_ng_template_1_Template, 4, 2, "ng-template", null, 48, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](3, OverviewPanelComponent_ng_template_19_ng_template_3_Template, 5, 3, "ng-template", null, 49, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
} if (rf & 2) {
    var dataElm_r68 = ctx.dataElm;
    var _r70 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](2);
    var _r72 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", 0 < dataElm_r68.children.length)("ngIfThen", _r70)("ngIfElse", _r72);
} }
function OverviewPanelComponent_ng_template_21_Template(rf, ctx) { if (rf & 1) {
    var _r99 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 67);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function OverviewPanelComponent_ng_template_21_Template_div_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r99); var ctx_r98 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](); return ctx_r98.chanageImageView(false); });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "div", 68);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](2, "i", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](3, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](4, "img", 69);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](5, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("@fadeInOut", "in");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind2"](5, 2, ctx_r20.imageUrl, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵsanitizeUrl"]);
} }
var OverviewPanelComponent = /** @class */ (function () {
    function OverviewPanelComponent(inventoryService, changeDetector, pointerDeviceService) {
        this.inventoryService = inventoryService;
        this.changeDetector = changeDetector;
        this.pointerDeviceService = pointerDeviceService;
        this.tabletopObject = null;
        this.left = 0;
        this.top = 0;
        this.isOpenImageView = false;
    }
    Object.defineProperty(OverviewPanelComponent.prototype, "imageUrl", {
        get: function () { return this.tabletopObject && this.tabletopObject.imageFile ? this.tabletopObject.imageFile.url : ''; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverviewPanelComponent.prototype, "hasImage", {
        get: function () { return 0 < this.imageUrl.length; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverviewPanelComponent.prototype, "inventoryDataElms", {
        get: function () { return this.tabletopObject ? this.getInventoryTags(this.tabletopObject) : []; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverviewPanelComponent.prototype, "dataElms", {
        get: function () { return this.tabletopObject && this.tabletopObject.detailDataElement ? this.tabletopObject.detailDataElement.children : []; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverviewPanelComponent.prototype, "hasDataElms", {
        get: function () { return 0 < this.dataElms.length; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverviewPanelComponent.prototype, "newLineString", {
        get: function () { return this.inventoryService.newLineString; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverviewPanelComponent.prototype, "isPointerDragging", {
        get: function () { return this.pointerDeviceService.isDragging; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverviewPanelComponent.prototype, "pointerEventsStyle", {
        get: function () { return { 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }; },
        enumerable: false,
        configurable: true
    });
    OverviewPanelComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.initPanelPosition();
        setTimeout(function () {
            _this.adjustPositionRoot();
        }, 16);
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(event.data.identifier);
            if (!_this.tabletopObject || !object || !(object instanceof _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_1__["ObjectNode"]))
                return;
            if (_this.tabletopObject === object || _this.tabletopObject.contains(object)) {
                _this.changeDetector.markForCheck();
            }
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('UPDATE_FILE_RESOURE', -1000, function (event) {
            _this.changeDetector.markForCheck();
        });
    };
    OverviewPanelComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].unregister(this);
    };
    OverviewPanelComponent.prototype.initPanelPosition = function () {
        var panel = this.draggablePanel.nativeElement;
        var outerWidth = panel.offsetWidth;
        var outerHeight = panel.offsetHeight;
        var offsetLeft = this.left + 100;
        var offsetTop = this.top - outerHeight - 50;
        var isCollideLeft = false;
        var isCollideTop = false;
        if (window.innerWidth < offsetLeft + outerWidth) {
            offsetLeft = window.innerWidth - outerWidth;
            isCollideLeft = true;
        }
        if (offsetTop <= 0) {
            offsetTop = 0;
            isCollideTop = true;
        }
        if (isCollideLeft) {
            offsetLeft = this.left - outerWidth - 100;
        }
        if (offsetLeft < 0)
            offsetLeft = 0;
        if (offsetTop < 0)
            offsetTop = 0;
        panel.style.left = offsetLeft + 'px';
        panel.style.top = offsetTop + 'px';
    };
    OverviewPanelComponent.prototype.adjustPositionRoot = function () {
        var panel = this.draggablePanel.nativeElement;
        var panelBox = panel.getBoundingClientRect();
        var diffLeft = 0;
        var diffTop = 0;
        if (window.innerWidth < panelBox.right + diffLeft) {
            diffLeft += window.innerWidth - (panelBox.right + diffLeft);
        }
        if (panelBox.left + diffLeft < 0) {
            diffLeft += 0 - (panelBox.left + diffLeft);
        }
        if (window.innerHeight < panelBox.bottom + diffTop) {
            diffTop += window.innerHeight - (panelBox.bottom + diffTop);
        }
        if (panelBox.top + diffTop < 0) {
            diffTop += 0 - (panelBox.top + diffTop);
        }
        panel.style.left = panel.offsetLeft + diffLeft + 'px';
        panel.style.top = panel.offsetTop + diffTop + 'px';
    };
    OverviewPanelComponent.prototype.chanageImageView = function (isOpen) {
        this.isOpenImageView = isOpen;
    };
    OverviewPanelComponent.prototype.getInventoryTags = function (gameObject) {
        return this.inventoryService.tableInventory.dataElementMap.get(gameObject.identifier);
    };
    OverviewPanelComponent.ɵfac = function OverviewPanelComponent_Factory(t) { return new (t || OverviewPanelComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](service_game_object_inventory_service__WEBPACK_IMPORTED_MODULE_5__["GameObjectInventoryService"]), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_4__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_6__["PointerDeviceService"])); };
    OverviewPanelComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({ type: OverviewPanelComponent, selectors: [["overview-panel"]], viewQuery: function OverviewPanelComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵviewQuery"](_c0, 3);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵloadQuery"]()) && (ctx.draggablePanel = _t.first);
        } }, inputs: { tabletopObject: "tabletopObject", left: "left", top: "top" }, decls: 23, vars: 9, consts: [["appDraggable", "", 1, "component", "is-pointer-events-none"], ["draggablePanel", ""], [3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngSwitchDefault"], [4, "ngIf"], ["overviewCard", ""], ["overviewNote", ""], ["overviewCharacter", ""], ["overviewDiceSymbol", ""], ["dataElement", ""], ["imageView", ""], [4, "ngTemplateOutlet", "ngTemplateOutletContext"], [4, "ngTemplateOutlet"], [1, "component-content", "is-small-size", 3, "ngClass"], ["style", "position: relative;", 4, "ngIf"], ["class", "component-title title-background", 3, "ngClass", 4, "ngIf"], [1, "component-background"], ["class", "grid-container-root", 4, "ngIf"], [2, "position", "relative"], [1, "card-image", 3, "src"], [1, "zoom-button", 3, "click"], [1, "material-icons"], ["class", "component-owner position-right-bottom", 3, "ngClass", 4, "ngIf"], [1, "component-owner", "position-right-bottom", 3, "ngClass"], [1, "owner-tag"], [1, "component-title", "title-background", 3, "ngClass"], [1, "grid-container-root"], [1, "grid-container"], [4, "ngFor", "ngForOf"], [1, "component-content", "is-large-size", 3, "ngClass"], [1, "component-title", "title-background"], [1, "component-background", "text-note-container"], [1, "is-fill"], ["spellcheck", "false", 1, "textarea", 3, "ngModel", "ngModelChange"], [1, "textarea-spacer"], [1, "component-content", "character-grid-container", "is-middle-size"], [1, "title-bg-area", "title-background", 3, "ngClass"], ["class", "image-area character-image-box", 3, "ngClass", 4, "ngIf"], [1, "title-area", "component-title", 3, "ngClass"], [1, "void-area", "is-pointer-events-none"], [1, "dataElm-area", "component-background", 3, "ngClass"], [1, "image-area", "character-image-box", 3, "ngClass"], [1, "character-image", 3, "src"], ["class", "owner-name-area component-owner", 3, "ngClass", 4, "ngIf"], [1, "owner-name-area", "component-owner", 3, "ngClass"], [1, "character-image", 3, "ngClass", "src"], [4, "ngIf", "ngIfThen", "ngIfElse"], ["thenBlock", ""], ["elseBlock", ""], [1, "section", 2, "padding-top", "0.5em"], ["class", "section-text", 4, "ngIf"], [1, "grid-container", "indetnt"], [1, "section-text"], [1, "section", "border"], [1, "section"], [1, "note", 2, "position", "relative"], [1, "tag"], [1, "value"], [2, "display", "inline-block", "width", "min-content"], [1, "hidden-spacer", 2, "margin-right", "2em"], ["type", "number", "size", "1", 1, "input", 3, "ngModel", "ngModelChange"], [2, "display", "inline"], [1, "section", 2, "line-height", "1em"], ["type", "range", "min", "0", 3, "max", "ngModel", "ngModelChange"], [1, "hidden-spacer"], ["size", "1", 1, "input", 3, "ngModel", "ngModelChange"], [1, "image-view-background", "is-fill", 3, "click"], [1, "close-button", "is-pointer-events-none"], [1, "contain-image", 3, "src"]], template: function OverviewPanelComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 0, 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](2, 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](3, OverviewPanelComponent_ng_container_3_Template, 1, 0, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](4, OverviewPanelComponent_ng_container_4_Template, 2, 4, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](5, OverviewPanelComponent_ng_container_5_Template, 2, 4, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](6, OverviewPanelComponent_ng_container_6_Template, 2, 4, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](7, OverviewPanelComponent_ng_container_7_Template, 2, 4, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](8, OverviewPanelComponent_ng_container_8_Template, 2, 4, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](9, OverviewPanelComponent_ng_container_9_Template, 2, 4, "ng-container", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](10, OverviewPanelComponent_ng_container_10_Template, 2, 1, "ng-container", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](11, OverviewPanelComponent_ng_template_11_Template, 5, 7, "ng-template", null, 6, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](13, OverviewPanelComponent_ng_template_13_Template, 9, 7, "ng-template", null, 7, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](15, OverviewPanelComponent_ng_template_15_Template, 8, 15, "ng-template", null, 8, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](17, OverviewPanelComponent_ng_template_17_Template, 11, 18, "ng-template", null, 9, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](19, OverviewPanelComponent_ng_template_19_Template, 5, 3, "ng-template", null, 10, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](21, OverviewPanelComponent_ng_template_21_Template, 6, 5, "ng-template", null, 11, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("@fadeInOut", "in");
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngSwitch", ctx.tabletopObject.aliasName);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngSwitchCase", "numberResource");
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngSwitchCase", "card");
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngSwitchCase", "card-stack");
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngSwitchCase", "text-note");
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngSwitchCase", "character");
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngSwitchCase", "dice-symbol");
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx.isOpenImageView);
        } }, directives: [directive_draggable_directive__WEBPACK_IMPORTED_MODULE_7__["DraggableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgSwitch"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgSwitchCase"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgSwitchDefault"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgTemplateOutlet"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgForOf"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NgModel"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NumberValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["RangeValueAccessor"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_10__["SafePipe"]], styles: [".component[_ngcontent-%COMP%] {\n  position: absolute;\n  max-height: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n  overflow: visible;\n  color: #444;\n  z-index: 9000;\n  overscroll-behavior: contain;\n  -webkit-overflow-scrolling: touch;\n}\n\n.component-content[_ngcontent-%COMP%] {\n  font-size: 12px;\n}\n\n.is-large-size[_ngcontent-%COMP%] {\n  max-width: 350px;\n}\n\n.is-middle-size[_ngcontent-%COMP%] {\n  max-width: 270px;\n}\n\n.is-small-size[_ngcontent-%COMP%] {\n  max-width: 250px;\n}\n\n.is-middle-size[_ngcontent-%COMP%]   .grid-container-root[_ngcontent-%COMP%] {\n  width: 270px;\n}\n\n.is-small-size[_ngcontent-%COMP%]   .grid-container-root[_ngcontent-%COMP%] {\n  width: 250px;\n}\n\n.component-background[_ngcontent-%COMP%] {\n  background: linear-gradient(-30deg, rgba(240,218,189, 0.9), rgba(255, 244, 232, 0.9));\n  border-bottom: solid 1px #999;\n}\n\n.component-title[_ngcontent-%COMP%] {\n  color: #ccc;\n  font-size: 1em;\n  text-align: right;\n  vertical-align: middle; \n  height: 32px;\n  line-height: 32px; \n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  padding: 0 1em;\n}\n\n.title-background[_ngcontent-%COMP%] {\n  background-color: #555;\n  border-top: solid 1px #999;\n  border-left: solid 1px #999;\n  border-right: solid 1px #999;\n}\n\n.component-owner[_ngcontent-%COMP%] {\n  font-size: 0.8em;\n  padding: 10px;\n  color: #ccc;\n  vertical-align: middle; \n  overflow: hidden;\n  text-align: right;\n  padding: 2px 1em;\n  max-width: 100%;\n  box-sizing: border-box;\n}\n\n.owner-tag[_ngcontent-%COMP%] {\n  width: -webkit-min-content;\n  width: min-content;\n  max-width: 100%;\n  margin-left: auto;\n  margin-right: 0; \n  overflow: hidden;\n  color: #CCC;\n  background-color: rgba(30, 30, 30, 0.8);\n  box-sizing: border-box;\n  padding: 3px 9px;\n  border-radius: 6px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.card-image[_ngcontent-%COMP%] {\n  width: 250px;\n  max-height: 330px;\n  padding: 8px;\n  vertical-align: bottom;\n  object-fit: contain;\n  box-sizing: border-box;\n  background-color: rgba(204, 204, 204, 0.5);\n}\n\n.zoom-button[_ngcontent-%COMP%] {\n  position: absolute;\n  left : 8px;\n  bottom: -21px;\n  width: 42px;\n  height: 42px; \n  border-radius: 100px; \n  padding: 4px;\n}\n\n.zoom-button[_ngcontent-%COMP%]    > .material-icons[_ngcontent-%COMP%] {\n  font-size: 24px;\n  vertical-align: bottom;\n}\n\n.position-right-bottom[_ngcontent-%COMP%] {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n}\n\n.image-view-background[_ngcontent-%COMP%] {\n  color: #CCC;\n  background-color: rgba(30, 30, 30, 0.3);\n  z-index: 9900;\n}\n\n.image-view-background[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%] {\n  position: absolute;\n  right: 16px;\n  top: 16px;\n}\n\n.image-view-background[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]    > .material-icons[_ngcontent-%COMP%] {\n  font-size: 36px;\n}\n\n.contain-image[_ngcontent-%COMP%] {\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  padding: 16px;\n  vertical-align: bottom;\n  object-fit: contain;\n}\n\n.text-note-container[_ngcontent-%COMP%] {\n  width: 100%;\n  max-height: 400px; \n  padding: 0.5em 1.5em;\n  box-sizing: border-box;\n  overflow: hidden auto;\n  line-height: 1.8;\n  border-left: solid 1px #999;\n  border-right: solid 1px #999;\n}\n\n.character-image-box[_ngcontent-%COMP%] {\n  width: 100px;\n  max-height: 120px;\n  overflow: hidden;\n  vertical-align: bottom;\n  margin-left: 0.5em;\n  margin-bottom: -6px;\n  border-radius: 1em;\n  z-index: 1;\n}\n\n.character-image[_ngcontent-%COMP%] {\n  padding: 0;\n  width: 100%;\n  vertical-align: bottom;\n}\n\n.is-black-mask[_ngcontent-%COMP%] {\n  filter: brightness(0);\n }\n\n.is-harf-black-mask[_ngcontent-%COMP%] {\n  filter: brightness(0.5);\n }\n\n.character-grid-container[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: -webkit-min-content auto;\n  grid-template-columns: min-content auto;\n  grid-template-rows: 1fr auto auto auto;\n}\n\n.title-bg-area[_ngcontent-%COMP%] {\n  grid-area: 3 / 1 / 4 / 3;\n}\n\n.title-area[_ngcontent-%COMP%] {\n  grid-area: 3 / 2 / 4 / 3;\n}\n\n.owner-name-area[_ngcontent-%COMP%] {\n  grid-area: 2 / 2 / 3 / 3;\n}\n\n.image-area[_ngcontent-%COMP%] {\n  grid-area: 1 / 1 / 4 / 2;\n}\n\n.void-area[_ngcontent-%COMP%] {\n  grid-area: 1 / 2 / 3 / 3;\n}\n\n.dataElm-area[_ngcontent-%COMP%] {\n  grid-area: 4 / 1 / 5 / 3;\n}\n\n.grid-container-root[_ngcontent-%COMP%] {\n  padding: 0.5em 1.2em;\n  max-height: 250px;\n  overflow: hidden auto;\n  box-sizing: border-box;\n  border-left: solid 1px #999;\n  border-right: solid 1px #999;\n}\n\n.grid-container[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: 1fr fit-content(80%);\n}\n\n.grid-container[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  line-height: 24px;\n}\n\n.indetnt[_ngcontent-%COMP%] {\n  padding-left: 0.5em;\n}\n\n.section[_ngcontent-%COMP%] {\n  max-width: 100%;\n  grid-column: 1 / span 2;\n}\n\n.section-text[_ngcontent-%COMP%] {\n  font-size: 1.1em;\n  font-weight: bold;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.note[_ngcontent-%COMP%] {\n  margin-left: 0.5em;\n  font-size: 1em;\n  line-height: 1.8;\n}\n\n.textarea[_ngcontent-%COMP%] {\n  width: 100%;\n  height: 100%;\n  font: inherit;\n  font-size: inherit;\n  line-height: inherit;\n  background: none;\n  border: none;\n  border-radius: 2px;\n  outline: none;\n  color: #444;\n  padding: 0;\n  box-sizing: border-box;\n  resize: none;\n  overflow: hidden;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  overflow-wrap: anywhere;\n  word-break: break-word;\n}\n\n.textarea[_ngcontent-%COMP%]:hover {\n  background: #EEE;\n}\n\n.textarea[_ngcontent-%COMP%]:focus {\n  background: #FFF;\n}\n\n.tag[_ngcontent-%COMP%] {\n  padding-right: 1em;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.value[_ngcontent-%COMP%] {\n  font-size: 1.2em;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  text-align: right;\n}\n\n.hidden-spacer[_ngcontent-%COMP%] {\n  visibility: hidden;\n  height: 0px;\n  min-width: 3em; \n  overflow: hidden;\n  white-space: pre-wrap;\n}\n\n.textarea-spacer[_ngcontent-%COMP%] {\n  visibility: hidden;\n  min-width: 3em; \n  height: auto;\n  min-height: 24px;\n  overflow: hidden;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  overflow-wrap: anywhere;\n  word-break: break-word;\n}\n\n.input[_ngcontent-%COMP%] {\n  width: 100%;\n  min-width: 3em; \n  text-align: right;\n  font: inherit;\n  font-size: inherit;\n  line-height: inherit;\n  background: none;\n  border: none;\n  border-radius: 2px;\n  outline: none;\n  color: #444;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n.input[_ngcontent-%COMP%]:hover {\n  background: #EEE;\n}\n\n.input[_ngcontent-%COMP%]:focus {\n  background: #FFF;\n}\n\ninput[type=number][_ngcontent-%COMP%] {\n  -moz-appearance: textfield;\n}\n\ninput[type=number][_ngcontent-%COMP%]:hover, input[type=number][_ngcontent-%COMP%]:focus {\n  -moz-appearance: number-input;\n}\n\n.border[_ngcontent-%COMP%] {\n  border-bottom: 1px dotted #888;\n}\n\n.separator[_ngcontent-%COMP%] {\n  padding: 2px 0 2px 0;\n  border-bottom: 1px solid #888;\n}\n\n.with-button-marign[_ngcontent-%COMP%] {\n  padding-left : 60px;\n}\n\n.is-fill[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0; \n  left: 0; \n  right: 0;\n  bottom: 0;\n}\n\n.is-bold[_ngcontent-%COMP%] {\n  font-weight: bold;\n}\n\n.is-pointer-events-none[_ngcontent-%COMP%] {\n  pointer-events: none;\n}\n\n.is-pointer-events-auto[_ngcontent-%COMP%] {\n  pointer-events: auto;\n}\n\n\n\ninput[type='range'][_ngcontent-%COMP%] {\n  --slider-track-color: transparent; \n  --slider-fill-color: #555; \n  --slider-border-color: #777;\n  --slider-height: 0.8em;\n  --slider-thumb-size: 1.0em;\n  --range: calc(var(--max) - var(--min));\n  --ratio: calc((var(--val) - var(--min))/var(--range));\n  --sx: calc(.5*var(--slider-thumb-size) + var(--ratio)*(100% - var(--slider-thumb-size)));\n  margin: 0;\n  padding: 0;\n  background: transparent;\n  font: 1em/1 arial, sans-serif;\n  outline: 0;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n}\n\ninput[type='range'][_ngcontent-%COMP%], input[type='range'][_ngcontent-%COMP%]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-runnable-track {\n  box-sizing: border-box;\n  border-top: solid 1px var(--slider-border-color);\n  border-bottom: solid 1px var(--slider-border-color);\n  border-radius: var(--slider-height);\n  height: var(--slider-height);\n  background: var(--slider-track-color);\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-runnable-track {\n  background: linear-gradient(var(--slider-fill-color), var(--slider-fill-color)) 0/var(--sx) 100% no-repeat var(--slider-track-color);\n  cursor: pointer;\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-track {\n  box-sizing: border-box;\n  border: solid 1px var(--slider-border-color);\n  border-radius: var(--slider-height);\n  height: var(--slider-height);\n  background: var(--slider-track-color);\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-ms-track {\n  box-sizing: border-box;\n  border: solid 1px var(--slider-border-color);\n  border-radius: var(--slider-height);\n  height: var(--slider-height);\n  background: var(--slider-track-color);\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-progress {\n  height: var(--slider-height);\n  background: var(--slider-fill-color);\n  border-radius: var(--slider-height);\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-ms-fill-lower {\n  height: var(--slider-height);\n  background: var(--slider-fill-color);\n  border-radius: var(--slider-height);\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-thumb {\n  margin-top: calc((var(--slider-height) - var(--slider-thumb-size)) / 2 - 1px);\n  width: var(--slider-thumb-size);\n  height: var(--slider-thumb-size);\n  box-sizing: border-box;\n  border: solid 1px  var(--slider-border-color);\n  border-radius: 2em;\n  background: #ddd;\n  cursor: pointer;\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-thumb {\n  width: var(--slider-thumb-size);\n  height: var(--slider-thumb-size);\n  box-sizing: border-box;\n  border: solid 1px var(--slider-border-color);\n  border-radius: 2em;\n  background: #ddd;\n  cursor: pointer;\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-ms-thumb {\n  margin-top: 0;\n  width: var(--slider-thumb-size);\n  height: var(--slider-thumb-size);\n  box-sizing: border-box;\n  border: solid 1px var(--slider-border-color);\n  border-radius: 2em;\n  background: #ddd;\n  cursor: pointer;\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-ms-tooltip {\n  display: none;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm92ZXJ2aWV3LXBhbmVsLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixzQkFBc0I7RUFDdEIsaUJBQWlCO0VBQ2pCLFdBQVc7RUFDWCxhQUFhO0VBQ2IsNEJBQTRCO0VBQzVCLGlDQUFpQztBQUNuQzs7QUFFQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxxRkFBcUY7RUFDckYsNkJBQTZCO0FBQy9COztBQUVBO0VBQ0UsV0FBVztFQUNYLGNBQWM7RUFDZCxpQkFBaUI7RUFDakIsc0JBQXNCO0VBQ3RCLFlBQVk7RUFDWixpQkFBaUI7RUFDakIsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsY0FBYztBQUNoQjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QiwwQkFBMEI7RUFDMUIsMkJBQTJCO0VBQzNCLDRCQUE0QjtBQUM5Qjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixhQUFhO0VBQ2IsV0FBVztFQUNYLHNCQUFzQjtFQUN0QixnQkFBZ0I7RUFDaEIsaUJBQWlCO0VBQ2pCLGdCQUFnQjtFQUNoQixlQUFlO0VBQ2Ysc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsMEJBQWtCO0VBQWxCLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsaUJBQWlCO0VBQ2pCLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsV0FBVztFQUNYLHVDQUF1QztFQUN2QyxzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixtQkFBbUI7RUFDbkIsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UsWUFBWTtFQUNaLGlCQUFpQjtFQUNqQixZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLG1CQUFtQjtFQUNuQixzQkFBc0I7RUFDdEIsMENBQTBDO0FBQzVDOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFVBQVU7RUFDVixhQUFhO0VBQ2IsV0FBVztFQUNYLFlBQVk7RUFDWixvQkFBb0I7RUFDcEIsWUFBWTtBQUNkOztBQUVBO0VBQ0UsZUFBZTtFQUNmLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixRQUFRO0VBQ1IsU0FBUztBQUNYOztBQUVBO0VBQ0UsV0FBVztFQUNYLHVDQUF1QztFQUN2QyxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLFNBQVM7QUFDWDs7QUFFQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLHNCQUFzQjtFQUN0QixhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxpQkFBaUI7RUFDakIsb0JBQW9CO0VBQ3BCLHNCQUFzQjtFQUN0QixxQkFBcUI7RUFDckIsZ0JBQWdCO0VBQ2hCLDJCQUEyQjtFQUMzQiw0QkFBNEI7QUFDOUI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osaUJBQWlCO0VBQ2pCLGdCQUFnQjtFQUNoQixzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLG1CQUFtQjtFQUNuQixrQkFBa0I7RUFDbEIsVUFBVTtBQUNaOztBQUVBO0VBQ0UsVUFBVTtFQUNWLFdBQVc7RUFDWCxzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxxQkFBcUI7Q0FDdEI7O0FBRUE7RUFDQyx1QkFBdUI7Q0FDeEI7O0FBRUQ7RUFDRSxhQUFhO0VBQ2IsK0NBQXVDO0VBQXZDLHVDQUF1QztFQUN2QyxzQ0FBc0M7QUFDeEM7O0FBRUE7RUFDRSx3QkFBd0I7QUFDMUI7O0FBRUE7RUFDRSx3QkFBd0I7QUFDMUI7O0FBRUE7RUFDRSx3QkFBd0I7QUFDMUI7O0FBRUE7RUFDRSx3QkFBd0I7QUFDMUI7O0FBRUE7RUFDRSx3QkFBd0I7QUFDMUI7O0FBRUE7RUFDRSx3QkFBd0I7QUFDMUI7O0FBRUE7RUFDRSxvQkFBb0I7RUFDcEIsaUJBQWlCO0VBQ2pCLHFCQUFxQjtFQUNyQixzQkFBc0I7RUFDdEIsMkJBQTJCO0VBQzNCLDRCQUE0QjtBQUM5Qjs7QUFFQTtFQUNFLGFBQWE7RUFDYiwyQ0FBMkM7QUFDN0M7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLHVCQUF1QjtBQUN6Qjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixpQkFBaUI7RUFDakIsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsY0FBYztFQUNkLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxZQUFZO0VBQ1osYUFBYTtFQUNiLGtCQUFrQjtFQUNsQixvQkFBb0I7RUFDcEIsZ0JBQWdCO0VBQ2hCLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLFdBQVc7RUFDWCxVQUFVO0VBQ1Ysc0JBQXNCO0VBQ3RCLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIscUJBQXFCO0VBQ3JCLHFCQUFxQjtFQUNyQix1QkFBdUI7RUFDdkIsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsdUJBQXVCO0VBQ3ZCLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsY0FBYztFQUNkLGdCQUFnQjtFQUNoQixxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsY0FBYztFQUNkLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIsZ0JBQWdCO0VBQ2hCLHFCQUFxQjtFQUNyQixxQkFBcUI7RUFDckIsdUJBQXVCO0VBQ3ZCLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxjQUFjO0VBQ2QsaUJBQWlCO0VBQ2pCLGFBQWE7RUFDYixrQkFBa0I7RUFDbEIsb0JBQW9CO0VBQ3BCLGdCQUFnQjtFQUNoQixZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGFBQWE7RUFDYixXQUFXO0VBQ1gsVUFBVTtFQUNWLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLDBCQUEwQjtBQUM1Qjs7QUFFQTtFQUNFLDZCQUE2QjtBQUMvQjs7QUFFQTtFQUNFLDhCQUE4QjtBQUNoQzs7QUFFQTtFQUNFLG9CQUFvQjtFQUNwQiw2QkFBNkI7QUFDL0I7O0FBRUE7RUFDRSxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsTUFBTTtFQUNOLE9BQU87RUFDUCxRQUFRO0VBQ1IsU0FBUztBQUNYOztBQUVBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0Usb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0Usb0JBQW9CO0FBQ3RCOztBQUVBLDhDQUE4Qzs7QUFFOUM7RUFDRSxpQ0FBaUMsRUFBRSxTQUFTO0VBQzVDLHlCQUF5QixFQUFFLFFBQVE7RUFDbkMsMkJBQTJCO0VBQzNCLHNCQUFzQjtFQUN0QiwwQkFBMEI7RUFDMUIsc0NBQXNDO0VBQ3RDLHFEQUFxRDtFQUNyRCx3RkFBd0Y7RUFDeEYsU0FBUztFQUNULFVBQVU7RUFDVix1QkFBdUI7RUFDdkIsNkJBQTZCO0VBQzdCLFVBQVU7RUFDVix3QkFBZ0I7S0FBaEIscUJBQWdCO1VBQWhCLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLHdCQUF3QjtBQUMxQjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixnREFBZ0Q7RUFDaEQsbURBQW1EO0VBQ25ELG1DQUFtQztFQUNuQyw0QkFBNEI7RUFDNUIscUNBQXFDO0FBQ3ZDOztBQUVBO0VBQ0Usb0lBQW9JO0VBQ3BJLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsNENBQTRDO0VBQzVDLG1DQUFtQztFQUNuQyw0QkFBNEI7RUFDNUIscUNBQXFDO0FBQ3ZDOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLDRDQUE0QztFQUM1QyxtQ0FBbUM7RUFDbkMsNEJBQTRCO0VBQzVCLHFDQUFxQztBQUN2Qzs7QUFFQTtFQUNFLDRCQUE0QjtFQUM1QixvQ0FBb0M7RUFDcEMsbUNBQW1DO0FBQ3JDOztBQUVBO0VBQ0UsNEJBQTRCO0VBQzVCLG9DQUFvQztFQUNwQyxtQ0FBbUM7QUFDckM7O0FBRUE7RUFDRSw2RUFBNkU7RUFDN0UsK0JBQStCO0VBQy9CLGdDQUFnQztFQUNoQyxzQkFBc0I7RUFDdEIsNkNBQTZDO0VBQzdDLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLCtCQUErQjtFQUMvQixnQ0FBZ0M7RUFDaEMsc0JBQXNCO0VBQ3RCLDRDQUE0QztFQUM1QyxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsK0JBQStCO0VBQy9CLGdDQUFnQztFQUNoQyxzQkFBc0I7RUFDdEIsNENBQTRDO0VBQzVDLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGFBQWE7QUFDZiIsImZpbGUiOiJvdmVydmlldy1wYW5lbC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbXBvbmVudCB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbWF4LWhlaWdodDogMTAwJTtcbiAgbWF4LXdpZHRoOiAxMDAlO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgY29sb3I6ICM0NDQ7XG4gIHotaW5kZXg6IDkwMDA7XG4gIG92ZXJzY3JvbGwtYmVoYXZpb3I6IGNvbnRhaW47XG4gIC13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOiB0b3VjaDtcbn1cblxuLmNvbXBvbmVudC1jb250ZW50IHtcbiAgZm9udC1zaXplOiAxMnB4O1xufVxuXG4uaXMtbGFyZ2Utc2l6ZSB7XG4gIG1heC13aWR0aDogMzUwcHg7XG59XG5cbi5pcy1taWRkbGUtc2l6ZSB7XG4gIG1heC13aWR0aDogMjcwcHg7XG59XG5cbi5pcy1zbWFsbC1zaXplIHtcbiAgbWF4LXdpZHRoOiAyNTBweDtcbn1cblxuLmlzLW1pZGRsZS1zaXplIC5ncmlkLWNvbnRhaW5lci1yb290IHtcbiAgd2lkdGg6IDI3MHB4O1xufVxuXG4uaXMtc21hbGwtc2l6ZSAuZ3JpZC1jb250YWluZXItcm9vdCB7XG4gIHdpZHRoOiAyNTBweDtcbn1cblxuLmNvbXBvbmVudC1iYWNrZ3JvdW5kIHtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KC0zMGRlZywgcmdiYSgyNDAsMjE4LDE4OSwgMC45KSwgcmdiYSgyNTUsIDI0NCwgMjMyLCAwLjkpKTtcbiAgYm9yZGVyLWJvdHRvbTogc29saWQgMXB4ICM5OTk7XG59XG5cbi5jb21wb25lbnQtdGl0bGUge1xuICBjb2xvcjogI2NjYztcbiAgZm9udC1zaXplOiAxZW07XG4gIHRleHQtYWxpZ246IHJpZ2h0O1xuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyBcbiAgaGVpZ2h0OiAzMnB4O1xuICBsaW5lLWhlaWdodDogMzJweDsgXG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICBwYWRkaW5nOiAwIDFlbTtcbn1cblxuLnRpdGxlLWJhY2tncm91bmQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTU1O1xuICBib3JkZXItdG9wOiBzb2xpZCAxcHggIzk5OTtcbiAgYm9yZGVyLWxlZnQ6IHNvbGlkIDFweCAjOTk5O1xuICBib3JkZXItcmlnaHQ6IHNvbGlkIDFweCAjOTk5O1xufVxuXG4uY29tcG9uZW50LW93bmVyIHtcbiAgZm9udC1zaXplOiAwLjhlbTtcbiAgcGFkZGluZzogMTBweDtcbiAgY29sb3I6ICNjY2M7XG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IFxuICBvdmVyZmxvdzogaGlkZGVuO1xuICB0ZXh0LWFsaWduOiByaWdodDtcbiAgcGFkZGluZzogMnB4IDFlbTtcbiAgbWF4LXdpZHRoOiAxMDAlO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xufVxuXG4ub3duZXItdGFnIHtcbiAgd2lkdGg6IG1pbi1jb250ZW50O1xuICBtYXgtd2lkdGg6IDEwMCU7XG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICBtYXJnaW4tcmlnaHQ6IDA7IFxuICBvdmVyZmxvdzogaGlkZGVuO1xuICBjb2xvcjogI0NDQztcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjgpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBwYWRkaW5nOiAzcHggOXB4O1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xufVxuXG4uY2FyZC1pbWFnZSB7XG4gIHdpZHRoOiAyNTBweDtcbiAgbWF4LWhlaWdodDogMzMwcHg7XG4gIHBhZGRpbmc6IDhweDtcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgb2JqZWN0LWZpdDogY29udGFpbjtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyMDQsIDIwNCwgMjA0LCAwLjUpO1xufVxuXG4uem9vbS1idXR0b24ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQgOiA4cHg7XG4gIGJvdHRvbTogLTIxcHg7XG4gIHdpZHRoOiA0MnB4O1xuICBoZWlnaHQ6IDQycHg7IFxuICBib3JkZXItcmFkaXVzOiAxMDBweDsgXG4gIHBhZGRpbmc6IDRweDtcbn1cblxuLnpvb20tYnV0dG9uID4gLm1hdGVyaWFsLWljb25zIHtcbiAgZm9udC1zaXplOiAyNHB4O1xuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xufVxuXG4ucG9zaXRpb24tcmlnaHQtYm90dG9tIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICByaWdodDogMDtcbiAgYm90dG9tOiAwO1xufVxuXG4uaW1hZ2Utdmlldy1iYWNrZ3JvdW5kIHtcbiAgY29sb3I6ICNDQ0M7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMzAsIDMwLCAzMCwgMC4zKTtcbiAgei1pbmRleDogOTkwMDtcbn1cblxuLmltYWdlLXZpZXctYmFja2dyb3VuZCAuY2xvc2UtYnV0dG9uIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICByaWdodDogMTZweDtcbiAgdG9wOiAxNnB4O1xufVxuXG4uaW1hZ2Utdmlldy1iYWNrZ3JvdW5kIC5jbG9zZS1idXR0b24gPiAubWF0ZXJpYWwtaWNvbnMge1xuICBmb250LXNpemU6IDM2cHg7XG59XG5cbi5jb250YWluLWltYWdlIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgcGFkZGluZzogMTZweDtcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgb2JqZWN0LWZpdDogY29udGFpbjtcbn1cblxuLnRleHQtbm90ZS1jb250YWluZXIge1xuICB3aWR0aDogMTAwJTtcbiAgbWF4LWhlaWdodDogNDAwcHg7IFxuICBwYWRkaW5nOiAwLjVlbSAxLjVlbTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgb3ZlcmZsb3c6IGhpZGRlbiBhdXRvO1xuICBsaW5lLWhlaWdodDogMS44O1xuICBib3JkZXItbGVmdDogc29saWQgMXB4ICM5OTk7XG4gIGJvcmRlci1yaWdodDogc29saWQgMXB4ICM5OTk7XG59XG5cbi5jaGFyYWN0ZXItaW1hZ2UtYm94IHtcbiAgd2lkdGg6IDEwMHB4O1xuICBtYXgtaGVpZ2h0OiAxMjBweDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgbWFyZ2luLWxlZnQ6IDAuNWVtO1xuICBtYXJnaW4tYm90dG9tOiAtNnB4O1xuICBib3JkZXItcmFkaXVzOiAxZW07XG4gIHotaW5kZXg6IDE7XG59XG5cbi5jaGFyYWN0ZXItaW1hZ2Uge1xuICBwYWRkaW5nOiAwO1xuICB3aWR0aDogMTAwJTtcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbn1cblxuLmlzLWJsYWNrLW1hc2sge1xuICBmaWx0ZXI6IGJyaWdodG5lc3MoMCk7XG4gfVxuXG4gLmlzLWhhcmYtYmxhY2stbWFzayB7XG4gIGZpbHRlcjogYnJpZ2h0bmVzcygwLjUpO1xuIH1cblxuLmNoYXJhY3Rlci1ncmlkLWNvbnRhaW5lciB7XG4gIGRpc3BsYXk6IGdyaWQ7XG4gIGdyaWQtdGVtcGxhdGUtY29sdW1uczogbWluLWNvbnRlbnQgYXV0bztcbiAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiAxZnIgYXV0byBhdXRvIGF1dG87XG59XG5cbi50aXRsZS1iZy1hcmVhIHtcbiAgZ3JpZC1hcmVhOiAzIC8gMSAvIDQgLyAzO1xufVxuXG4udGl0bGUtYXJlYSB7XG4gIGdyaWQtYXJlYTogMyAvIDIgLyA0IC8gMztcbn1cblxuLm93bmVyLW5hbWUtYXJlYSB7XG4gIGdyaWQtYXJlYTogMiAvIDIgLyAzIC8gMztcbn1cblxuLmltYWdlLWFyZWEge1xuICBncmlkLWFyZWE6IDEgLyAxIC8gNCAvIDI7XG59XG5cbi52b2lkLWFyZWEge1xuICBncmlkLWFyZWE6IDEgLyAyIC8gMyAvIDM7XG59XG5cbi5kYXRhRWxtLWFyZWEge1xuICBncmlkLWFyZWE6IDQgLyAxIC8gNSAvIDM7XG59XG5cbi5ncmlkLWNvbnRhaW5lci1yb290IHtcbiAgcGFkZGluZzogMC41ZW0gMS4yZW07XG4gIG1heC1oZWlnaHQ6IDI1MHB4O1xuICBvdmVyZmxvdzogaGlkZGVuIGF1dG87XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlci1sZWZ0OiBzb2xpZCAxcHggIzk5OTtcbiAgYm9yZGVyLXJpZ2h0OiBzb2xpZCAxcHggIzk5OTtcbn1cblxuLmdyaWQtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZ3JpZDtcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgZml0LWNvbnRlbnQoODAlKTtcbn1cblxuLmdyaWQtY29udGFpbmVyID4gZGl2IHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgbGluZS1oZWlnaHQ6IDI0cHg7XG59XG5cbi5pbmRldG50IHtcbiAgcGFkZGluZy1sZWZ0OiAwLjVlbTtcbn1cblxuLnNlY3Rpb24ge1xuICBtYXgtd2lkdGg6IDEwMCU7XG4gIGdyaWQtY29sdW1uOiAxIC8gc3BhbiAyO1xufVxuXG4uc2VjdGlvbi10ZXh0IHtcbiAgZm9udC1zaXplOiAxLjFlbTtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICBvdmVyZmxvdzogaGlkZGVuO1xufVxuXG4ubm90ZSB7XG4gIG1hcmdpbi1sZWZ0OiAwLjVlbTtcbiAgZm9udC1zaXplOiAxZW07XG4gIGxpbmUtaGVpZ2h0OiAxLjg7XG59XG5cbi50ZXh0YXJlYSB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIGZvbnQ6IGluaGVyaXQ7XG4gIGZvbnQtc2l6ZTogaW5oZXJpdDtcbiAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7XG4gIGJhY2tncm91bmQ6IG5vbmU7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xuICBvdXRsaW5lOiBub25lO1xuICBjb2xvcjogIzQ0NDtcbiAgcGFkZGluZzogMDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgcmVzaXplOiBub25lO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgb3ZlcmZsb3ctd3JhcDogYW55d2hlcmU7XG4gIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XG59XG5cbi50ZXh0YXJlYTpob3ZlciB7XG4gIGJhY2tncm91bmQ6ICNFRUU7XG59XG5cbi50ZXh0YXJlYTpmb2N1cyB7XG4gIGJhY2tncm91bmQ6ICNGRkY7XG59XG5cbi50YWcge1xuICBwYWRkaW5nLXJpZ2h0OiAxZW07XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xufVxuXG4udmFsdWUge1xuICBmb250LXNpemU6IDEuMmVtO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XG59XG5cbi5oaWRkZW4tc3BhY2VyIHtcbiAgdmlzaWJpbGl0eTogaGlkZGVuO1xuICBoZWlnaHQ6IDBweDtcbiAgbWluLXdpZHRoOiAzZW07IFxuICBvdmVyZmxvdzogaGlkZGVuO1xuICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG59XG5cbi50ZXh0YXJlYS1zcGFjZXIge1xuICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gIG1pbi13aWR0aDogM2VtOyBcbiAgaGVpZ2h0OiBhdXRvO1xuICBtaW4taGVpZ2h0OiAyNHB4O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgb3ZlcmZsb3ctd3JhcDogYW55d2hlcmU7XG4gIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XG59XG5cbi5pbnB1dCB7XG4gIHdpZHRoOiAxMDAlO1xuICBtaW4td2lkdGg6IDNlbTsgXG4gIHRleHQtYWxpZ246IHJpZ2h0O1xuICBmb250OiBpbmhlcml0O1xuICBmb250LXNpemU6IGluaGVyaXQ7XG4gIGxpbmUtaGVpZ2h0OiBpbmhlcml0O1xuICBiYWNrZ3JvdW5kOiBub25lO1xuICBib3JkZXI6IG5vbmU7XG4gIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgb3V0bGluZTogbm9uZTtcbiAgY29sb3I6ICM0NDQ7XG4gIHBhZGRpbmc6IDA7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG59XG5cbi5pbnB1dDpob3ZlciB7XG4gIGJhY2tncm91bmQ6ICNFRUU7XG59XG5cbi5pbnB1dDpmb2N1cyB7XG4gIGJhY2tncm91bmQ6ICNGRkY7XG59XG5cbmlucHV0W3R5cGU9bnVtYmVyXSB7XG4gIC1tb3otYXBwZWFyYW5jZTogdGV4dGZpZWxkO1xufVxuXG5pbnB1dFt0eXBlPW51bWJlcl06aG92ZXIsIGlucHV0W3R5cGU9bnVtYmVyXTpmb2N1cyB7XG4gIC1tb3otYXBwZWFyYW5jZTogbnVtYmVyLWlucHV0O1xufVxuXG4uYm9yZGVyIHtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IGRvdHRlZCAjODg4O1xufVxuXG4uc2VwYXJhdG9yIHtcbiAgcGFkZGluZzogMnB4IDAgMnB4IDA7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjODg4O1xufVxuXG4ud2l0aC1idXR0b24tbWFyaWduIHtcbiAgcGFkZGluZy1sZWZ0IDogNjBweDtcbn1cblxuLmlzLWZpbGwge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDsgXG4gIGxlZnQ6IDA7IFxuICByaWdodDogMDtcbiAgYm90dG9tOiAwO1xufVxuXG4uaXMtYm9sZCB7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuXG4uaXMtcG9pbnRlci1ldmVudHMtbm9uZSB7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xufVxuXG4uaXMtcG9pbnRlci1ldmVudHMtYXV0byB7XG4gIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xufVxuXG4vKioqKioqKioqKioqKioqKiBpbnB1dC1yYW5nZSAqKioqKioqKioqKioqKioqL1xuXG5pbnB1dFt0eXBlPSdyYW5nZSddIHtcbiAgLS1zbGlkZXItdHJhY2stY29sb3I6IHRyYW5zcGFyZW50OyAvKiAjY2NjICovXG4gIC0tc2xpZGVyLWZpbGwtY29sb3I6ICM1NTU7IC8qIzc3NyAqL1xuICAtLXNsaWRlci1ib3JkZXItY29sb3I6ICM3Nzc7XG4gIC0tc2xpZGVyLWhlaWdodDogMC44ZW07XG4gIC0tc2xpZGVyLXRodW1iLXNpemU6IDEuMGVtO1xuICAtLXJhbmdlOiBjYWxjKHZhcigtLW1heCkgLSB2YXIoLS1taW4pKTtcbiAgLS1yYXRpbzogY2FsYygodmFyKC0tdmFsKSAtIHZhcigtLW1pbikpL3ZhcigtLXJhbmdlKSk7XG4gIC0tc3g6IGNhbGMoLjUqdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpICsgdmFyKC0tcmF0aW8pKigxMDAlIC0gdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpKSk7XG4gIG1hcmdpbjogMDtcbiAgcGFkZGluZzogMDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGZvbnQ6IDFlbS8xIGFyaWFsLCBzYW5zLXNlcmlmO1xuICBvdXRsaW5lOiAwO1xuICBhcHBlYXJhbmNlOiBub25lO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddLCBpbnB1dFt0eXBlPSdyYW5nZSddOjotd2Via2l0LXNsaWRlci10aHVtYiB7XG4gIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LXdlYmtpdC1zbGlkZXItcnVubmFibGUtdHJhY2sge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItdG9wOiBzb2xpZCAxcHggdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XG4gIGJvcmRlci1ib3R0b206IHNvbGlkIDFweCB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tc2xpZGVyLWhlaWdodCk7XG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLWhlaWdodCk7XG4gIGJhY2tncm91bmQ6IHZhcigtLXNsaWRlci10cmFjay1jb2xvcik7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ106Oi13ZWJraXQtc2xpZGVyLXJ1bm5hYmxlLXRyYWNrIHtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHZhcigtLXNsaWRlci1maWxsLWNvbG9yKSwgdmFyKC0tc2xpZGVyLWZpbGwtY29sb3IpKSAwL3ZhcigtLXN4KSAxMDAlIG5vLXJlcGVhdCB2YXIoLS1zbGlkZXItdHJhY2stY29sb3IpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tb3otcmFuZ2UtdHJhY2sge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXI6IHNvbGlkIDFweCB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tc2xpZGVyLWhlaWdodCk7XG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLWhlaWdodCk7XG4gIGJhY2tncm91bmQ6IHZhcigtLXNsaWRlci10cmFjay1jb2xvcik7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tcy10cmFjayB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlcjogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLXRyYWNrLWNvbG9yKTtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1vei1yYW5nZS1wcm9ncmVzcyB7XG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLWhlaWdodCk7XG4gIGJhY2tncm91bmQ6IHZhcigtLXNsaWRlci1maWxsLWNvbG9yKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tc2xpZGVyLWhlaWdodCk7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tcy1maWxsLWxvd2VyIHtcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLWZpbGwtY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LXdlYmtpdC1zbGlkZXItdGh1bWIge1xuICBtYXJnaW4tdG9wOiBjYWxjKCh2YXIoLS1zbGlkZXItaGVpZ2h0KSAtIHZhcigtLXNsaWRlci10aHVtYi1zaXplKSkgLyAyIC0gMXB4KTtcbiAgd2lkdGg6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlcjogc29saWQgMXB4ICB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcbiAgYm9yZGVyLXJhZGl1czogMmVtO1xuICBiYWNrZ3JvdW5kOiAjZGRkO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tb3otcmFuZ2UtdGh1bWIge1xuICB3aWR0aDogdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpO1xuICBoZWlnaHQ6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiBzb2xpZCAxcHggdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XG4gIGJvcmRlci1yYWRpdXM6IDJlbTtcbiAgYmFja2dyb3VuZDogI2RkZDtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbXMtdGh1bWIge1xuICBtYXJnaW4tdG9wOiAwO1xuICB3aWR0aDogdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpO1xuICBoZWlnaHQ6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiBzb2xpZCAxcHggdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XG4gIGJvcmRlci1yYWRpdXM6IDJlbTtcbiAgYmFja2dyb3VuZDogI2RkZDtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbXMtdG9vbHRpcCB7XG4gIGRpc3BsYXk6IG5vbmU7XG59Il19 */"], data: { animation: [
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('fadeInOut', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('100ms ease-out', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ opacity: 0, offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ opacity: 1, offset: 1.0 })
                        ]))
                    ]),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => void', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('100ms ease-in', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ opacity: 1, offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ opacity: 0, offset: 1.0 })
                        ]))
                    ])
                ])
            ] }, changeDetection: 0 });
    return OverviewPanelComponent;
}());



/***/ }),

/***/ "CE6K":
/*!******************************************!*\
  !*** ./src/app/service/modal.service.ts ***!
  \******************************************/
/*! exports provided: ModalService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ModalService", function() { return ModalService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");


/*
thanks
http://qiita.com/Quramy/items/ccfcfa0e45dd9e43f041
http://qiita.com/alclimb/items/1c740a432c10b6dc700a
*/
var ModalContext = /** @class */ (function () {
    function ModalContext(_resolve, _reject, option) {
        this._resolve = _resolve;
        this._reject = _reject;
        this.option = option;
    }
    ModalContext.prototype.resolve = function (value) {
        this._resolve(value);
        this._resolve = null;
    };
    ModalContext.prototype.reject = function (reason) {
        this._reject(reason);
        this._reject = null;
    };
    return ModalContext;
}());
var ModalService = /** @class */ (function () {
    function ModalService(componentFactoryResolver) {
        this.componentFactoryResolver = componentFactoryResolver;
        this.modalContext = null;
        this.count = 0;
        this.title = '無名のモーダル';
    }
    Object.defineProperty(ModalService.prototype, "option", {
        get: function () {
            return this.modalContext ? this.modalContext.option : null;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ModalService.prototype, "isShow", {
        get: function () {
            return this.count > 0;
        },
        enumerable: false,
        configurable: true
    });
    ModalService.prototype.open = function (childComponent, option, parentViewContainerRef) {
        var _this = this;
        if (!parentViewContainerRef) {
            parentViewContainerRef = ModalService.defaultParentViewContainerRef;
        }
        var panelComponentRef;
        return new Promise(function (resolve, reject) {
            // Injector 作成
            var _resolve = function (val) {
                if (panelComponentRef) {
                    panelComponentRef.destroy();
                    resolve(val);
                    _this.count--;
                }
            };
            var _reject = function (reason) {
                if (panelComponentRef) {
                    panelComponentRef.destroy();
                    reject(reason);
                    _this.count--;
                }
            };
            var childModalService = new ModalService(_this.componentFactoryResolver);
            childModalService.modalContext = new ModalContext(_resolve, _reject, option);
            var parentInjector = parentViewContainerRef.injector; //parentViewContainerRef.parentInjector;
            var injector = _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injector"].create([{ provide: ModalService, useValue: childModalService }], parentInjector);
            var panelComponentFactory = _this.componentFactoryResolver.resolveComponentFactory(ModalService.ModalComponentClass);
            var bodyComponentFactory = _this.componentFactoryResolver.resolveComponentFactory(childComponent);
            panelComponentRef = parentViewContainerRef.createComponent(panelComponentFactory, parentViewContainerRef.length, injector);
            panelComponentRef.instance.content.createComponent(bodyComponentFactory);
            panelComponentRef.onDestroy(function () {
                _this.count--;
            });
            _this.count++;
        });
    };
    ModalService.prototype.resolve = function (value) {
        if (this.modalContext) {
            this.modalContext.resolve(value);
            this.modalContext = null;
        }
    };
    ModalService.prototype.reject = function (reason) {
        if (this.modalContext) {
            this.modalContext.reject(reason);
            this.modalContext = null;
        }
    };
    ModalService.ModalComponentClass = null;
    ModalService.ɵfac = function ModalService_Factory(t) { return new (t || ModalService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ComponentFactoryResolver"])); };
    ModalService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: ModalService, factory: ModalService.ɵfac });
    return ModalService;
}());



/***/ }),

/***/ "CvDi":
/*!****************************************************************************!*\
  !*** ./src/app/component/game-data-element/game-data-element.component.ts ***!
  \****************************************************************************/
/*! exports provided: GameDataElementComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameDataElementComponent", function() { return GameDataElementComponent; });
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_data_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/data-element */ "gkrD");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");






function GameDataElementComponent_ng_container_0_ng_container_1_div_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainer"](0);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_div_1_Template(rf, ctx) { if (rf & 1) {
    var _r13 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_1_div_1_ng_container_1_Template, 1, 0, "ng-container", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "select", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("change", function GameDataElementComponent_ng_container_0_ng_container_1_div_1_Template_select_change_2_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r13); var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3); return ctx_r12.setElementType($event.target.value); });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](3, "option", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](4, "\u901A\u5E38");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](5, "option", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](6, "\u30EA\u30BD\u30FC\u30B9");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](7, "option", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](8, "\u30CE\u30FC\u30C8");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
    var _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngTemplateOutlet", _r1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngModel", ctx_r5.gameDataElement.type);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](ctx_r6.name);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    var _r15 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](3, "input", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("ngModelChange", function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_4_Template_input_ngModelChange_3_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r15); var ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3); return ctx_r14.name = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](ctx_r7.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngModel", ctx_r7.name);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_7_Template(rf, ctx) { if (rf & 1) {
    var _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "input", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("ngModelChange", function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_7_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r17); var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3); return ctx_r16.currentValue = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](3, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](4, "input", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("ngModelChange", function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_7_Template_input_ngModelChange_4_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r17); var ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3); return ctx_r18.currentValue = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](5, " / ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](6, "input", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("ngModelChange", function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_7_Template_input_ngModelChange_6_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r17); var ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3); return ctx_r19.value = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵstyleMap"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](2, 6, "font-size: 1.0em; min-width: 90px; width: 90%; --min: 0; --max: " + ctx_r8.value + "; --val:" + ctx_r8.currentValue + ";", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpropertyInterpolate"]("max", ctx_r8.value);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngModel", ctx_r8.currentValue);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngModel", ctx_r8.currentValue);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngModel", ctx_r8.value);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_8_Template(rf, ctx) { if (rf & 1) {
    var _r21 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "textarea", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("ngModelChange", function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_8_Template_textarea_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r21); var ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3); return ctx_r20.value = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngModel", ctx_r9.value);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_9_Template(rf, ctx) { if (rf & 1) {
    var _r23 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](3, "input", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("ngModelChange", function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_9_Template_input_ngModelChange_3_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r23); var ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3); return ctx_r22.value = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](ctx_r10.value);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngModel", ctx_r10.value);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_1_div_1_Template, 9, 2, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "div", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](3, GameDataElementComponent_ng_container_0_ng_container_1_ng_container_3_Template, 3, 1, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](4, GameDataElementComponent_ng_container_0_ng_container_1_ng_container_4_Template, 4, 2, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](5, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](6, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](7, GameDataElementComponent_ng_container_0_ng_container_1_ng_container_7_Template, 7, 9, "ng-container", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](8, GameDataElementComponent_ng_container_0_ng_container_1_ng_container_8_Template, 2, 1, "ng-container", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](9, GameDataElementComponent_ng_container_0_ng_container_1_ng_container_9_Template, 4, 2, "ng-container", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx_r3.isEdit);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx_r3.isTagLocked);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", !ctx_r3.isTagLocked);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngSwitch", ctx_r3.gameDataElement.type);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngSwitchCase", "numberResource");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngSwitchCase", "note");
} }
function GameDataElementComponent_ng_container_0_ng_container_2_div_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainer"](0);
} }
function GameDataElementComponent_ng_container_0_ng_container_2_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_2_div_1_ng_container_1_Template, 1, 0, "ng-container", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
    var _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngTemplateOutlet", _r1);
} }
function GameDataElementComponent_ng_container_0_ng_container_2_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "div", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](ctx_r25.name);
} }
function GameDataElementComponent_ng_container_0_ng_container_2_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    var _r30 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "input", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("ngModelChange", function GameDataElementComponent_ng_container_0_ng_container_2_ng_container_6_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r30); var ctx_r29 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3); return ctx_r29.name = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngModel", ctx_r26.name);
} }
function GameDataElementComponent_ng_container_0_ng_container_2_div_7_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](0, "div", 32);
} if (rf & 2) {
    var childElement_r32 = ctx.$implicit;
    var ctx_r31 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("gameDataElement", childElement_r32)("isEdit", ctx_r31.isEdit)("isTagLocked", ctx_r31.isTagLocked);
} }
function GameDataElementComponent_ng_container_0_ng_container_2_div_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_2_div_7_div_1_Template, 1, 3, "div", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r27 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", ctx_r27.gameDataElement.children);
} }
function GameDataElementComponent_ng_container_0_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_2_div_1_Template, 2, 1, "div", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](2, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](3, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](4, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](5, GameDataElementComponent_ng_container_0_ng_container_2_ng_container_5_Template, 3, 1, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](6, GameDataElementComponent_ng_container_0_ng_container_2_ng_container_6_Template, 2, 1, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](7, GameDataElementComponent_ng_container_0_ng_container_2_div_7_Template, 2, 1, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx_r4.isEdit);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx_r4.isTagLocked);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", !ctx_r4.isTagLocked);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", 0 < ctx_r4.gameDataElement.children.length);
} }
function GameDataElementComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_1_Template, 10, 6, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](2, GameDataElementComponent_ng_container_0_ng_container_2_Template, 8, 4, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx_r0.gameDataElement.children.length < 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", 0 < ctx_r0.gameDataElement.children.length);
} }
function GameDataElementComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    var _r34 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "button", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function GameDataElementComponent_ng_template_1_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r34); var ctx_r33 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](); return ctx_r33.addElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "i", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2, "add_circle");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](3, "button", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function GameDataElementComponent_ng_template_1_Template_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r34); var ctx_r35 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](); return ctx_r35.upElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](4, "i", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](5, "arrow_upward");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](6, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](7, "button", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function GameDataElementComponent_ng_template_1_Template_button_click_7_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r34); var ctx_r36 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](); return ctx_r36.deleteElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](8, "i", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](9, "remove_circle_outline");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](10, "button", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function GameDataElementComponent_ng_template_1_Template_button_click_10_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r34); var ctx_r37 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](); return ctx_r37.downElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](11, "i", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](12, "arrow_downward");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
} }
var GameDataElementComponent = /** @class */ (function () {
    function GameDataElementComponent(changeDetector) {
        this.changeDetector = changeDetector;
        this.gameDataElement = null;
        this.isEdit = false;
        this.isTagLocked = false;
        this.isValueLocked = false;
        this._name = '';
        this._value = 0;
        this._currentValue = 0;
        this.updateTimer = null;
    }
    Object.defineProperty(GameDataElementComponent.prototype, "name", {
        get: function () { return this._name; },
        set: function (name) { this._name = name; this.setUpdateTimer(); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameDataElementComponent.prototype, "value", {
        get: function () { return this._value; },
        set: function (value) { this._value = value; this.setUpdateTimer(); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameDataElementComponent.prototype, "currentValue", {
        get: function () { return this._currentValue; },
        set: function (currentValue) { this._currentValue = currentValue; this.setUpdateTimer(); },
        enumerable: false,
        configurable: true
    });
    GameDataElementComponent.prototype.ngOnInit = function () {
        var _this = this;
        if (this.gameDataElement)
            this.setValues(this.gameDataElement);
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            if (_this.gameDataElement && event.data.identifier === _this.gameDataElement.identifier) {
                _this.setValues(_this.gameDataElement);
                _this.changeDetector.markForCheck();
            }
        })
            .on('DELETE_GAME_OBJECT', -1000, function (event) {
            if (_this.gameDataElement && _this.gameDataElement.identifier === event.data.identifier) {
                _this.changeDetector.markForCheck();
            }
        });
    };
    GameDataElementComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__["EventSystem"].unregister(this);
    };
    GameDataElementComponent.prototype.ngAfterViewInit = function () {
    };
    GameDataElementComponent.prototype.addElement = function () {
        this.gameDataElement.appendChild(_udonarium_data_element__WEBPACK_IMPORTED_MODULE_1__["DataElement"].create('タグ', '', {}));
    };
    GameDataElementComponent.prototype.deleteElement = function () {
        this.gameDataElement.destroy();
    };
    GameDataElementComponent.prototype.upElement = function () {
        var parentElement = this.gameDataElement.parent;
        var index = parentElement.children.indexOf(this.gameDataElement);
        if (0 < index) {
            var prevElement = parentElement.children[index - 1];
            parentElement.insertBefore(this.gameDataElement, prevElement);
        }
    };
    GameDataElementComponent.prototype.downElement = function () {
        var parentElement = this.gameDataElement.parent;
        var index = parentElement.children.indexOf(this.gameDataElement);
        if (index < parentElement.children.length - 1) {
            var nextElement = parentElement.children[index + 1];
            parentElement.insertBefore(nextElement, this.gameDataElement);
        }
    };
    GameDataElementComponent.prototype.setElementType = function (type) {
        this.gameDataElement.setAttribute('type', type);
    };
    GameDataElementComponent.prototype.setValues = function (object) {
        this._name = object.name;
        this._currentValue = object.currentValue;
        this._value = object.value;
    };
    GameDataElementComponent.prototype.setUpdateTimer = function () {
        var _this = this;
        clearTimeout(this.updateTimer);
        this.updateTimer = setTimeout(function () {
            if (_this.gameDataElement.name !== _this.name)
                _this.gameDataElement.name = _this.name;
            if (_this.gameDataElement.currentValue !== _this.currentValue)
                _this.gameDataElement.currentValue = _this.currentValue;
            if (_this.gameDataElement.value !== _this.value)
                _this.gameDataElement.value = _this.value;
            _this.updateTimer = null;
        }, 66);
    };
    GameDataElementComponent.ɵfac = function GameDataElementComponent_Factory(t) { return new (t || GameDataElementComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["ChangeDetectorRef"])); };
    GameDataElementComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({ type: GameDataElementComponent, selectors: [["game-data-element"], ["", "game-data-element", ""]], inputs: { gameDataElement: "gameDataElement", isEdit: "isEdit", isTagLocked: "isTagLocked", isValueLocked: "isValueLocked" }, decls: 3, vars: 1, consts: [[4, "ngIf"], ["editButtons", ""], ["class", "table-cell table-cell_solid", 4, "ngIf"], [1, "table-cell", "table-cell_solid"], [1, "table-cell"], [3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngSwitchDefault"], [4, "ngTemplateOutlet"], [3, "ngModel", "change"], ["value", ""], ["value", "numberResource"], ["value", "note"], [2, "font-family", "Cambria, Georgia", "font-size", "0.9rem"], [1, "hidden-spacer", 2, "font-family", "Cambria, Georgia", "font-size", "0.9rem"], ["size", "1", "placeholder", "Value", 2, "width", "100%", "min-width", "10px", "font-family", "Cambria, Georgia", "font-size", "0.9rem", 3, "ngModel", "ngModelChange"], ["type", "range", "min", "0", 3, "ngModel", "max", "ngModelChange"], ["size", "1", "type", "number", "placeholder", "Value", 2, "width", "5em", "text-align", "right", 3, "ngModel", "ngModelChange"], ["size", "1", "type", "number", "placeholder", "Value", 2, "width", "5em", 3, "ngModel", "ngModelChange"], ["placeholder", "Note", 2, "width", "100%", "height", "5em", "min-width", "50px", "resize", "none", "font-size", "0.8em", 3, "ngModel", "ngModelChange"], [1, "hidden-spacer", 2, "font-size", "1.0em", "font-family", "Cambria, Georgia"], ["size", "1", "placeholder", "Value", 2, "width", "100%", "min-width", "10px", 3, "ngModel", "ngModelChange"], ["class", "table-cell table-cell_solid", "style", "vertical-align: top;", 4, "ngIf"], [1, "table-cell", "table-cell_inner-table", 2, "padding", "0", "width", "0"], [1, "table-cell_inner-table"], [1, "table-cell_inner-table-title"], ["class", "table", 4, "ngIf"], [1, "table-cell", "table-cell_solid", 2, "vertical-align", "top"], [2, "padding", "2px", "font-family", "Cambria, Georgia", "font-size", "1.0rem", "font-weight", "bold"], ["size", "1", "placeholder", "Value", 2, "width", "100%", "min-width", "10px", "font-family", "Cambria, Georgia", "font-size", "1.0rem", "font-weight", "bold", 3, "ngModel", "ngModelChange"], [1, "table"], ["game-data-element", "", "class", "table-row", 3, "gameDataElement", "isEdit", "isTagLocked", 4, "ngFor", "ngForOf"], ["game-data-element", "", 1, "table-row", 3, "gameDataElement", "isEdit", "isTagLocked"], [3, "click"], [1, "material-icons"]], template: function GameDataElementComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](0, GameDataElementComponent_ng_container_0_Template, 3, 2, "ng-container", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, GameDataElementComponent_ng_template_1_Template, 13, 0, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplateRefExtractor"]);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx.gameDataElement);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_3__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_3__["NgSwitch"], _angular_common__WEBPACK_IMPORTED_MODULE_3__["NgSwitchCase"], _angular_common__WEBPACK_IMPORTED_MODULE_3__["NgSwitchDefault"], _angular_common__WEBPACK_IMPORTED_MODULE_3__["NgTemplateOutlet"], _angular_forms__WEBPACK_IMPORTED_MODULE_4__["SelectControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_4__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_4__["NgModel"], _angular_forms__WEBPACK_IMPORTED_MODULE_4__["NgSelectOption"], _angular_forms__WEBPACK_IMPORTED_MODULE_4__["ɵangular_packages_forms_forms_x"], _angular_forms__WEBPACK_IMPORTED_MODULE_4__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_4__["RangeValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_4__["NumberValueAccessor"], _angular_common__WEBPACK_IMPORTED_MODULE_3__["NgForOf"], GameDataElementComponent], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_5__["SafePipe"]], styles: [".game-data-element[_ngcontent-%COMP%]{\n  margin-left: 10px;\n}\n.table[_ngcontent-%COMP%] {\n  display:table; \n  \n  \n  width :100%;\n  box-sizing: border-box;\n\n}\n.table-row[_ngcontent-%COMP%] {\n  padding-top: 10px;\n  display:table-row;\n  \n  \n  \n  box-sizing: border-box;\n  }\n.table-cell[_ngcontent-%COMP%] {\n  display:table-cell;\n  vertical-align: bottom;\n  padding: 0.5em 0.0em 0.1em 0.5em;\n  \n  border-bottom:1px dotted #888;\n  box-sizing: border-box;\n}\n.table-cell_solid[_ngcontent-%COMP%] {\n  width :10px;\n  white-space: nowrap;\n}\n.table-cell_inner-table[_ngcontent-%COMP%] {\n  display:table-cell;\n  vertical-align: bottom;\n  padding: 0.2em 0.0em 0.1em 0.5em;\n  border: none;\n  \n  box-sizing: border-box;\n}\n.table-cell_inner-table-title[_ngcontent-%COMP%] {\n  border-bottom: 1px solid #444;\n  border-left: 8px solid #444;\n  padding-left:8px;\n}\n.box[_ngcontent-%COMP%] {\n  display: inline-block;\n  margin: 10px;\n  \n}\n.hidden-spacer[_ngcontent-%COMP%] {\n  visibility: hidden;\n  height: 0;\n  \n  max-width : 20em;\n  overflow: hidden;\n  padding: 0 3px;\n  box-sizing: border-box;\n}\ninput[_ngcontent-%COMP%], button[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{\n\n  background: none;\n  border: none;\n  border-radius: 2px;\n  outline: none;\n\n  color: #444;\n  font-family: Cambria, Georgia;\n  font-size: 1.0em;\n  padding: 2px;\n  box-sizing: border-box;\n}\ninput[_ngcontent-%COMP%]:hover, textarea[_ngcontent-%COMP%]:hover, select[_ngcontent-%COMP%]:hover  {\n  background: #EEE;\n}\ninput[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus  {\n  background: #FFF;\n}\nbutton[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 1.0rem;\n}\nbutton[_ngcontent-%COMP%]:hover  {\n  background: #444;\n  color: #CCC;\n}\n.table-cell[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{\n  font-size: 0.5rem;\n}\ninput[type='range'][_ngcontent-%COMP%] {\n  --slider-track-color: transparent; \n  --slider-fill-color: #555; \n  --slider-border-color: #777;\n  --slider-height: 0.8em;\n  --slider-thumb-size: 1.0em;\n  --range: calc(var(--max) - var(--min));\n  --ratio: calc((var(--val) - var(--min))/var(--range));\n  --sx: calc(.5*var(--slider-thumb-size) + var(--ratio)*(100% - var(--slider-thumb-size)));\n  margin: 0;\n  padding: 0;\n  background: transparent;\n  font: 1em/1 arial, sans-serif;\n  outline: 0;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n}\ninput[type='range'][_ngcontent-%COMP%], input[type='range'][_ngcontent-%COMP%]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n}\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-runnable-track {\n  box-sizing: border-box;\n  border-top: solid 1px var(--slider-border-color);\n  border-bottom: solid 1px var(--slider-border-color);\n  border-radius: var(--slider-height);\n  height: var(--slider-height);\n  background: var(--slider-track-color);\n}\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-runnable-track {\n  background: linear-gradient(var(--slider-fill-color), var(--slider-fill-color)) 0/var(--sx) 100% no-repeat var(--slider-track-color);\n  cursor: pointer;\n}\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-track {\n  box-sizing: border-box;\n  border: solid 1px var(--slider-border-color);\n  border-radius: var(--slider-height);\n  height: var(--slider-height);\n  background: var(--slider-track-color);\n}\ninput[type='range'][_ngcontent-%COMP%]::-ms-track {\n  box-sizing: border-box;\n  border: solid 1px var(--slider-border-color);\n  border-radius: var(--slider-height);\n  height: var(--slider-height);\n  background: var(--slider-track-color);\n}\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-progress {\n  height: var(--slider-height);\n  background: var(--slider-fill-color);\n  border-radius: var(--slider-height);\n}\ninput[type='range'][_ngcontent-%COMP%]::-ms-fill-lower {\n  height: var(--slider-height);\n  background: var(--slider-fill-color);\n  border-radius: var(--slider-height);\n}\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-thumb {\n  margin-top: calc((var(--slider-height) - var(--slider-thumb-size)) / 2 - 1px);\n  width: var(--slider-thumb-size);\n  height: var(--slider-thumb-size);\n  box-sizing: border-box;\n  border: solid 1px  var(--slider-border-color);\n  border-radius: 2em;\n  background: #ddd;\n  cursor: pointer;\n}\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-thumb {\n  width: var(--slider-thumb-size);\n  height: var(--slider-thumb-size);\n  box-sizing: border-box;\n  border: solid 1px  var(--slider-border-color);\n  border-radius: 2em;\n  background: #ddd;\n  cursor: pointer;\n}\ninput[type='range'][_ngcontent-%COMP%]::-ms-thumb {\n  margin-top: 0;\n  width: var(--slider-thumb-size);\n  height: var(--slider-thumb-size);\n  box-sizing: border-box;\n  border: solid 1px  var(--slider-border-color);\n  border-radius: 2em;\n  background: #ddd;\n  cursor: pointer;\n}\ninput[type='range'][_ngcontent-%COMP%]::-ms-tooltip {\n  display: none;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUtZGF0YS1lbGVtZW50LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxpQkFBaUI7QUFDbkI7QUFDQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsNEJBQTRCO0VBQzVCLFdBQVc7RUFDWCxzQkFBc0I7O0FBRXhCO0FBQ0E7RUFDRSxpQkFBaUI7RUFDakIsaUJBQWlCO0VBQ2pCLDRCQUE0QjtFQUM1QixpQ0FBaUM7RUFDakMsZUFBZTtFQUNmLHNCQUFzQjtFQUN0QjtBQUNGO0VBQ0Usa0JBQWtCO0VBQ2xCLHNCQUFzQjtFQUN0QixnQ0FBZ0M7RUFDaEMsNEJBQTRCO0VBQzVCLDZCQUE2QjtFQUM3QixzQkFBc0I7QUFDeEI7QUFDQTtFQUNFLFdBQVc7RUFDWCxtQkFBbUI7QUFDckI7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixzQkFBc0I7RUFDdEIsZ0NBQWdDO0VBQ2hDLFlBQVk7RUFDWixnQ0FBZ0M7RUFDaEMsc0JBQXNCO0FBQ3hCO0FBQ0E7RUFDRSw2QkFBNkI7RUFDN0IsMkJBQTJCO0VBQzNCLGdCQUFnQjtBQUNsQjtBQUNBO0VBQ0UscUJBQXFCO0VBQ3JCLFlBQVk7RUFDWix5QkFBeUI7QUFDM0I7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1Qsb0JBQW9CO0VBQ3BCLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsY0FBYztFQUNkLHNCQUFzQjtBQUN4QjtBQUVBO0FBQ0EsV0FBVztFQUNULGdCQUFnQjtFQUNoQixZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGFBQWE7O0VBRWIsV0FBVztFQUNYLDZCQUE2QjtFQUM3QixnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLHNCQUFzQjtBQUN4QjtBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSxnQkFBZ0I7QUFDbEI7QUFDQTtFQUNFLGlCQUFpQjtBQUNuQjtBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFdBQVc7QUFDYjtBQUVBO0VBQ0UsaUJBQWlCO0FBQ25CO0FBRUE7RUFDRSxpQ0FBaUMsRUFBRSxTQUFTO0VBQzVDLHlCQUF5QixFQUFFLFFBQVE7RUFDbkMsMkJBQTJCO0VBQzNCLHNCQUFzQjtFQUN0QiwwQkFBMEI7RUFDMUIsc0NBQXNDO0VBQ3RDLHFEQUFxRDtFQUNyRCx3RkFBd0Y7RUFDeEYsU0FBUztFQUNULFVBQVU7RUFDVix1QkFBdUI7RUFDdkIsNkJBQTZCO0VBQzdCLFVBQVU7RUFDVix3QkFBZ0I7S0FBaEIscUJBQWdCO1VBQWhCLGdCQUFnQjtBQUNsQjtBQUVBO0VBQ0Usd0JBQXdCO0FBQzFCO0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsZ0RBQWdEO0VBQ2hELG1EQUFtRDtFQUNuRCxtQ0FBbUM7RUFDbkMsNEJBQTRCO0VBQzVCLHFDQUFxQztBQUN2QztBQUVBO0VBQ0Usb0lBQW9JO0VBQ3BJLGVBQWU7QUFDakI7QUFFQTtFQUNFLHNCQUFzQjtFQUN0Qiw0Q0FBNEM7RUFDNUMsbUNBQW1DO0VBQ25DLDRCQUE0QjtFQUM1QixxQ0FBcUM7QUFDdkM7QUFFQTtFQUNFLHNCQUFzQjtFQUN0Qiw0Q0FBNEM7RUFDNUMsbUNBQW1DO0VBQ25DLDRCQUE0QjtFQUM1QixxQ0FBcUM7QUFDdkM7QUFFQTtFQUNFLDRCQUE0QjtFQUM1QixvQ0FBb0M7RUFDcEMsbUNBQW1DO0FBQ3JDO0FBRUE7RUFDRSw0QkFBNEI7RUFDNUIsb0NBQW9DO0VBQ3BDLG1DQUFtQztBQUNyQztBQUVBO0VBQ0UsNkVBQTZFO0VBQzdFLCtCQUErQjtFQUMvQixnQ0FBZ0M7RUFDaEMsc0JBQXNCO0VBQ3RCLDZDQUE2QztFQUM3QyxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGVBQWU7QUFDakI7QUFFQTtFQUNFLCtCQUErQjtFQUMvQixnQ0FBZ0M7RUFDaEMsc0JBQXNCO0VBQ3RCLDZDQUE2QztFQUM3QyxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGVBQWU7QUFDakI7QUFFQTtFQUNFLGFBQWE7RUFDYiwrQkFBK0I7RUFDL0IsZ0NBQWdDO0VBQ2hDLHNCQUFzQjtFQUN0Qiw2Q0FBNkM7RUFDN0Msa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixlQUFlO0FBQ2pCO0FBRUE7RUFDRSxhQUFhO0FBQ2YiLCJmaWxlIjoiZ2FtZS1kYXRhLWVsZW1lbnQuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5nYW1lLWRhdGEtZWxlbWVudHtcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XG59XG4udGFibGUge1xuICBkaXNwbGF5OnRhYmxlOyBcbiAgLypwYWRkaW5nLWxlZnQ6IDEwcHg7Ki9cbiAgLypib3JkZXI6MXB4IHNvbGlkICNGRjAwMDA7Ki9cbiAgd2lkdGggOjEwMCU7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG5cbn1cbi50YWJsZS1yb3cge1xuICBwYWRkaW5nLXRvcDogMTBweDtcbiAgZGlzcGxheTp0YWJsZS1yb3c7XG4gIC8qYm9yZGVyOjVweCBzb2xpZCAjMDBGRjAwOyovXG4gIC8qYm9yZGVyLWJvdHRvbToxcHggZG90dGVkICM4ODg7Ki9cbiAgLyp3aWR0aCA6MTAwJTsqL1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICB9XG4udGFibGUtY2VsbCB7XG4gIGRpc3BsYXk6dGFibGUtY2VsbDtcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgcGFkZGluZzogMC41ZW0gMC4wZW0gMC4xZW0gMC41ZW07XG4gIC8qYm9yZGVyOjFweCBzb2xpZCAjMDAwMEZGOyovXG4gIGJvcmRlci1ib3R0b206MXB4IGRvdHRlZCAjODg4O1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xufVxuLnRhYmxlLWNlbGxfc29saWQge1xuICB3aWR0aCA6MTBweDtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbn1cbi50YWJsZS1jZWxsX2lubmVyLXRhYmxlIHtcbiAgZGlzcGxheTp0YWJsZS1jZWxsO1xuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xuICBwYWRkaW5nOiAwLjJlbSAwLjBlbSAwLjFlbSAwLjVlbTtcbiAgYm9yZGVyOiBub25lO1xuICAvKmJvcmRlci1ib3R0b206MXB4IHNvbGlkICMwZmY7Ki9cbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbn1cbi50YWJsZS1jZWxsX2lubmVyLXRhYmxlLXRpdGxlIHtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICM0NDQ7XG4gIGJvcmRlci1sZWZ0OiA4cHggc29saWQgIzQ0NDtcbiAgcGFkZGluZy1sZWZ0OjhweDtcbn1cbi5ib3gge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIG1hcmdpbjogMTBweDtcbiAgLypib3JkZXI6MXB4IHNvbGlkICNGRkY7Ki9cbn1cbi5oaWRkZW4tc3BhY2VyIHtcbiAgdmlzaWJpbGl0eTogaGlkZGVuO1xuICBoZWlnaHQ6IDA7XG4gIC8qYmFja2dyb3VuZDogIzBGRjsqL1xuICBtYXgtd2lkdGggOiAyMGVtO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICBwYWRkaW5nOiAwIDNweDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbn1cblxuaW5wdXQsIGJ1dHRvbiwgdGV4dGFyZWEsIHNlbGVjdHtcbi8qLmlucHV0IHsqL1xuICBiYWNrZ3JvdW5kOiBub25lO1xuICBib3JkZXI6IG5vbmU7XG4gIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgb3V0bGluZTogbm9uZTtcblxuICBjb2xvcjogIzQ0NDtcbiAgZm9udC1mYW1pbHk6IENhbWJyaWEsIEdlb3JnaWE7XG4gIGZvbnQtc2l6ZTogMS4wZW07XG4gIHBhZGRpbmc6IDJweDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbn1cblxuaW5wdXQ6aG92ZXIsIHRleHRhcmVhOmhvdmVyLCBzZWxlY3Q6aG92ZXIgIHtcbiAgYmFja2dyb3VuZDogI0VFRTtcbn1cbmlucHV0OmZvY3VzLCB0ZXh0YXJlYTpmb2N1cywgc2VsZWN0OmZvY3VzICB7XG4gIGJhY2tncm91bmQ6ICNGRkY7XG59XG5idXR0b24gaSB7XG4gIGZvbnQtc2l6ZTogMS4wcmVtO1xufVxuXG5idXR0b246aG92ZXIgIHtcbiAgYmFja2dyb3VuZDogIzQ0NDtcbiAgY29sb3I6ICNDQ0M7XG59XG5cbi50YWJsZS1jZWxsIGJ1dHRvbntcbiAgZm9udC1zaXplOiAwLjVyZW07XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ10ge1xuICAtLXNsaWRlci10cmFjay1jb2xvcjogdHJhbnNwYXJlbnQ7IC8qICNjY2MgKi9cbiAgLS1zbGlkZXItZmlsbC1jb2xvcjogIzU1NTsgLyojNzc3ICovXG4gIC0tc2xpZGVyLWJvcmRlci1jb2xvcjogIzc3NztcbiAgLS1zbGlkZXItaGVpZ2h0OiAwLjhlbTtcbiAgLS1zbGlkZXItdGh1bWItc2l6ZTogMS4wZW07XG4gIC0tcmFuZ2U6IGNhbGModmFyKC0tbWF4KSAtIHZhcigtLW1pbikpO1xuICAtLXJhdGlvOiBjYWxjKCh2YXIoLS12YWwpIC0gdmFyKC0tbWluKSkvdmFyKC0tcmFuZ2UpKTtcbiAgLS1zeDogY2FsYyguNSp2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSkgKyB2YXIoLS1yYXRpbykqKDEwMCUgLSB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSkpKTtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgZm9udDogMWVtLzEgYXJpYWwsIHNhbnMtc2VyaWY7XG4gIG91dGxpbmU6IDA7XG4gIGFwcGVhcmFuY2U6IG5vbmU7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ10sIGlucHV0W3R5cGU9J3JhbmdlJ106Oi13ZWJraXQtc2xpZGVyLXRodW1iIHtcbiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotd2Via2l0LXNsaWRlci1ydW5uYWJsZS10cmFjayB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlci10b3A6IHNvbGlkIDFweCB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcbiAgYm9yZGVyLWJvdHRvbTogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLXRyYWNrLWNvbG9yKTtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LXdlYmtpdC1zbGlkZXItcnVubmFibGUtdHJhY2sge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodmFyKC0tc2xpZGVyLWZpbGwtY29sb3IpLCB2YXIoLS1zbGlkZXItZmlsbC1jb2xvcikpIDAvdmFyKC0tc3gpIDEwMCUgbm8tcmVwZWF0IHZhcigtLXNsaWRlci10cmFjay1jb2xvcik7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1vei1yYW5nZS10cmFjayB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlcjogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLXRyYWNrLWNvbG9yKTtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1zLXRyYWNrIHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiBzb2xpZCAxcHggdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xuICBoZWlnaHQ6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1zbGlkZXItdHJhY2stY29sb3IpO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbW96LXJhbmdlLXByb2dyZXNzIHtcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLWZpbGwtY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1zLWZpbGwtbG93ZXIge1xuICBoZWlnaHQ6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1zbGlkZXItZmlsbC1jb2xvcik7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotd2Via2l0LXNsaWRlci10aHVtYiB7XG4gIG1hcmdpbi10b3A6IGNhbGMoKHZhcigtLXNsaWRlci1oZWlnaHQpIC0gdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpKSAvIDIgLSAxcHgpO1xuICB3aWR0aDogdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpO1xuICBoZWlnaHQ6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiBzb2xpZCAxcHggIHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiAyZW07XG4gIGJhY2tncm91bmQ6ICNkZGQ7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1vei1yYW5nZS10aHVtYiB7XG4gIHdpZHRoOiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXI6IHNvbGlkIDFweCAgdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XG4gIGJvcmRlci1yYWRpdXM6IDJlbTtcbiAgYmFja2dyb3VuZDogI2RkZDtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbXMtdGh1bWIge1xuICBtYXJnaW4tdG9wOiAwO1xuICB3aWR0aDogdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpO1xuICBoZWlnaHQ6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiBzb2xpZCAxcHggIHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiAyZW07XG4gIGJhY2tncm91bmQ6ICNkZGQ7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1zLXRvb2x0aXAge1xuICBkaXNwbGF5OiBub25lO1xufVxuIl19 */"], changeDetection: 0 });
    return GameDataElementComponent;
}());



/***/ }),

/***/ "Dmu7":
/*!*******************************!*\
  !*** ./src/app/class/room.ts ***!
  \*******************************/
/*! exports provided: Room */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Room", function() { return Room; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _card__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./card */ "jiu3");
/* harmony import */ var _card_stack__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./card-stack */ "23G+");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/synchronize-object/game-object */ "xdgh");
/* harmony import */ var _core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./core/synchronize-object/object-serializer */ "MDT1");
/* harmony import */ var _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _dice_symbol__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./dice-symbol */ "l22b");
/* harmony import */ var _game_character__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./game-character */ "M/aK");
/* harmony import */ var _game_table__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./game-table */ "RDF6");
/* harmony import */ var _game_table_mask__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./game-table-mask */ "AyjR");
/* harmony import */ var _terrain__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./terrain */ "gKYc");
/* harmony import */ var _text_note__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./text-note */ "WeD8");













var Room = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(Room, _super);
    function Room() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    // GameObject Lifecycle
    Room.prototype.onStoreAdded = function () {
        _super.prototype.onStoreAdded.call(this);
        _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.remove(this); // ObjectStoreには登録しない
    };
    Room.prototype.innerXml = function () {
        var e_1, _a;
        var xml = '';
        var objects = [];
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_game_table__WEBPACK_IMPORTED_MODULE_9__["GameTable"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_text_note__WEBPACK_IMPORTED_MODULE_12__["TextNote"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_card_stack__WEBPACK_IMPORTED_MODULE_2__["CardStack"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_card__WEBPACK_IMPORTED_MODULE_1__["Card"]).filter(function (obj) { return obj.parent === null; }));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_dice_symbol__WEBPACK_IMPORTED_MODULE_7__["DiceSymbol"]));
        try {
            for (var objects_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(objects), objects_1_1 = objects_1.next(); !objects_1_1.done; objects_1_1 = objects_1.next()) {
                var object = objects_1_1.value;
                xml += object.toXml();
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (objects_1_1 && !objects_1_1.done && (_a = objects_1.return)) _a.call(objects_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return xml;
    };
    Room.prototype.parseInnerXml = function (element) {
        var e_2, _a;
        var objects = [];
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_game_table__WEBPACK_IMPORTED_MODULE_9__["GameTable"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_game_table_mask__WEBPACK_IMPORTED_MODULE_10__["GameTableMask"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_terrain__WEBPACK_IMPORTED_MODULE_11__["Terrain"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_text_note__WEBPACK_IMPORTED_MODULE_12__["TextNote"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_card_stack__WEBPACK_IMPORTED_MODULE_2__["CardStack"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_card__WEBPACK_IMPORTED_MODULE_1__["Card"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_dice_symbol__WEBPACK_IMPORTED_MODULE_7__["DiceSymbol"]));
        try {
            for (var objects_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(objects), objects_2_1 = objects_2.next(); !objects_2_1.done; objects_2_1 = objects_2.next()) {
                var object = objects_2_1.value;
                object.destroy();
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (objects_2_1 && !objects_2_1.done && (_a = objects_2.return)) _a.call(objects_2);
            }
            finally { if (e_2) throw e_2.error; }
        }
        for (var i = 0; i < element.children.length; i++) {
            _core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_5__["ObjectSerializer"].instance.parseXml(element.children[i]);
        }
    };
    Room = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncObject"])('room')
    ], Room);
    return Room;
}(_core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_4__["GameObject"]));



/***/ }),

/***/ "EfKb":
/*!****************************************************!*\
  !*** ./src/app/component/modal/modal.component.ts ***!
  \****************************************************/
/*! exports provided: ModalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ModalComponent", function() { return ModalComponent; });
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/animations */ "R0Ic");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! service/modal.service */ "CE6K");




var _c0 = ["content"];
var _c1 = ["*"];
var ModalComponent = /** @class */ (function () {
    function ModalComponent(modalService) {
        this.modalService = modalService;
    }
    ModalComponent.prototype.clickBackground = function (event) {
        if (event.target === event.currentTarget)
            this.resolve();
    };
    ModalComponent.prototype.resolve = function () {
        this.modalService.resolve(null);
    };
    ModalComponent.prototype.reject = function () {
        this.modalService.reject();
    };
    ModalComponent.ɵfac = function ModalComponent_Factory(t) { return new (t || ModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_2__["ModalService"])); };
    ModalComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: ModalComponent, selectors: [["modal"]], viewQuery: function ModalComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵviewQuery"](_c0, 3, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"]);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.content = _t.first);
        } }, ngContentSelectors: _c1, decls: 13, vars: 3, consts: [[1, "component"], [1, "modal-background", 3, "click"], [1, "modal-panel"], [1, "title"], [1, "title-button"], [3, "click"], [1, "material-icons", 2, "font-size", "14px"], [1, "scrollable-panel"], ["content", ""]], template: function ModalComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojectionDef"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ModalComponent_Template_div_click_1_listener($event) { return ctx.clickBackground($event); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "button", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ModalComponent_Template_button_click_5_listener() { return ctx.resolve(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "i", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](7, "close");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojection"](10);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](11, "div", null, 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("@bgInOut", "in");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("@flyInOut", "in");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", ctx.modalService.title, " ");
        } }, styles: [".component[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  position: absolute;\n  top :0;\n  bottom :0;\n  left :0;\n  right :0;\n  z-index: 9999;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  overscroll-behavior: contain;\n  -webkit-overflow-scrolling: touch;\n}\n\n.modal-background[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  position: absolute;\n  color: #CCC;\n  background-color: rgba(30, 30, 30, 0.3);\n  top :0;\n  bottom :0;\n  left :0;\n  right :0;\n  z-index: -1;\n}\n\n.modal-panel[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  overflow: hidden;\n\n  color: #444;\n  background: linear-gradient(-30deg, rgba(240,218,189, 0.9), rgba(255, 244, 232, 0.9));\n  border:solid 1px #999;\n\n  height: auto;\n  max-height: calc(100% - 10px);\n  width: 800px;\n  max-width: 100%;\n}\n\n.title[_ngcontent-%COMP%]{\n  position: relative;\n  overflow: hidden;\n  white-space: nowrap;\n  box-sizing: border-box;\n  font-size: 12px;\n  height: 25px;\n  padding: 2px 5px;\n  width: 100%;\n  background-color: #CCC;\n  color: #444;\n}\n\n.title-button[_ngcontent-%COMP%] {\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  background: none;\n  border: none;\n  border-radius: 0;\n  outline: none;\n  color: #444;\n}\n\n.header[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], footer[_ngcontent-%COMP%]{\n  padding: 10px;\n}\n\n.scrollable-panel[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  overflow: auto;\n  max-height: calc(100vh - 41px);\n  width: 100%;\n  padding: 8px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGFsLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLE1BQU07RUFDTixTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7RUFDUixhQUFhOztFQUViLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsdUJBQXVCOztFQUV2Qiw0QkFBNEI7RUFDNUIsaUNBQWlDO0FBQ25DOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsdUNBQXVDO0VBQ3ZDLE1BQU07RUFDTixTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7RUFDUixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsZ0JBQWdCOztFQUVoQixXQUFXO0VBQ1gscUZBQXFGO0VBQ3JGLHFCQUFxQjs7RUFFckIsWUFBWTtFQUNaLDZCQUE2QjtFQUM3QixZQUFZO0VBQ1osZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLHNCQUFzQjtFQUN0QixlQUFlO0VBQ2YsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixXQUFXO0VBQ1gsc0JBQXNCO0VBQ3RCLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixRQUFRO0VBQ1IsTUFBTTtBQUNSOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIsYUFBYTtFQUNiLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixjQUFjO0VBQ2QsOEJBQThCO0VBQzlCLFdBQVc7RUFDWCxZQUFZO0FBQ2QiLCJmaWxlIjoibW9kYWwuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb21wb25lbnQge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcCA6MDtcbiAgYm90dG9tIDowO1xuICBsZWZ0IDowO1xuICByaWdodCA6MDtcbiAgei1pbmRleDogOTk5OTtcblxuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcblxuICBvdmVyc2Nyb2xsLWJlaGF2aW9yOiBjb250YWluO1xuICAtd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzogdG91Y2g7XG59XG5cbi5tb2RhbC1iYWNrZ3JvdW5kIHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBjb2xvcjogI0NDQztcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjMpO1xuICB0b3AgOjA7XG4gIGJvdHRvbSA6MDtcbiAgbGVmdCA6MDtcbiAgcmlnaHQgOjA7XG4gIHotaW5kZXg6IC0xO1xufVxuXG4ubW9kYWwtcGFuZWwge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuXG4gIGNvbG9yOiAjNDQ0O1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoLTMwZGVnLCByZ2JhKDI0MCwyMTgsMTg5LCAwLjkpLCByZ2JhKDI1NSwgMjQ0LCAyMzIsIDAuOSkpO1xuICBib3JkZXI6c29saWQgMXB4ICM5OTk7XG5cbiAgaGVpZ2h0OiBhdXRvO1xuICBtYXgtaGVpZ2h0OiBjYWxjKDEwMCUgLSAxMHB4KTtcbiAgd2lkdGg6IDgwMHB4O1xuICBtYXgtd2lkdGg6IDEwMCU7XG59XG5cbi50aXRsZXtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBmb250LXNpemU6IDEycHg7XG4gIGhlaWdodDogMjVweDtcbiAgcGFkZGluZzogMnB4IDVweDtcbiAgd2lkdGg6IDEwMCU7XG4gIGJhY2tncm91bmQtY29sb3I6ICNDQ0M7XG4gIGNvbG9yOiAjNDQ0O1xufVxuXG4udGl0bGUtYnV0dG9uIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICByaWdodDogMDtcbiAgdG9wOiAwO1xufVxuXG4udGl0bGUgYnV0dG9uIHtcbiAgYmFja2dyb3VuZDogbm9uZTtcbiAgYm9yZGVyOiBub25lO1xuICBib3JkZXItcmFkaXVzOiAwO1xuICBvdXRsaW5lOiBub25lO1xuICBjb2xvcjogIzQ0NDtcbn1cblxuLmhlYWRlciwgLmNvbnRlbnQsIGZvb3RlcntcbiAgcGFkZGluZzogMTBweDtcbn1cblxuLnNjcm9sbGFibGUtcGFuZWwge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBvdmVyZmxvdzogYXV0bztcbiAgbWF4LWhlaWdodDogY2FsYygxMDB2aCAtIDQxcHgpO1xuICB3aWR0aDogMTAwJTtcbiAgcGFkZGluZzogOHB4O1xufSJdfQ== */"], data: { animation: [
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('flyInOut', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('100ms ease-out', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale(0.8, 0.8)', opacity: '0', offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale(1.0, 1.0)', opacity: '1.0', offset: 1.0 })
                        ]))
                    ]),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => void', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(100, Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale(0, 0)' }))
                    ])
                ]),
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('bgInOut', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('in', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ 'background-color': 'rgba(30, 30, 30, 0.4)' })),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ 'background-color': 'rgba(30, 30, 30, 0.0)' }), Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(200)
                    ]),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => void', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(200, Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ 'background-color': 'rgba(30, 30, 30, 0.0)' }))
                    ])
                ]),
            ] } });
    return ModalComponent;
}());



/***/ }),

/***/ "F+Vt":
/*!************************************************************!*\
  !*** ./src/app/component/peer-menu/peer-menu.component.ts ***!
  \************************************************************/
/*! exports provided: PeerMenuComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PeerMenuComponent", function() { return PeerMenuComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system/network/peer-context */ "ztsr");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! component/file-selecter/file-selecter.component */ "FR7b");
/* harmony import */ var component_lobby_lobby_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! component/lobby/lobby.component */ "tYii");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_app_config_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/app-config.service */ "6VpD");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");














function PeerMenuComponent_div_0_div_3_Template(rf, ctx) { if (rf & 1) {
    var _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("click", function PeerMenuComponent_div_0_div_3_Template_div_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r11); var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](2); return ctx_r10.changeIcon(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](1, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind2"](1, 2, "url(" + ctx_r9.myPeer.image.url + ")", "style"));
} }
function PeerMenuComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    var _r13 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](1, "button", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("click", function PeerMenuComponent_div_0_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r13); var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](); return ctx_r12.changeIcon(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](2, "\u30A2\u30A4\u30B3\u30F3\u3092\u5909\u66F4\u3059\u308B");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](3, PeerMenuComponent_div_0_div_3_Template, 2, 5, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](4, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](5, "\u3042\u306A\u305F\u306E\u30CB\u30C3\u30AF\u30CD\u30FC\u30E0\uFF1A ");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](6, "input", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("ngModelChange", function PeerMenuComponent_div_0_Template_input_ngModelChange_6_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r13); var ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](); return ctx_r14.myPeer.name = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx_r0.myPeer.image);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngModel", ctx_r0.myPeer.name);
} }
function PeerMenuComponent_span_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate"](ctx_r1.networkService.peerContext.userId);
} }
function PeerMenuComponent_span_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](1, "???");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
} }
function PeerMenuComponent_ng_container_6_span_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate2"]("", ctx_r15.networkService.peerContext.roomName, "/", ctx_r15.networkService.peerContext.roomId, "");
} }
function PeerMenuComponent_ng_container_6_span_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate"](ctx_r16.networkService.peerContext.password);
} }
function PeerMenuComponent_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](1, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](3, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](4, "\u30EB\u30FC\u30E0\u540D\uFF1A");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](5, PeerMenuComponent_ng_container_6_span_5_Template, 2, 2, "span", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](6, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](7, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](8, "\u30D1\u30B9\u30EF\u30FC\u30C9\uFF1A");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](9, PeerMenuComponent_ng_container_6_span_9_Template, 2, 1, "span", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx_r3.networkService.isOpen);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx_r3.networkService.isOpen);
} }
function PeerMenuComponent_div_8_span_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](1, "[\u63A5\u7D9A\u4E2D]");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
} }
function PeerMenuComponent_div_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](1, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](2, PeerMenuComponent_div_8_span_2_Template, 2, 0, "span", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](3, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
} if (rf & 2) {
    var context_r17 = ctx.$implicit;
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", !context_r17.isOpen);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate2"]("\u4ED6\u306E\u53C2\u52A0\u8005\uFF1A", ctx_r4.findUserId(context_r17.peerId), " [", ctx_r4.findPeerName(context_r17.peerId), "]");
} }
function PeerMenuComponent_ng_container_10_Template(rf, ctx) { if (rf & 1) {
    var _r20 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](1, "input", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("ngModelChange", function PeerMenuComponent_ng_container_10_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r20); var ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](); return ctx_r19.targetUserId = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](2, "button", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("click", function PeerMenuComponent_ng_container_10_Template_button_click_2_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r20); var ctx_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](); return ctx_r21.connectPeer(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](3, "\u30D7\u30E9\u30A4\u30D9\u30FC\u30C8\u63A5\u7D9A");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](4, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngModel", ctx_r5.targetUserId);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("disabled", !ctx_r5.networkService.isOpen);
} }
function PeerMenuComponent_button_11_Template(rf, ctx) { if (rf & 1) {
    var _r23 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "button", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("click", function PeerMenuComponent_button_11_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r23); var ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](); return ctx_r22.showLobby(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](1, "\u30ED\u30D3\u30FC\uFF08\u30EB\u30FC\u30E0\u4E00\u89A7\uFF09\u3092\u8868\u793A");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("disabled", !ctx_r6.networkService.isOpen);
} }
function PeerMenuComponent_ng_container_15_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](1, "\u203B\u30D7\u30E9\u30A4\u30D9\u30FC\u30C8\u63A5\u7D9A\u3092\u4F7F\u7528\u3059\u308B\u5834\u5408\u306F\u3001\u304A\u4E92\u3044\u306EID\u3092\u30E6\u30C9\u30CA\u30EA\u30A6\u30E0\u5916\u3067\u5171\u6709\u3057\u3066\u304F\u3060\u3055\u3044\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
} }
function PeerMenuComponent_ng_container_15_div_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](1, "\u203B\u4E00\u4EBA\u3067\u52D5\u4F5C\u78BA\u8A8D\u3092\u884C\u3044\u305F\u3044\u5834\u5408\u306F\u30D6\u30E9\u30A6\u30B6\u30922\u3064\u958B\u304F\u3068\u826F\u3044\u3068\u601D\u3044\u307E\u3059\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
} }
function PeerMenuComponent_ng_container_15_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](1, PeerMenuComponent_ng_container_15_div_1_Template, 2, 0, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](2, PeerMenuComponent_ng_container_15_div_2_Template, 2, 0, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx_r7.networkService.peerContexts.length < 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx_r7.networkService.peerContexts.length < 1);
} }
function PeerMenuComponent_ng_container_16_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](1, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](2, "\u203B\u30EB\u30FC\u30E0\u6A5F\u80FD\u3092\u5229\u7528\u3057\u3066\u3044\u308B\u6642\u306F\u30D7\u30E9\u30A4\u30D9\u30FC\u30C8\u63A5\u7D9A\u3092\u5229\u7528\u3067\u304D\u307E\u305B\u3093\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerEnd"]();
} }
var PeerMenuComponent = /** @class */ (function () {
    function PeerMenuComponent(ngZone, modalService, panelService, appConfigService) {
        this.ngZone = ngZone;
        this.modalService = modalService;
        this.panelService = panelService;
        this.appConfigService = appConfigService;
        this.targetUserId = '';
        this.networkService = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"];
        this.gameRoomService = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance;
        this.help = '';
    }
    Object.defineProperty(PeerMenuComponent.prototype, "myPeer", {
        get: function () { return _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_4__["PeerCursor"].myCursor; },
        enumerable: false,
        configurable: true
    });
    PeerMenuComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.panelService.title = '接続情報'; });
    };
    PeerMenuComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].register(this)
            .on('OPEN_NETWORK', function (event) {
            _this.ngZone.run(function () { });
        });
    };
    PeerMenuComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].unregister(this);
    };
    PeerMenuComponent.prototype.changeIcon = function () {
        var _this = this;
        this.modalService.open(component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_5__["FileSelecterComponent"]).then(function (value) {
            if (!_this.myPeer || !value)
                return;
            _this.myPeer.imageIdentifier = value;
        });
    };
    PeerMenuComponent.prototype.resetPeerIfNeeded = function () {
        if (_udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerContexts.length < 1) {
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].open();
            _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_4__["PeerCursor"].myCursor.peerId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId;
        }
    };
    PeerMenuComponent.prototype.connectPeer = function () {
        this.help = '';
        var context = _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_2__["PeerContext"].create(this.targetUserId);
        if (context.isRoom)
            return;
        _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.clearDeleteHistory();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].connect(context.peerId);
    };
    PeerMenuComponent.prototype.connectPeerHistory = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var conectPeers, roomId, _a, _b, peerId, context, conectPeers_1, peerIds, peerIds_1, peerIds_1_1, peerId, context, listener;
            var e_1, _c, e_2, _d;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        this.help = '';
                        conectPeers = [];
                        roomId = '';
                        try {
                            for (_a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.appConfigService.peerHistory), _b = _a.next(); !_b.done; _b = _a.next()) {
                                peerId = _b.value;
                                context = _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_2__["PeerContext"].parse(peerId);
                                if (context.isRoom) {
                                    if (roomId !== context.roomId)
                                        conectPeers = [];
                                    roomId = context.roomId;
                                    conectPeers.push(context);
                                }
                                else {
                                    if (roomId !== context.roomId)
                                        conectPeers = [];
                                    conectPeers.push(context);
                                }
                            }
                        }
                        catch (e_1_1) { e_1 = { error: e_1_1 }; }
                        finally {
                            try {
                                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);
                            }
                            finally { if (e_1) throw e_1.error; }
                        }
                        if (!roomId.length) return [3 /*break*/, 2];
                        console.warn('connectPeerRoom <' + roomId + '>');
                        conectPeers_1 = [];
                        return [4 /*yield*/, _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].listAllPeers()];
                    case 1:
                        peerIds = _e.sent();
                        try {
                            for (peerIds_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(peerIds), peerIds_1_1 = peerIds_1.next(); !peerIds_1_1.done; peerIds_1_1 = peerIds_1.next()) {
                                peerId = peerIds_1_1.value;
                                console.log(peerId);
                                context = _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_2__["PeerContext"].parse(peerId);
                                if (context.roomId === roomId) {
                                    conectPeers_1.push(context);
                                }
                            }
                        }
                        catch (e_2_1) { e_2 = { error: e_2_1 }; }
                        finally {
                            try {
                                if (peerIds_1_1 && !peerIds_1_1.done && (_d = peerIds_1.return)) _d.call(peerIds_1);
                            }
                            finally { if (e_2) throw e_2.error; }
                        }
                        if (conectPeers_1.length < 1) {
                            this.help = '前回接続していたルームが見つかりませんでした。既に解散しているかもしれません。';
                            console.warn('Room is already closed...');
                            return [2 /*return*/];
                        }
                        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].open(_udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_2__["PeerContext"].generateId(), conectPeers_1[0].roomId, conectPeers_1[0].roomName, conectPeers_1[0].password);
                        return [3 /*break*/, 3];
                    case 2:
                        console.warn('connectPeers ' + conectPeers.length);
                        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].open();
                        _e.label = 3;
                    case 3:
                        _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_4__["PeerCursor"].myCursor.peerId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId;
                        listener = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].register(this);
                        listener.on('OPEN_NETWORK', function (event) {
                            var e_3, _a;
                            console.log('OPEN_NETWORK', event.data.peerId);
                            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].unregisterListener(listener);
                            _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.clearDeleteHistory();
                            try {
                                for (var conectPeers_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(conectPeers), conectPeers_2_1 = conectPeers_2.next(); !conectPeers_2_1.done; conectPeers_2_1 = conectPeers_2.next()) {
                                    var context = conectPeers_2_1.value;
                                    _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].connect(context.peerId);
                                }
                            }
                            catch (e_3_1) { e_3 = { error: e_3_1 }; }
                            finally {
                                try {
                                    if (conectPeers_2_1 && !conectPeers_2_1.done && (_a = conectPeers_2.return)) _a.call(conectPeers_2);
                                }
                                finally { if (e_3) throw e_3.error; }
                            }
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    PeerMenuComponent.prototype.showLobby = function () {
        this.modalService.open(component_lobby_lobby_component__WEBPACK_IMPORTED_MODULE_6__["LobbyComponent"], { width: 700, height: 400, left: 0, top: 400 });
    };
    PeerMenuComponent.prototype.findUserId = function (peerId) {
        var peerCursor = _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_4__["PeerCursor"].findByPeerId(peerId);
        return peerCursor ? peerCursor.userId : '';
    };
    PeerMenuComponent.prototype.findPeerName = function (peerId) {
        var peerCursor = _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_4__["PeerCursor"].findByPeerId(peerId);
        return peerCursor ? peerCursor.name : '';
    };
    PeerMenuComponent.ɵfac = function PeerMenuComponent_Factory(t) { return new (t || PeerMenuComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_7__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_8__["ModalService"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_9__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](service_app_config_service__WEBPACK_IMPORTED_MODULE_10__["AppConfigService"])); };
    PeerMenuComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdefineComponent"]({ type: PeerMenuComponent, selectors: [["peer-menu"]], decls: 17, vars: 10, consts: [[4, "ngIf"], ["style", "font-weight: bold;", 4, "ngIf"], [4, "ngFor", "ngForOf"], [3, "disabled", "click", 4, "ngIf"], [2, "font-size", "12px"], [3, "click"], ["class", "image cover", 3, "background-image", "click", 4, "ngIf"], ["placeholder", "\u30CB\u30C3\u30AF\u30CD\u30FC\u30E0", 3, "ngModel", "ngModelChange"], [1, "image", "cover", 3, "click"], [2, "font-weight", "bold"], ["placeholder", "\u63A5\u7D9A\u3057\u305F\u3044\u76F8\u624B\u306EID", "name", "targetUserId", 3, "ngModel", "ngModelChange"], [3, "disabled", "click"], ["style", "font-size: 12px;", 4, "ngIf"]], template: function PeerMenuComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](0, PeerMenuComponent_div_0_Template, 7, 2, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](1, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](2, "span");
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](3, "\u3042\u306A\u305F\u306EID\uFF1A");
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](4, PeerMenuComponent_span_4_Template, 2, 1, "span", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](5, PeerMenuComponent_span_5_Template, 2, 0, "span", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](6, PeerMenuComponent_ng_container_6_Template, 10, 2, "ng-container", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](7, "hr");
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](8, PeerMenuComponent_div_8_Template, 5, 3, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](9, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](10, PeerMenuComponent_ng_container_10_Template, 5, 2, "ng-container", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](11, PeerMenuComponent_button_11_Template, 2, 1, "button", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](12, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](13, "span", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](14);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](15, PeerMenuComponent_ng_container_15_Template, 3, 2, "ng-container", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](16, PeerMenuComponent_ng_container_16_Template, 3, 0, "ng-container", 0);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx.myPeer);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](4);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx.networkService.isOpen);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", !ctx.networkService.isOpen);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx.networkService.peerContext.isRoom);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngForOf", ctx.networkService.peerContexts);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", !ctx.networkService.peerContext.isRoom);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx.networkService.peerIds.length <= 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate"](ctx.help);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", !ctx.networkService.peerContext.isRoom);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx.networkService.peerContext.isRoom);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_11__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgForOf"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["NgModel"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_13__["SafePipe"]], styles: [".image[_ngcontent-%COMP%] {\n  padding: 0px;\n  width: 128px;\n  height: 128px;\n  display: table-cell;\n  vertical-align: top;\n}\n\n.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{\n  width: auto;\n  height: auto;\n  max-width:100%;\n  max-height:100%;\n  vertical-align: bottom;\n}\n\n.cover[_ngcontent-%COMP%] {\n  background-position: center top;\n  background-repeat: no-repeat;\n  background-size: cover;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBlZXItbWVudS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsWUFBWTtFQUNaLFlBQVk7RUFDWixhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxZQUFZO0VBQ1osY0FBYztFQUNkLGVBQWU7RUFDZixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSwrQkFBK0I7RUFDL0IsNEJBQTRCO0VBQzVCLHNCQUFzQjtBQUN4QiIsImZpbGUiOiJwZWVyLW1lbnUuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pbWFnZSB7XG4gIHBhZGRpbmc6IDBweDtcbiAgd2lkdGg6IDEyOHB4O1xuICBoZWlnaHQ6IDEyOHB4O1xuICBkaXNwbGF5OiB0YWJsZS1jZWxsO1xuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xufVxuXG4uaW1hZ2UgaW1ne1xuICB3aWR0aDogYXV0bztcbiAgaGVpZ2h0OiBhdXRvO1xuICBtYXgtd2lkdGg6MTAwJTtcbiAgbWF4LWhlaWdodDoxMDAlO1xuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xufVxuXG4uY292ZXIge1xuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXIgdG9wO1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xufSJdfQ== */"] });
    return PeerMenuComponent;
}());



/***/ }),

/***/ "F67Z":
/*!**************************************************************!*\
  !*** ./src/app/class/core/synchronize-object/object-node.ts ***!
  \**************************************************************/
/*! exports provided: ObjectNode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectNode", function() { return ObjectNode; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _system_util_xml_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../system/util/xml-util */ "cfGu");
/* harmony import */ var _decorator_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./decorator-core */ "rl/O");
/* harmony import */ var _game_object__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./game-object */ "xdgh");
/* harmony import */ var _object_serializer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./object-serializer */ "MDT1");
/* harmony import */ var _object_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./object-store */ "hm7o");






var ObjectNode = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(ObjectNode, _super);
    function ObjectNode() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.value = '';
        _this.attributes = {};
        _this.parentIdentifier = '';
        _this.majorIndex = 0;
        _this.minorIndex = Math.random();
        _this._children = [];
        _this.needsSort = true;
        return _this;
    }
    ObjectNode_1 = ObjectNode;
    Object.defineProperty(ObjectNode.prototype, "index", {
        get: function () { return this.majorIndex + this.minorIndex; },
        set: function (index) {
            this.majorIndex = index | 0;
            this.minorIndex = index - this.majorIndex;
            if (this.parent)
                this.parent.needsSort = true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectNode.prototype, "parent", {
        get: function () { return _object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(this.parentIdentifier); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectNode.prototype, "parentId", {
        get: function () { return this.parentIdentifier; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectNode.prototype, "parentIsAssigned", {
        get: function () { return 0 < this.parentIdentifier.length; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectNode.prototype, "parentIsUnknown", {
        get: function () { return this.parentIsAssigned && _object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(this.parentIdentifier) == null; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectNode.prototype, "parentIsDestroyed", {
        get: function () { return this.parentIsAssigned && _object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.isDeleted(this.parentIdentifier); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectNode.prototype, "children", {
        get: function () {
            if (this.needsSort) {
                this.needsSort = false;
                this._children.sort(function (a, b) { return a.index - b.index; });
            }
            return this._children.concat();
        },
        enumerable: false,
        configurable: true
    });
    // override
    ObjectNode.prototype.destroy = function () {
        var e_1, _a;
        _super.prototype.destroy.call(this);
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this._children.concat()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var child = _c.value;
                child.destroy();
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        this._children = [];
    };
    // GameObject Lifecycle
    ObjectNode.prototype.onStoreAdded = function () {
        _super.prototype.onStoreAdded.call(this);
        this.initializeChildren();
    };
    // GameObject Lifecycle
    ObjectNode.prototype.onStoreRemoved = function () {
        _super.prototype.onStoreRemoved.call(this);
        if (this.parent)
            this.parent.removeChild(this);
    };
    // ObjectNode Lifecycle
    ObjectNode.prototype.onChildAdded = function (child) { };
    // ObjectNode Lifecycle
    ObjectNode.prototype.onChildRemoved = function (child) { };
    ObjectNode.prototype._onChildAdded = function (child) {
        var node = this;
        while (node) {
            node.onChildAdded(child);
            node = node.parent;
            if (node === this)
                break;
        }
    };
    ObjectNode.prototype._onChildRemoved = function (child) {
        var node = this;
        while (node) {
            node.onChildRemoved(child);
            node = node.parent;
            if (node === this)
                break;
        }
    };
    ObjectNode.prototype.initializeChildren = function () {
        var e_2, _a;
        if (ObjectNode_1.unknownNodes[this.identifier] == null)
            return;
        var objects = ObjectNode_1.unknownNodes[this.identifier];
        try {
            for (var objects_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(objects), objects_1_1 = objects_1.next(); !objects_1_1.done; objects_1_1 = objects_1.next()) {
                var object = objects_1_1.value;
                if (object.parent === this)
                    this.updateChildren(object);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (objects_1_1 && !objects_1_1.done && (_a = objects_1.return)) _a.call(objects_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        if (ObjectNode_1.unknownNodes[this.identifier]) {
            delete ObjectNode_1.unknownNodes[this.identifier];
        }
    };
    ObjectNode.prototype.updateChildren = function (child) {
        if (child === void 0) { child = this; }
        var index = this._children.indexOf(child);
        var isAdded = false;
        var isMyChild = child.parent === this;
        if (index < 0 && isMyChild) {
            this._children.push(child);
            index = this._children.length - 1;
            isAdded = true;
        }
        else if (0 <= index && !isMyChild) {
            this._children.splice(index, 1);
            this._onChildRemoved(child);
            return;
        }
        else if (index < 0 && !isMyChild) {
            return;
        }
        var childrenLength = this._children.length;
        if (!childrenLength)
            return;
        var prevIndex = index - 1 < 0 ? 0 : index - 1;
        var nextIndex = childrenLength - 1 < index + 1 ? childrenLength - 1 : index + 1;
        if (this._children[prevIndex].index > child.index || child.index > this._children[nextIndex].index)
            this.needsSort = true;
        if (isAdded)
            this._onChildAdded(child);
    };
    ObjectNode.prototype.updateIndexs = function () {
        var children = this.children;
        for (var i = 0; i < children.length; i++) {
            children[i].majorIndex = i;
            children[i].minorIndex = Math.random();
        }
    };
    ObjectNode.prototype.appendChild = function (child) {
        if (child.contains(this))
            return null;
        if (child.parent && child.parent !== this)
            child.parent.removeChild(child);
        var lastIndex = 0 < this.children.length ? this.children[this.children.length - 1].majorIndex + 1 : 0;
        child.parentIdentifier = this.identifier;
        child.majorIndex = lastIndex;
        child.minorIndex = Math.random();
        this.updateChildren(child);
        return child;
    };
    ObjectNode.prototype.insertBefore = function (child, reference) {
        if (child.contains(this))
            return null;
        if (child === reference && child.parent === this)
            return child;
        if (child.parent && child.parent !== this)
            child.parent.removeChild(child);
        var index = this.children.indexOf(reference);
        if (index < 0)
            return this.appendChild(child);
        child.parentIdentifier = this.identifier;
        var prevIndex = 0 < index ? this.children[index - 1].index : 0;
        var diff = reference.index - prevIndex;
        var insertIndex = prevIndex + diff * (0.45 + 0.1 * Math.random());
        child.majorIndex = insertIndex | 0;
        child.minorIndex = insertIndex - child.majorIndex;
        this.updateChildren(child);
        if (diff < 1e-7) {
            this.updateIndexs();
        }
        return child;
    };
    ObjectNode.prototype.removeChild = function (child) {
        var children = this.children;
        var index = children.indexOf(child);
        if (index < 0)
            return null;
        child.parentIdentifier = '';
        child.majorIndex = 0;
        child.minorIndex = Math.random();
        this.updateChildren(child);
        return child;
    };
    ObjectNode.prototype.contains = function (child) {
        var parent = child.parent;
        while (parent) {
            if (parent === child) {
                console.error('あ やっべ、循環参照', child);
                return false;
            }
            if (parent === this)
                return true;
            parent = parent.parent;
        }
        return false;
    };
    ObjectNode.prototype.setAttribute = function (name, value) {
        this.attributes[name] = value;
        this.update();
    };
    ObjectNode.prototype.getAttribute = function (name) {
        if (this.attributes[name] == null) {
            return '';
        }
        return this.attributes[name];
    };
    ObjectNode.prototype.removeAttribute = function (name) {
        delete this.attributes[name];
        this.update();
    };
    ObjectNode.prototype.toAttributes = function () {
        return _object_serializer__WEBPACK_IMPORTED_MODULE_4__["ObjectSerializer"].toAttributes(this.attributes);
    };
    ;
    ObjectNode.prototype.parseAttributes = function (attributes) {
        _object_serializer__WEBPACK_IMPORTED_MODULE_4__["ObjectSerializer"].parseAttributes(this.attributes, attributes);
    };
    ;
    ObjectNode.prototype.innerXml = function () {
        var e_3, _a;
        var xml = '';
        xml += _system_util_xml_util__WEBPACK_IMPORTED_MODULE_1__["XmlUtil"].encodeEntityReference(this.value + '');
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                var child = _c.value;
                xml += _object_serializer__WEBPACK_IMPORTED_MODULE_4__["ObjectSerializer"].instance.toXml(child);
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return xml;
    };
    ;
    ObjectNode.prototype.parseInnerXml = function (element) {
        var children = element.children;
        var length = children.length;
        if (0 < length) {
            for (var i = 0; i < length; i++) {
                var child = _object_serializer__WEBPACK_IMPORTED_MODULE_4__["ObjectSerializer"].instance.parseXml(children[i]);
                if (child instanceof ObjectNode_1)
                    this.appendChild(child);
            }
        }
        else {
            this.value = _system_util_xml_util__WEBPACK_IMPORTED_MODULE_1__["XmlUtil"].decodeEntityReference(element.innerHTML);
        }
    };
    ;
    // override
    ObjectNode.prototype.apply = function (context) {
        var oldParent = this.parent;
        _super.prototype.apply.call(this, context);
        if (oldParent && this.parent !== oldParent)
            oldParent.updateChildren(this);
        if (this.parent) {
            this.parent.updateChildren(this);
        }
        else if (this.parentIsAssigned) {
            if (!(this.parentIdentifier in ObjectNode_1.unknownNodes)) {
                ObjectNode_1.unknownNodes[this.parentIdentifier] = [];
            }
            ObjectNode_1.unknownNodes[this.parentIdentifier].push(this);
        }
    };
    var ObjectNode_1;
    // TODO 名前　親Nodeの存在が未知の状態であるNode
    ObjectNode.unknownNodes = {};
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_decorator_core__WEBPACK_IMPORTED_MODULE_2__["defineSyncVariable"])()
    ], ObjectNode.prototype, "value", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_decorator_core__WEBPACK_IMPORTED_MODULE_2__["defineSyncVariable"])()
    ], ObjectNode.prototype, "attributes", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_decorator_core__WEBPACK_IMPORTED_MODULE_2__["defineSyncVariable"])()
    ], ObjectNode.prototype, "parentIdentifier", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_decorator_core__WEBPACK_IMPORTED_MODULE_2__["defineSyncVariable"])()
    ], ObjectNode.prototype, "majorIndex", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_decorator_core__WEBPACK_IMPORTED_MODULE_2__["defineSyncVariable"])()
    ], ObjectNode.prototype, "minorIndex", void 0);
    ObjectNode = ObjectNode_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_decorator_core__WEBPACK_IMPORTED_MODULE_2__["defineSyncObject"])('node')
    ], ObjectNode);
    return ObjectNode;
}(_game_object__WEBPACK_IMPORTED_MODULE_3__["GameObject"]));



/***/ }),

/***/ "FR7b":
/*!********************************************************************!*\
  !*** ./src/app/component/file-selecter/file-selecter.component.ts ***!
  \********************************************************************/
/*! exports provided: FileSelecterComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FileSelecterComponent", function() { return FileSelecterComponent; });
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");








function FileSelecterComponent_span_1_Template(rf, ctx) { if (rf & 1) {
    var _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "span", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "button", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function FileSelecterComponent_span_1_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r3); var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](); return ctx_r2.onSelectedFile(ctx_r2.empty); });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "\u753B\u50CF\u306A\u3057");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} }
function FileSelecterComponent_span_2_img_1_Template(rf, ctx) { if (rf & 1) {
    var _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "img", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function FileSelecterComponent_span_2_img_1_Template_img_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r9); var file_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().$implicit; var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](); return ctx_r7.onSelectedFile(file_r4); });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](1, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    var file_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind2"](1, 2, file_r4.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵsanitizeUrl"])("alt", file_r4.name);
} }
function FileSelecterComponent_span_2_img_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](0, "img", 9);
} if (rf & 2) {
    var file_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpropertyInterpolate"]("alt", file_r4.name);
} }
function FileSelecterComponent_span_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "span", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, FileSelecterComponent_span_2_img_1_Template, 2, 5, "img", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](2, FileSelecterComponent_span_2_img_2_Template, 1, 1, "img", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    var file_r4 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", 0 < file_r4.url.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", file_r4.url.length <= 0);
} }
var FileSelecterComponent = /** @class */ (function () {
    function FileSelecterComponent(changeDetector, panelService, modalService) {
        this.changeDetector = changeDetector;
        this.panelService = panelService;
        this.modalService = modalService;
        this.isAllowedEmpty = false;
        this.isAllowedEmpty = this.modalService.option && this.modalService.option.isAllowedEmpty ? true : false;
    }
    Object.defineProperty(FileSelecterComponent.prototype, "images", {
        get: function () { return _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_1__["ImageStorage"].instance.images; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(FileSelecterComponent.prototype, "empty", {
        get: function () { return _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_0__["ImageFile"].Empty; },
        enumerable: false,
        configurable: true
    });
    FileSelecterComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.modalService.title = _this.panelService.title = 'ファイル一覧'; });
    };
    FileSelecterComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].register(this).on('SYNCHRONIZE_FILE_LIST', function (event) {
            if (event.isSendFromSelf) {
                _this.changeDetector.markForCheck();
            }
        });
    };
    FileSelecterComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].unregister(this);
    };
    FileSelecterComponent.prototype.onSelectedFile = function (file) {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].call('SELECT_FILE', { fileIdentifier: file.identifier }, _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerId);
        this.modalService.resolve(file.identifier);
    };
    FileSelecterComponent.ɵfac = function FileSelecterComponent_Factory(t) { return new (t || FileSelecterComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_3__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_4__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_5__["ModalService"])); };
    FileSelecterComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({ type: FileSelecterComponent, selectors: [["file-selector"]], inputs: { isAllowedEmpty: "isAllowedEmpty" }, decls: 3, vars: 2, consts: [["id", "file-list"], ["class", "empty", 4, "ngIf"], ["class", "image", 4, "ngFor", "ngForOf"], [1, "empty"], [3, "click"], [1, "image"], ["height", "120", 3, "src", "alt", "click", 4, "ngIf"], ["src", "./assets/images/loading.gif", 3, "alt", 4, "ngIf"], ["height", "120", 3, "src", "alt", "click"], ["src", "./assets/images/loading.gif", 3, "alt"]], template: function FileSelecterComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, FileSelecterComponent_span_1_Template, 3, 0, "span", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](2, FileSelecterComponent_span_2_Template, 3, 2, "span", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.isAllowedEmpty);
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", ctx.images);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_6__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_6__["NgForOf"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_7__["SafePipe"]], styles: [".image[_ngcontent-%COMP%] {\n  font-size: 0;\n}\n\n.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  vertical-align: bottom;\n}\n\n.empty[_ngcontent-%COMP%] {\n  line-height: 120px;\n  vertical-align: middle;\n}\n\n.empty[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  height: 100px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGUtc2VsZWN0ZXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxhQUFhO0FBQ2YiLCJmaWxlIjoiZmlsZS1zZWxlY3Rlci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmltYWdlIHtcbiAgZm9udC1zaXplOiAwO1xufVxuXG4uaW1hZ2UgIGltZyB7XG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XG59XG5cbi5lbXB0eSB7XG4gIGxpbmUtaGVpZ2h0OiAxMjBweDtcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbn1cblxuLmVtcHR5IGJ1dHRvbiB7XG4gIGhlaWdodDogMTAwcHg7XG59XG4iXX0= */"], changeDetection: 0 });
    return FileSelecterComponent;
}());



/***/ }),

/***/ "FREB":
/*!****************************************************************!*\
  !*** ./src/app/component/dice-symbol/dice-symbol.component.ts ***!
  \****************************************************************/
/*! exports provided: DiceSymbolComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiceSymbolComponent", function() { return DiceSymbolComponent; });
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/animations */ "R0Ic");
/* harmony import */ var _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var directive_input_handler__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! directive/input-handler */ "96Ug");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_image_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! service/image.service */ "Hvpu");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var directive_movable_directive__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! directive/movable.directive */ "+Kyd");
/* harmony import */ var directive_rotable_directive__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! directive/rotable.directive */ "3jYK");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");


















function DiceSymbolComponent_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](1, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](2, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](3, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](4, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](5, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](6, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerEnd"]();
} }
function DiceSymbolComponent_div_10_span_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate"](ctx_r4.face);
} }
function DiceSymbolComponent_div_10_span_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](1, "???");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
} }
function DiceSymbolComponent_div_10_span_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate"](ctx_r6.face);
} }
function DiceSymbolComponent_div_10_span_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](1, "???");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
} }
var _c0 = function (a0) { return { "transform": a0 }; };
function DiceSymbolComponent_div_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](1, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](3, DiceSymbolComponent_div_10_span_3_Template, 2, 1, "span", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](4, DiceSymbolComponent_div_10_span_4_Template, 2, 0, "span", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](5, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](7, DiceSymbolComponent_div_10_span_7_Template, 2, 1, "span", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](8, DiceSymbolComponent_div_10_span_8_Template, 2, 0, "span", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpureFunction1"](7, _c0, "translateX(-50%) translateX(" + ctx_r1.size * ctx_r1.gridSize / 2 + "px)"));
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"]("", ctx_r1.name, ":");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", ctx_r1.isVisible);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", !ctx_r1.isVisible);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"]("", ctx_r1.name, ":");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", ctx_r1.isVisible);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", !ctx_r1.isVisible);
} }
function DiceSymbolComponent_div_11_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](1, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](3, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpureFunction1"](3, _c0, "translateX(-50%) translateX(" + ctx_r2.size * ctx_r2.gridSize / 2 + "px)"));
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate"](ctx_r2.ownerName);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate"](ctx_r2.ownerName);
} }
var _c1 = function (a0, a1) { return { "is-black-mask": a0, "is-harf-black-mask": a1 }; };
function DiceSymbolComponent_img_12_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelement"](0, "img", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](1, "safe");
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](1, 2, ctx_r3.imageFile.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵsanitizeUrl"])("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpureFunction2"](5, _c1, !ctx_r3.isVisible, ctx_r3.isMine));
} }
var _c2 = function (a0) { return { "is-gray-border": a0 }; };
var DiceSymbolComponent = /** @class */ (function () {
    function DiceSymbolComponent(ngZone, panelService, contextMenuService, elementRef, changeDetector, imageService, pointerDeviceService) {
        this.ngZone = ngZone;
        this.panelService = panelService;
        this.contextMenuService = contextMenuService;
        this.elementRef = elementRef;
        this.changeDetector = changeDetector;
        this.imageService = imageService;
        this.pointerDeviceService = pointerDeviceService;
        this.diceSymbol = null;
        this.is3D = false;
        this.animeState = 'inactive';
        this.iconHiddenTimer = null;
        this.gridSize = 50;
        this.movableOption = {};
        this.rotableOption = {};
        this.doubleClickTimer = null;
        this.doubleClickPoint = { x: 0, y: 0 };
        this.input = null;
    }
    Object.defineProperty(DiceSymbolComponent.prototype, "face", {
        get: function () { return this.diceSymbol.face; },
        set: function (face) { this.diceSymbol.face = face; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "owner", {
        get: function () { return this.diceSymbol.owner; },
        set: function (owner) { this.diceSymbol.owner = owner; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "rotate", {
        get: function () { return this.diceSymbol.rotate; },
        set: function (rotate) { this.diceSymbol.rotate = rotate; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "name", {
        get: function () { return this.diceSymbol.name; },
        set: function (name) { this.diceSymbol.name = name; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "size", {
        get: function () { return this.adjustMinBounds(this.diceSymbol.size); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "faces", {
        get: function () { return this.diceSymbol.faces; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "imageFile", {
        get: function () {
            return this.imageService.getEmptyOr(this.diceSymbol.imageFile);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "isMine", {
        get: function () { return this.diceSymbol.isMine; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "hasOwner", {
        get: function () { return this.diceSymbol.hasOwner; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "ownerName", {
        get: function () { return this.diceSymbol.ownerName; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "isVisible", {
        get: function () { return this.diceSymbol.isVisible; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "isIconHidden", {
        get: function () { return this.iconHiddenTimer != null; },
        enumerable: false,
        configurable: true
    });
    ;
    DiceSymbolComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].register(this)
            .on('ROLL_DICE_SYNBOL', -1000, function (event) {
            if (event.data.identifier === _this.diceSymbol.identifier) {
                _this.ngZone.run(function () {
                    _this.animeState = 'inactive';
                    _this.changeDetector.markForCheck();
                    setTimeout(function () { _this.animeState = 'active'; _this.changeDetector.markForCheck(); });
                });
            }
        })
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(event.data.identifier);
            if (!_this.diceSymbol || !object)
                return;
            if ((_this.diceSymbol === object)
                || (object instanceof _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_1__["ObjectNode"] && _this.diceSymbol.contains(object))
                || (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_4__["PeerCursor"] && object.userId === _this.diceSymbol.owner)) {
                _this.changeDetector.markForCheck();
            }
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('UPDATE_FILE_RESOURE', -1000, function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('DISCONNECT_PEER', function (event) {
            var cursor = _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_4__["PeerCursor"].findByPeerId(event.data.peerId);
            if (!cursor || _this.diceSymbol.owner === cursor.userId)
                _this.changeDetector.markForCheck();
        });
        this.movableOption = {
            tabletopObject: this.diceSymbol,
            transformCssOffset: 'translateZ(1.0px)',
            colideLayers: ['terrain']
        };
        this.rotableOption = {
            tabletopObject: this.diceSymbol
        };
    };
    DiceSymbolComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.input = new directive_input_handler__WEBPACK_IMPORTED_MODULE_7__["InputHandler"](_this.elementRef.nativeElement);
        });
        this.input.onStart = function (e) { return _this.ngZone.run(function () { return _this.onInputStart(e); }); };
    };
    DiceSymbolComponent.prototype.ngOnDestroy = function () {
        this.input.destroy();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].unregister(this);
    };
    DiceSymbolComponent.prototype.onDragstart = function (e) {
        e.stopPropagation();
        e.preventDefault();
    };
    DiceSymbolComponent.prototype.animationShuffleDone = function (event) {
        this.animeState = 'inactive';
        this.changeDetector.markForCheck();
    };
    DiceSymbolComponent.prototype.onInputStart = function (e) {
        this.startDoubleClickTimer(e);
        this.startIconHiddenTimer();
    };
    DiceSymbolComponent.prototype.startDoubleClickTimer = function (e) {
        var _this = this;
        if (!this.doubleClickTimer) {
            this.stopDoubleClickTimer();
            this.doubleClickTimer = setTimeout(function () { return _this.stopDoubleClickTimer(); }, e.touches ? 500 : 300);
            this.doubleClickPoint = this.input.pointer;
            return;
        }
        if (e.touches) {
            this.input.onEnd = this.onDoubleClick.bind(this);
        }
        else {
            this.onDoubleClick();
        }
    };
    DiceSymbolComponent.prototype.stopDoubleClickTimer = function () {
        clearTimeout(this.doubleClickTimer);
        this.doubleClickTimer = null;
        this.input.onEnd = null;
    };
    DiceSymbolComponent.prototype.onDoubleClick = function () {
        this.stopDoubleClickTimer();
        var distance = Math.pow((this.doubleClickPoint.x - this.input.pointer.x), 2) + Math.pow((this.doubleClickPoint.y - this.input.pointer.y), 2);
        if (distance < Math.pow(10, 2)) {
            if (this.isVisible)
                this.diceRoll();
        }
    };
    DiceSymbolComponent.prototype.onContextMenu = function (e) {
        var _this = this;
        e.stopPropagation();
        e.preventDefault();
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu)
            return;
        var position = this.pointerDeviceService.pointers[0];
        var actions = [];
        if (this.isVisible) {
            actions.push({
                name: 'ダイスを振る',
                action: function () {
                    _this.diceRoll();
                }
            });
        }
        actions.push(service_context_menu_service__WEBPACK_IMPORTED_MODULE_8__["ContextMenuSeparator"]);
        if (this.isMine || this.hasOwner) {
            actions.push({
                name: 'ダイスを公開',
                action: function () {
                    _this.owner = '';
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["PresetSound"].unlock);
                }
            });
        }
        if (!this.isMine) {
            actions.push({
                name: '自分だけ見る',
                action: function () {
                    _this.owner = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerContext.userId;
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["PresetSound"].lock);
                }
            });
        }
        if (this.isVisible) {
            var subActions_1 = [];
            this.faces.forEach(function (face) {
                subActions_1.push({
                    name: "" + face, action: function () {
                        _this.face = face;
                        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["PresetSound"].dicePut);
                    }
                });
            });
            actions.push({ name: "\u30C0\u30A4\u30B9\u76EE\u3092\u8A2D\u5B9A", action: null, subActions: subActions_1 });
        }
        actions.push(service_context_menu_service__WEBPACK_IMPORTED_MODULE_8__["ContextMenuSeparator"]);
        actions.push({ name: '詳細を表示', action: function () { _this.showDetail(_this.diceSymbol); } });
        actions.push({
            name: 'コピーを作る',
            action: function () {
                var cloneObject = _this.diceSymbol.clone();
                cloneObject.location.x += _this.gridSize;
                cloneObject.location.y += _this.gridSize;
                cloneObject.update();
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["PresetSound"].dicePut);
            }
        });
        actions.push({
            name: '削除する',
            action: function () {
                _this.diceSymbol.destroy();
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["PresetSound"].sweep);
            }
        });
        this.contextMenuService.open(position, actions, this.name);
    };
    DiceSymbolComponent.prototype.onMove = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["PresetSound"].dicePick);
    };
    DiceSymbolComponent.prototype.onMoved = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["PresetSound"].dicePut);
    };
    DiceSymbolComponent.prototype.diceRoll = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].call('ROLL_DICE_SYNBOL', { identifier: this.diceSymbol.identifier });
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["PresetSound"].diceRoll1);
        return this.diceSymbol.diceRoll();
    };
    DiceSymbolComponent.prototype.showDetail = function (gameObject) {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });
        var coordinate = this.pointerDeviceService.pointers[0];
        var title = 'ダイスシンボル設定';
        if (gameObject.name.length)
            title += ' - ' + gameObject.name;
        var option = { title: title, left: coordinate.x - 300, top: coordinate.y - 300, width: 600, height: 600 };
        var component = this.panelService.open(component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_6__["GameCharacterSheetComponent"], option);
        component.tabletopObject = gameObject;
    };
    DiceSymbolComponent.prototype.startIconHiddenTimer = function () {
        var _this = this;
        clearTimeout(this.iconHiddenTimer);
        this.iconHiddenTimer = setTimeout(function () {
            _this.iconHiddenTimer = null;
            _this.changeDetector.markForCheck();
        }, 300);
        this.changeDetector.markForCheck();
    };
    DiceSymbolComponent.prototype.adjustMinBounds = function (value, min) {
        if (min === void 0) { min = 0; }
        return value < min ? min : value;
    };
    DiceSymbolComponent.ɵfac = function DiceSymbolComponent_Factory(t) { return new (t || DiceSymbolComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_9__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_10__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_8__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_9__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_9__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](service_image_service__WEBPACK_IMPORTED_MODULE_11__["ImageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_12__["PointerDeviceService"])); };
    DiceSymbolComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdefineComponent"]({ type: DiceSymbolComponent, selectors: [["dice-symbol"]], hostBindings: function DiceSymbolComponent_HostBindings(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵlistener"]("dragstart", function DiceSymbolComponent_dragstart_HostBindingHandler($event) { return ctx.onDragstart($event); })("contextmenu", function DiceSymbolComponent_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });
        } }, inputs: { diceSymbol: "diceSymbol", is3D: "is3D" }, decls: 13, vars: 19, consts: [["appMovable", "", 1, "component", "is-3d", "is-grab", "is-pointer-events-none", 3, "movable.option", "movable.ondragstart", "movable.ondragend"], [1, "component-content", "is-3d"], ["appRotable", "", 1, "component-content", "is-3d", "is-pointer-events-auto", 3, "rotable.option", "rotable.ondragstart", "rotable.ondragend"], [1, "pedestal-inner", 3, "ngClass"], [1, "pedestal-outer"], [4, "ngIf"], [1, "upright-transform", "is-fit-width", "is-3d"], [1, "rotate-frame", "is-3d"], [1, "rotate-inner", "is-3d"], ["class", "name-tag is-nowrap is-black-background is-3d", 3, "ngStyle", 4, "ngIf"], ["class", "owner-tag is-nowrap is-black-background is-3d", 3, "ngStyle", 4, "ngIf"], ["class", "image", 3, "src", "ngClass", 4, "ngIf"], [1, "pedestal-grab", "rotate-grab"], [1, "pedestal-grab-border"], [1, "material-icons", "of-front"], [1, "material-icons", "of-back"], [1, "name-tag", "is-nowrap", "is-black-background", "is-3d", 3, "ngStyle"], [1, "fornt-tag", "is-3d"], [1, "back-tag", "is-3d"], [1, "owner-tag", "is-nowrap", "is-black-background", "is-3d", 3, "ngStyle"], [1, "fornt-tag", "has-length-limit", "is-3d"], [1, "back-tag", "has-length-limit", "is-3d"], [1, "image", 3, "src", "ngClass"]], template: function DiceSymbolComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵlistener"]("movable.ondragstart", function DiceSymbolComponent_Template_div_movable_ondragstart_0_listener() { return ctx.onMove(); })("movable.ondragend", function DiceSymbolComponent_Template_div_movable_ondragend_0_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](2, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵlistener"]("rotable.ondragstart", function DiceSymbolComponent_Template_div_rotable_ondragstart_2_listener() { return ctx.onMove(); })("rotable.ondragend", function DiceSymbolComponent_Template_div_rotable_ondragend_2_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelement"](3, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelement"](4, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](5, DiceSymbolComponent_ng_container_5_Template, 7, 0, "ng-container", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](6, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵlistener"]("@diceRoll.done", function DiceSymbolComponent_Template_div_animation_diceRoll_done_6_listener($event) { return ctx.animationShuffleDone($event); });
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](7, "div", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](8, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](9, "div", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](10, DiceSymbolComponent_div_10_Template, 9, 9, "div", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](11, DiceSymbolComponent_div_11_Template, 5, 5, "div", 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](12, DiceSymbolComponent_img_12_Template, 2, 8, "img", 11);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵstyleProp"]("width", ctx.size * ctx.gridSize, "px")("height", ctx.size * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("movable.option", ctx.movableOption);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("@bounceInOut", "in");
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("rotable.option", ctx.rotableOption);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpureFunction1"](17, _c2, ctx.hasOwner));
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", !ctx.isIconHidden);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("@diceRoll", ctx.animeState);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵstyleProp"]("width", ctx.size * ctx.gridSize, "px")("height", ctx.size * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", 0 < ctx.name.length);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", ctx.hasOwner && 0 < ctx.ownerName.length);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", 0 < ctx.imageFile.url.length);
        } }, directives: [directive_movable_directive__WEBPACK_IMPORTED_MODULE_13__["MovableDirective"], directive_rotable_directive__WEBPACK_IMPORTED_MODULE_14__["RotableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgStyle"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_16__["SafePipe"]], styles: [".is-grab[_ngcontent-%COMP%] {\n  cursor: grab;\n}\n\n.is-grabbing[_ngcontent-%COMP%] {\n  cursor: grabbing;\n}\n\n.is-3d[_ngcontent-%COMP%] {\n  transform-style: preserve-3d;\n}\n\n.is-transition[_ngcontent-%COMP%] {\n  transition: transform 132ms linear;\n}\n\n.is-pointer-events-none[_ngcontent-%COMP%] {\n  pointer-events: none;\n}\n\n.is-pointer-events-auto[_ngcontent-%COMP%] {\n  pointer-events: auto;\n}\n\n.component[_ngcontent-%COMP%] {\n  position: absolute;\n  height: 50px;\n  width: 50px;\n  -webkit-user-select: none;\n  user-select: none;\n  -moz-user-drag: none;\n  -webkit-user-drag: none;\n}\n\n.component-content[_ngcontent-%COMP%] {\n  width: 100%;\n  height: 100%;\n}\n\n.pedestal-grab[_ngcontent-%COMP%] {\n  z-index: -1;\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n  position: absolute;\n  top: -22px;\n  left: -6px;\n  height: calc(100% + 44px);\n  width: calc(100% + 12px);\n  cursor: default;\n  border-radius: 37px;\n}\n\n.pedestal-grab-border[_ngcontent-%COMP%] {\n  pointer-events: none;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  border-top: solid 28px #999;\n  border-left: solid 12px #999;\n  border-right: solid 12px #CCC;\n  border-bottom: solid 28px #CCC;\n  border-radius: 22px;\n}\n\n.pedestal-inner[_ngcontent-%COMP%] {\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  box-sizing: border-box;\n  border: solid 6px rgb(216, 139, 75);\n  border-radius: 5px;\n}\n\n.is-gray-border[_ngcontent-%COMP%] {\n  border-color: #999;\n}\n\n.pedestal-outer[_ngcontent-%COMP%] {\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  box-sizing: border-box;\n  border: solid 2px #212121;\n  border-radius: 5px;\n}\n\n.upright-transform[_ngcontent-%COMP%] {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  transform: rotateX(-90deg) translateY(-50%);\n}\n\n.is-fit-width[_ngcontent-%COMP%] {\n  height: auto;\n  width: 100%;\n}\n\n.fill-frame[_ngcontent-%COMP%] {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n\n.image[_ngcontent-%COMP%] {\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n\n  width: 100%;\n  height: auto;\n  vertical-align: bottom;\n}\n\n.is-black-mask[_ngcontent-%COMP%] {\n  filter: brightness(0);\n }\n\n.is-harf-black-mask[_ngcontent-%COMP%] {\n  filter: brightness(0.5);\n }\n\n.name-tag[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  font-size: 15px;\n  padding: 3px 9px;\n  border-radius: 6px;\n  position: absolute;\n  top: -30px;\n}\n\n.owner-tag[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  font-size: 12px;\n  padding: 3px 9px;\n  border-radius: 6px;\n  position: absolute;\n  top: -55px;\n}\n\n.rotate-frame[_ngcontent-%COMP%] {\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n\n.rotate-inner[_ngcontent-%COMP%] {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n\n  width: 100%;\n  height: auto;\n}\n\n.is-nowrap[_ngcontent-%COMP%] {\n  white-space: nowrap;\n}\n\n.is-black-background[_ngcontent-%COMP%] {\n  color: #CCC;\n  background-color: rgba(30, 30, 30, 0.8);\n}\n\n.fornt-tag[_ngcontent-%COMP%] {\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n}\n\n.back-tag[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 3px;\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n  transform: rotateY(-180deg);\n}\n\n.has-length-limit[_ngcontent-%COMP%] {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 18em;\n}\n\n.rotate-grab-icon[_ngcontent-%COMP%] {\n  position: absolute;\n  width: 28px;\n  height: 28px;\n  box-sizing: border-box;\n  cursor: -moz-default;\n  cursor: -webkit-default;\n  cursor: default;\n  z-index: 1;\n  padding: 2px;\n  background-color: #CCCCCC;\n  border-radius: 100%;\n  color: #444;\n  font-size: 8px;\n}\n\n.of-top[_ngcontent-%COMP%] {\n  top: -42px;\n}\n\n.of-bottom[_ngcontent-%COMP%] {\n  bottom: -30px;\n}\n\n.of-front[_ngcontent-%COMP%] {\n  position: absolute;\n  width: 24px;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  margin: auto;\n  color: #444;\n}\n\n.of-back[_ngcontent-%COMP%] {\n  position: absolute;\n  width: 24px;\n  top: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  color: #444;\n}\n\n.rotate-grab[_ngcontent-%COMP%] {\n  opacity: 0;\n}\n\n.component[_ngcontent-%COMP%]:hover   .rotate-grab[_ngcontent-%COMP%] {\n  opacity: 0.5;\n}\n\n.component[_ngcontent-%COMP%]:active   .rotate-grab[_ngcontent-%COMP%] {\n  opacity: 0;\n}\n\n.component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:hover, .component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:active {\n  opacity: 1;\n}\n\n.material-icons[_ngcontent-%COMP%] {\n  display: none;\n}\n\n.component[_ngcontent-%COMP%]:hover   .material-icons[_ngcontent-%COMP%], .component[_ngcontent-%COMP%]:active   .material-icons[_ngcontent-%COMP%] {\n  display: inline;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpY2Utc3ltYm9sLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFHRSxZQUFZO0FBQ2Q7O0FBRUE7RUFHRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFFRSw0QkFBNEI7QUFDOUI7O0FBRUE7RUFFRSxrQ0FBa0M7QUFDcEM7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLFdBQVc7RUFHWCx5QkFBeUI7RUFDekIsaUJBQWlCO0VBQ2pCLG9CQUFvQjtFQUNwQix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBO0VBQ0UsV0FBVztFQUNYLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFDM0Isa0JBQWtCO0VBQ2xCLFVBQVU7RUFDVixVQUFVO0VBQ1YseUJBQXlCO0VBQ3pCLHdCQUF3QjtFQUN4QixlQUFlO0VBQ2YsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0Usb0JBQW9CO0VBQ3BCLFdBQVc7RUFDWCxZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLDJCQUEyQjtFQUMzQiw0QkFBNEI7RUFDNUIsNkJBQTZCO0VBQzdCLDhCQUE4QjtFQUM5QixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxtQ0FBMkI7VUFBM0IsMkJBQTJCO0VBQzNCLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1osV0FBVztFQUNYLHNCQUFzQjtFQUN0QixtQ0FBbUM7RUFDbkMsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsbUNBQTJCO1VBQTNCLDJCQUEyQjtFQUMzQixrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIseUJBQXlCO0VBQ3pCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7RUFDUiwyQ0FBMkM7QUFDN0M7O0FBRUE7RUFDRSxZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFNBQVM7RUFDVCxPQUFPO0VBQ1AsUUFBUTtBQUNWOztBQUVBO0VBQ0UsU0FBUztFQUNULE9BQU87RUFDUCxRQUFRO0VBQ1IsWUFBWTs7RUFFWixXQUFXO0VBQ1gsWUFBWTtFQUNaLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLHFCQUFxQjtDQUN0Qjs7QUFFQTtFQUNDLHVCQUF1QjtDQUN4Qjs7QUFFRDtFQUNFLHNCQUFzQjtFQUN0QixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixrQkFBa0I7RUFDbEIsVUFBVTtBQUNaOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsa0JBQWtCO0VBQ2xCLGtCQUFrQjtFQUNsQixVQUFVO0FBQ1o7O0FBRUE7RUFDRSxTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7QUFDVjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7O0VBRVIsV0FBVztFQUNYLFlBQVk7QUFDZDs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCx1Q0FBdUM7QUFDekM7O0FBRUE7RUFDRSxtQ0FBMkI7VUFBM0IsMkJBQTJCO0FBQzdCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFFBQVE7RUFDUixtQ0FBMkI7VUFBM0IsMkJBQTJCO0VBQzNCLDJCQUEyQjtBQUM3Qjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsdUJBQXVCO0VBQ3ZCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsb0JBQW9CO0VBQ3BCLHVCQUF1QjtFQUN2QixlQUFlO0VBQ2YsVUFBVTtFQUNWLFlBQVk7RUFDWix5QkFBeUI7RUFDekIsbUJBQW1CO0VBQ25CLFdBQVc7RUFDWCxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxPQUFPO0VBQ1AsUUFBUTtFQUNSLFNBQVM7RUFDVCxZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxNQUFNO0VBQ04sT0FBTztFQUNQLFFBQVE7RUFDUixZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsZUFBZTtBQUNqQiIsImZpbGUiOiJkaWNlLXN5bWJvbC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmlzLWdyYWIge1xuICBjdXJzb3I6IC1tb3otZ3JhYjtcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWI7XG4gIGN1cnNvcjogZ3JhYjtcbn1cblxuLmlzLWdyYWJiaW5nIHtcbiAgY3Vyc29yOiAtbW96LWdyYWJiaW5nO1xuICBjdXJzb3I6IC13ZWJraXQtZ3JhYmJpbmc7XG4gIGN1cnNvcjogZ3JhYmJpbmc7XG59XG5cbi5pcy0zZCB7XG4gIC13ZWJraXQtdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcbiAgdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcbn1cblxuLmlzLXRyYW5zaXRpb24ge1xuICAtd2Via2l0LXRyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcbn1cblxuLmlzLXBvaW50ZXItZXZlbnRzLW5vbmUge1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbn1cblxuLmlzLXBvaW50ZXItZXZlbnRzLWF1dG8ge1xuICBwb2ludGVyLWV2ZW50czogYXV0bztcbn1cblxuLmNvbXBvbmVudCB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgaGVpZ2h0OiA1MHB4O1xuICB3aWR0aDogNTBweDtcblxuICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgLW1vei11c2VyLWRyYWc6IG5vbmU7XG4gIC13ZWJraXQtdXNlci1kcmFnOiBub25lO1xufVxuXG4uY29tcG9uZW50LWNvbnRlbnQge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG4ucGVkZXN0YWwtZ3JhYiB7XG4gIHotaW5kZXg6IC0xO1xuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAtMjJweDtcbiAgbGVmdDogLTZweDtcbiAgaGVpZ2h0OiBjYWxjKDEwMCUgKyA0NHB4KTtcbiAgd2lkdGg6IGNhbGMoMTAwJSArIDEycHgpO1xuICBjdXJzb3I6IGRlZmF1bHQ7XG4gIGJvcmRlci1yYWRpdXM6IDM3cHg7XG59XG5cbi5wZWRlc3RhbC1ncmFiLWJvcmRlciB7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItdG9wOiBzb2xpZCAyOHB4ICM5OTk7XG4gIGJvcmRlci1sZWZ0OiBzb2xpZCAxMnB4ICM5OTk7XG4gIGJvcmRlci1yaWdodDogc29saWQgMTJweCAjQ0NDO1xuICBib3JkZXItYm90dG9tOiBzb2xpZCAyOHB4ICNDQ0M7XG4gIGJvcmRlci1yYWRpdXM6IDIycHg7XG59XG5cbi5wZWRlc3RhbC1pbm5lciB7XG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHdpZHRoOiAxMDAlO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXI6IHNvbGlkIDZweCByZ2IoMjE2LCAxMzksIDc1KTtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xufVxuXG4uaXMtZ3JheS1ib3JkZXIge1xuICBib3JkZXItY29sb3I6ICM5OTk7XG59XG5cbi5wZWRlc3RhbC1vdXRlciB7XG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHdpZHRoOiAxMDAlO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXI6IHNvbGlkIDJweCAjMjEyMTIxO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG59XG5cbi51cHJpZ2h0LXRyYW5zZm9ybSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgdHJhbnNmb3JtOiByb3RhdGVYKC05MGRlZykgdHJhbnNsYXRlWSgtNTAlKTtcbn1cblxuLmlzLWZpdC13aWR0aCB7XG4gIGhlaWdodDogYXV0bztcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5maWxsLWZyYW1lIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBib3R0b206IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xufVxuXG4uaW1hZ2Uge1xuICBib3R0b206IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBtYXJnaW46IGF1dG87XG5cbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogYXV0bztcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbn1cblxuLmlzLWJsYWNrLW1hc2sge1xuICBmaWx0ZXI6IGJyaWdodG5lc3MoMCk7XG4gfVxuXG4gLmlzLWhhcmYtYmxhY2stbWFzayB7XG4gIGZpbHRlcjogYnJpZ2h0bmVzcygwLjUpO1xuIH1cblxuLm5hbWUtdGFnIHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgZm9udC1zaXplOiAxNXB4O1xuICBwYWRkaW5nOiAzcHggOXB4O1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAtMzBweDtcbn1cblxuLm93bmVyLXRhZyB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgcGFkZGluZzogM3B4IDlweDtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogLTU1cHg7XG59XG5cbi5yb3RhdGUtZnJhbWUge1xuICBib3R0b206IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xufVxuXG4ucm90YXRlLWlubmVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBib3R0b206IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuXG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IGF1dG87XG59XG5cbi5pcy1ub3dyYXAge1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xufVxuXG4uaXMtYmxhY2stYmFja2dyb3VuZCB7XG4gIGNvbG9yOiAjQ0NDO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDMwLCAzMCwgMzAsIDAuOCk7XG59XG5cbi5mb3JudC10YWcge1xuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XG59XG5cbi5iYWNrLXRhZyB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAzcHg7XG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbiAgdHJhbnNmb3JtOiByb3RhdGVZKC0xODBkZWcpO1xufVxuXG4uaGFzLWxlbmd0aC1saW1pdCB7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICBtYXgtd2lkdGg6IDE4ZW07XG59XG5cbi5yb3RhdGUtZ3JhYi1pY29uIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB3aWR0aDogMjhweDtcbiAgaGVpZ2h0OiAyOHB4O1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBjdXJzb3I6IC1tb3otZGVmYXVsdDtcbiAgY3Vyc29yOiAtd2Via2l0LWRlZmF1bHQ7XG4gIGN1cnNvcjogZGVmYXVsdDtcbiAgei1pbmRleDogMTtcbiAgcGFkZGluZzogMnB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDQ0NDO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBjb2xvcjogIzQ0NDtcbiAgZm9udC1zaXplOiA4cHg7XG59XG5cbi5vZi10b3Age1xuICB0b3A6IC00MnB4O1xufVxuXG4ub2YtYm90dG9tIHtcbiAgYm90dG9tOiAtMzBweDtcbn1cblxuLm9mLWZyb250IHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB3aWR0aDogMjRweDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgbWFyZ2luOiBhdXRvO1xuICBjb2xvcjogIzQ0NDtcbn1cblxuLm9mLWJhY2sge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiAyNHB4O1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBtYXJnaW46IGF1dG87XG4gIGNvbG9yOiAjNDQ0O1xufVxuXG4ucm90YXRlLWdyYWIge1xuICBvcGFjaXR5OiAwO1xufVxuXG4uY29tcG9uZW50OmhvdmVyIC5yb3RhdGUtZ3JhYiB7XG4gIG9wYWNpdHk6IDAuNTtcbn1cblxuLmNvbXBvbmVudDphY3RpdmUgLnJvdGF0ZS1ncmFiIHtcbiAgb3BhY2l0eTogMDtcbn1cblxuLmNvbXBvbmVudCAucm90YXRlLWdyYWI6aG92ZXIsIC5jb21wb25lbnQgLnJvdGF0ZS1ncmFiOmFjdGl2ZSB7XG4gIG9wYWNpdHk6IDE7XG59XG5cbi5tYXRlcmlhbC1pY29ucyB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbi5jb21wb25lbnQ6aG92ZXIgLm1hdGVyaWFsLWljb25zLCAuY29tcG9uZW50OmFjdGl2ZSAubWF0ZXJpYWwtaWNvbnMge1xuICBkaXNwbGF5OiBpbmxpbmU7XG59Il19 */"], data: { animation: [
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('diceRoll', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => active', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('800ms ease', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0.8, 0.8, 0.8) rotateZ(0deg)', offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.2, 1.2, 1.2) rotateZ(360deg)', offset: 0.5 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0.75, 0.75, 0.75) rotateZ(520deg)', offset: 0.75 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.125, 1.125, 1.125) rotateZ(630deg)', offset: 0.875 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.0, 1.0, 1.0) rotateZ(720deg)', offset: 1.0 })
                        ]))
                    ])
                ]),
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('bounceInOut', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('600ms ease', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0, 0, 0)', offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.5, 1.5, 1.5)', offset: 0.5 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0.75, 0.75, 0.75)', offset: 0.75 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.125, 1.125, 1.125)', offset: 0.875 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.0, 1.0, 1.0)', offset: 1.0 })
                        ]))
                    ]),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => void', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(100, Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0, 0, 0)' }))
                    ])
                ])
            ] }, changeDetection: 0 });
    return DiceSymbolComponent;
}());



/***/ }),

/***/ "FjwV":
/*!*******************************************************!*\
  !*** ./src/app/class/core/file-storage/image-file.ts ***!
  \*******************************************************/
/*! exports provided: ImageState, ImageFile */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageState", function() { return ImageState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageFile", function() { return ImageFile; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _canvas_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./canvas-util */ "9Fxf");
/* harmony import */ var _file_reader_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./file-reader-util */ "N0uT");



var ImageState;
(function (ImageState) {
    ImageState[ImageState["NULL"] = 0] = "NULL";
    ImageState[ImageState["THUMBNAIL"] = 1] = "THUMBNAIL";
    ImageState[ImageState["COMPLETE"] = 2] = "COMPLETE";
    ImageState[ImageState["URL"] = 1000] = "URL";
})(ImageState || (ImageState = {}));
var ImageFile = /** @class */ (function () {
    function ImageFile() {
        this.context = {
            identifier: '',
            name: '',
            blob: null,
            type: '',
            url: '',
            thumbnail: {
                blob: null,
                type: '',
                url: '',
            }
        };
    }
    Object.defineProperty(ImageFile.prototype, "identifier", {
        get: function () { return this.context.identifier; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(ImageFile.prototype, "name", {
        get: function () { return this.context.name; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(ImageFile.prototype, "blob", {
        get: function () { return this.context.blob ? this.context.blob : this.context.thumbnail.blob; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(ImageFile.prototype, "url", {
        get: function () { return this.context.url ? this.context.url : this.context.thumbnail.url; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(ImageFile.prototype, "thumbnail", {
        get: function () { return this.context.thumbnail; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(ImageFile.prototype, "state", {
        get: function () {
            if (!this.url && !this.blob)
                return ImageState.NULL;
            if (this.url && !this.blob)
                return ImageState.URL;
            if (this.blob === this.thumbnail.blob)
                return ImageState.THUMBNAIL;
            return ImageState.COMPLETE;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ImageFile.prototype, "isEmpty", {
        get: function () { return this.state <= ImageState.NULL; },
        enumerable: false,
        configurable: true
    });
    ImageFile.createEmpty = function (identifier) {
        var imageFile = new ImageFile();
        imageFile.context.identifier = identifier;
        return imageFile;
    };
    ImageFile.create = function (arg) {
        if (typeof arg === 'string') {
            var imageFile = new ImageFile();
            imageFile.context.identifier = arg;
            imageFile.context.name = arg;
            imageFile.context.url = arg;
            return imageFile;
        }
        else {
            var imageFile = new ImageFile();
            imageFile.apply(arg);
            return imageFile;
        }
    };
    ImageFile.createAsync = function (arg) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(arg instanceof File)) return [3 /*break*/, 2];
                        return [4 /*yield*/, ImageFile._createAsync(arg, arg.name)];
                    case 1: return [2 /*return*/, _a.sent()];
                    case 2:
                        if (!(arg instanceof Blob)) return [3 /*break*/, 4];
                        return [4 /*yield*/, ImageFile._createAsync(arg)];
                    case 3: return [2 /*return*/, _a.sent()];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    ImageFile._createAsync = function (blob, name) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var arrayBuffer, imageFile, _a, _b, e_1;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, _file_reader_util__WEBPACK_IMPORTED_MODULE_2__["FileReaderUtil"].readAsArrayBufferAsync(blob)];
                    case 1:
                        arrayBuffer = _c.sent();
                        imageFile = new ImageFile();
                        _a = imageFile.context;
                        return [4 /*yield*/, _file_reader_util__WEBPACK_IMPORTED_MODULE_2__["FileReaderUtil"].calcSHA256Async(arrayBuffer)];
                    case 2:
                        _a.identifier = _c.sent();
                        imageFile.context.name = name;
                        imageFile.context.blob = new Blob([arrayBuffer], { type: blob.type });
                        imageFile.context.url = window.URL.createObjectURL(imageFile.context.blob);
                        _c.label = 3;
                    case 3:
                        _c.trys.push([3, 5, , 6]);
                        _b = imageFile.context;
                        return [4 /*yield*/, ImageFile.createThumbnailAsync(imageFile.context)];
                    case 4:
                        _b.thumbnail = _c.sent();
                        return [3 /*break*/, 6];
                    case 5:
                        e_1 = _c.sent();
                        throw e_1;
                    case 6:
                        if (imageFile.context.name != null)
                            imageFile.context.name = imageFile.context.identifier;
                        return [2 /*return*/, imageFile];
                }
            });
        });
    };
    ImageFile.prototype.destroy = function () {
        this.revokeURLs();
    };
    ImageFile.prototype.apply = function (context) {
        if (!this.context.identifier && context.identifier)
            this.context.identifier = context.identifier;
        if (!this.context.name && context.name)
            this.context.name = context.name;
        if (!this.context.blob && context.blob)
            this.context.blob = context.blob;
        if (!this.context.type && context.type)
            this.context.type = context.type;
        if (!this.context.url && context.url) {
            if (this.state !== ImageState.URL)
                window.URL.revokeObjectURL(this.context.url);
            this.context.url = context.url;
        }
        if (!this.context.thumbnail.blob && context.thumbnail.blob)
            this.context.thumbnail.blob = context.thumbnail.blob;
        if (!this.context.thumbnail.type && context.thumbnail.type)
            this.context.thumbnail.type = context.thumbnail.type;
        if (!this.context.thumbnail.url && context.thumbnail.url) {
            if (this.state !== ImageState.URL)
                window.URL.revokeObjectURL(this.context.thumbnail.url);
            this.context.thumbnail.url = context.thumbnail.url;
        }
        this.createURLs();
    };
    ImageFile.prototype.toContext = function () {
        return {
            identifier: this.context.identifier,
            name: this.context.name,
            blob: this.context.blob,
            type: this.context.type,
            url: this.context.url,
            thumbnail: {
                blob: this.context.thumbnail.blob,
                type: this.context.thumbnail.type,
                url: this.context.thumbnail.url,
            }
        };
    };
    ImageFile.prototype.createURLs = function () {
        if (this.state === ImageState.URL)
            return;
        if (this.context.blob && this.context.url === '')
            this.context.url = window.URL.createObjectURL(this.context.blob);
        if (this.context.thumbnail.blob && this.context.thumbnail.url === '')
            this.context.thumbnail.url = window.URL.createObjectURL(this.context.thumbnail.blob);
    };
    ImageFile.prototype.revokeURLs = function () {
        if (this.state === ImageState.URL)
            return;
        window.URL.revokeObjectURL(this.context.url);
        window.URL.revokeObjectURL(this.context.thumbnail.url);
    };
    ImageFile.createThumbnailAsync = function (context) {
        return new Promise(function (resolve, reject) {
            var canvas = document.createElement('canvas');
            var render = canvas.getContext('2d');
            var image = new Image();
            image.onload = function (event) {
                var scale = 128 / (image.width < image.height ? image.height : image.width);
                scale = scale < 1 ? scale : 1.0;
                var dstWidth = image.width * scale;
                var dstHeight = image.height * scale;
                canvas.width = image.width; //dstWidth;
                canvas.height = image.height; //dstHeight;
                //render.drawImage(image, 0, 0, image.width, image.height, 0, 0, dstWidth, dstHeight);
                render.drawImage(image, 0, 0);
                _canvas_util__WEBPACK_IMPORTED_MODULE_1__["CanvasUtil"].resize(canvas, dstWidth, dstHeight, true);
                canvas.toBlob(function (blob) {
                    var thumbnail = {
                        type: blob.type,
                        blob: blob,
                        url: window.URL.createObjectURL(blob),
                    };
                    resolve(thumbnail);
                }, context.blob.type);
            };
            image.onabort = image.onerror = function () {
                reject();
            };
            image.src = context.url;
        });
    };
    ImageFile.Empty = ImageFile.createEmpty('null');
    return ImageFile;
}());



/***/ }),

/***/ "GEdf":
/*!**********************************************************!*\
  !*** ./src/app/component/game-table/grid-line-render.ts ***!
  \**********************************************************/
/*! exports provided: GridLineRender */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GridLineRender", function() { return GridLineRender; });
/* harmony import */ var _udonarium_game_table__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/game-table */ "RDF6");

var GridLineRender = /** @class */ (function () {
    function GridLineRender(canvasElement) {
        this.canvasElement = canvasElement;
    }
    GridLineRender.prototype.makeBrush = function (context, gridSize, gridColor) {
        // 座標描画用brush設定
        context.strokeStyle = gridColor;
        context.fillStyle = context.strokeStyle;
        context.lineWidth = 1;
        var fontSize = Math.floor(gridSize / 5);
        context.font = "bold " + fontSize + "px sans-serif";
        context.textBaseline = 'top';
        context.textAlign = 'center';
        return context;
    };
    GridLineRender.prototype.render = function (width, height, gridSize, gridType, gridColor) {
        if (gridSize === void 0) { gridSize = 50; }
        if (gridType === void 0) { gridType = _udonarium_game_table__WEBPACK_IMPORTED_MODULE_0__["GridType"].SQUARE; }
        if (gridColor === void 0) { gridColor = '#000000e6'; }
        this.canvasElement.width = width * gridSize;
        this.canvasElement.height = height * gridSize;
        var context = this.canvasElement.getContext('2d');
        if (gridType < 0)
            return;
        var calcGridPosition = this.generateCalcGridPositionFunc(gridType);
        this.makeBrush(context, gridSize, gridColor);
        for (var h = 0; h <= height; h++) {
            for (var w = 0; w <= width; w++) {
                var _a = calcGridPosition(w, h, gridSize), gx = _a.gx, gy = _a.gy;
                this.strokeSquare(context, gx, gy, gridSize);
                context.fillText((w + 1).toString() + '-' + (h + 1).toString(), gx + (gridSize / 2), gy + (gridSize / 2));
            }
        }
    };
    GridLineRender.prototype.generateCalcGridPositionFunc = function (gridType) {
        switch (gridType) {
            case _udonarium_game_table__WEBPACK_IMPORTED_MODULE_0__["GridType"].HEX_VERTICAL: // ヘクス縦揃え
                return function (w, h, gridSize) {
                    if ((w % 2) === 1) {
                        return { gx: w * gridSize, gy: h * gridSize };
                    }
                    else {
                        return { gx: w * gridSize, gy: h * gridSize + (gridSize / 2) };
                    }
                };
            case _udonarium_game_table__WEBPACK_IMPORTED_MODULE_0__["GridType"].HEX_HORIZONTAL: // ヘクス横揃え(どどんとふ互換)
                return function (w, h, gridSize) {
                    if ((h % 2) === 1) {
                        return { gx: w * gridSize, gy: h * gridSize };
                    }
                    else {
                        return { gx: w * gridSize + (gridSize / 2), gy: h * gridSize };
                    }
                };
            default: // スクエア(default)
                return function (w, h, gridSize) {
                    return { gx: w * gridSize, gy: h * gridSize };
                };
        }
    };
    GridLineRender.prototype.strokeSquare = function (context, gx, gy, gridSize) {
        context.beginPath();
        context.strokeRect(gx, gy, gridSize, gridSize);
    };
    GridLineRender.prototype.strokeHex = function (context, gx, gy, gridSize, gridType) {
        var deg = gridType === _udonarium_game_table__WEBPACK_IMPORTED_MODULE_0__["GridType"].HEX_HORIZONTAL ? -30 : 0;
        var radius = gridSize / Math.sqrt(3);
        var cx = gx + gridSize / 2;
        var cy = gy + gridSize / 2;
        context.beginPath();
        for (var i = 0; i < 6; i++) {
            deg += 60;
            var radian = Math.PI / 180 * deg;
            var x = Math.cos(radian) * radius + cx;
            var y = Math.sin(radian) * radius + cy;
            context.lineTo(x, y);
        }
        context.closePath();
        context.stroke();
    };
    return GridLineRender;
}());



/***/ }),

/***/ "GPP8":
/*!***************************************************!*\
  !*** ./src/app/service/pointer-device.service.ts ***!
  \***************************************************/
/*! exports provided: PointerDeviceService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PointerDeviceService", function() { return PointerDeviceService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");


var MOUSE_IDENTIFIER = -9999;
var PointerDeviceService = /** @class */ (function () {
    function PointerDeviceService(ngZone) {
        var _this = this;
        this.ngZone = ngZone;
        this.callbackOnPointerDown = function (e) { return _this.onPointerDown(e); };
        this.callbackOnPointerMove = function (e) { return _this.onPointerMove(e); };
        this.callbackOnPointerUp = function (e) { return _this.onPointerUp(e); };
        this.callbackOnContextMenu = function (e) { return _this.onContextMenu(e); };
        this._isAllowedToOpenContextMenu = false;
        this.pointers = [{ x: 0, y: 0, z: 0, identifier: -1 }];
        this.startPostion = this.pointers[0];
        this.primaryPointer = this.pointers[0];
        this._isDragging = false; // todo
    }
    Object.defineProperty(PointerDeviceService.prototype, "isAllowedToOpenContextMenu", {
        get: function () { return this._isAllowedToOpenContextMenu; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PointerDeviceService.prototype, "pointer", {
        get: function () { return this.primaryPointer; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PointerDeviceService.prototype, "pointerX", {
        get: function () { return this.primaryPointer.x; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PointerDeviceService.prototype, "pointerY", {
        get: function () { return this.primaryPointer.y; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PointerDeviceService.prototype, "isDragging", {
        get: function () { return this._isDragging; },
        set: function (isDragging) {
            var _this = this;
            if (isDragging === this._isDragging)
                return;
            this.ngZone.run(function () { return _this._isDragging = isDragging; });
        },
        enumerable: false,
        configurable: true
    });
    PointerDeviceService.prototype.initialize = function () {
        this.addEventListeners();
    };
    PointerDeviceService.prototype.destroy = function () {
        this.removeEventListeners();
    };
    PointerDeviceService.prototype.onPointerDown = function (e) {
        this.onPointerMove(e);
        this._isAllowedToOpenContextMenu = true;
        this.startPostion = this.pointers[0];
    };
    PointerDeviceService.prototype.onPointerMove = function (e) {
        if (e.touches) {
            this.onTouchMove(e);
        }
        else {
            this.onMouseMove(e);
        }
        this.targetElement = e.target;
    };
    PointerDeviceService.prototype.onPointerUp = function (e) {
        this.onPointerMove(e);
    };
    PointerDeviceService.prototype.onMouseMove = function (e) {
        var mosuePointer = { x: e.pageX, y: e.pageY, z: 0, identifier: MOUSE_IDENTIFIER };
        if (this.isSyntheticEvent(mosuePointer))
            return;
        if (this._isAllowedToOpenContextMenu)
            this.preventContextMenuIfNeeded(mosuePointer);
        this.pointers = [mosuePointer];
        this.primaryPointer = mosuePointer;
    };
    PointerDeviceService.prototype.onTouchMove = function (e) {
        var length = e.touches.length;
        if (length < 1)
            return;
        this.pointers = [];
        for (var i = 0; i < length; i++) {
            var touch = e.touches[i];
            var touchPointer = { x: touch.pageX, y: touch.pageY, z: 0, identifier: touch.identifier };
            if (this._isAllowedToOpenContextMenu)
                this.preventContextMenuIfNeeded(touchPointer);
            this.pointers.push(touchPointer);
        }
        this.primaryPointer = this.pointers[0];
    };
    PointerDeviceService.prototype.onContextMenu = function (e) {
        this._isAllowedToOpenContextMenu = true;
        this.onPointerUp(e);
    };
    PointerDeviceService.prototype.preventContextMenuIfNeeded = function (pointer, threshold) {
        if (threshold === void 0) { threshold = 3; }
        var distance = Math.pow((pointer.x - this.startPostion.x), 2) + Math.pow((pointer.y - this.startPostion.y), 2);
        if (Math.pow(threshold, 2) < distance)
            this._isAllowedToOpenContextMenu = false;
    };
    PointerDeviceService.prototype.isSyntheticEvent = function (mosuePointer, threshold) {
        var e_1, _a;
        if (threshold === void 0) { threshold = 15; }
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.pointers), _c = _b.next(); !_c.done; _c = _b.next()) {
                var pointer = _c.value;
                if (pointer.identifier === mosuePointer.identifier)
                    continue;
                var distance = Math.pow((mosuePointer.x - pointer.x), 2) + Math.pow((mosuePointer.y - pointer.y), 2);
                if (distance < Math.pow(threshold, 2))
                    return true;
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return false;
    };
    PointerDeviceService.prototype.addEventListeners = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            document.body.addEventListener('mousedown', _this.callbackOnPointerDown, true);
            document.body.addEventListener('mousemove', _this.callbackOnPointerMove, true);
            document.body.addEventListener('mouseup', _this.callbackOnPointerUp, true);
            document.body.addEventListener('touchstart', _this.callbackOnPointerDown, true);
            document.body.addEventListener('touchmove', _this.callbackOnPointerMove, true);
            document.body.addEventListener('touchend', _this.callbackOnPointerUp, true);
            document.body.addEventListener('touchcancel', _this.callbackOnPointerUp, true);
            document.body.addEventListener('drop', _this.callbackOnPointerUp, true);
            document.body.addEventListener('contextmenu', _this.callbackOnContextMenu, true);
        });
    };
    PointerDeviceService.prototype.removeEventListeners = function () {
        document.body.removeEventListener('mousedown', this.callbackOnPointerDown, true);
        document.body.removeEventListener('mousemove', this.callbackOnPointerMove, true);
        document.body.removeEventListener('mouseup', this.callbackOnPointerUp, true);
        document.body.removeEventListener('touchstart', this.callbackOnPointerDown, true);
        document.body.removeEventListener('touchmove', this.callbackOnPointerMove, true);
        document.body.removeEventListener('touchend', this.callbackOnPointerUp, true);
        document.body.removeEventListener('touchcancel', this.callbackOnPointerUp, true);
        document.body.removeEventListener('drop', this.callbackOnPointerUp, true);
        document.body.removeEventListener('contextmenu', this.callbackOnContextMenu, true);
    };
    PointerDeviceService.ɵfac = function PointerDeviceService_Factory(t) { return new (t || PointerDeviceService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵinject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"])); };
    PointerDeviceService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineInjectable"]({ token: PointerDeviceService, factory: PointerDeviceService.ɵfac, providedIn: 'root' });
    return PointerDeviceService;
}());



/***/ }),

/***/ "Gipy":
/*!*********************************************************!*\
  !*** ./src/app/class/core/system/event/event-system.ts ***!
  \*********************************************************/
/*! exports provided: EventSystem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventSystem", function() { return EventSystem; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _network_network__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../network/network */ "qBBt");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./event */ "5MtU");
/* harmony import */ var _listener__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./listener */ "39Ym");




var EventSystem = /** @class */ (function () {
    function EventSystem() {
        this.listenerMap = new Map();
        console.log('EventSystem ready...');
    }
    Object.defineProperty(EventSystem, "instance", {
        get: function () {
            if (!EventSystem._instance) {
                EventSystem._instance = new EventSystem();
                EventSystem._instance.initializeNetworkEvent();
            }
            return EventSystem._instance;
        },
        enumerable: false,
        configurable: true
    });
    EventSystem.prototype.register = function (key) {
        var listener = new _listener__WEBPACK_IMPORTED_MODULE_3__["Listener"](this, key);
        return listener;
    };
    EventSystem.prototype.unregister = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (args.length === 1) {
            this._unregister(args[0], null, null);
        }
        else if (args.length === 2) {
            if (typeof args[1] === 'string') {
                this._unregister(args[0], args[1], null);
            }
            else {
                this._unregister(args[0], null, args[1]);
            }
        }
        else {
            this._unregister(args[0], args[1], args[2]);
        }
    };
    EventSystem.prototype._unregister = function (key, eventName, callback) {
        var e_1, _a, e_2, _b;
        if (key === void 0) { key = this; }
        var listenersIterator = this.listenerMap.values();
        try {
            for (var listenersIterator_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(listenersIterator), listenersIterator_1_1 = listenersIterator_1.next(); !listenersIterator_1_1.done; listenersIterator_1_1 = listenersIterator_1.next()) {
                var listeners = listenersIterator_1_1.value;
                try {
                    for (var _c = (e_2 = void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(listeners.concat())), _d = _c.next(); !_d.done; _d = _c.next()) {
                        var listener = _d.value;
                        if (listener.isEqual(key, eventName, callback)) {
                            listener.unregister();
                        }
                    }
                }
                catch (e_2_1) { e_2 = { error: e_2_1 }; }
                finally {
                    try {
                        if (_d && !_d.done && (_b = _c.return)) _b.call(_c);
                    }
                    finally { if (e_2) throw e_2.error; }
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (listenersIterator_1_1 && !listenersIterator_1_1.done && (_a = listenersIterator_1.return)) _a.call(listenersIterator_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
    };
    EventSystem.prototype.registerListener = function (listener) {
        var listeners = this.getListeners(listener.eventName);
        listeners.push(listener);
        listeners.sort(function (a, b) { return b.priority - a.priority; });
        this.listenerMap.set(listener.eventName, listeners);
        return listener;
    };
    EventSystem.prototype.unregisterListener = function (listener) {
        var listeners = this.getListeners(listener.eventName);
        var index = listeners.indexOf(listener);
        if (index < 0)
            return null;
        listeners.splice(index, 1);
        listener.unregister();
        if (listeners.length < 1)
            this.listenerMap.delete(listener.eventName);
        return listener;
    };
    EventSystem.prototype.call = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (typeof args[0] === 'string') {
            this._call(new _event__WEBPACK_IMPORTED_MODULE_2__["Event"](args[0], args[1]), args[2]);
        }
        else {
            this._call(args[0], args[1]);
        }
    };
    EventSystem.prototype._call = function (event, sendTo) {
        var context = event.toContext();
        _network_network__WEBPACK_IMPORTED_MODULE_1__["Network"].instance.send(context, sendTo);
    };
    EventSystem.prototype.trigger = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (args.length === 2) {
            this._trigger(new _event__WEBPACK_IMPORTED_MODULE_2__["Event"](args[0], args[1]));
        }
        else if (args[0] instanceof _event__WEBPACK_IMPORTED_MODULE_2__["Event"]) {
            return this._trigger(args[0]);
        }
        else {
            return this._trigger(new _event__WEBPACK_IMPORTED_MODULE_2__["Event"](args[0].eventName, args[0].data, args[0].sendFrom));
        }
    };
    EventSystem.prototype._trigger = function (event) {
        var e_3, _a;
        var listeners = this.getListeners(event.eventName).concat(this.getListeners('*'));
        try {
            for (var listeners_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(listeners), listeners_1_1 = listeners_1.next(); !listeners_1_1.done; listeners_1_1 = listeners_1.next()) {
                var listener = listeners_1_1.value;
                listener.trigger(event);
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (listeners_1_1 && !listeners_1_1.done && (_a = listeners_1.return)) _a.call(listeners_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return event;
    };
    EventSystem.prototype.getListeners = function (eventName) {
        return this.listenerMap.has(eventName) ? this.listenerMap.get(eventName) : [];
    };
    EventSystem.prototype.initializeNetworkEvent = function () {
        var _this = this;
        var callback = _network_network__WEBPACK_IMPORTED_MODULE_1__["Network"].instance.callback;
        callback.onOpen = function (peerId) {
            _this.trigger('OPEN_NETWORK', { peerId: peerId });
        };
        callback.onClose = function (peerId) {
            _this.trigger('CLOSE_NETWORK', { peerId: peerId });
        };
        callback.onConnect = function (peerId) {
            _this.sendSystemMessage('<' + peerId + '> connect <DataConnection>');
            _this.trigger('CONNECT_PEER', { peerId: peerId });
        };
        callback.onDisconnect = function (peerId) {
            _this.sendSystemMessage('<' + peerId + '> disconnect <DataConnection>');
            _this.trigger('DISCONNECT_PEER', { peerId: peerId });
        };
        callback.onData = function (peerId, data) {
            var e_4, _a;
            try {
                for (var data_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(data), data_1_1 = data_1.next(); !data_1_1.done; data_1_1 = data_1.next()) {
                    var event_1 = data_1_1.value;
                    _this.trigger(event_1);
                }
            }
            catch (e_4_1) { e_4 = { error: e_4_1 }; }
            finally {
                try {
                    if (data_1_1 && !data_1_1.done && (_a = data_1.return)) _a.call(data_1);
                }
                finally { if (e_4) throw e_4.error; }
            }
        };
        callback.onError = function (peerId, err) {
            _this.sendSystemMessage('<' + peerId + '> ' + err);
        };
    };
    EventSystem.prototype.sendSystemMessage = function (message) {
        console.log(message);
    };
    return EventSystem;
}());



/***/ }),

/***/ "GvTa":
/*!*****************************************!*\
  !*** ./src/app/class/table-selecter.ts ***!
  \*****************************************/
/*! exports provided: TableSelecter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TableSelecter", function() { return TableSelecter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/game-object */ "xdgh");
/* harmony import */ var _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/system */ "yNnI");
/* harmony import */ var _game_table__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./game-table */ "RDF6");






var TableSelecter = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(TableSelecter, _super);
    function TableSelecter() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.viewTableIdentifier = '';
        _this.gridShow = false; // true=常時グリッド表示
        _this.gridSnap = true;
        return _this;
    }
    // GameObject Lifecycle
    TableSelecter.prototype.onStoreAdded = function () {
        var _this = this;
        _super.prototype.onStoreAdded.call(this);
        _core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(this)
            .on('SELECT_GAME_TABLE', function (event) {
            console.log('SELECT_GAME_TABLE ' + _this.identifier);
            if (_this.viewTable)
                _this.viewTable.selected = false;
            _this.viewTableIdentifier = event.data.identifier;
            if (_this.viewTable)
                _this.viewTable.selected = true;
        });
    };
    // GameObject Lifecycle
    TableSelecter.prototype.onStoreRemoved = function () {
        _super.prototype.onStoreRemoved.call(this);
        _core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(this);
    };
    Object.defineProperty(TableSelecter.prototype, "viewTable", {
        get: function () {
            var table = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.viewTableIdentifier);
            if (!table) {
                table = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.getObjects(_game_table__WEBPACK_IMPORTED_MODULE_5__["GameTable"])[0];
                if (table && (this.viewTableIdentifier.length < 1 || _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.isDeleted(this.viewTableIdentifier))) {
                    this.viewTableIdentifier = table.identifier;
                    _core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].trigger('SELECT_GAME_TABLE', { identifier: table.identifier });
                }
            }
            return table;
        },
        enumerable: false,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], TableSelecter.prototype, "viewTableIdentifier", void 0);
    TableSelecter = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('TableSelecter')
    ], TableSelecter);
    return TableSelecter;
}(_core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_2__["GameObject"]));



/***/ }),

/***/ "Hcv6":
/*!*********************************************************!*\
  !*** ./src/app/class/core/system/network/connection.ts ***!
  \*********************************************************/
/*! exports provided: ConnectionCallback */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionCallback", function() { return ConnectionCallback; });
var ConnectionCallback = /** @class */ (function () {
    function ConnectionCallback() {
    }
    return ConnectionCallback;
}());



/***/ }),

/***/ "Hvpu":
/*!******************************************!*\
  !*** ./src/app/service/image.service.ts ***!
  \******************************************/
/*! exports provided: ImageService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageService", function() { return ImageService; });
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "fXoL");



var skeletonImage = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_0__["ImageFile"].create('./assets/images/skeleton.png');
var ImageService = /** @class */ (function () {
    function ImageService() {
    }
    ImageService.prototype.getSkeletonOr = function (arg) {
        var image = arg instanceof _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_0__["ImageFile"] ? arg : _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_1__["ImageStorage"].instance.get(arg);
        return image && !image.isEmpty ? image : skeletonImage;
    };
    ImageService.prototype.getEmptyOr = function (arg) {
        var image = arg instanceof _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_0__["ImageFile"] ? arg : _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_1__["ImageStorage"].instance.get(arg);
        return image && !image.isEmpty ? image : _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_0__["ImageFile"].Empty;
    };
    ImageService.ɵfac = function ImageService_Factory(t) { return new (t || ImageService)(); };
    ImageService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineInjectable"]({ token: ImageService, factory: ImageService.ɵfac, providedIn: 'root' });
    return ImageService;
}());



/***/ }),

/***/ "JQpJ":
/*!**********************************************************!*\
  !*** ./src/app/class/core/file-storage/image-storage.ts ***!
  \**********************************************************/
/*! exports provided: ImageStorage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageStorage", function() { return ImageStorage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../system */ "yNnI");
/* harmony import */ var _system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../system/util/resettable-timeout */ "9ht1");
/* harmony import */ var _image_file__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./image-file */ "FjwV");




var ImageStorage = /** @class */ (function () {
    function ImageStorage() {
        this.imageHash = {};
        console.log('ImageStorage ready...');
    }
    Object.defineProperty(ImageStorage, "instance", {
        get: function () {
            if (!ImageStorage._instance)
                ImageStorage._instance = new ImageStorage();
            return ImageStorage._instance;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ImageStorage.prototype, "images", {
        get: function () {
            var images = [];
            for (var identifier in this.imageHash) {
                images.push(this.imageHash[identifier]);
            }
            return images;
        },
        enumerable: false,
        configurable: true
    });
    ImageStorage.prototype.destroy = function () {
        for (var identifier in this.imageHash) {
            this.delete(identifier);
        }
    };
    ImageStorage.prototype.addAsync = function (arg) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var image;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _image_file__WEBPACK_IMPORTED_MODULE_3__["ImageFile"].createAsync(arg)];
                    case 1:
                        image = _a.sent();
                        return [2 /*return*/, this._add(image)];
                }
            });
        });
    };
    ImageStorage.prototype.add = function (arg) {
        var image;
        if (typeof arg === 'string') {
            image = _image_file__WEBPACK_IMPORTED_MODULE_3__["ImageFile"].create(arg);
        }
        else if (arg instanceof _image_file__WEBPACK_IMPORTED_MODULE_3__["ImageFile"]) {
            image = arg;
        }
        else {
            if (this.update(arg))
                return this.imageHash[arg.identifier];
            image = _image_file__WEBPACK_IMPORTED_MODULE_3__["ImageFile"].create(arg);
        }
        return this._add(image);
    };
    ImageStorage.prototype._add = function (image) {
        if (_image_file__WEBPACK_IMPORTED_MODULE_3__["ImageState"].COMPLETE <= image.state)
            this.lazySynchronize(100);
        if (this.update(image))
            return this.imageHash[image.identifier];
        this.imageHash[image.identifier] = image;
        console.log('add Image: ' + image.identifier);
        return image;
    };
    ImageStorage.prototype.update = function (image) {
        var context;
        if (image instanceof _image_file__WEBPACK_IMPORTED_MODULE_3__["ImageFile"]) {
            context = image.toContext();
        }
        else {
            context = image;
        }
        var updatingImage = this.imageHash[image.identifier];
        if (updatingImage) {
            updatingImage.apply(image);
            return true;
        }
        return false;
    };
    ImageStorage.prototype.delete = function (identifier) {
        var deleteImage = this.imageHash[identifier];
        if (deleteImage) {
            deleteImage.destroy();
            delete this.imageHash[identifier];
            return true;
        }
        return false;
    };
    ImageStorage.prototype.get = function (identifier) {
        var image = this.imageHash[identifier];
        if (image)
            return image;
        return null;
    };
    ImageStorage.prototype.synchronize = function (peer) {
        if (this.lazyTimer)
            this.lazyTimer.stop();
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('SYNCHRONIZE_FILE_LIST', this.getCatalog(), peer);
    };
    ImageStorage.prototype.lazySynchronize = function (ms, peer) {
        var _this = this;
        if (this.lazyTimer == null)
            this.lazyTimer = new _system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_2__["ResettableTimeout"](function () { return _this.synchronize(peer); }, ms);
        this.lazyTimer.reset(ms);
    };
    ImageStorage.prototype.getCatalog = function () {
        var e_1, _a;
        var catalog = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.images), _c = _b.next(); !_c.done; _c = _b.next()) {
                var image = _c.value;
                if (_image_file__WEBPACK_IMPORTED_MODULE_3__["ImageState"].COMPLETE <= image.state) {
                    catalog.push({ identifier: image.identifier, state: image.state });
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return catalog;
    };
    return ImageStorage;
}());



/***/ }),

/***/ "JUIv":
/*!***********************************!*\
  !*** ./src/app/class/dice-bot.ts ***!
  \***********************************/
/*! exports provided: DiceBot */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiceBot", function() { return DiceBot; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/game-object */ "xdgh");
/* harmony import */ var _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/system */ "yNnI");
/* harmony import */ var _core_system_util_promise_queue__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./core/system/util/promise-queue */ "w5+g");
/* harmony import */ var _core_system_util_string_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./core/system/util/string-util */ "baV6");







var DiceBot = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(DiceBot, _super);
    function DiceBot() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DiceBot_1 = DiceBot;
    // GameObject Lifecycle
    DiceBot.prototype.onStoreAdded = function () {
        var _this = this;
        _super.prototype.onStoreAdded.call(this);
        DiceBot_1.queue.add(DiceBot_1.loadScriptAsync('./assets/cgiDiceBot.js'));
        _core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(this)
            .on('SEND_MESSAGE', function (event) { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(_this, void 0, void 0, function () {
            var chatMessage, text, gameType, regArray, repeat, rollText, finalResult, i, rollResult, e_1;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        chatMessage = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(event.data.messageIdentifier);
                        if (!chatMessage || !chatMessage.isSendFromSelf || chatMessage.isSystem)
                            return [2 /*return*/];
                        text = _core_system_util_string_util__WEBPACK_IMPORTED_MODULE_6__["StringUtil"].toHalfWidth(chatMessage.text);
                        gameType = chatMessage.tag;
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 6, , 7]);
                        regArray = /^((\d+)?\s+)?([^\s]*)?/ig.exec(text);
                        repeat = (regArray[2] != null) ? Number(regArray[2]) : 1;
                        rollText = (regArray[3] != null) ? regArray[3] : text;
                        finalResult = { result: '', isSecret: false };
                        i = 0;
                        _a.label = 2;
                    case 2:
                        if (!(i < repeat && i < 32)) return [3 /*break*/, 5];
                        return [4 /*yield*/, DiceBot_1.diceRollAsync(rollText, gameType)];
                    case 3:
                        rollResult = _a.sent();
                        if (rollResult.result.length < 1)
                            return [3 /*break*/, 5];
                        finalResult.result += rollResult.result;
                        finalResult.isSecret = finalResult.isSecret || rollResult.isSecret;
                        if (1 < repeat)
                            finalResult.result += " #" + (i + 1);
                        _a.label = 4;
                    case 4:
                        i++;
                        return [3 /*break*/, 2];
                    case 5:
                        this.sendResultMessage(finalResult, chatMessage);
                        return [3 /*break*/, 7];
                    case 6:
                        e_1 = _a.sent();
                        console.error(e_1);
                        return [3 /*break*/, 7];
                    case 7: return [2 /*return*/];
                }
            });
        }); });
    };
    // GameObject Lifecycle
    DiceBot.prototype.onStoreRemoved = function () {
        _super.prototype.onStoreRemoved.call(this);
        _core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(this);
    };
    DiceBot.prototype.sendResultMessage = function (rollResult, originalMessage) {
        var result = rollResult.result;
        var isSecret = rollResult.isSecret;
        if (result.length < 1)
            return;
        result = result.replace(/[＞]/g, function (s) { return '→'; }).trim();
        var diceBotMessage = {
            identifier: '',
            tabIdentifier: originalMessage.tabIdentifier,
            originFrom: originalMessage.from,
            from: 'System-BCDice',
            timestamp: originalMessage.timestamp + 1,
            imageIdentifier: '',
            tag: isSecret ? 'system secret' : 'system',
            name: isSecret ? '<Secret-BCDice：' + originalMessage.name + '>' : '<BCDice：' + originalMessage.name + '>',
            text: result
        };
        if (originalMessage.to != null && 0 < originalMessage.to.length) {
            diceBotMessage.to = originalMessage.to;
            if (originalMessage.to.indexOf(originalMessage.from) < 0) {
                diceBotMessage.to += ' ' + originalMessage.from;
            }
        }
        var chatTab = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(originalMessage.tabIdentifier);
        if (chatTab)
            chatTab.addMessage(diceBotMessage);
    };
    DiceBot.diceRollAsync = function (message, gameType) {
        DiceBot_1.queue.add(DiceBot_1.loadDiceBotAsync(gameType));
        return DiceBot_1.queue.add(function () {
            if ('Opal' in window === false) {
                console.warn('Opal is not loaded...');
                return { result: '', isSecret: false };
            }
            var result = [];
            var dir = [];
            var diceBotTablePrefix = 'diceBotTable_';
            var isNeedResult = true;
            try {
                Opal.gvars.isDebug = false;
                var cgiDiceBot = Opal.CgiDiceBot.$new();
                result = cgiDiceBot.$roll(message, gameType, dir, diceBotTablePrefix, isNeedResult);
                console.log('diceRoll!!!', result);
                console.log('isSecret!!!', cgiDiceBot.isSecret);
                return { result: result[0], isSecret: cgiDiceBot.isSecret };
            }
            catch (e) {
                console.error(e);
            }
            return { result: '', isSecret: false };
        });
    };
    DiceBot.getHelpMessage = function (gameType) {
        DiceBot_1.queue.add(DiceBot_1.loadDiceBotAsync(gameType));
        return DiceBot_1.queue.add(function () {
            if ('Opal' in window === false) {
                console.warn('Opal is not loaded...');
                return '';
            }
            var help = '';
            try {
                var bcdice = Opal.CgiDiceBot.$new().$newBcDice();
                bcdice.$setGameByTitle(gameType);
                help = bcdice.diceBot.$getHelpMessage();
            }
            catch (e) {
                console.error(e);
            }
            return help;
        });
    };
    DiceBot.loadDiceBotAsync = function (gameType) {
        return new Promise(function (resolve, reject) {
            var e_2, _a;
            console.log('loadDiceBotAsync');
            gameType = gameType.replace(/\./g, function (s) { return '_'; });
            if ((!gameType && gameType.length < 1) || DiceBot_1.loadedDiceBots[gameType]) {
                console.log(gameType + ' is loaded');
                resolve();
                return;
            }
            DiceBot_1.loadedDiceBots[gameType] = false;
            var promises = [];
            var scriptPath = './assets/dicebot/' + gameType + '.js';
            promises.push(DiceBot_1.loadScriptAsync(scriptPath));
            try {
                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(DiceBot_1.extratablesTables), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var table = _c.value;
                    if (!table.indexOf(gameType)) {
                        var path = './assets/extratables/' + table;
                        promises.push(DiceBot_1.loadExtratablesAsync(path, table));
                    }
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_2) throw e_2.error; }
            }
            Promise.all(promises).then(function () {
                DiceBot_1.loadedDiceBots[gameType] = true;
                resolve();
            });
        });
    };
    DiceBot.loadScriptAsync = function (path) {
        return new Promise(function (resolve, reject) {
            var head = document.head;
            var script = document.createElement('script');
            script.src = path;
            head.appendChild(script);
            script.onload = function (e) {
                if (head && script.parentNode)
                    head.removeChild(script);
                console.log(path + ' is loading OK!!!');
                resolve();
            };
            script.onabort = script.onerror = function (e) {
                if (head && script.parentNode)
                    head.removeChild(script);
                console.error(e);
                resolve();
            };
        });
    };
    DiceBot.loadExtratablesAsync = function (path, table) {
        return new Promise(function (resolve, reject) {
            fetch(path)
                .then(function (response) {
                if (response.ok)
                    return response.text();
                throw new Error('Network response was not ok.');
            })
                .then(function (text) {
                var array = /((.+)_(.+)).txt$/ig.exec(table);
                Opal.TableFileData.$setVirtualTableData(array[1], array[2], array[3], text);
                console.log(table + ' is loading OK!!!');
                resolve();
            })
                .catch(function (error) {
                console.warn('There has been a problem with your fetch operation: ', error.message);
                resolve();
            });
        });
    };
    var DiceBot_1;
    DiceBot.loadedDiceBots = {};
    DiceBot.queue = new _core_system_util_promise_queue__WEBPACK_IMPORTED_MODULE_5__["PromiseQueue"]('DiceBotQueue');
    DiceBot.diceBotInfos = [
        { script: 'EarthDawn', game: 'アースドーン' },
        { script: 'EarthDawn3', game: 'アースドーン3版' },
        { script: 'EarthDawn4', game: 'アースドーン4版' },
        { script: 'Airgetlamh', game: '朱の孤塔のエアゲトラム' },
        { script: 'AFF2e', game: 'ADVANCED FIGHTING FANTASY 2nd Edition' },
        { script: 'AnimaAnimus', game: 'アニマアニムス' },
        { script: 'Amadeus', game: 'アマデウス' },
        { script: 'Arianrhod', game: 'アリアンロッドRPG' },
        { script: 'OrgaRain', game: '在りて遍くオルガレイン' },
        { script: 'Alshard', game: 'アルシャード' },
        { script: 'ArsMagica', game: 'アルスマギカ' },
        { script: 'AlterRaise', game: 'アルトレイズ' },
        { script: 'IthaWenUa', game: 'イサー・ウェン＝アー' },
        { script: 'YearZeroEngine', game: 'YearZeroEngine' },
        { script: 'Insane', game: 'インセイン' },
        { script: 'VampireTheMasquerade5th', game: 'Vampire: The Masquerade 5th Edition' },
        { script: 'WitchQuest', game: 'ウィッチクエスト' },
        { script: 'Warhammer', game: 'ウォーハンマー' },
        { script: 'Utakaze', game: 'ウタカゼ' },
        { script: 'Alsetto', game: '詩片のアルセット' },
        { script: 'AceKillerGene', game: 'エースキラージーン' },
        { script: 'EclipsePhase', game: 'エクリプス・フェイズ' },
        { script: 'EmbryoMachine', game: 'エムブリオマシンRPG' },
        { script: 'Elysion', game: 'エリュシオン' },
        { script: 'Elric', game: 'エルリック！' },
        { script: 'EndBreaker', game: 'エンドブレイカー！' },
        { script: 'Oukahoushin3rd', game: '央華封神RPG 第三版' },
        { script: 'OracleEngine', game: 'オラクルエンジン' },
        { script: 'GardenOrder', game: 'ガーデンオーダー' },
        { script: 'CardRanker', game: 'カードランカー' },
        { script: 'Gurps', game: 'ガープス' },
        { script: 'GurpsFW', game: 'ガープスフィルトウィズ' },
        { script: 'ChaosFlare', game: 'カオスフレア' },
        { script: 'OneWayHeroics', game: '片道勇者TRPG' },
        { script: 'Kamigakari', game: '神我狩' },
        { script: 'Garako', game: 'ガラコと破界の塔' },
        { script: 'KanColle', game: '艦これRPG' },
        { script: 'Gundog', game: 'ガンドッグ' },
        { script: 'GundogZero', game: 'ガンドッグゼロ' },
        { script: 'GundogRevised', game: 'ガンドッグ・リヴァイズド' },
        { script: 'KillDeathBusiness', game: 'キルデスビジネス' },
        { script: 'StellarKnights', game: '銀剣のステラナイツ' },
        { script: 'Cthulhu', game: 'クトゥルフ神話TRPG' },
        { script: 'CthulhuTech', game: 'クトゥルフテック' },
        { script: 'KurayamiCrying', game: 'クラヤミクライン' },
        { script: 'GranCrest', game: 'グランクレストRPG' },
        { script: 'GeishaGirlwithKatana', game: 'ゲイシャ・ガール・ウィズ・カタナ' },
        { script: 'GehennaAn', game: 'ゲヘナ・アナスタシス' },
        { script: 'KemonoNoMori', game: '獸ノ森' },
        { script: 'StrangerOfSwordCity', game: '剣の街の異邦人TRPG' },
        { script: 'Illusio', game: '晃天のイルージオ' },
        { script: 'CodeLayerd', game: 'コード：レイヤード' },
        { script: 'Avandner', game: '黒絢のアヴァンドナー' },
        { script: 'GoblinSlayer', game: 'ゴブリンスレイヤーTRPG' },
        { script: 'Gorilla', game: 'ゴリラTRPG' },
        { script: 'ColossalHunter', game: 'コロッサルハンター' },
        { script: 'Postman', game: '壊れた世界のポストマン' },
        { script: 'Satasupe', game: 'サタスペ' },
        { script: 'SamsaraBallad', game: 'サンサーラ・バラッド' },
        { script: 'SharedFantasia', game: 'Shared†Fantasia' },
        { script: 'JamesBond', game: 'ジェームズ・ボンド007' },
        { script: 'LiveraDoll', game: '紫縞のリヴラドール' },
        { script: 'ShinobiGami', game: 'シノビガミ' },
        { script: 'ShadowRun', game: 'シャドウラン' },
        { script: 'ShadowRun4', game: 'シャドウラン 4th Edition' },
        { script: 'ShadowRun5', game: 'シャドウラン 5th Edition' },
        { script: 'ShoujoTenrankai', game: '少女展爛会TRPG' },
        { script: 'ShinkuuGakuen', game: '真空学園' },
        { script: 'Cthulhu7th', game: '新クトゥルフ神話TRPG' },
        { script: 'ShinMegamiTenseiKakuseihen', game: '真・女神転生TRPG 覚醒篇' },
        { script: 'Skynauts', game: '歯車の塔の探空士' },
        { script: 'ScreamHighSchool', game: 'スクリームハイスクール' },
        { script: 'SRS', game: 'スタンダードRPGシステム' },
        { script: 'SteamPunkers', game: 'スチームパンカーズ' },
        { script: 'SterileLife', game: 'ステラーライフTRPG' },
        { script: 'StratoShout', game: 'ストラトシャウト' },
        { script: 'EtrianOdysseySRS', game: '世界樹の迷宮SRS' },
        { script: 'ZettaiReido', game: '絶対隷奴' },
        { script: 'SevenFortressMobius', game: 'セブン＝フォートレス メビウス' },
        { script: 'TherapieSein', game: 'セラフィザイン' },
        { script: 'Villaciel', game: '蒼天のヴィラシエル' },
        { script: 'SwordWorld', game: 'ソードワールドRPG' },
        { script: 'SwordWorld2_0', game: 'ソードワールド2.0' },
        { script: 'SwordWorld2_5', game: 'ソードワールド2.5' },
        { script: 'DarkSouls', game: 'ダークソウルTRPG' },
        { script: 'DarkDaysDrive', game: 'ダークデイズドライブ' },
        { script: 'DarkBlaze', game: 'ダークブレイズ' },
        { script: 'DiceOfTheDead', game: 'ダイス・オブ・ザ・デッド' },
        { script: 'DoubleCross', game: 'ダブルクロス2nd,3rd' },
        { script: 'DungeonsAndDragons', game: 'ダンジョンズ＆ドラゴンズ' },
        { script: 'Paradiso', game: 'チェレステ色のパラディーゾ' },
        { script: 'Chill', game: 'Chill' },
        { script: 'Chill3', game: 'Chill 3rd Edition' },
        { script: 'CrashWorld', game: '墜落世界' },
        { script: 'DetatokoSaga', game: 'でたとこサーガ' },
        { script: 'DeadlineHeroes', game: 'デッドラインヒーローズRPG' },
        { script: 'DemonParasite', game: 'デモンパラサイト' },
        { script: 'TokyoGhostResearch', game: '東京ゴーストリサーチ' },
        { script: 'TokyoNova', game: 'トーキョーN◎VA' },
        { script: 'Torg', game: 'トーグ' },
        { script: 'Torg1_5', game: 'トーグ1.5版' },
        { script: 'TorgEternity', game: 'TORG Eternity' },
        { script: 'TokumeiTenkousei', game: '特命転攻生' },
        { script: 'Dracurouge', game: 'ドラクルージュ' },
        { script: 'TrinitySeven', game: 'トリニティセブンRPG' },
        { script: 'TwilightGunsmoke', game: 'トワイライトガンスモーク' },
        { script: 'TunnelsAndTrolls', game: 'トンネルズ＆トロールズ' },
        { script: 'NightWizard', game: 'ナイトウィザード The 2nd Edition' },
        { script: 'NightWizard3rd', game: 'ナイトウィザード The 3rd Edition' },
        { script: 'NightmareHunterDeep', game: 'ナイトメアハンター=ディープ' },
        { script: 'NinjaSlayer', game: 'ニンジャスレイヤーTRPG' },
        { script: 'NjslyrBattle', game: 'NJSLYRBATTLE' },
        { script: 'Nuekagami', game: '鵺鏡' },
        { script: 'Nechronica', game: 'ネクロニカ' },
        { script: 'NeverCloud', game: 'ネバークラウドTRPG' },
        { script: 'HarnMaster', game: 'ハーンマスター' },
        { script: 'Pathfinder', game: 'Pathfinder' },
        { script: 'BadLife', game: 'バッドライフ' },
        { script: 'HatsuneMiku', game: '初音ミクTRPG ココロダンジョン' },
        { script: 'BattleTech', game: 'バトルテック' },
        { script: 'ParasiteBlood', game: 'パラサイトブラッドRPG' },
        { script: 'Paranoia', game: 'パラノイア' },
        { script: 'ParanoiaRebooted', game: 'パラノイア リブーテッド' },
        { script: 'BarnaKronika', game: 'バルナ・クロニカ' },
        { script: 'PulpCthulhu', game: 'パルプ・クトゥルフ' },
        { script: 'Raisondetre', game: '叛逆レゾンデートル' },
        { script: 'HuntersMoon', game: 'ハンターズ・ムーン' },
        { script: 'Peekaboo', game: 'ピーカーブー' },
        { script: 'BeastBindTrinity', game: 'ビーストバインド トリニティ' },
        { script: 'BBN', game: 'BBNTRPG' },
        { script: 'Hieizan', game: '比叡山炎上' },
        { script: 'BeginningIdol', game: 'ビギニングアイドル' },
        { script: 'PhantasmAdventure', game: 'ファンタズム・アドベンチャー' },
        { script: 'Fiasco', game: 'フィアスコ' },
        { script: 'FilledWith', game: 'フィルトウィズ' },
        { script: 'FutariSousa', game: 'フタリソウサ' },
        { script: 'BlindMythos', game: 'ブラインド・ミトスRPG' },
        { script: 'BloodCrusade', game: 'ブラッド・クルセイド' },
        { script: 'BloodMoon', game: 'ブラッド・ムーン' },
        { script: 'FullMetalPanic', game: 'フルメタル・パニック！RPG' },
        { script: 'BladeOfArcana', game: 'ブレイド・オブ・アルカナ' },
        { script: 'Strave', game: '碧空のストレイヴ' },
        { script: 'Pendragon', game: 'ペンドラゴン' },
        { script: 'HouraiGakuen', game: '蓬莱学園の冒険!!' },
        { script: 'MagicaLogia', game: 'マギカロギア' },
        { script: 'InfiniteFantasia', game: '無限のファンタジア' },
        { script: 'MeikyuKingdom', game: '迷宮キングダム' },
        { script: 'MeikyuKingdomBasic', game: '迷宮キングダム 基本ルールブック' },
        { script: 'MeikyuDays', game: '迷宮デイズ' },
        { script: 'MetallicGuardian', game: 'メタリックガーディアンRPG' },
        { script: 'MetalHead', game: 'メタルヘッド' },
        { script: 'MetalHeadExtream', game: 'メタルヘッドエクストリーム' },
        { script: 'MonotoneMuseum', game: 'モノトーンミュージアムRPG' },
        { script: 'YankeeYogSothoth', game: 'ヤンキー＆ヨグ＝ソトース' },
        { script: 'GoldenSkyStories', game: 'ゆうやけこやけ' },
        { script: 'Ryutama', game: 'りゅうたま' },
        { script: 'RyuTuber', game: 'リューチューバーとちいさな奇跡' },
        { script: 'RuneQuest', game: 'ルーンクエスト' },
        { script: 'RecordOfSteam', game: 'Record of Steam' },
        { script: 'RecordOfLodossWar', game: 'ロードス島戦記RPG' },
        { script: 'RoleMaster', game: 'ロールマスター' },
        { script: 'LogHorizon', game: 'ログ・ホライズンTRPG' },
        { script: 'RokumonSekai2', game: '六門世界RPG セカンドエディション' },
        { script: 'LostRecord', game: 'ロストレコード' },
        { script: 'LostRoyal', game: 'ロストロイヤル' },
        { script: 'WaresBlade', game: 'ワースブレイド' },
        { script: 'WARPS', game: 'ワープス' },
        { script: 'WorldOfDarkness', game: 'ワールド・オブ・ダークネス' },
        { script: 'Cthulhu7th_ChineseTraditional', game: '克蘇魯神話第7版' },
        { script: 'Cthulhu_ChineseTraditional', game: '克蘇魯神話' },
        { script: 'KillDeathBusiness_Korean', game: 'Kill Death Business (한국어)' },
        { script: 'Nechronica_Korean', game: '네크로니카' },
        { script: 'DoubleCross_Korean', game: '더블크로스2nd,3rd' },
        { script: 'DetatokoSaga_Korean', game: '데타토코 사가' },
        { script: 'FutariSousa_Korean', game: '둘이서 수사(후타리소우사)' },
        { script: 'Dracurouge_Korean', game: '드라크루주' },
        { script: 'LogHorizon_Korean', game: '로그 호라이즌' },
        { script: 'MonotoneMuseum_Korean', game: '모노톤 뮤지엄' },
        { script: 'BeginningIdol_Korean', game: '비기닝 아이돌' },
        { script: 'StratoShout_Korean', game: '스트라토 샤우트' },
        { script: 'Amadeus_Korean', game: '아마데우스' },
        { script: 'Insane_Korean', game: '인세인' },
        { script: 'Kamigakari_Korean', game: '카미가카리' },
        { script: 'Cthulhu7th_Korean', game: '크툴루의 부름 7판' },
        { script: 'Cthulhu_Korean', game: '크툴루' },
        { script: 'Fiasco_Korean', game: '피아스코' },
    ];
    DiceBot.extratablesTables = [
        'BloodCrusade_TD2T.txt',
        'BloodCrusade_TD3T.txt',
        'BloodCrusade_TD4T.txt',
        'BloodCrusade_TD5T.txt',
        'BloodCrusade_TD6T.txt',
        'BloodCrusade_TDHT.txt',
        'BloodMoon_ID2T.txt',
        'BloodMoon_IDT.txt',
        'BloodMoon_RAT.txt',
        'CardRanker_BFT.txt',
        'CardRanker_CDT.txt',
        'CardRanker_CST.txt',
        'CardRanker_DT.txt',
        'CardRanker_GDT.txt',
        'CardRanker_OST.txt',
        'CardRanker_SST.txt',
        'CardRanker_ST.txt',
        'CardRanker_TDT.txt',
        'CardRanker_WT.txt',
        'Elysion_EBT.txt',
        'Elysion_GIT.txt',
        'Elysion_HBT.txt',
        'Elysion_HT.txt',
        'Elysion_IT.txt',
        'Elysion_JH.txt',
        'Elysion_KT.txt',
        'Elysion_NA.txt',
        'Elysion_NT.txt',
        'Elysion_OJ1.txt',
        'Elysion_OJ2.txt',
        'Elysion_TBT.txt',
        'Elysion_UBT.txt',
        'Elysion_UT1.txt',
        'Elysion_UT2.txt',
        'Elysion_UT3.txt',
        'Elysion_UT4.txt',
        'HuntersMoon_DS1ET.txt',
        'HuntersMoon_DS2ET.txt',
        'HuntersMoon_DS3ET.txt',
        'HuntersMoon_EE1ET.txt',
        'HuntersMoon_EE2ET.txt',
        'HuntersMoon_EE3ET.txt',
        'HuntersMoon_ERT.txt',
        'HuntersMoon_ET1ET.txt',
        'HuntersMoon_ET2ET.txt',
        'HuntersMoon_ET3ET.txt',
        'HuntersMoon_MST.txt',
        'HuntersMoon_TK1ET.txt',
        'HuntersMoon_TK2ET.txt',
        'HuntersMoon_TK3ET.txt',
        'Kamigakari_ET.txt',
        'Kamigakari_KT.txt',
        'Kamigakari_NT.txt',
        'KanColle_BT2.txt',
        'KanColle_BT3.txt',
        'KanColle_BT4.txt',
        'KanColle_BT5.txt',
        'KanColle_BT6.txt',
        'KanColle_BT7.txt',
        'KanColle_BT8.txt',
        'KanColle_BT9.txt',
        'KanColle_BT10.txt',
        'KanColle_BT11.txt',
        'KanColle_BT12.txt',
        'KanColle_ETIT.txt',
        'KanColle_LFDT.txt',
        'KanColle_LFVT.txt',
        'KanColle_LSFT.txt',
        'KanColle_WPCN.txt',
        'KanColle_WPFA.txt',
        'KanColle_WPMC.txt',
        'KanColle_WPMCN.txt',
        'KillDeathBusiness_ANSPT.txt',
        'KillDeathBusiness_MASPT.txt',
        'KillDeathBusiness_MOSPT.txt',
        'KillDeathBusiness_PASPT.txt',
        'KillDeathBusiness_POSPT.txt',
        'KillDeathBusiness_UMSPT.txt',
        'Oukahoushin3rd_BKT.txt',
        'Oukahoushin3rd_KKT.txt',
        'Oukahoushin3rd_NHT.txt',
        'Oukahoushin3rd_SDT.txt',
        'Oukahoushin3rd_SKT.txt',
        'Oukahoushin3rd_STT.txt',
        'Oukahoushin3rd_UKT.txt',
        'ShinobiGami_AKST.txt',
        'ShinobiGami_CLST.txt',
        'ShinobiGami_DXST.txt',
        'ShinobiGami_HC.txt',
        'ShinobiGami_HK.txt',
        'ShinobiGami_HLST.txt',
        'ShinobiGami_HM.txt',
        'ShinobiGami_HO.txt',
        'ShinobiGami_HR.txt',
        'ShinobiGami_HS.txt',
        'ShinobiGami_HT.txt',
        'ShinobiGami_HY.txt',
        'ShinobiGami_NTST.txt',
        'ShinobiGami_OTKRT.txt',
        'ShinobiGami_PLST.txt',
        'BloodCrusade_BDST.txt',
        'BloodCrusade_CYST.txt',
        'BloodCrusade_DMST.txt',
        'BloodCrusade_MNST.txt',
        'BloodCrusade_SLST.txt',
        'BloodCrusade_TD1T.txt'
    ];
    DiceBot = DiceBot_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('dice-bot')
    ], DiceBot);
    return DiceBot;
}(_core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_2__["GameObject"]));



/***/ }),

/***/ "KUN8":
/*!******************************************************************!*\
  !*** ./src/app/component/chat-message/chat-message.component.ts ***!
  \******************************************************************/
/*! exports provided: ChatMessageComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatMessageComponent", function() { return ChatMessageComponent; });
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/animations */ "R0Ic");
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_chat_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! service/chat-message.service */ "PEfN");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");






function ChatMessageComponent_img_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](0, "img", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](1, "safe");
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](1, 1, ctx_r0.imageFile == null ? null : ctx_r0.imageFile.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵsanitizeUrl"]);
} }
function ChatMessageComponent_ng_container_14_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainer"](0);
} }
function ChatMessageComponent_ng_template_15_button_2_Template(rf, ctx) { if (rf & 1) {
    var _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "button", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function ChatMessageComponent_ng_template_15_button_2_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r8); var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2); return ctx_r7.discloseMessage(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1, "\u7D50\u679C\u3092\u516C\u958B");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
} }
function ChatMessageComponent_ng_template_15_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](2, ChatMessageComponent_ng_template_15_button_2_Template, 2, 0, "button", 14);
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](ctx_r3.chatMessage.text);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx_r3.chatMessage.isSecret);
} }
function ChatMessageComponent_ng_template_17_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1, "\uFF08\u30B7\u30FC\u30AF\u30EC\u30C3\u30C8\u30C0\u30A4\u30B9\uFF09");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
} }
var _c0 = function (a0, a1, a2) { return { "direct-message": a0, "system-message": a1, "dicebot-message": a2 }; };
var ChatMessageComponent = /** @class */ (function () {
    function ChatMessageComponent(chatMessageService) {
        this.chatMessageService = chatMessageService;
        this.imageFile = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_1__["ImageFile"].Empty;
        this.animeState = 'inactive';
    }
    ChatMessageComponent.prototype.ngOnInit = function () {
        var file = this.chatMessage.image;
        if (file)
            this.imageFile = file;
        var time = this.chatMessageService.getTime();
        if (time - 10 * 1000 < this.chatMessage.timestamp)
            this.animeState = 'active';
    };
    ChatMessageComponent.prototype.ngAfterViewInit = function () {
    };
    ChatMessageComponent.prototype.discloseMessage = function () {
        this.chatMessage.tag = this.chatMessage.tag.replace('secret', '');
    };
    ChatMessageComponent.ɵfac = function ChatMessageComponent_Factory(t) { return new (t || ChatMessageComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](service_chat_message_service__WEBPACK_IMPORTED_MODULE_3__["ChatMessageService"])); };
    ChatMessageComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({ type: ChatMessageComponent, selectors: [["chat-message"]], inputs: { chatMessage: "chatMessage" }, decls: 19, vars: 16, consts: [[1, "container"], [1, "message", 3, "ngClass"], [1, "image"], [3, "src", 4, "ngIf"], [1, "body"], [1, "title"], [1, "msg-name"], [1, "tip", "msg-from"], [1, "tip", "msg-timestamp"], [1, "text", "msg-text"], [4, "ngIf", "ngIfThen", "ngIfElse"], ["visible", ""], ["secret", ""], [3, "src"], [3, "click", 4, "ngIf"], [3, "click"]], template: function ChatMessageComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](3, ChatMessageComponent_img_3_Template, 2, 4, "img", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](4, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](5, "div", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](6, "span", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](7);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](8, "span", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](9);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](10, "span", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](11);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](12, "date");
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](13, "div", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](14, ChatMessageComponent_ng_container_14_Template, 1, 0, "ng-container", 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](15, ChatMessageComponent_ng_template_15_Template, 3, 2, "ng-template", null, 11, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](17, ChatMessageComponent_ng_template_17_Template, 2, 0, "ng-template", null, 12, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplateRefExtractor"]);
        } if (rf & 2) {
            var _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](16);
            var _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](18);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpureFunction3"](12, _c0, ctx.chatMessage.isDirect || ctx.chatMessage.isSecret, ctx.chatMessage.isSystem, ctx.chatMessage.isDicebot))("@flyInOut", ctx.animeState);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", 0 < (ctx.imageFile == null ? null : ctx.imageFile.url == null ? null : ctx.imageFile.url.length));
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](4);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](ctx.chatMessage.name);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](ctx.chatMessage.from);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](12, 9, ctx.chatMessage.timestamp, "y/M/d H:mm"));
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", !ctx.chatMessage.isSecret || ctx.chatMessage.isSendFromSelf)("ngIfThen", _r2)("ngIfElse", _r4);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_4__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_4__["NgIf"]], pipes: [_angular_common__WEBPACK_IMPORTED_MODULE_4__["DatePipe"], pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_5__["SafePipe"]], styles: ["[_nghost-%COMP%] {\n  display: block;\n}\n\n.container[_ngcontent-%COMP%] {\n  width: 100%;\n  overflow-x: hidden;\n}\n\n.message[_ngcontent-%COMP%] {\n  display: flex;\n  flex-flow: row nowrap;\n  box-sizing: border-box;\n  padding: 5px 5px;\n  width: 100%;\n  word-wrap: break-word;\n  overflow-wrap: anywhere;\n  word-break: break-word;\n  border-bottom:1px dotted #999;\n}\n\n.direct-message[_ngcontent-%COMP%] {\n  background-color: #555;\n  color: #CCC;\n}\n\n.message[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%] {\n  padding: 0px;\n  width: 50px;\n  height: 50px;\n  flex-shrink: 0;\n  vertical-align: top;\n}\n\n.message[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  width: 100%;\n  height: 100%;\n  vertical-align: bottom;\n  object-fit: cover;\n  object-position: 50% 0%;\n}\n\n.message[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%] {\n  flex-grow: 1;\n}\n\n.message[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%] {\n  vertical-align: top;\n  font-size: 14px;\n  padding-left: 12px;\n}\n\n.message[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%] {\n  vertical-align: top;\n  padding: 2px 12px 0 12px;\n  font-size: 14px;\n}\n\n.message[_ngcontent-%COMP%]   .tip[_ngcontent-%COMP%] {\n  font-size: 8px;\n  padding-left: 12px;\n}\n\n.msg-name[_ngcontent-%COMP%] {\n  font-weight: bold;\n}\n\n.msg-text[_ngcontent-%COMP%] {\n  white-space: pre-wrap;\n}\n\n.dicebot-message[_ngcontent-%COMP%]   .msg-name[_ngcontent-%COMP%] {\n  font-size: 8px;\n}\n\n.dicebot-message[_ngcontent-%COMP%]   .msg-text[_ngcontent-%COMP%] {\n  \n}\n\n.direct-message.dicebot-message[_ngcontent-%COMP%]   .msg-text[_ngcontent-%COMP%] {\n  \n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtbWVzc2FnZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxrQkFBa0I7QUFDcEI7O0FBQ0E7RUFDRSxhQUFhO0VBQ2IscUJBQXFCO0VBQ3JCLHNCQUFzQjtFQUN0QixnQkFBZ0I7RUFDaEIsV0FBVztFQUNYLHFCQUFxQjtFQUNyQix1QkFBdUI7RUFDdkIsc0JBQXNCO0VBQ3RCLDZCQUE2QjtBQUMvQjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxZQUFZO0VBQ1osV0FBVztFQUNYLFlBQVk7RUFDWixjQUFjO0VBQ2QsbUJBQW1CO0FBQ3JCOztBQUNBO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsaUJBQWlCO0VBQ2pCLHVCQUF1QjtBQUN6Qjs7QUFDQTtFQUNFLFlBQVk7QUFDZDs7QUFDQTtFQUNFLG1CQUFtQjtFQUNuQixlQUFlO0VBQ2Ysa0JBQWtCO0FBQ3BCOztBQUNBO0VBQ0UsbUJBQW1CO0VBQ25CLHdCQUF3QjtFQUN4QixlQUFlO0FBQ2pCOztBQUNBO0VBQ0UsY0FBYztFQUNkLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsY0FBYztBQUNoQiIsImZpbGUiOiJjaGF0LW1lc3NhZ2UuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcbiAgZGlzcGxheTogYmxvY2s7XG59XG5cbi5jb250YWluZXIge1xuICB3aWR0aDogMTAwJTtcbiAgb3ZlcmZsb3cteDogaGlkZGVuO1xufVxuLm1lc3NhZ2Uge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWZsb3c6IHJvdyBub3dyYXA7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIHBhZGRpbmc6IDVweCA1cHg7XG4gIHdpZHRoOiAxMDAlO1xuICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XG4gIG92ZXJmbG93LXdyYXA6IGFueXdoZXJlO1xuICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xuICBib3JkZXItYm90dG9tOjFweCBkb3R0ZWQgIzk5OTtcbn1cblxuLmRpcmVjdC1tZXNzYWdlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzU1NTtcbiAgY29sb3I6ICNDQ0M7XG59XG5cbi5tZXNzYWdlIC5pbWFnZSB7XG4gIHBhZGRpbmc6IDBweDtcbiAgd2lkdGg6IDUwcHg7XG4gIGhlaWdodDogNTBweDtcbiAgZmxleC1zaHJpbms6IDA7XG4gIHZlcnRpY2FsLWFsaWduOiB0b3A7XG59XG4ubWVzc2FnZSAuaW1hZ2UgaW1nIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgb2JqZWN0LWZpdDogY292ZXI7XG4gIG9iamVjdC1wb3NpdGlvbjogNTAlIDAlO1xufVxuLm1lc3NhZ2UgLmJvZHkge1xuICBmbGV4LWdyb3c6IDE7XG59XG4ubWVzc2FnZSAudGl0bGUge1xuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xuICBmb250LXNpemU6IDE0cHg7XG4gIHBhZGRpbmctbGVmdDogMTJweDtcbn1cbi5tZXNzYWdlIC50ZXh0IHtcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcbiAgcGFkZGluZzogMnB4IDEycHggMCAxMnB4O1xuICBmb250LXNpemU6IDE0cHg7XG59XG4ubWVzc2FnZSAudGlwIHtcbiAgZm9udC1zaXplOiA4cHg7XG4gIHBhZGRpbmctbGVmdDogMTJweDtcbn1cblxuLm1zZy1uYW1lIHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5tc2ctdGV4dCB7XG4gIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbn1cblxuLmRpY2Vib3QtbWVzc2FnZSAubXNnLW5hbWUge1xuICBmb250LXNpemU6IDhweDtcbn1cblxuLmRpY2Vib3QtbWVzc2FnZSAubXNnLXRleHQge1xuICAvKmNvbG9yOiMyMkY7Ki9cbn1cblxuLmRpcmVjdC1tZXNzYWdlLmRpY2Vib3QtbWVzc2FnZSAubXNnLXRleHQge1xuICAvKmNvbG9yOiNDQ0Y7Ki9cbn1cbiJdfQ== */"], data: { animation: [
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('flyInOut', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => active', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('200ms ease-out', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'translateX(100px)', opacity: '0', offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'translateX(0)', opacity: '1', offset: 1.0 })
                        ]))
                    ]),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('200ms ease-out', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ opacity: '0', offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ opacity: '1', offset: 1.0 })
                        ]))
                    ])
                ])
            ] } });
    return ChatMessageComponent;
}());



/***/ }),

/***/ "LjVp":
/*!**********************************************************!*\
  !*** ./src/app/service/game-object-inventory.service.ts ***!
  \**********************************************************/
/*! exports provided: GameObjectInventoryService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameObjectInventoryService", function() { return GameObjectInventoryService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_core_system_util_string_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/system/util/string-util */ "baV6");
/* harmony import */ var _udonarium_data_element__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/data-element */ "gkrD");
/* harmony import */ var _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/data-summary-setting */ "zP96");
/* harmony import */ var _udonarium_game_character__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/game-character */ "M/aK");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/core */ "fXoL");








var GameObjectInventoryService = /** @class */ (function () {
    function GameObjectInventoryService() {
        var _this = this;
        this.tableInventory = new ObjectInventory(function (object) { return object.location.name === 'table'; });
        this.commonInventory = new ObjectInventory(function (object) { return !_this.isAnyLocation(object.location.name); });
        this.privateInventory = new ObjectInventory(function (object) { return object.location.name === _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerId; });
        this.graveyardInventory = new ObjectInventory(function (object) { return object.location.name === 'graveyard'; });
        this.locationMap = new Map();
        this.tagNameMap = new Map();
        this.newLineString = '/';
        this.newLineDataElement = _udonarium_data_element__WEBPACK_IMPORTED_MODULE_4__["DataElement"].create(this.newLineString);
        this.initialize();
    }
    Object.defineProperty(GameObjectInventoryService.prototype, "summarySetting", {
        get: function () { return _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_5__["DataSummarySetting"].instance; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObjectInventoryService.prototype, "sortTag", {
        get: function () { return this.summarySetting.sortTag; },
        set: function (sortTag) { this.summarySetting.sortTag = sortTag; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObjectInventoryService.prototype, "sortOrder", {
        get: function () { return this.summarySetting.sortOrder; },
        set: function (sortOrder) { this.summarySetting.sortOrder = sortOrder; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObjectInventoryService.prototype, "dataTag", {
        get: function () { return this.summarySetting.dataTag; },
        set: function (dataTag) { this.summarySetting.dataTag = dataTag; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObjectInventoryService.prototype, "dataTags", {
        get: function () { return this.summarySetting.dataTags; },
        enumerable: false,
        configurable: true
    });
    GameObjectInventoryService.prototype.initialize = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].register(this)
            .on('OPEN_NETWORK', function (event) { _this.refresh(); })
            .on('CONNECT_PEER', function (event) { _this.refresh(); })
            .on('DISCONNECT_PEER', function (event) { _this.refresh(); })
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.get(event.data.identifier);
            if (!object)
                return;
            if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_6__["GameCharacter"]) {
                var prevLocation = _this.locationMap.get(object.identifier);
                if (object.location.name !== prevLocation) {
                    _this.locationMap.set(object.identifier, object.location.name);
                    _this.refresh();
                }
            }
            else if (object instanceof _udonarium_data_element__WEBPACK_IMPORTED_MODULE_4__["DataElement"]) {
                if (!_this.containsInGameCharacter(object))
                    return;
                var prevName = _this.tagNameMap.get(object.identifier);
                if ((_this.dataTags.includes(prevName) || _this.dataTags.includes(object.name)) && object.name !== prevName) {
                    _this.tagNameMap.set(object.identifier, object.name);
                    _this.refreshDataElements();
                }
                if (_this.sortTag === object.name) {
                    _this.refreshSort();
                }
                if (0 < object.children.length) {
                    _this.refreshDataElements();
                    _this.refreshSort();
                }
                _this.callInventoryUpdate();
            }
            else if (object instanceof _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_5__["DataSummarySetting"]) {
                _this.refreshDataElements();
                _this.refreshSort();
                _this.callInventoryUpdate();
            }
        })
            .on('DELETE_GAME_OBJECT', 1000, function (event) {
            _this.locationMap.delete(event.data.identifier);
            _this.tagNameMap.delete(event.data.identifier);
            _this.refresh();
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            if (event.isSendFromSelf)
                _this.callInventoryUpdate();
        });
    };
    GameObjectInventoryService.prototype.containsInGameCharacter = function (element) {
        var parent = element.parent;
        var aliasName = _udonarium_game_character__WEBPACK_IMPORTED_MODULE_6__["GameCharacter"].aliasName;
        while (parent) {
            if (parent.aliasName === aliasName)
                return true;
            parent = parent.parent;
        }
        return false;
    };
    GameObjectInventoryService.prototype.refresh = function () {
        this.refreshObjects();
        this.refreshDataElements();
        this.refreshSort();
        this.callInventoryUpdate();
    };
    GameObjectInventoryService.prototype.refreshObjects = function () {
        this.tableInventory.refreshObjects();
        this.commonInventory.refreshObjects();
        this.privateInventory.refreshObjects();
        this.graveyardInventory.refreshObjects();
    };
    GameObjectInventoryService.prototype.refreshDataElements = function () {
        this.tableInventory.refreshDataElements();
        this.commonInventory.refreshDataElements();
        this.privateInventory.refreshDataElements();
        this.graveyardInventory.refreshDataElements();
    };
    GameObjectInventoryService.prototype.refreshSort = function () {
        this.tableInventory.refreshSort();
        this.commonInventory.refreshSort();
        this.privateInventory.refreshSort();
        this.graveyardInventory.refreshSort();
    };
    GameObjectInventoryService.prototype.callInventoryUpdate = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].trigger('UPDATE_INVENTORY', null);
    };
    GameObjectInventoryService.prototype.isAnyLocation = function (location) {
        var e_1, _a;
        if (location === 'table' || location === _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerId || location === 'graveyard')
            return true;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(_udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerContexts), _c = _b.next(); !_c.done; _c = _b.next()) {
                var conn = _c.value;
                if (conn.isOpen && location === conn.peerId) {
                    return true;
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return false;
    };
    GameObjectInventoryService.ɵfac = function GameObjectInventoryService_Factory(t) { return new (t || GameObjectInventoryService)(); };
    GameObjectInventoryService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdefineInjectable"]({ token: GameObjectInventoryService, factory: GameObjectInventoryService.ɵfac, providedIn: 'root' });
    return GameObjectInventoryService;
}());

var ObjectInventory = /** @class */ (function () {
    function ObjectInventory(classifier) {
        this.classifier = classifier;
        this.newLineString = '/';
        this.newLineDataElement = _udonarium_data_element__WEBPACK_IMPORTED_MODULE_4__["DataElement"].create(this.newLineString);
        this._tabletopObjects = [];
        this._dataElementMap = new Map();
        this.needsRefreshObjects = true;
        this.needsRefreshElements = true;
        this.needsSort = true;
    }
    Object.defineProperty(ObjectInventory.prototype, "summarySetting", {
        get: function () { return _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_5__["DataSummarySetting"].instance; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectInventory.prototype, "sortTag", {
        get: function () { return this.summarySetting.sortTag; },
        set: function (sortTag) { this.summarySetting.sortTag = sortTag; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectInventory.prototype, "sortOrder", {
        get: function () { return this.summarySetting.sortOrder; },
        set: function (sortOrder) { this.summarySetting.sortOrder = sortOrder; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectInventory.prototype, "dataTag", {
        get: function () { return this.summarySetting.dataTag; },
        set: function (dataTag) { this.summarySetting.dataTag = dataTag; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectInventory.prototype, "dataTags", {
        get: function () { return this.summarySetting.dataTags; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectInventory.prototype, "tabletopObjects", {
        get: function () {
            if (this.needsRefreshObjects) {
                this._tabletopObjects = this.searchTabletopObjects();
                this.needsRefreshObjects = false;
            }
            if (this.needsSort) {
                this._tabletopObjects = this.sortTabletopObjects(this._tabletopObjects);
                this.needsSort = false;
            }
            return this._tabletopObjects;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectInventory.prototype, "length", {
        get: function () {
            if (this.needsRefreshObjects) {
                this._tabletopObjects = this.searchTabletopObjects();
                this.needsRefreshObjects = false;
            }
            return this._tabletopObjects.length;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectInventory.prototype, "dataElementMap", {
        get: function () {
            var e_2, _a;
            var _this = this;
            if (this.needsRefreshElements) {
                this._dataElementMap.clear();
                var caches_2 = this.tabletopObjects;
                var _loop_1 = function (object) {
                    if (!object.rootDataElement)
                        return "continue";
                    var elements = this_1.dataTags.map(function (tag) { return tag === _this.newLineString ? _this.newLineDataElement : object.rootDataElement.getFirstElementByName(tag); });
                    this_1._dataElementMap.set(object.identifier, elements);
                };
                var this_1 = this;
                try {
                    for (var caches_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(caches_2), caches_1_1 = caches_1.next(); !caches_1_1.done; caches_1_1 = caches_1.next()) {
                        var object = caches_1_1.value;
                        _loop_1(object);
                    }
                }
                catch (e_2_1) { e_2 = { error: e_2_1 }; }
                finally {
                    try {
                        if (caches_1_1 && !caches_1_1.done && (_a = caches_1.return)) _a.call(caches_1);
                    }
                    finally { if (e_2) throw e_2.error; }
                }
                this.needsRefreshElements = false;
            }
            return this._dataElementMap;
        },
        enumerable: false,
        configurable: true
    });
    ObjectInventory.prototype.refreshObjects = function () {
        this.needsRefreshObjects = true;
    };
    ObjectInventory.prototype.refreshDataElements = function () {
        this.needsRefreshElements = true;
    };
    ObjectInventory.prototype.refreshSort = function () {
        this.needsSort = true;
    };
    ObjectInventory.prototype.searchTabletopObjects = function () {
        var e_3, _a;
        var objects = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.getObjects(_udonarium_game_character__WEBPACK_IMPORTED_MODULE_6__["GameCharacter"]);
        var caches = [];
        try {
            for (var objects_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(objects), objects_1_1 = objects_1.next(); !objects_1_1.done; objects_1_1 = objects_1.next()) {
                var object = objects_1_1.value;
                if (this.classifier(object))
                    caches.push(object);
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (objects_1_1 && !objects_1_1.done && (_a = objects_1.return)) _a.call(objects_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return caches;
    };
    ObjectInventory.prototype.sortTabletopObjects = function (objects) {
        var _this = this;
        var sortTag = this.sortTag.length ? this.sortTag.trim() : '';
        var sortOrder = this.sortOrder === 'ASC' ? -1 : 1;
        if (sortTag.length < 1)
            return objects;
        objects.sort(function (a, b) {
            var aElm = a.rootDataElement.getFirstElementByName(sortTag);
            var bElm = b.rootDataElement.getFirstElementByName(sortTag);
            if (!aElm && !bElm)
                return 0;
            if (!bElm)
                return -1;
            if (!aElm)
                return 1;
            var aValue = _this.convertToSortableValue(aElm);
            var bValue = _this.convertToSortableValue(bElm);
            if (aValue < bValue)
                return sortOrder;
            if (aValue > bValue)
                return sortOrder * -1;
            return 0;
        });
        return objects;
    };
    ObjectInventory.prototype.convertToSortableValue = function (dataElement) {
        var value = dataElement.isNumberResource ? dataElement.currentValue : dataElement.value;
        var resultStr = _udonarium_core_system_util_string_util__WEBPACK_IMPORTED_MODULE_3__["StringUtil"].toHalfWidth((value + '').trim());
        var resultNum = +resultStr;
        return Number.isNaN(resultNum) ? resultStr : resultNum;
    };
    return ObjectInventory;
}());


/***/ }),

/***/ "M/aK":
/*!*****************************************!*\
  !*** ./src/app/class/game-character.ts ***!
  \*****************************************/
/*! exports provided: GameCharacter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameCharacter", function() { return GameCharacter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _chat_palette__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat-palette */ "uH+U");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _data_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./data-element */ "gkrD");
/* harmony import */ var _tabletop_object__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./tabletop-object */ "e8gA");





var GameCharacter = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(GameCharacter, _super);
    function GameCharacter() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.rotate = 0;
        _this.roll = 0;
        return _this;
    }
    GameCharacter_1 = GameCharacter;
    Object.defineProperty(GameCharacter.prototype, "name", {
        get: function () { return this.getCommonValue('name', ''); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameCharacter.prototype, "size", {
        get: function () { return this.getCommonValue('size', 1); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameCharacter.prototype, "chatPalette", {
        get: function () {
            var e_1, _a;
            try {
                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var child = _c.value;
                    if (child instanceof _chat_palette__WEBPACK_IMPORTED_MODULE_1__["ChatPalette"])
                        return child;
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return null;
        },
        enumerable: false,
        configurable: true
    });
    GameCharacter.create = function (name, size, imageIdentifier) {
        var gameCharacter = new GameCharacter_1();
        gameCharacter.createDataElements();
        gameCharacter.initialize();
        gameCharacter.createTestGameDataElement(name, size, imageIdentifier);
        return gameCharacter;
    };
    GameCharacter.prototype.createTestGameDataElement = function (name, size, imageIdentifier) {
        this.createDataElements();
        var nameElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('name', name, {}, 'name_' + this.identifier);
        var sizeElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('size', size, {}, 'size_' + this.identifier);
        if (this.imageDataElement.getFirstElementByName('imageIdentifier')) {
            this.imageDataElement.getFirstElementByName('imageIdentifier').value = imageIdentifier;
        }
        var resourceElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('リソース', '', {}, 'リソース' + this.identifier);
        var hpElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('HP', 200, { 'type': 'numberResource', 'currentValue': '200' }, 'HP_' + this.identifier);
        var mpElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('MP', 100, { 'type': 'numberResource', 'currentValue': '100' }, 'MP_' + this.identifier);
        this.commonDataElement.appendChild(nameElement);
        this.commonDataElement.appendChild(sizeElement);
        this.detailDataElement.appendChild(resourceElement);
        resourceElement.appendChild(hpElement);
        resourceElement.appendChild(mpElement);
        //TEST
        var testElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('情報', '', {}, '情報' + this.identifier);
        this.detailDataElement.appendChild(testElement);
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('説明', 'ここに説明を書く\nあいうえお', { 'type': 'note' }, '説明' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('メモ', '任意の文字列\n１\n２\n３\n４\n５', { 'type': 'note' }, 'メモ' + this.identifier));
        //TEST
        testElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('能力', '', {}, '能力' + this.identifier);
        this.detailDataElement.appendChild(testElement);
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('器用度', 24, {}, '器用度' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('敏捷度', 24, {}, '敏捷度' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('筋力', 24, {}, '筋力' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('生命力', 24, {}, '生命力' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('知力', 24, {}, '知力' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('精神力', 24, {}, '精神力' + this.identifier));
        //TEST
        testElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('戦闘特技', '', {}, '戦闘特技' + this.identifier);
        this.detailDataElement.appendChild(testElement);
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('Lv1', '全力攻撃', {}, 'Lv1' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('Lv3', '武器習熟/ソード', {}, 'Lv3' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('Lv5', '武器習熟/ソードⅡ', {}, 'Lv5' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('Lv7', '頑強', {}, 'Lv7' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('Lv9', '薙ぎ払い', {}, 'Lv9' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('自動', '治癒適正', {}, '自動' + this.identifier));
        var domParser = new DOMParser();
        var gameCharacterXMLDocument = domParser.parseFromString(this.rootDataElement.toXml(), 'application/xml');
        var palette = new _chat_palette__WEBPACK_IMPORTED_MODULE_1__["ChatPalette"]('ChatPalette_' + this.identifier);
        palette.setPalette("\u30C1\u30E3\u30C3\u30C8\u30D1\u30EC\u30C3\u30C8\u5165\u529B\u4F8B\uFF1A\n2d6+1 \u30C0\u30A4\u30B9\u30ED\u30FC\u30EB\n\uFF11\uFF44\uFF12\uFF10\uFF0B{\u654F\u6377}\uFF0B\uFF5B\u683C\u95D8\uFF5D\u3000{name}\u306E\u683C\u95D8\uFF01\n//\u654F\u6377=10+{\u654F\u6377A}\n//\u654F\u6377A=10\n//\u683C\u95D8\uFF1D\uFF11");
        palette.initialize();
        this.appendChild(palette);
    };
    var GameCharacter_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], GameCharacter.prototype, "rotate", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], GameCharacter.prototype, "roll", void 0);
    GameCharacter = GameCharacter_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncObject"])('character')
    ], GameCharacter);
    return GameCharacter;
}(_tabletop_object__WEBPACK_IMPORTED_MODULE_4__["TabletopObject"]));



/***/ }),

/***/ "M9xM":
/*!******************************************!*\
  !*** ./src/app/service/panel.service.ts ***!
  \******************************************/
/*! exports provided: PanelService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PanelService", function() { return PanelService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");

var PanelService = /** @class */ (function () {
    function PanelService(componentFactoryResolver) {
        this.componentFactoryResolver = componentFactoryResolver;
        this.title = '無名のパネル';
        this.left = 0;
        this.top = 0;
        this.width = 100;
        this.height = 100;
        this.scrollablePanel = null;
    }
    Object.defineProperty(PanelService.prototype, "isShow", {
        get: function () {
            return this.panelComponentRef ? true : false;
        },
        enumerable: false,
        configurable: true
    });
    PanelService.prototype.open = function (childComponent, option, parentViewContainerRef) {
        if (!parentViewContainerRef) {
            parentViewContainerRef = PanelService.defaultParentViewContainerRef;
        }
        var panelComponentRef;
        var injector = parentViewContainerRef.injector;
        var panelComponentFactory = this.componentFactoryResolver.resolveComponentFactory(PanelService.UIPanelComponentClass);
        var bodyComponentFactory = this.componentFactoryResolver.resolveComponentFactory(childComponent);
        panelComponentRef = parentViewContainerRef.createComponent(panelComponentFactory, parentViewContainerRef.length, injector);
        var bodyComponentRef = panelComponentRef.instance.content.createComponent(bodyComponentFactory);
        var childPanelService = panelComponentRef.injector.get(PanelService);
        childPanelService.panelComponentRef = panelComponentRef;
        if (option) {
            if (option.title)
                childPanelService.title = option.title;
            if (option.top)
                childPanelService.top = option.top;
            if (option.left)
                childPanelService.left = option.left;
            if (option.width)
                childPanelService.width = option.width;
            if (option.height)
                childPanelService.height = option.height;
        }
        panelComponentRef.onDestroy(function () {
            childPanelService.panelComponentRef = null;
        });
        return bodyComponentRef.instance;
    };
    PanelService.prototype.close = function () {
        if (this.panelComponentRef) {
            this.panelComponentRef.destroy();
            this.panelComponentRef = null;
        }
    };
    PanelService.UIPanelComponentClass = null;
    PanelService.ɵfac = function PanelService_Factory(t) { return new (t || PanelService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ComponentFactoryResolver"])); };
    PanelService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: PanelService, factory: PanelService.ɵfac });
    return PanelService;
}());



/***/ }),

/***/ "MDT1":
/*!********************************************************************!*\
  !*** ./src/app/class/core/synchronize-object/object-serializer.ts ***!
  \********************************************************************/
/*! exports provided: ObjectSerializer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectSerializer", function() { return ObjectSerializer; });
/* harmony import */ var _system_util_xml_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../system/util/xml-util */ "cfGu");
/* harmony import */ var _object_factory__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./object-factory */ "+FYa");


var objectPropertyKeys = Object.getOwnPropertyNames(Object.prototype);
var arrayPropertyKeys = Object.getOwnPropertyNames(Array.prototype);
var ObjectSerializer = /** @class */ (function () {
    function ObjectSerializer() {
        console.log('ObjectSerializer ready...');
    }
    Object.defineProperty(ObjectSerializer, "instance", {
        get: function () {
            if (!ObjectSerializer._instance)
                ObjectSerializer._instance = new ObjectSerializer();
            return ObjectSerializer._instance;
        },
        enumerable: false,
        configurable: true
    });
    ;
    ObjectSerializer.prototype.toXml = function (gameObject) {
        var xml = '';
        var attributes = 'toAttributes' in gameObject ? gameObject.toAttributes() : ObjectSerializer.toAttributes(gameObject.toContext().syncData);
        var tagName = gameObject.aliasName;
        var attrStr = '';
        for (var name_1 in attributes) {
            var attribute = _system_util_xml_util__WEBPACK_IMPORTED_MODULE_0__["XmlUtil"].encodeEntityReference(attributes[name_1] + '');
            if (attribute == null)
                continue;
            attrStr += ' ' + name_1 + '="' + attribute + '"';
        }
        xml += "<" + (tagName + attrStr) + ">";
        xml += 'innerXml' in gameObject ? gameObject.innerXml() : '';
        xml += "</" + tagName + ">";
        return xml;
    };
    ObjectSerializer.toAttributes = function (syncData) {
        var attributes = {};
        for (var syncVar in syncData) {
            var item = syncData[syncVar];
            var key = syncVar;
            var childAttr = ObjectSerializer.make2Attributes(item, key);
            for (var name_2 in childAttr) {
                attributes[name_2] = childAttr[name_2];
            }
        }
        return attributes;
    };
    ObjectSerializer.make2Attributes = function (item, key) {
        var attributes = {};
        if (Array.isArray(item)) {
            var arrayAttributes = ObjectSerializer.array2attributes(item, key);
            for (var name_3 in arrayAttributes) {
                attributes[name_3] = arrayAttributes[name_3];
            }
        }
        else if (typeof item === 'object') {
            var objAttributes = ObjectSerializer.object2attributes(item, key);
            for (var name_4 in objAttributes) {
                attributes[name_4] = objAttributes[name_4];
            }
        }
        else {
            attributes[key] = item;
        }
        return attributes;
    };
    ObjectSerializer.object2attributes = function (obj, rootKey) {
        var attributes = {};
        for (var objKey in obj) {
            var item = obj[objKey];
            var key = rootKey + '.' + objKey;
            var childAttr = ObjectSerializer.make2Attributes(item, key);
            for (var name_5 in childAttr) {
                attributes[name_5] = childAttr[name_5];
            }
        }
        return attributes;
    };
    ObjectSerializer.array2attributes = function (array, rootKey) {
        var attributes = {};
        var length = array.length;
        for (var i = 0; i < length; i++) {
            var item = array[i];
            var key = rootKey + '.' + i;
            var childAttr = ObjectSerializer.make2Attributes(item, key);
            for (var name_6 in childAttr) {
                attributes[name_6] = childAttr[name_6];
            }
        }
        return attributes;
    };
    ObjectSerializer.prototype.parseXml = function (xml) {
        var xmlElement = null;
        if (typeof xml === 'string') {
            xmlElement = _system_util_xml_util__WEBPACK_IMPORTED_MODULE_0__["XmlUtil"].xml2element(xml);
        }
        else {
            xmlElement = xml;
        }
        if (!xmlElement) {
            console.error('xmlElementが空です');
            return null;
        }
        var gameObject = _object_factory__WEBPACK_IMPORTED_MODULE_1__["ObjectFactory"].instance.create(xmlElement.tagName);
        if (!gameObject)
            return null;
        if ('parseAttributes' in gameObject) {
            gameObject.parseAttributes(xmlElement.attributes);
        }
        else {
            var context = gameObject.toContext();
            ObjectSerializer.parseAttributes(context.syncData, xmlElement.attributes);
            gameObject.apply(context);
        }
        gameObject.initialize();
        if ('parseInnerXml' in gameObject) {
            gameObject.parseInnerXml(xmlElement);
        }
        return gameObject;
    };
    ObjectSerializer.parseAttributes = function (syncData, attributes) {
        var _a;
        var length = attributes.length;
        for (var i = 0; i < length; i++) {
            var value = attributes[i].value;
            value = _system_util_xml_util__WEBPACK_IMPORTED_MODULE_0__["XmlUtil"].decodeEntityReference(value);
            var split = attributes[i].name.split('.');
            var key = split[0];
            var obj = syncData;
            var pollutionKey = split.find(function (splitKey) { return objectPropertyKeys.includes(splitKey); });
            if (pollutionKey != null) {
                console.log("skip invalid key (" + pollutionKey + ")");
                continue;
            }
            if (1 < split.length) {
                (_a = ObjectSerializer.attributes2object(split, obj, key), obj = _a.obj, key = _a.key);
                if (key == null)
                    continue;
            }
            var type = typeof obj[key];
            if (type !== 'string' && obj[key] != null) {
                value = JSON.parse(value);
            }
            obj[key] = value;
        }
        return syncData;
    };
    ObjectSerializer.attributes2object = function (split, obj, key) {
        // 階層構造の解析 foo.bar.0="abc" 等
        // 処理として実装こそしているが、xmlの仕様としては良くないので使用するべきではない.
        var parentObj = null;
        var length = split.length;
        for (var i = 0; i < length; i++) {
            var index = parseInt(split[i]);
            if (parentObj && !Number.isNaN(index) && !Array.isArray(obj) && Object.keys(parentObj).length) {
                parentObj[key] = [];
                obj = parentObj[key];
            }
            key = Number.isNaN(index) ? split[i] : index;
            if (Array.isArray(obj) && typeof key !== 'number') {
                console.warn('Arrayにはindexの挿入しか許可しない');
                return { obj: obj, key: null };
            }
            if (i + 1 < length) {
                if (obj[key] == null)
                    obj[key] = typeof key === 'number' ? [] : {};
                parentObj = obj;
                obj = obj[key];
            }
        }
        return { obj: obj, key: key };
    };
    ObjectSerializer.parseInnerXml = function (element) {
        return null;
    };
    return ObjectSerializer;
}());



/***/ }),

/***/ "N0uT":
/*!*************************************************************!*\
  !*** ./src/app/class/core/file-storage/file-reader-util.ts ***!
  \*************************************************************/
/*! exports provided: FileReaderUtil */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FileReaderUtil", function() { return FileReaderUtil; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var crypto_js_lib_typedarrays__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto-js/lib-typedarrays */ "F+F2");
/* harmony import */ var crypto_js_lib_typedarrays__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto_js_lib_typedarrays__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var crypto_js_sha256__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! crypto-js/sha256 */ "lPiR");
/* harmony import */ var crypto_js_sha256__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(crypto_js_sha256__WEBPACK_IMPORTED_MODULE_2__);



var FileReaderUtil;
(function (FileReaderUtil) {
    function readAsArrayBufferAsync(blob) {
        return new Promise(function (resolve, reject) {
            var reader = new FileReader();
            reader.onload = function (event) { resolve(reader.result); };
            reader.onabort = reader.onerror = function (e) { reject(e); };
            reader.readAsArrayBuffer(blob);
        });
    }
    FileReaderUtil.readAsArrayBufferAsync = readAsArrayBufferAsync;
    function readAsTextAsync(blob) {
        return new Promise(function (resolve, reject) {
            var reader = new FileReader();
            reader.onload = function (event) { resolve(reader.result); };
            reader.onabort = reader.onerror = function (e) { reject(e); };
            reader.readAsText(blob);
        });
    }
    FileReaderUtil.readAsTextAsync = readAsTextAsync;
    function calcSHA256Async(arg) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                if (arg instanceof Blob) {
                    return [2 /*return*/, _calcSHA256Async(arg)];
                }
                else {
                    return [2 /*return*/, _calcSHA256(arg)];
                }
                return [2 /*return*/];
            });
        });
    }
    FileReaderUtil.calcSHA256Async = calcSHA256Async;
    function _calcSHA256Async(blob) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var _a;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = _calcSHA256;
                        return [4 /*yield*/, FileReaderUtil.readAsArrayBufferAsync(blob)];
                    case 1: return [2 /*return*/, _a.apply(void 0, [_b.sent()])];
                }
            });
        });
    }
    function _calcSHA256(arrayBuffer) {
        var wordArray = crypto_js_lib_typedarrays__WEBPACK_IMPORTED_MODULE_1__["create"](arrayBuffer);
        return crypto_js_sha256__WEBPACK_IMPORTED_MODULE_2__(wordArray).toString();
    }
})(FileReaderUtil || (FileReaderUtil = {}));


/***/ }),

/***/ "N5Fg":
/*!*********************************************************************!*\
  !*** ./src/app/class/core/system/network/skyway-data-connection.ts ***!
  \*********************************************************************/
/*! exports provided: SkyWayDataConnection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SkyWayDataConnection", function() { return SkyWayDataConnection; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! events */ "+qE3");
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var msgpack_lite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! msgpack-lite */ "HlZf");
/* harmony import */ var msgpack_lite__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(msgpack_lite__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _util_uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/uuid */ "P9Dn");
/* harmony import */ var _util_zero_timeout__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/zero-timeout */ "eS09");





;
;
var SkyWayDataConnection = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(SkyWayDataConnection, _super);
    function SkyWayDataConnection(conn) {
        var _this = _super.call(this) || this;
        _this.conn = conn;
        _this.chunkSize = 15.5 * 1024;
        _this.receivedMap = new Map();
        _this.timeoutTimer = null;
        conn.on('data', function (data) { return _this.onData(data); });
        conn.on('open', function () {
            _this.clearTimeoutTimer();
            exchangeSkyWayImplementation(conn);
            _this.emit('open');
        });
        conn.on('close', function () {
            _this.clearTimeoutTimer();
            _this.emit('close');
        });
        conn.on('error', function (err) {
            _this.clearTimeoutTimer();
            _this.emit('error', err);
        });
        _this.setTimeoutTimer();
        return _this;
    }
    Object.defineProperty(SkyWayDataConnection.prototype, "open", {
        get: function () { return this.conn.open; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SkyWayDataConnection.prototype, "remoteId", {
        get: function () { return this.conn.remoteId; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SkyWayDataConnection.prototype, "metadata", {
        get: function () { return this.conn.metadata; },
        enumerable: false,
        configurable: true
    });
    SkyWayDataConnection.prototype.close = function () {
        this.clearTimeoutTimer();
        this.conn.close();
    };
    SkyWayDataConnection.prototype.send = function (data) {
        var encodedData = msgpack_lite__WEBPACK_IMPORTED_MODULE_2__["encode"](data);
        var total = Math.ceil(encodedData.byteLength / this.chunkSize);
        if (total <= 1) {
            this.conn.send(encodedData);
            return;
        }
        var id = _util_uuid__WEBPACK_IMPORTED_MODULE_3__["UUID"].generateUuid();
        var sliceData = null;
        var chank = null;
        for (var sliceIndex = 0; sliceIndex < total; sliceIndex++) {
            sliceData = encodedData.slice(sliceIndex * this.chunkSize, (sliceIndex + 1) * this.chunkSize);
            chank = { id: id, data: sliceData, index: sliceIndex, total: total };
            this.conn.send(msgpack_lite__WEBPACK_IMPORTED_MODULE_2__["encode"](chank));
        }
    };
    SkyWayDataConnection.prototype.onData = function (data) {
        var e_1, _a;
        var chank = msgpack_lite__WEBPACK_IMPORTED_MODULE_2__["decode"](new Uint8Array(data));
        if (chank.id == null) {
            this.emit('data', chank);
            return;
        }
        var received = this.receivedMap.get(chank.id);
        if (received == null) {
            received = { id: chank.id, chanks: new Array(chank.total), length: 0, byteLength: 0 };
            this.receivedMap.set(chank.id, received);
        }
        if (received.chanks[chank.index] != null)
            return;
        received.length++;
        received.byteLength += chank.data.byteLength;
        received.chanks[chank.index] = chank.data;
        if (received.length < chank.total)
            return;
        this.receivedMap.delete(chank.id);
        var uint8Array = new Uint8Array(received.byteLength);
        var pos = 0;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(received.chanks), _c = _b.next(); !_c.done; _c = _b.next()) {
                var c = _c.value;
                uint8Array.set(c, pos);
                pos += c.byteLength;
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        var decodedData = msgpack_lite__WEBPACK_IMPORTED_MODULE_2__["decode"](uint8Array);
        this.emit('data', decodedData);
    };
    SkyWayDataConnection.prototype.setTimeoutTimer = function () {
        var _this = this;
        this.clearTimeoutTimer();
        this.timeoutTimer = setTimeout(function () {
            console.warn("timeout " + _this.conn.remoteId);
            _this.timeoutTimer = null;
            _this.emit('close');
        }, 15000);
    };
    SkyWayDataConnection.prototype.clearTimeoutTimer = function () {
        if (this.timeoutTimer == null)
            return;
        clearTimeout(this.timeoutTimer);
        this.timeoutTimer = null;
    };
    return SkyWayDataConnection;
}(events__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]));

/*
SkyWay の DataConnection._startSendLoop() を取り替える.
setInterval() に由来する遅延を解消するが skyway-js-sdk の更新次第で動作しなくなるので注意.

https://github.com/skyway/skyway-js-sdk/blob/master/src/peer/dataConnection.js
*/
function exchangeSkyWayImplementation(conn) {
    if (conn._dc && conn._sendBuffer) {
        conn._startSendLoop = startSendLoopZeroTimeout;
    }
}
function startSendLoopZeroTimeout() {
    if (!this.sendInterval) {
        this.sendInterval = Object(_util_zero_timeout__WEBPACK_IMPORTED_MODULE_4__["setZeroTimeout"])(sendBuffertZeroTimeout.bind(this));
    }
}
function sendBuffertZeroTimeout() {
    var currMsg = this._sendBuffer.shift();
    try {
        this._dc.send(currMsg);
    }
    catch (error) {
        this._sendBuffer.push(currMsg);
    }
    if (this._sendBuffer.length === 0) {
        this.sendInterval = undefined;
    }
    else {
        this.sendInterval = Object(_util_zero_timeout__WEBPACK_IMPORTED_MODULE_4__["setZeroTimeout"])(sendBuffertZeroTimeout.bind(this));
    }
}


/***/ }),

/***/ "NVMP":
/*!******************************************************!*\
  !*** ./src/app/class/core/file-storage/mime-type.ts ***!
  \******************************************************/
/*! exports provided: MimeType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MimeType", function() { return MimeType; });
var MimeType;
(function (MimeType) {
    var types = {
        gif: 'image/gif',
        jpg: 'image/jpeg',
        jpeg: 'image/jpeg',
        jpe: 'image/jpeg',
        png: 'image/png',
        apng: 'image/apng',
        webp: 'image/webp',
        svg: 'image/svg+xml',
        svgz: 'image/svg+xml',
        ico: 'image/x-icon',
        cur: 'image/x-icon',
        bmp: 'image/bmp',
        html: 'text/html',
        htm: 'text/html',
        shtml: 'text/html',
        xml: 'text/xml',
        yml: 'text/yaml',
        yaml: 'text/yaml',
        json: 'application/json',
        map: 'application/json',
        zip: 'application/zip',
        mp3: 'audio/mp3',
        wav: 'audio/wav',
        m4a: 'audio/aac',
        ogg: 'audio/ogg',
        mpg: 'video/mpeg',
        mpeg: 'video/mpeg',
        mp4: 'video/mp4',
        webm: 'video/webm'
    };
    function type(fileName) {
        var ext = fileName.replace(/.*[\.\/\\]/, '').toLowerCase();
        return types[ext] ? types[ext] : '';
    }
    MimeType.type = type;
    function extension(mimeType) {
        for (var key in types) {
            if (types[key] === mimeType) {
                return key;
            }
        }
        return mimeType.split('/')[1];
    }
    MimeType.extension = extension;
})(MimeType || (MimeType = {}));


/***/ }),

/***/ "OOM5":
/*!******************************************************************!*\
  !*** ./src/app/component/file-storage/file-storage.component.ts ***!
  \******************************************************************/
/*! exports provided: FileStorageComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FileStorageComponent", function() { return FileStorageComponent; });
/* harmony import */ var _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/core/file-storage/file-archiver */ "wBZT");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");







function FileStorageComponent_span_14_img_1_Template(rf, ctx) { if (rf & 1) {
    var _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "img", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function FileStorageComponent_span_14_img_1_Template_img_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r6); var file_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().$implicit; var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](); return ctx_r4.onSelectedFile(file_r1); });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](1, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    var file_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind2"](1, 2, file_r1.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵsanitizeUrl"])("alt", file_r1.name);
} }
function FileStorageComponent_span_14_img_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](0, "img", 10);
} if (rf & 2) {
    var file_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpropertyInterpolate"]("alt", file_r1.name);
} }
function FileStorageComponent_span_14_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "span", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, FileStorageComponent_span_14_img_1_Template, 2, 5, "img", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](2, FileStorageComponent_span_14_img_2_Template, 1, 1, "img", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    var file_r1 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", 0 < file_r1.url.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", file_r1.url.length <= 0);
} }
var FileStorageComponent = /** @class */ (function () {
    function FileStorageComponent(changeDetector, panelService) {
        this.changeDetector = changeDetector;
        this.panelService = panelService;
        this.fileStorageService = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_1__["ImageStorage"].instance;
    }
    FileStorageComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.panelService.title = 'ファイル一覧'; });
    };
    FileStorageComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].register(this).on('SYNCHRONIZE_FILE_LIST', function (event) {
            if (event.isSendFromSelf) {
                _this.changeDetector.markForCheck();
            }
        });
    };
    FileStorageComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].unregister(this);
    };
    FileStorageComponent.prototype.handleFileSelect = function (event) {
        var input = event.target;
        var files = input.files;
        if (files.length)
            _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_0__["FileArchiver"].instance.load(files);
        input.value = '';
    };
    FileStorageComponent.prototype.onSelectedFile = function (file) {
        console.log('onSelectedFile', file);
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].call('SELECT_FILE', { fileIdentifier: file.identifier }, _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerId);
    };
    FileStorageComponent.ɵfac = function FileStorageComponent_Factory(t) { return new (t || FileStorageComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_3__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_4__["PanelService"])); };
    FileStorageComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({ type: FileStorageComponent, selectors: [["file-storage"]], decls: 15, vars: 1, consts: [[1, "drop-zone"], [1, "material-icons", "large-font"], [1, "small-font"], ["type", "file", "multiple", "", "accept", "image/*", 2, "display", "none", 3, "change"], ["id", "file-list"], ["class", "image", 4, "ngFor", "ngForOf"], [1, "image"], ["height", "120", 3, "src", "alt", "click", 4, "ngIf"], ["src", "assets/images/loading.gif", 3, "alt", 4, "ngIf"], ["height", "120", 3, "src", "alt", "click"], ["src", "assets/images/loading.gif", 3, "alt"]], template: function FileStorageComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "label");
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "i", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](4, "add_photo_alternate");
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](5, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](6, "\u3053\u3053\u306B\u753B\u50CF\u3092\u30C9\u30ED\u30C3\u30D7");
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](8, "\u307E\u305F\u306F\u3053\u3053\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u9078\u629E");
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](9, "input", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("change", function FileStorageComponent_Template_input_change_9_listener($event) { return ctx.handleFileSelect($event); });
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](10, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](11, "br");
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](12, "\uFF11\u30D5\u30A1\u30A4\u30EB\u306B\u3064\u304D2MB\u307E\u3067");
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](13, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](14, FileStorageComponent_span_14_Template, 3, 2, "span", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](14);
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", ctx.fileStorageService.images);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_5__["NgForOf"], _angular_common__WEBPACK_IMPORTED_MODULE_5__["NgIf"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_6__["SafePipe"]], styles: [".drop-zone[_ngcontent-%COMP%] {\n  border: 2px dashed #555;\n  border-radius: 5px;\n  padding: 25px;\n  text-align: center;\n  font: 24px bold 'Vollkorn';\n  color: #444;\n  cursor: pointer;\n}\n\n.large-font[_ngcontent-%COMP%] {\n  font-size: 64px;\n}\n\n.small-font[_ngcontent-%COMP%] {\n  font-size: 12px;\n}\n\n.image[_ngcontent-%COMP%] {\n  font-size: 0;\n}\n\n.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  vertical-align: bottom;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGUtc3RvcmFnZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsdUJBQXVCO0VBR3ZCLGtCQUFrQjtFQUNsQixhQUFhO0VBQ2Isa0JBQWtCO0VBQ2xCLDBCQUEwQjtFQUMxQixXQUFXO0VBQ1gsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0Usc0JBQXNCO0FBQ3hCIiwiZmlsZSI6ImZpbGUtc3RvcmFnZS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmRyb3Atem9uZSB7XG4gIGJvcmRlcjogMnB4IGRhc2hlZCAjNTU1O1xuICAtbW96LWJvcmRlci1yYWRpdXM6IDVweDtcbiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA1cHg7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgcGFkZGluZzogMjVweDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBmb250OiAyNHB4IGJvbGQgJ1ZvbGxrb3JuJztcbiAgY29sb3I6ICM0NDQ7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLmxhcmdlLWZvbnQge1xuICBmb250LXNpemU6IDY0cHg7XG59XG5cbi5zbWFsbC1mb250IHtcbiAgZm9udC1zaXplOiAxMnB4O1xufVxuXG4uaW1hZ2Uge1xuICBmb250LXNpemU6IDA7XG59XG5cbi5pbWFnZSBpbWcge1xuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xufSJdfQ== */"], changeDetection: 0 });
    return FileStorageComponent;
}());



/***/ }),

/***/ "P9Dn":
/*!************************************************!*\
  !*** ./src/app/class/core/system/util/uuid.ts ***!
  \************************************************/
/*! exports provided: UUID */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UUID", function() { return UUID; });
var UUID;
(function (UUID) {
    var lut = [];
    for (var i = 0; i < 256; i++) {
        lut[i] = (i < 16 ? '0' : '') + (i).toString(16);
    }
    function generateUuid() {
        var dvals = new Uint32Array(4);
        window.crypto.getRandomValues(dvals);
        var d0 = dvals[0];
        var d1 = dvals[1];
        var d2 = dvals[2];
        var d3 = dvals[3];
        return lut[d0 & 0xff] + lut[d0 >> 8 & 0xff] + lut[d0 >> 16 & 0xff] + lut[d0 >> 24 & 0xff] + '-' +
            lut[d1 & 0xff] + lut[d1 >> 8 & 0xff] + '-' + lut[d1 >> 16 & 0x0f | 0x40] + lut[d1 >> 24 & 0xff] + '-' +
            lut[d2 & 0x3f | 0x80] + lut[d2 >> 8 & 0xff] + '-' + lut[d2 >> 16 & 0xff] + lut[d2 >> 24 & 0xff] + lut[d3 & 0xff] + lut[d3 >> 8 & 0xff] + lut[d3 >> 16 & 0xff] + lut[d3 >> 24 & 0xff];
    }
    UUID.generateUuid = generateUuid;
})(UUID || (UUID = {}));


/***/ }),

/***/ "PEfN":
/*!*************************************************!*\
  !*** ./src/app/service/chat-message.service.ts ***!
  \*************************************************/
/*! exports provided: ChatMessageService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatMessageService", function() { return ChatMessageService; });
/* harmony import */ var _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/chat-tab-list */ "YZvQ");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_game_character__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/game-character */ "M/aK");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ "fXoL");






var HOURS = 60 * 60 * 1000;
var ChatMessageService = /** @class */ (function () {
    function ChatMessageService() {
        this.intervalTimer = null;
        this.timeOffset = Date.now();
        this.performanceOffset = performance.now();
        this.ntpApiUrls = [
            'https://ntp-a1.nict.go.jp/cgi-bin/json',
            'https://ntp-b1.nict.go.jp/cgi-bin/json',
        ];
        this.gameType = '';
    }
    Object.defineProperty(ChatMessageService.prototype, "chatTabs", {
        get: function () {
            return _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_0__["ChatTabList"].instance.chatTabs;
        },
        enumerable: false,
        configurable: true
    });
    ChatMessageService.prototype.calibrateTimeOffset = function () {
        var _this = this;
        if (this.intervalTimer != null) {
            console.log('calibrateTimeOffset was canceled.');
            return;
        }
        var index = Math.floor(Math.random() * this.ntpApiUrls.length);
        var ntpApiUrl = this.ntpApiUrls[index];
        var sendTime = performance.now();
        fetch(ntpApiUrl)
            .then(function (response) {
            if (response.ok)
                return response.json();
            throw new Error('Network response was not ok.');
        })
            .then(function (jsonObj) {
            var endTime = performance.now();
            var latency = (endTime - sendTime) / 2;
            var timeobj = jsonObj;
            var st = timeobj.st * 1000;
            var fixedTime = st + latency;
            _this.timeOffset = fixedTime;
            _this.performanceOffset = endTime;
            console.log('latency: ' + latency + 'ms');
            console.log('st: ' + st + '');
            console.log('timeOffset: ' + _this.timeOffset);
            console.log('performanceOffset: ' + _this.performanceOffset);
            _this.setIntervalTimer();
        })
            .catch(function (error) {
            console.warn('There has been a problem with your fetch operation: ', error.message);
            _this.setIntervalTimer();
        });
        this.setIntervalTimer();
    };
    ChatMessageService.prototype.setIntervalTimer = function () {
        var _this = this;
        if (this.intervalTimer != null)
            clearTimeout(this.intervalTimer);
        this.intervalTimer = setTimeout(function () {
            _this.intervalTimer = null;
            _this.calibrateTimeOffset();
        }, 6 * HOURS);
    };
    ChatMessageService.prototype.getTime = function () {
        return Math.floor(this.timeOffset + (performance.now() - this.performanceOffset));
    };
    ChatMessageService.prototype.sendMessage = function (chatTab, text, gameType, sendFrom, sendTo) {
        var chatMessage = {
            from: _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerContext.userId,
            to: this.findId(sendTo),
            name: this.makeMessageName(sendFrom, sendTo),
            imageIdentifier: this.findImageIdentifier(sendFrom),
            timestamp: this.calcTimeStamp(chatTab),
            tag: gameType,
            text: text,
        };
        return chatTab.addMessage(chatMessage);
    };
    ChatMessageService.prototype.findId = function (identifier) {
        var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.get(identifier);
        if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_3__["GameCharacter"]) {
            return object.identifier;
        }
        else if (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_4__["PeerCursor"]) {
            return object.userId;
        }
        return null;
    };
    ChatMessageService.prototype.findObjectName = function (identifier) {
        var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.get(identifier);
        if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_3__["GameCharacter"]) {
            return object.name;
        }
        else if (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_4__["PeerCursor"]) {
            return object.name;
        }
        return identifier;
    };
    ChatMessageService.prototype.makeMessageName = function (sendFrom, sendTo) {
        var sendFromName = this.findObjectName(sendFrom);
        if (sendTo == null || sendTo.length < 1)
            return sendFromName;
        var sendToName = this.findObjectName(sendTo);
        return sendFromName + ' > ' + sendToName;
    };
    ChatMessageService.prototype.findImageIdentifier = function (identifier) {
        var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.get(identifier);
        if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_3__["GameCharacter"]) {
            return object.imageFile ? object.imageFile.identifier : '';
        }
        else if (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_4__["PeerCursor"]) {
            return object.imageIdentifier;
        }
        return identifier;
    };
    ChatMessageService.prototype.calcTimeStamp = function (chatTab) {
        var now = this.getTime();
        var latest = chatTab.latestTimeStamp;
        return now <= latest ? latest + 1 : now;
    };
    ChatMessageService.ɵfac = function ChatMessageService_Factory(t) { return new (t || ChatMessageService)(); };
    ChatMessageService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineInjectable"]({ token: ChatMessageService, factory: ChatMessageService.ɵfac });
    return ChatMessageService;
}());



/***/ }),

/***/ "PYk/":
/*!****************************************************************!*\
  !*** ./src/app/class/core/file-storage/buffer-sharing-task.ts ***!
  \****************************************************************/
/*! exports provided: BufferSharingTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BufferSharingTask", function() { return BufferSharingTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var msgpack_lite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! msgpack-lite */ "HlZf");
/* harmony import */ var msgpack_lite__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(msgpack_lite__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../system */ "yNnI");
/* harmony import */ var _system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../system/util/resettable-timeout */ "9ht1");
/* harmony import */ var _system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../system/util/zero-timeout */ "eS09");





var BufferSharingTask = /** @class */ (function () {
    function BufferSharingTask(identifier, sendTo, data) {
        this.chanks = [];
        this.chankSize = 32 * 1024;
        this.chankReceiveCount = 0;
        this.sentChankIndex = 0;
        this.completedChankIndex = 0;
        this.startTime = 0;
        this.isCanceled = false;
        this.identifier = identifier;
        this.sendTo = sendTo;
        this.data = data;
    }
    BufferSharingTask.createSendTask = function (identifier, sendTo, data) {
        var task = new BufferSharingTask(identifier, sendTo, data);
        task.onstart = function () { return task.initializeSend(); };
        return task;
    };
    BufferSharingTask.createReceiveTask = function (identifier) {
        var task = new BufferSharingTask(identifier);
        task.onstart = function () { return task.initializeReceive(); };
        return task;
    };
    BufferSharingTask.prototype.start = function (data) {
        if (!this.onstart) {
            console.warn('再起動する仕様など無い。');
            return;
        }
        this.data = data;
        this.onstart();
        this.onstart = null;
    };
    BufferSharingTask.prototype.progress = function (loded, total) {
        if (this.onprogress)
            this.onprogress(this, loded, total);
    };
    BufferSharingTask.prototype.finish = function () {
        if (this.isCanceled)
            return;
        this.isCanceled = true;
        if (this.onfinish)
            this.onfinish(this, this.data);
        this.dispose();
    };
    BufferSharingTask.prototype.timeout = function () {
        if (this.isCanceled)
            return;
        this.isCanceled = true;
        if (this.ontimeout)
            this.ontimeout(this);
        if (this.onfinish)
            this.onfinish(this, this.data);
        this.dispose();
    };
    BufferSharingTask.prototype.cancel = function () {
        if (this.isCanceled)
            return;
        if (this.sendTo != null)
            _system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].call('CANCEL_TASK_' + this.identifier, null, this.sendTo);
        this._cancel();
    };
    BufferSharingTask.prototype._cancel = function () {
        if (this.isCanceled)
            return;
        this.isCanceled = true;
        if (this.oncancel)
            this.oncancel(this);
        if (this.onfinish)
            this.onfinish(this, this.data);
        this.dispose();
    };
    BufferSharingTask.prototype.dispose = function () {
        _system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].unregister(this);
        if (this.sendChankTimer)
            Object(_system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_4__["clearZeroTimeout"])(this.sendChankTimer);
        if (this.timeoutTimer)
            this.timeoutTimer.clear();
        this.sendChankTimer = null;
        this.timeoutTimer = null;
        this.onprogress = this.onfinish = this.ontimeout = this.oncancel = null;
    };
    BufferSharingTask.prototype.initializeSend = function () {
        var _this = this;
        this.uint8Array = msgpack_lite__WEBPACK_IMPORTED_MODULE_1__["encode"](this.data);
        var total = Math.ceil(this.uint8Array.byteLength / this.chankSize);
        this.chanks = new Array(total);
        console.log('チャンク分割 ' + this.identifier, this.chanks.length);
        _system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].register(this)
            .on('FILE_MORE_CHANK_' + this.identifier, function (event) {
            if (_this.sendTo !== event.sendFrom)
                return;
            _this.completedChankIndex = event.data;
            if (_this.sendChankTimer == null) {
                _this.resetTimeout();
                _this.sendChank(_this.sentChankIndex + 1);
            }
        })
            .on('DISCONNECT_PEER', function (event) {
            if (event.data.peerId !== _this.sendTo)
                return;
            console.warn('送信キャンセル（Peer切断）', _this, event.data.peerId);
            _this._cancel();
        })
            .on('CANCEL_TASK_' + this.identifier, function (event) {
            console.warn('送信キャンセル', _this, event.sendFrom);
            _this._cancel();
        });
        this.sentChankIndex = this.completedChankIndex = 0;
        Object(_system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_4__["setZeroTimeout"])(function () { return _this.sendChank(0); });
    };
    BufferSharingTask.prototype.sendChank = function (index) {
        var _this = this;
        var chank = this.uint8Array.slice(index * this.chankSize, (index + 1) * this.chankSize);
        var data = { index: index, length: this.chanks.length, chank: chank };
        _system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].call('FILE_SEND_CHANK_' + this.identifier, data, this.sendTo);
        this.sentChankIndex = index;
        this.sendChankTimer = null;
        if (this.chanks.length <= index + 1) {
            console.log('バッファ送信完了', this.identifier);
            Object(_system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_4__["setZeroTimeout"])(function () { return _this.finish(); });
        }
        else if (this.completedChankIndex + 4 <= index) {
            this.resetTimeout();
        }
        else {
            this.sendChankTimer = Object(_system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_4__["setZeroTimeout"])(function () { _this.sendChank(_this.sentChankIndex + 1); });
        }
    };
    BufferSharingTask.prototype.initializeReceive = function () {
        var _this = this;
        this.resetTimeout();
        this.startTime = performance.now();
        this.chankReceiveCount = 0;
        _system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].register(this)
            .on('FILE_SEND_CHANK_' + this.identifier, function (event) {
            if (_this.chanks.length < 1)
                _this.chanks = new Array(event.data.length);
            if (_this.chanks[event.data.index] != null) {
                console.log("already received. [" + event.data.index + "] <" + _this.identifier + ">");
                return;
            }
            _this.chankReceiveCount++;
            _this.chanks[event.data.index] = event.data.chank;
            _this.progress(event.data.index, event.data.length);
            if (_this.chanks.length <= _this.chankReceiveCount) {
                _this.finishReceive();
            }
            else {
                _this.resetTimeout();
                _system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].call('FILE_MORE_CHANK_' + _this.identifier, event.data.index, event.sendFrom);
            }
        })
            .on('DISCONNECT_PEER', function (event) {
            if (event.data.peerId !== _this.sendTo)
                return;
            console.warn('受信キャンセル（Peer切断）', _this, event.data.peerId);
            _this._cancel();
        })
            .on('CANCEL_TASK_' + this.identifier, function (event) {
            console.warn('受信キャンセル', _this, event.sendFrom);
            _this._cancel();
        });
    };
    BufferSharingTask.prototype.finishReceive = function () {
        var e_1, _a, e_2, _b;
        console.log('バッファ受信完了', this.identifier);
        var sumLength = 0;
        try {
            for (var _c = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.chanks), _d = _c.next(); !_d.done; _d = _c.next()) {
                var chank = _d.value;
                sumLength += chank.byteLength;
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            }
            finally { if (e_1) throw e_1.error; }
        }
        var time = performance.now() - this.startTime;
        var rate = (sumLength / 1024 / 1024) / (time / 1000);
        console.log((sumLength / 1024).toFixed(2) + "KB " + (time / 1000).toFixed(2) + "\u79D2 \u8EE2\u9001\u901F\u5EA6: " + rate.toFixed(2) + "MB/s");
        var uint8Array = new Uint8Array(sumLength);
        var pos = 0;
        try {
            for (var _e = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.chanks), _f = _e.next(); !_f.done; _f = _e.next()) {
                var chank = _f.value;
                uint8Array.set(chank, pos);
                pos += chank.byteLength;
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
            }
            finally { if (e_2) throw e_2.error; }
        }
        this.data = msgpack_lite__WEBPACK_IMPORTED_MODULE_1__["decode"](uint8Array);
        this.finish();
    };
    BufferSharingTask.prototype.resetTimeout = function () {
        var _this = this;
        if (this.timeoutTimer == null)
            this.timeoutTimer = new _system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_3__["ResettableTimeout"](function () { return _this.timeout(); }, 30 * 1000);
        this.timeoutTimer.reset();
    };
    return BufferSharingTask;
}());



/***/ }),

/***/ "Prh6":
/*!**********************************************************!*\
  !*** ./src/app/class/core/file-storage/audio-storage.ts ***!
  \**********************************************************/
/*! exports provided: AudioStorage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioStorage", function() { return AudioStorage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../system */ "yNnI");
/* harmony import */ var _system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../system/util/resettable-timeout */ "9ht1");
/* harmony import */ var _audio_file__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./audio-file */ "eRQf");




var AudioStorage = /** @class */ (function () {
    function AudioStorage() {
        this.hash = {};
        console.log('AudioStorage ready...');
    }
    Object.defineProperty(AudioStorage, "instance", {
        get: function () {
            if (!AudioStorage._instance)
                AudioStorage._instance = new AudioStorage();
            return AudioStorage._instance;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioStorage.prototype, "audios", {
        get: function () {
            var audios = [];
            for (var identifier in this.hash) {
                audios.push(this.hash[identifier]);
            }
            return audios;
        },
        enumerable: false,
        configurable: true
    });
    AudioStorage.prototype.destroy = function () {
        for (var identifier in this.hash) {
            this.delete(identifier);
        }
    };
    AudioStorage.prototype.addAsync = function (arg) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var audio;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _audio_file__WEBPACK_IMPORTED_MODULE_3__["AudioFile"].createAsync(arg)];
                    case 1:
                        audio = _a.sent();
                        return [2 /*return*/, this._add(audio)];
                }
            });
        });
    };
    AudioStorage.prototype.add = function (arg) {
        var audio;
        if (typeof arg === 'string') {
            audio = _audio_file__WEBPACK_IMPORTED_MODULE_3__["AudioFile"].create(arg);
        }
        else if (arg instanceof _audio_file__WEBPACK_IMPORTED_MODULE_3__["AudioFile"]) {
            audio = arg;
        }
        else {
            if (this.update(arg))
                return this.hash[arg.identifier];
            audio = _audio_file__WEBPACK_IMPORTED_MODULE_3__["AudioFile"].create(arg);
        }
        return this._add(audio);
    };
    AudioStorage.prototype._add = function (audio) {
        if (_audio_file__WEBPACK_IMPORTED_MODULE_3__["AudioState"].COMPLETE <= audio.state)
            this.lazySynchronize(100);
        if (this.update(audio))
            return this.hash[audio.identifier];
        this.hash[audio.identifier] = audio;
        console.log('add Audio: ' + audio.identifier);
        return audio;
    };
    AudioStorage.prototype.update = function (audio) {
        var context;
        if (audio instanceof _audio_file__WEBPACK_IMPORTED_MODULE_3__["AudioFile"]) {
            context = audio.toContext();
        }
        else {
            context = audio;
        }
        var updateAudio = this.hash[audio.identifier];
        if (updateAudio) {
            updateAudio.apply(audio);
            return true;
        }
        return false;
    };
    AudioStorage.prototype.delete = function (identifier) {
        var audio = this.hash[identifier];
        if (audio) {
            audio.destroy();
            delete this.hash[identifier];
            return true;
        }
        return false;
    };
    AudioStorage.prototype.get = function (identifier) {
        var audio = this.hash[identifier];
        if (audio)
            return audio;
        return null;
    };
    AudioStorage.prototype.synchronize = function (peer) {
        if (this.lazyTimer)
            this.lazyTimer.stop();
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('SYNCHRONIZE_AUDIO_LIST', this.getCatalog(), peer);
    };
    AudioStorage.prototype.lazySynchronize = function (ms, peer) {
        var _this = this;
        if (this.lazyTimer == null)
            this.lazyTimer = new _system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_2__["ResettableTimeout"](function () { return _this.synchronize(peer); }, ms);
        this.lazyTimer.reset(ms);
    };
    AudioStorage.prototype.getCatalog = function () {
        var e_1, _a;
        var catalog = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(AudioStorage.instance.audios), _c = _b.next(); !_c.done; _c = _b.next()) {
                var audio = _c.value;
                if (_audio_file__WEBPACK_IMPORTED_MODULE_3__["AudioState"].COMPLETE <= audio.state) {
                    catalog.push({ identifier: audio.identifier, state: audio.state });
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return catalog;
    };
    return AudioStorage;
}());



/***/ }),

/***/ "R1wr":
/*!************************************************************************************!*\
  !*** ./src/app/component/game-object-inventory/game-object-inventory.component.ts ***!
  \************************************************************************************/
/*! exports provided: GameObjectInventoryComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameObjectInventoryComponent", function() { return GameObjectInventoryComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/data-summary-setting */ "zP96");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var _udonarium_tabletop_object__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/tabletop-object */ "e8gA");
/* harmony import */ var component_chat_palette_chat_palette_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! component/chat-palette/chat-palette.component */ "jC/+");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_game_object_inventory_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! service/game-object-inventory.service */ "LjVp");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");

















function GameObjectInventoryComponent_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainer"](0);
} }
function GameObjectInventoryComponent_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainer"](0);
} }
function GameObjectInventoryComponent_div_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"]("", ctx_r2.getTabTitle(ctx_r2.selectTab), "\u30A4\u30F3\u30D9\u30F3\u30C8\u30EA\u306F\u7A7A\u3067\u3059");
} }
function GameObjectInventoryComponent_div_4_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainer"](0);
} }
var _c0 = function (a1) { return { "box": true, "selected": a1 }; };
var _c1 = function (a0) { return { gameObject: a0 }; };
function GameObjectInventoryComponent_div_4_Template(rf, ctx) { if (rf & 1) {
    var _r16 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵlistener"]("contextmenu", function GameObjectInventoryComponent_div_4_Template_div_contextmenu_0_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵrestoreView"](_r16); var gameObject_r13 = ctx.$implicit; var ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](); return ctx_r15.onContextMenu($event, gameObject_r13); })("click", function GameObjectInventoryComponent_div_4_Template_div_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵrestoreView"](_r16); var gameObject_r13 = ctx.$implicit; var ctx_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](); return ctx_r17.selectGameObject(gameObject_r13); });
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](1, GameObjectInventoryComponent_div_4_ng_container_1_Template, 1, 0, "ng-container", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
} if (rf & 2) {
    var gameObject_r13 = ctx.$implicit;
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]();
    var _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵreference"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpureFunction1"](3, _c0, ctx_r3.selectedIdentifier === gameObject_r13.identifier));
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngTemplateOutlet", _r9)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpureFunction1"](5, _c1, gameObject_r13));
} }
function GameObjectInventoryComponent_div_5_Template(rf, ctx) { if (rf & 1) {
    var _r19 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](1, "button", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵlistener"]("click", function GameObjectInventoryComponent_div_5_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵrestoreView"](_r19); var ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](); return ctx_r18.cleanInventory(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](2, "\u5893\u5834\u3092\u7A7A\u306B\u3059\u308B");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵattribute"]("disabled", ctx_r4.getGameObjects(ctx_r4.selectTab).length < 1 ? "" : null);
} }
function GameObjectInventoryComponent_ng_template_6_label_2_Template(rf, ctx) { if (rf & 1) {
    var _r23 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](1, "input", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵlistener"]("ngModelChange", function GameObjectInventoryComponent_ng_template_6_label_2_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵrestoreView"](_r23); var ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2); return ctx_r22.selectTab = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
} if (rf & 2) {
    var inventoryType_r21 = ctx.$implicit;
    var ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpropertyInterpolate"]("value", inventoryType_r21);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngModel", ctx_r20.selectTab);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate2"]("", ctx_r20.getTabTitle(inventoryType_r21), " (", ctx_r20.getInventory(inventoryType_r21).length, ")");
} }
function GameObjectInventoryComponent_ng_template_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "form", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](1, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](2, GameObjectInventoryComponent_ng_template_6_label_2_Template, 4, 4, "label", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngForOf", ctx_r6.inventoryTypes);
} }
function GameObjectInventoryComponent_ng_template_8_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    var _r27 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](1, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](2, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](3, "\u4E26\u3073\u9806");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](4, "input", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵlistener"]("ngModelChange", function GameObjectInventoryComponent_ng_template_8_ng_container_0_Template_input_ngModelChange_4_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵrestoreView"](_r27); var ctx_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2); return ctx_r26.sortTag = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](5, "select", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵlistener"]("ngModelChange", function GameObjectInventoryComponent_ng_template_8_ng_container_0_Template_select_ngModelChange_5_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵrestoreView"](_r27); var ctx_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2); return ctx_r28.sortOrder = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](6, "option", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](7, "\u6607\u9806");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](8, "option", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](9, "\u964D\u9806");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](10, "div", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](11, "\u8868\u793A\u9805\u76EE");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](12, "input", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵlistener"]("ngModelChange", function GameObjectInventoryComponent_ng_template_8_ng_container_0_Template_input_ngModelChange_12_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵrestoreView"](_r27); var ctx_r29 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2); return ctx_r29.dataTag = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](13, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](14, "button", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵlistener"]("click", function GameObjectInventoryComponent_ng_template_8_ng_container_0_Template_button_click_14_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵrestoreView"](_r27); var ctx_r30 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2); return ctx_r30.toggleEdit(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](15, "i", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](16, "settings");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](17, "\u5B8C\u4E86");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r24 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngModel", ctx_r24.sortTag);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngModel", ctx_r24.sortOrder);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngModel", ctx_r24.dataTag);
} }
function GameObjectInventoryComponent_ng_template_8_ng_container_1_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r31 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate2"]("", ctx_r31.sortTag, " (", ctx_r31.sortOrderName, ")");
} }
function GameObjectInventoryComponent_ng_template_8_ng_container_1_ng_container_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](1, "-");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerEnd"]();
} }
function GameObjectInventoryComponent_ng_template_8_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    var _r34 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](1, "table", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](2, "tr");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](3, "th", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](4, "\u4E26\u3073\u9806:");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](5, "td", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](6, GameObjectInventoryComponent_ng_template_8_ng_container_1_ng_container_6_Template, 2, 2, "ng-container", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](7, GameObjectInventoryComponent_ng_template_8_ng_container_1_ng_container_7_Template, 2, 0, "ng-container", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](8, "td");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](9, "button", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵlistener"]("click", function GameObjectInventoryComponent_ng_template_8_ng_container_1_Template_button_click_9_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵrestoreView"](_r34); var ctx_r33 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2); return ctx_r33.toggleEdit(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](10, "i", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](11, "settings");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](12, "\u8A2D\u5B9A");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", 0 < ctx_r25.sortTag.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", ctx_r25.sortTag.length < 1);
} }
function GameObjectInventoryComponent_ng_template_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](0, GameObjectInventoryComponent_ng_template_8_ng_container_0_Template, 18, 3, "ng-container", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](1, GameObjectInventoryComponent_ng_template_8_ng_container_1_Template, 13, 2, "ng-container", 2);
} if (rf & 2) {
    var ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", ctx_r8.isEdit);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", !ctx_r8.isEdit);
} }
function GameObjectInventoryComponent_ng_template_10_button_3_Template(rf, ctx) { if (rf & 1) {
    var _r41 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "button", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵlistener"]("click", function GameObjectInventoryComponent_ng_template_10_button_3_Template_button_click_0_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵrestoreView"](_r41); var gameObject_r35 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]().gameObject; var ctx_r39 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](); return ctx_r39.onContextMenu($event, gameObject_r35); });
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](1, "i", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](2, "settings");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
} }
function GameObjectInventoryComponent_ng_template_10_img_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelement"](0, "img", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](1, "safe");
} if (rf & 2) {
    var gameObject_r35 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]().gameObject;
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](1, 1, gameObject_r35.imageFile.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵsanitizeUrl"]);
} }
function GameObjectInventoryComponent_ng_template_10_div_8_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainer"](0);
} }
var _c2 = function (a0) { return { dataElm: a0 }; };
function GameObjectInventoryComponent_ng_template_10_div_8_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](1, GameObjectInventoryComponent_ng_template_10_div_8_ng_container_1_ng_container_1_Template, 1, 0, "ng-container", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r44 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](3);
    var _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵreference"](13);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngTemplateOutlet", _r11)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpureFunction1"](2, _c2, dataElm_r44));
} }
function GameObjectInventoryComponent_ng_template_10_div_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](1, GameObjectInventoryComponent_ng_template_10_div_8_ng_container_1_Template, 2, 4, "ng-container", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
} if (rf & 2) {
    var gameObject_r35 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]().gameObject;
    var ctx_r38 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngForOf", ctx_r38.getInventoryTags(gameObject_r35))("ngForTrackBy", ctx_r38.trackByGameObject);
} }
function GameObjectInventoryComponent_ng_template_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "div", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](1, "div", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](3, GameObjectInventoryComponent_ng_template_10_button_3_Template, 3, 0, "button", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](4, "div", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](5, "div", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](6, GameObjectInventoryComponent_ng_template_10_img_6_Template, 2, 4, "img", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](7, "div", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](8, GameObjectInventoryComponent_ng_template_10_div_8_Template, 2, 2, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
} if (rf & 2) {
    var gameObject_r35 = ctx.gameObject;
    var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"]("", gameObject_r35.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", ctx_r10.selectedIdentifier === gameObject_r35.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", gameObject_r35.imageFile.url);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", gameObject_r35.rootDataElement);
} }
function GameObjectInventoryComponent_ng_template_12_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelement"](1, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerEnd"]();
} }
function GameObjectInventoryComponent_ng_template_12_div_1_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    var _r54 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](1, "div", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](2, "div", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](4, "input", 46);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵlistener"]("ngModelChange", function GameObjectInventoryComponent_ng_template_12_div_1_ng_container_2_Template_input_ngModelChange_4_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵrestoreView"](_r54); var dataElm_r47 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2).dataElm; return dataElm_r47.currentValue = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](5, "div", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](6, "input", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵlistener"]("ngModelChange", function GameObjectInventoryComponent_ng_template_12_div_1_ng_container_2_Template_input_ngModelChange_6_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵrestoreView"](_r54); var dataElm_r47 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2).dataElm; return dataElm_r47.currentValue = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](7, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r47 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2).dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate"](dataElm_r47.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngModel", dataElm_r47.currentValue);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵstyleMap"](_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](7, 6, "font-size: 0.8em; min-width: 1em; width:" + (dataElm_r47.name.length + 4.5) + "em; --min: 0; --max: " + dataElm_r47.value + "; --val:" + dataElm_r47.currentValue + ";", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpropertyInterpolate"]("max", dataElm_r47.value);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngModel", dataElm_r47.currentValue);
} }
function GameObjectInventoryComponent_ng_template_12_div_1_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    var _r60 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](1, "div", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](3, "div", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](4, "div", 50);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](5, "div", 51);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](6, "div", 52);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](8, "input", 53);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵlistener"]("ngModelChange", function GameObjectInventoryComponent_ng_template_12_div_1_ng_container_3_Template_input_ngModelChange_8_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵrestoreView"](_r60); var dataElm_r47 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2).dataElm; return dataElm_r47.value = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r47 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2).dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate"](dataElm_r47.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate"](dataElm_r47.value);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngModel", dataElm_r47.value);
} }
function GameObjectInventoryComponent_ng_template_12_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "div", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerStart"](1, 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](2, GameObjectInventoryComponent_ng_template_12_div_1_ng_container_2_Template, 8, 9, "ng-container", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](3, GameObjectInventoryComponent_ng_template_12_div_1_ng_container_3_Template, 9, 3, "ng-container", 43);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
} if (rf & 2) {
    var dataElm_r47 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]().dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngSwitch", dataElm_r47.attributes["type"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngSwitchCase", "numberResource");
} }
function GameObjectInventoryComponent_ng_template_12_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](0, GameObjectInventoryComponent_ng_template_12_ng_container_0_Template, 2, 0, "ng-container", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](1, GameObjectInventoryComponent_ng_template_12_div_1_Template, 4, 2, "div", 39);
} if (rf & 2) {
    var dataElm_r47 = ctx.dataElm;
    var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", (dataElm_r47 == null ? null : dataElm_r47.name) === ctx_r12.newLineString);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", dataElm_r47 && dataElm_r47.name !== ctx_r12.newLineString);
} }
var GameObjectInventoryComponent = /** @class */ (function () {
    function GameObjectInventoryComponent(changeDetector, panelService, inventoryService, contextMenuService, pointerDeviceService) {
        this.changeDetector = changeDetector;
        this.panelService = panelService;
        this.inventoryService = inventoryService;
        this.contextMenuService = contextMenuService;
        this.pointerDeviceService = pointerDeviceService;
        this.inventoryTypes = ['table', 'common', 'graveyard'];
        this.selectTab = 'table';
        this.selectedIdentifier = '';
        this.isEdit = false;
    }
    Object.defineProperty(GameObjectInventoryComponent.prototype, "sortTag", {
        get: function () { return this.inventoryService.sortTag; },
        set: function (sortTag) { this.inventoryService.sortTag = sortTag; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObjectInventoryComponent.prototype, "sortOrder", {
        get: function () { return this.inventoryService.sortOrder; },
        set: function (sortOrder) { this.inventoryService.sortOrder = sortOrder; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObjectInventoryComponent.prototype, "dataTag", {
        get: function () { return this.inventoryService.dataTag; },
        set: function (dataTag) { this.inventoryService.dataTag = dataTag; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObjectInventoryComponent.prototype, "dataTags", {
        get: function () { return this.inventoryService.dataTags; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObjectInventoryComponent.prototype, "sortOrderName", {
        get: function () { return this.sortOrder === _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_3__["SortOrder"].ASC ? '昇順' : '降順'; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObjectInventoryComponent.prototype, "newLineString", {
        get: function () { return this.inventoryService.newLineString; },
        enumerable: false,
        configurable: true
    });
    GameObjectInventoryComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.panelService.title = 'インベントリ'; });
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].register(this)
            .on('SELECT_TABLETOP_OBJECT', -1000, function (event) {
            if (_udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.get(event.data.identifier) instanceof _udonarium_tabletop_object__WEBPACK_IMPORTED_MODULE_5__["TabletopObject"]) {
                _this.selectedIdentifier = event.data.identifier;
                _this.changeDetector.markForCheck();
            }
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            if (event.isSendFromSelf)
                _this.changeDetector.markForCheck();
        })
            .on('UPDATE_INVENTORY', function (event) {
            if (event.isSendFromSelf)
                _this.changeDetector.markForCheck();
        })
            .on('OPEN_NETWORK', function (event) {
            _this.inventoryTypes = ['table', 'common', _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerId, 'graveyard'];
            if (!_this.inventoryTypes.includes(_this.selectTab)) {
                _this.selectTab = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerId;
            }
        });
        this.inventoryTypes = ['table', 'common', _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerId, 'graveyard'];
    };
    GameObjectInventoryComponent.prototype.ngAfterViewInit = function () {
    };
    GameObjectInventoryComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].unregister(this);
    };
    GameObjectInventoryComponent.prototype.getTabTitle = function (inventoryType) {
        switch (inventoryType) {
            case 'table':
                return 'テーブル';
            case _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerId:
                return '個人';
            case 'graveyard':
                return '墓場';
            default:
                return '共有';
        }
    };
    GameObjectInventoryComponent.prototype.getInventory = function (inventoryType) {
        switch (inventoryType) {
            case 'table':
                return this.inventoryService.tableInventory;
            case _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerId:
                return this.inventoryService.privateInventory;
            case 'graveyard':
                return this.inventoryService.graveyardInventory;
            default:
                return this.inventoryService.commonInventory;
        }
    };
    GameObjectInventoryComponent.prototype.getGameObjects = function (inventoryType) {
        return this.getInventory(inventoryType).tabletopObjects;
    };
    GameObjectInventoryComponent.prototype.getInventoryTags = function (gameObject) {
        return this.getInventory(gameObject.location.name).dataElementMap.get(gameObject.identifier);
    };
    GameObjectInventoryComponent.prototype.onContextMenu = function (e, gameObject) {
        var e_1, _a;
        var _this = this;
        if (document.activeElement instanceof HTMLInputElement && document.activeElement.getAttribute('type') !== 'range')
            return;
        e.stopPropagation();
        e.preventDefault();
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu)
            return;
        this.selectGameObject(gameObject);
        var position = this.pointerDeviceService.pointers[0];
        var actions = [];
        actions.push({ name: '詳細を表示', action: function () { _this.showDetail(gameObject); } });
        if (gameObject.location.name !== 'graveyard') {
            actions.push({ name: 'チャットパレットを表示', action: function () { _this.showChatPalette(gameObject); } });
        }
        actions.push(service_context_menu_service__WEBPACK_IMPORTED_MODULE_8__["ContextMenuSeparator"]);
        var locations = [
            { name: 'table', alias: 'テーブルに移動' },
            { name: 'common', alias: '共有イベントリに移動' },
            { name: _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerId, alias: '個人イベントリに移動' },
            { name: 'graveyard', alias: '墓場に移動' }
        ];
        var _loop_1 = function (location_1) {
            if (gameObject.location.name === location_1.name)
                return "continue";
            actions.push({
                name: location_1.alias,
                action: function () {
                    gameObject.setLocation(location_1.name);
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].piecePut);
                }
            });
        };
        try {
            for (var locations_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(locations), locations_1_1 = locations_1.next(); !locations_1_1.done; locations_1_1 = locations_1.next()) {
                var location_1 = locations_1_1.value;
                _loop_1(location_1);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (locations_1_1 && !locations_1_1.done && (_a = locations_1.return)) _a.call(locations_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        if (gameObject.location.name === 'graveyard') {
            actions.push({
                name: '削除する',
                action: function () {
                    _this.deleteGameObject(gameObject);
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].sweep);
                }
            });
        }
        actions.push(service_context_menu_service__WEBPACK_IMPORTED_MODULE_8__["ContextMenuSeparator"]);
        actions.push({
            name: 'コピーを作る',
            action: function () {
                _this.cloneGameObject(gameObject);
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].piecePut);
            }
        });
        this.contextMenuService.open(position, actions, gameObject.name);
    };
    GameObjectInventoryComponent.prototype.toggleEdit = function () {
        this.isEdit = !this.isEdit;
    };
    GameObjectInventoryComponent.prototype.cleanInventory = function () {
        var e_2, _a;
        var tabTitle = this.getTabTitle(this.selectTab);
        var gameObjects = this.getGameObjects(this.selectTab);
        if (!confirm(tabTitle + "\u306B\u5B58\u5728\u3059\u308B" + gameObjects.length + "\u500B\u306E\u8981\u7D20\u3092\u5B8C\u5168\u306B\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F"))
            return;
        try {
            for (var gameObjects_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(gameObjects), gameObjects_1_1 = gameObjects_1.next(); !gameObjects_1_1.done; gameObjects_1_1 = gameObjects_1.next()) {
                var gameObject = gameObjects_1_1.value;
                this.deleteGameObject(gameObject);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (gameObjects_1_1 && !gameObjects_1_1.done && (_a = gameObjects_1.return)) _a.call(gameObjects_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].sweep);
    };
    GameObjectInventoryComponent.prototype.cloneGameObject = function (gameObject) {
        gameObject.clone();
    };
    GameObjectInventoryComponent.prototype.showDetail = function (gameObject) {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });
        var coordinate = this.pointerDeviceService.pointers[0];
        var title = 'キャラクターシート';
        if (gameObject.name.length)
            title += ' - ' + gameObject.name;
        var option = { title: title, left: coordinate.x - 800, top: coordinate.y - 300, width: 800, height: 600 };
        var component = this.panelService.open(component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_7__["GameCharacterSheetComponent"], option);
        component.tabletopObject = gameObject;
    };
    GameObjectInventoryComponent.prototype.showChatPalette = function (gameObject) {
        var coordinate = this.pointerDeviceService.pointers[0];
        var option = { left: coordinate.x - 250, top: coordinate.y - 175, width: 615, height: 350 };
        var component = this.panelService.open(component_chat_palette_chat_palette_component__WEBPACK_IMPORTED_MODULE_6__["ChatPaletteComponent"], option);
        component.character = gameObject;
    };
    GameObjectInventoryComponent.prototype.selectGameObject = function (gameObject) {
        var aliasName = gameObject.aliasName;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });
    };
    GameObjectInventoryComponent.prototype.deleteGameObject = function (gameObject) {
        gameObject.destroy();
        this.changeDetector.markForCheck();
    };
    GameObjectInventoryComponent.prototype.trackByGameObject = function (index, gameObject) {
        return gameObject ? gameObject.identifier : index;
    };
    GameObjectInventoryComponent.ɵfac = function GameObjectInventoryComponent_Factory(t) { return new (t || GameObjectInventoryComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_9__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_10__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](service_game_object_inventory_service__WEBPACK_IMPORTED_MODULE_11__["GameObjectInventoryService"]), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_8__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_12__["PointerDeviceService"])); };
    GameObjectInventoryComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdefineComponent"]({ type: GameObjectInventoryComponent, selectors: [["game-object-inventory"]], decls: 14, vars: 6, consts: [[1, "component"], [4, "ngTemplateOutlet"], [4, "ngIf"], [3, "ngClass", "contextmenu", "click", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["style", "padding-top: 6px;", 4, "ngIf"], ["inventoryTab", ""], ["inventoryViewSetting", ""], ["gameObjectTags", ""], ["dataElmTag", ""], [3, "ngClass", "contextmenu", "click"], [4, "ngTemplateOutlet", "ngTemplateOutletContext"], [2, "padding-top", "6px"], [1, "danger", 3, "click"], [1, "is-sticky-top"], [1, "tab"], [4, "ngFor", "ngForOf"], ["name", "tab", "type", "radio", "ng-control", "options", 3, "value", "ngModel", "ngModelChange"], [2, "font-size", "12px"], ["placeholder", "\u30BF\u30B0\u540D", 3, "ngModel", "ngModelChange"], [3, "ngModel", "ngModelChange"], ["value", "ASC"], ["value", "DESC"], [2, "font-size", "12px", "padding-top", "6px"], ["placeholder", "\u30B9\u30DA\u30FC\u30B9\u533A\u5207\u308A\u3067\u30BF\u30B0\u540D \u30B9\u30E9\u30C3\u30B7\u30E5\u3067\u6539\u884C ex.\u300CHP MP / \u30E1\u30E2\u300D", 2, "width", "100%", "box-sizing", "border-box", 3, "ngModel", "ngModelChange"], [1, "tab-setting", "small-font", 3, "click"], [1, "material-icons", "small-font"], [2, "font-size", "0.8em"], [2, "vertical-align", "middle"], [1, "inventory-object"], [1, "object-name"], ["style", "font-size: 0.8em; padding: 2px 5px;", 3, "click", 4, "ngIf"], [1, "object-tags-box"], [1, "table-cell", "image-box"], [3, "src", 4, "ngIf"], [1, "table-cell"], [2, "font-size", "0.8em", "padding", "2px 5px", 3, "click"], [1, "material-icons", 2, "font-size", "1em"], [3, "src"], [4, "ngFor", "ngForOf", "ngForTrackBy"], ["class", "object-tag", 4, "ngIf"], [1, "object-tag"], [3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngSwitchDefault"], [1, "resource-tag"], [2, "font-size", "0.8em", "display", "inline-block", "margin-right", "0.5em"], ["type", "number", "size", "1", "placeholder", "Value", 1, "input", "resource-value", 3, "ngModel", "ngModelChange"], ["type", "range", "min", "0", 3, "max", "ngModel", "ngModelChange"], [1, "tag-name"], [2, "text-align", "center"], [2, "display", "inline-block"], [1, "tag-value-box"], [1, "hidden-spacer", 2, "font-weight", "bold"], ["size", "1", "placeholder", "", 1, "input", "tag-value", 3, "ngModel", "ngModelChange"]], template: function GameObjectInventoryComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](1, GameObjectInventoryComponent_ng_container_1_Template, 1, 0, "ng-container", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](2, GameObjectInventoryComponent_ng_container_2_Template, 1, 0, "ng-container", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](3, GameObjectInventoryComponent_div_3_Template, 2, 1, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](4, GameObjectInventoryComponent_div_4_Template, 2, 7, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](5, GameObjectInventoryComponent_div_5_Template, 3, 1, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](6, GameObjectInventoryComponent_ng_template_6_Template, 3, 1, "ng-template", null, 5, _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](8, GameObjectInventoryComponent_ng_template_8_Template, 2, 2, "ng-template", null, 6, _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](10, GameObjectInventoryComponent_ng_template_10_Template, 9, 4, "ng-template", null, 7, _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](12, GameObjectInventoryComponent_ng_template_12_Template, 2, 2, "ng-template", null, 8, _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplateRefExtractor"]);
        } if (rf & 2) {
            var _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵreference"](7);
            var _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵreference"](9);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngTemplateOutlet", _r5);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngTemplateOutlet", _r7);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", ctx.getGameObjects(ctx.selectTab).length < 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngForOf", ctx.getGameObjects(ctx.selectTab))("ngForTrackBy", ctx.trackByGameObject);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", ctx.selectTab === "graveyard");
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_13__["NgTemplateOutlet"], _angular_common__WEBPACK_IMPORTED_MODULE_13__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_13__["NgForOf"], _angular_common__WEBPACK_IMPORTED_MODULE_13__["NgClass"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["NgForm"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["RadioControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["NgModel"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["SelectControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["NgSelectOption"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["ɵangular_packages_forms_forms_x"], _angular_common__WEBPACK_IMPORTED_MODULE_13__["NgSwitch"], _angular_common__WEBPACK_IMPORTED_MODULE_13__["NgSwitchCase"], _angular_common__WEBPACK_IMPORTED_MODULE_13__["NgSwitchDefault"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["NumberValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["RangeValueAccessor"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_15__["SafePipe"]], styles: [".component[_ngcontent-%COMP%] {\n  width: 100%;\n}\n\n.box[_ngcontent-%COMP%] {\n  border: transparent 2px solid;\n  border-left: transparent 6px solid;\n  margin-top: 2px;\n  padding: 2px;\n  padding-bottom: 3px;\n  box-sizing: border-box;\n\n  border-bottom: 1px dotted #666;\n}\n\n.selected[_ngcontent-%COMP%] {\n  padding: 2px;\n  border: 2px dotted #666;\n  border-left: 6px solid #444;\n}\n\n.hidden-spacer[_ngcontent-%COMP%] {\n  visibility: hidden;\n  height: 0;\n  font-size: 1.0em;\n  min-width:1em; \n  max-width : 12em;\n  overflow: hidden;\n  padding: 0 2px;\n  box-sizing: border-box;\n  white-space: nowrap;\n}\n\n.input[_ngcontent-%COMP%] {\n  background: none;\n  border: none;\n  border-radius: 2px;\n  outline: none;\n  color: #444;\n  padding: 2px;\n  box-sizing: border-box;\n}\n\n.input[_ngcontent-%COMP%]:hover {\n  background: #EEE;\n}\n\n.input[_ngcontent-%COMP%]:focus {\n  background: #FFF;\n}\n\ninput[type=number][_ngcontent-%COMP%] {\n  -moz-appearance: textfield;\n}\n\ninput[type=number][_ngcontent-%COMP%]:hover, input[type=number][_ngcontent-%COMP%]:focus {\n  -moz-appearance: number-input;\n}\n\ninput[type='range'][_ngcontent-%COMP%] {\n  --slider-track-color: transparent; \n  --slider-fill-color: #555; \n  --slider-border-color: #777;\n  --slider-height: 0.8em;\n  --slider-thumb-size: 1.0em;\n  --range: calc(var(--max) - var(--min));\n  --ratio: calc((var(--val) - var(--min))/var(--range));\n  --sx: calc(.5*var(--slider-thumb-size) + var(--ratio)*(100% - var(--slider-thumb-size)));\n  margin: 0;\n  padding: 0;\n  background: transparent;\n  font: 1em/1 arial, sans-serif;\n  outline: 0;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n}\n\ninput[type='range'][_ngcontent-%COMP%], input[type='range'][_ngcontent-%COMP%]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-runnable-track {\n  box-sizing: border-box;\n  border-top: solid 1px var(--slider-border-color);\n  border-bottom: solid 1px var(--slider-border-color);\n  border-radius: var(--slider-height);\n  height: var(--slider-height);\n  background: var(--slider-track-color);\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-runnable-track {\n  background: linear-gradient(var(--slider-fill-color), var(--slider-fill-color)) 0/var(--sx) 100% no-repeat var(--slider-track-color);\n  cursor: pointer;\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-track {\n  box-sizing: border-box;\n  border: solid 1px var(--slider-border-color);\n  border-radius: var(--slider-height);\n  height: var(--slider-height);\n  background: var(--slider-track-color);\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-ms-track {\n  box-sizing: border-box;\n  border: solid 1px var(--slider-border-color);\n  border-radius: var(--slider-height);\n  height: var(--slider-height);\n  background: var(--slider-track-color);\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-progress {\n  height: var(--slider-height);\n  background: var(--slider-fill-color);\n  border-radius: var(--slider-height);\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-ms-fill-lower {\n  height: var(--slider-height);\n  background: var(--slider-fill-color);\n  border-radius: var(--slider-height);\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-thumb {\n  margin-top: calc((var(--slider-height) - var(--slider-thumb-size)) / 2 - 1px);\n  width: var(--slider-thumb-size);\n  height: var(--slider-thumb-size);\n  box-sizing: border-box;\n  border: solid 1px var(--slider-border-color);\n  border-radius: 2em;\n  background: #ddd;\n  cursor: pointer;\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-thumb {\n  width: var(--slider-thumb-size);\n  height: var(--slider-thumb-size);\n  box-sizing: border-box;\n  border: solid 1px var(--slider-border-color);\n  border-radius: 2em;\n  background: #ddd;\n  cursor: pointer;\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-ms-thumb {\n  margin-top: 0;\n  width: var(--slider-thumb-size);\n  height: var(--slider-thumb-size);\n  box-sizing: border-box;\n  border: solid 1px  var(--slider-border-color);\n  border-radius: 2em;\n  background: #ddd;\n  cursor: pointer;\n}\n\ninput[type='range'][_ngcontent-%COMP%]::-ms-tooltip {\n  display: none;\n}\n\n.tab[_ngcontent-%COMP%] {\n  padding : 5px;\n  -webkit-user-select: none;\n          user-select: none;\n}\n\n.tab[_ngcontent-%COMP%] {\n  padding : 0px;\n  border: solid 1px #555;\n  border-radius: 0.3em;\n  overflow: hidden;\n\n  display: flex;\n  flex-flow:  row nowrap;\n  justify-content: space-around;\n  align-items: stretch;\n\n  text-align: center;\n\n  margin: 0px; \n  max-width: 500px;\n\n  background-color: rgba(240,218,189, 0.9);\n}\n\n.tab[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n  display: inline-block;\n  flex: 1 0 auto;\n  flex-grow: 1;\n}\n\n.tab[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover {\n  background-color: #888;\n  color: #eee;\n  border-color: #555;\n}\n\n.tab[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:checked {\n  background: #555;\n  color: #CCC;\n}\n\n.tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%] {\n  display: none;\n}\n\n.tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%] {\n  vertical-align: middle;\n  outline: 0;\n  font-size: 0.6em;\n  background-color: transparent;\n  color: #444; \n  \n  box-sizing: border-box;\n\n  margin: 0px; \n  padding: 2px 8px;\n\n  cursor: pointer;\n}\n\n.tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%]:hover {\n  background-color: #888;\n  color: #eee;\n  border-color: #555;\n}\n\n.tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]:checked    + div[_ngcontent-%COMP%] {\n  background: #555;\n  color: #CCC;\n}\n\n.is-sticky-top[_ngcontent-%COMP%] {\n  position: sticky;\n  top : 0;\n}\n\n.tab-setting[_ngcontent-%COMP%] {\n  background-color: transparent;\n  color: #444; \n  border: solid 1px #555;\n  padding: 2px 8px;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\n.tab-setting[_ngcontent-%COMP%]:hover {\n  background-color: #888;\n  color: #eee;\n  border: solid 1px #555;\n}\n\n.small-font[_ngcontent-%COMP%] {\n  font-size: 12px;\n  vertical-align: middle;\n}\n\n.material-icons[_ngcontent-%COMP%] {\n  vertical-align: middle;\n  font-size: 1.0rem;\n}\n\n.table-cell[_ngcontent-%COMP%] {\n  display: table-cell;\n}\n\n.image-box[_ngcontent-%COMP%] {\n  padding: 0px;\n  width: 32px;\n  height: 32px;\n  display: table-cell;\n  vertical-align: top;\n}\n\n.image-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{\n  width: 100%;\n  height: 100%;\n  vertical-align: bottom;\n  object-fit: cover;\n  object-position: 50% 0%;\n}\n\n.inventory-object[_ngcontent-%COMP%] {\n  font-size: 14px;\n  display: inline-block;\n  vertical-align: text-top;\n}\n\n.object-name[_ngcontent-%COMP%] {\n  font-size: 0.8em;\n  font-weight: bold;\n  padding: 0 0.25em;\n}\n\n.object-tags-box[_ngcontent-%COMP%] {\n  display: table;\n  table-layout: fixed;\n}\n\n.object-tag[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding: 0 0.25em;\n  vertical-align: middle;\n}\n\n.resource-tag[_ngcontent-%COMP%] {\n  text-align: center;\n  vertical-align: bottom;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.resource-value[_ngcontent-%COMP%] {\n  font-weight: bold;\n  width: 4em;\n  text-align: right;\n  font-family: inherit;\n}\n\n.tag-name[_ngcontent-%COMP%] {\n  font-size: 0.8em;\n  text-align: left;\n  vertical-align: bottom;\n  min-width:1em;\n  max-width: 12em;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.tag-value-box[_ngcontent-%COMP%]{\n  display: table-cell;\n  width: 10px;\n}\n\n.tag-value[_ngcontent-%COMP%] {\n  font-size: 1.0em;\n  font-weight: bold;\n  width: 100%;\n  min-width: 1em;\n  max-width: 12em;\n  text-align: center;\n  font-family: inherit;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUtb2JqZWN0LWludmVudG9yeS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsV0FBVztBQUNiOztBQUVBO0VBQ0UsNkJBQTZCO0VBQzdCLGtDQUFrQztFQUNsQyxlQUFlO0VBQ2YsWUFBWTtFQUNaLG1CQUFtQjtFQUNuQixzQkFBc0I7O0VBRXRCLDhCQUE4QjtBQUNoQzs7QUFDQTtFQUNFLFlBQVk7RUFDWix1QkFBdUI7RUFDdkIsMkJBQTJCO0FBQzdCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFNBQVM7RUFDVCxnQkFBZ0I7RUFDaEIsYUFBYTtFQUNiLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsY0FBYztFQUNkLHNCQUFzQjtFQUN0QixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixhQUFhO0VBQ2IsV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSwwQkFBMEI7QUFDNUI7O0FBRUE7RUFDRSw2QkFBNkI7QUFDL0I7O0FBRUE7RUFDRSxpQ0FBaUMsRUFBRSxTQUFTO0VBQzVDLHlCQUF5QixFQUFFLFFBQVE7RUFDbkMsMkJBQTJCO0VBQzNCLHNCQUFzQjtFQUN0QiwwQkFBMEI7RUFDMUIsc0NBQXNDO0VBQ3RDLHFEQUFxRDtFQUNyRCx3RkFBd0Y7RUFDeEYsU0FBUztFQUNULFVBQVU7RUFDVix1QkFBdUI7RUFDdkIsNkJBQTZCO0VBQzdCLFVBQVU7RUFDVix3QkFBZ0I7S0FBaEIscUJBQWdCO1VBQWhCLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLHdCQUF3QjtBQUMxQjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixnREFBZ0Q7RUFDaEQsbURBQW1EO0VBQ25ELG1DQUFtQztFQUNuQyw0QkFBNEI7RUFDNUIscUNBQXFDO0FBQ3ZDOztBQUVBO0VBQ0Usb0lBQW9JO0VBQ3BJLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsNENBQTRDO0VBQzVDLG1DQUFtQztFQUNuQyw0QkFBNEI7RUFDNUIscUNBQXFDO0FBQ3ZDOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLDRDQUE0QztFQUM1QyxtQ0FBbUM7RUFDbkMsNEJBQTRCO0VBQzVCLHFDQUFxQztBQUN2Qzs7QUFFQTtFQUNFLDRCQUE0QjtFQUM1QixvQ0FBb0M7RUFDcEMsbUNBQW1DO0FBQ3JDOztBQUVBO0VBQ0UsNEJBQTRCO0VBQzVCLG9DQUFvQztFQUNwQyxtQ0FBbUM7QUFDckM7O0FBRUE7RUFDRSw2RUFBNkU7RUFDN0UsK0JBQStCO0VBQy9CLGdDQUFnQztFQUNoQyxzQkFBc0I7RUFDdEIsNENBQTRDO0VBQzVDLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLCtCQUErQjtFQUMvQixnQ0FBZ0M7RUFDaEMsc0JBQXNCO0VBQ3RCLDRDQUE0QztFQUM1QyxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsK0JBQStCO0VBQy9CLGdDQUFnQztFQUNoQyxzQkFBc0I7RUFDdEIsNkNBQTZDO0VBQzdDLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGFBQWE7RUFDYix5QkFBaUI7VUFBakIsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixvQkFBb0I7RUFDcEIsZ0JBQWdCOztFQUVoQixhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLDZCQUE2QjtFQUM3QixvQkFBb0I7O0VBRXBCLGtCQUFrQjs7RUFFbEIsV0FBVztFQUNYLGdCQUFnQjs7RUFFaEIsd0NBQXdDO0FBQzFDOztBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLGNBQWM7RUFDZCxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsV0FBVztFQUNYLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsVUFBVTtFQUNWLGdCQUFnQjtFQUNoQiw2QkFBNkI7RUFDN0IsV0FBVzs7RUFFWCxzQkFBc0I7O0VBRXRCLFdBQVc7RUFDWCxnQkFBZ0I7O0VBRWhCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsV0FBVztFQUNYLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsT0FBTztBQUNUOztBQUVBO0VBQ0UsNkJBQTZCO0VBQzdCLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFdBQVc7RUFDWCxzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxlQUFlO0VBQ2Ysc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsWUFBWTtFQUNaLG1CQUFtQjtFQUNuQixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLHNCQUFzQjtFQUN0QixpQkFBaUI7RUFDakIsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLHFCQUFxQjtFQUNyQix3QkFBd0I7QUFDMUI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsaUJBQWlCO0VBQ2pCLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsaUJBQWlCO0VBQ2pCLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixVQUFVO0VBQ1YsaUJBQWlCO0VBQ2pCLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsc0JBQXNCO0VBQ3RCLGFBQWE7RUFDYixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLG1CQUFtQjtFQUNuQixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsaUJBQWlCO0VBQ2pCLFdBQVc7RUFDWCxjQUFjO0VBQ2QsZUFBZTtFQUNmLGtCQUFrQjtFQUNsQixvQkFBb0I7QUFDdEIiLCJmaWxlIjoiZ2FtZS1vYmplY3QtaW52ZW50b3J5LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29tcG9uZW50IHtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5ib3gge1xuICBib3JkZXI6IHRyYW5zcGFyZW50IDJweCBzb2xpZDtcbiAgYm9yZGVyLWxlZnQ6IHRyYW5zcGFyZW50IDZweCBzb2xpZDtcbiAgbWFyZ2luLXRvcDogMnB4O1xuICBwYWRkaW5nOiAycHg7XG4gIHBhZGRpbmctYm90dG9tOiAzcHg7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG5cbiAgYm9yZGVyLWJvdHRvbTogMXB4IGRvdHRlZCAjNjY2O1xufVxuLnNlbGVjdGVkIHtcbiAgcGFkZGluZzogMnB4O1xuICBib3JkZXI6IDJweCBkb3R0ZWQgIzY2NjtcbiAgYm9yZGVyLWxlZnQ6IDZweCBzb2xpZCAjNDQ0O1xufVxuXG4uaGlkZGVuLXNwYWNlciB7XG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgaGVpZ2h0OiAwO1xuICBmb250LXNpemU6IDEuMGVtO1xuICBtaW4td2lkdGg6MWVtOyBcbiAgbWF4LXdpZHRoIDogMTJlbTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgcGFkZGluZzogMCAycHg7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG59XG5cbi5pbnB1dCB7XG4gIGJhY2tncm91bmQ6IG5vbmU7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xuICBvdXRsaW5lOiBub25lO1xuICBjb2xvcjogIzQ0NDtcbiAgcGFkZGluZzogMnB4O1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xufVxuXG4uaW5wdXQ6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiAjRUVFO1xufVxuXG4uaW5wdXQ6Zm9jdXMge1xuICBiYWNrZ3JvdW5kOiAjRkZGO1xufVxuXG5pbnB1dFt0eXBlPW51bWJlcl0ge1xuICAtbW96LWFwcGVhcmFuY2U6IHRleHRmaWVsZDtcbn1cblxuaW5wdXRbdHlwZT1udW1iZXJdOmhvdmVyLCBpbnB1dFt0eXBlPW51bWJlcl06Zm9jdXMge1xuICAtbW96LWFwcGVhcmFuY2U6IG51bWJlci1pbnB1dDtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXSB7XG4gIC0tc2xpZGVyLXRyYWNrLWNvbG9yOiB0cmFuc3BhcmVudDsgLyogI2NjYyAqL1xuICAtLXNsaWRlci1maWxsLWNvbG9yOiAjNTU1OyAvKiM3NzcgKi9cbiAgLS1zbGlkZXItYm9yZGVyLWNvbG9yOiAjNzc3O1xuICAtLXNsaWRlci1oZWlnaHQ6IDAuOGVtO1xuICAtLXNsaWRlci10aHVtYi1zaXplOiAxLjBlbTtcbiAgLS1yYW5nZTogY2FsYyh2YXIoLS1tYXgpIC0gdmFyKC0tbWluKSk7XG4gIC0tcmF0aW86IGNhbGMoKHZhcigtLXZhbCkgLSB2YXIoLS1taW4pKS92YXIoLS1yYW5nZSkpO1xuICAtLXN4OiBjYWxjKC41KnZhcigtLXNsaWRlci10aHVtYi1zaXplKSArIHZhcigtLXJhdGlvKSooMTAwJSAtIHZhcigtLXNsaWRlci10aHVtYi1zaXplKSkpO1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDA7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICBmb250OiAxZW0vMSBhcmlhbCwgc2Fucy1zZXJpZjtcbiAgb3V0bGluZTogMDtcbiAgYXBwZWFyYW5jZTogbm9uZTtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXSwgaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LXdlYmtpdC1zbGlkZXItdGh1bWIge1xuICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ106Oi13ZWJraXQtc2xpZGVyLXJ1bm5hYmxlLXRyYWNrIHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyLXRvcDogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xuICBib3JkZXItYm90dG9tOiBzb2xpZCAxcHggdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xuICBoZWlnaHQ6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1zbGlkZXItdHJhY2stY29sb3IpO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotd2Via2l0LXNsaWRlci1ydW5uYWJsZS10cmFjayB7XG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh2YXIoLS1zbGlkZXItZmlsbC1jb2xvciksIHZhcigtLXNsaWRlci1maWxsLWNvbG9yKSkgMC92YXIoLS1zeCkgMTAwJSBuby1yZXBlYXQgdmFyKC0tc2xpZGVyLXRyYWNrLWNvbG9yKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbW96LXJhbmdlLXRyYWNrIHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiBzb2xpZCAxcHggdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xuICBoZWlnaHQ6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1zbGlkZXItdHJhY2stY29sb3IpO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbXMtdHJhY2sge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXI6IHNvbGlkIDFweCB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tc2xpZGVyLWhlaWdodCk7XG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLWhlaWdodCk7XG4gIGJhY2tncm91bmQ6IHZhcigtLXNsaWRlci10cmFjay1jb2xvcik7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tb3otcmFuZ2UtcHJvZ3Jlc3Mge1xuICBoZWlnaHQ6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1zbGlkZXItZmlsbC1jb2xvcik7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbXMtZmlsbC1sb3dlciB7XG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLWhlaWdodCk7XG4gIGJhY2tncm91bmQ6IHZhcigtLXNsaWRlci1maWxsLWNvbG9yKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tc2xpZGVyLWhlaWdodCk7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ106Oi13ZWJraXQtc2xpZGVyLXRodW1iIHtcbiAgbWFyZ2luLXRvcDogY2FsYygodmFyKC0tc2xpZGVyLWhlaWdodCkgLSB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSkpIC8gMiAtIDFweCk7XG4gIHdpZHRoOiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXI6IHNvbGlkIDFweCB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcbiAgYm9yZGVyLXJhZGl1czogMmVtO1xuICBiYWNrZ3JvdW5kOiAjZGRkO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tb3otcmFuZ2UtdGh1bWIge1xuICB3aWR0aDogdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpO1xuICBoZWlnaHQ6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiBzb2xpZCAxcHggdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XG4gIGJvcmRlci1yYWRpdXM6IDJlbTtcbiAgYmFja2dyb3VuZDogI2RkZDtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbXMtdGh1bWIge1xuICBtYXJnaW4tdG9wOiAwO1xuICB3aWR0aDogdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpO1xuICBoZWlnaHQ6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyOiBzb2xpZCAxcHggIHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiAyZW07XG4gIGJhY2tncm91bmQ6ICNkZGQ7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1zLXRvb2x0aXAge1xuICBkaXNwbGF5OiBub25lO1xufVxuXG4udGFiIHtcbiAgcGFkZGluZyA6IDVweDtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG59XG5cbi50YWIge1xuICBwYWRkaW5nIDogMHB4O1xuICBib3JkZXI6IHNvbGlkIDFweCAjNTU1O1xuICBib3JkZXItcmFkaXVzOiAwLjNlbTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcblxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWZsb3c6ICByb3cgbm93cmFwO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcbiAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XG5cbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuXG4gIG1hcmdpbjogMHB4OyBcbiAgbWF4LXdpZHRoOiA1MDBweDtcblxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI0MCwyMTgsMTg5LCAwLjkpO1xufVxuXG4udGFiIGxhYmVsIHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBmbGV4OiAxIDAgYXV0bztcbiAgZmxleC1ncm93OiAxO1xufVxuXG4udGFiIGxhYmVsOmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzg4ODtcbiAgY29sb3I6ICNlZWU7XG4gIGJvcmRlci1jb2xvcjogIzU1NTtcbn1cblxuLnRhYiBsYWJlbDpjaGVja2VkIHtcbiAgYmFja2dyb3VuZDogIzU1NTtcbiAgY29sb3I6ICNDQ0M7XG59XG5cbi50YWIgaW5wdXRbdHlwZT1cInJhZGlvXCJdIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cblxuLnRhYiBpbnB1dFt0eXBlPVwicmFkaW9cIl0gKyBkaXYge1xuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICBvdXRsaW5lOiAwO1xuICBmb250LXNpemU6IDAuNmVtO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgY29sb3I6ICM0NDQ7IFxuICBcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcblxuICBtYXJnaW46IDBweDsgXG4gIHBhZGRpbmc6IDJweCA4cHg7XG5cbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4udGFiIGlucHV0W3R5cGU9XCJyYWRpb1wiXSArIGRpdjpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM4ODg7XG4gIGNvbG9yOiAjZWVlO1xuICBib3JkZXItY29sb3I6ICM1NTU7XG59XG5cbi50YWIgaW5wdXRbdHlwZT1cInJhZGlvXCJdOmNoZWNrZWQgKyBkaXYge1xuICBiYWNrZ3JvdW5kOiAjNTU1O1xuICBjb2xvcjogI0NDQztcbn1cblxuLmlzLXN0aWNreS10b3Age1xuICBwb3NpdGlvbjogc3RpY2t5O1xuICB0b3AgOiAwO1xufVxuXG4udGFiLXNldHRpbmcge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgY29sb3I6ICM0NDQ7IFxuICBib3JkZXI6IHNvbGlkIDFweCAjNTU1O1xuICBwYWRkaW5nOiAycHggOHB4O1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLnRhYi1zZXR0aW5nOmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzg4ODtcbiAgY29sb3I6ICNlZWU7XG4gIGJvcmRlcjogc29saWQgMXB4ICM1NTU7XG59XG5cbi5zbWFsbC1mb250IHtcbiAgZm9udC1zaXplOiAxMnB4O1xuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xufVxuXG4ubWF0ZXJpYWwtaWNvbnMge1xuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICBmb250LXNpemU6IDEuMHJlbTtcbn1cblxuLnRhYmxlLWNlbGwge1xuICBkaXNwbGF5OiB0YWJsZS1jZWxsO1xufVxuXG4uaW1hZ2UtYm94IHtcbiAgcGFkZGluZzogMHB4O1xuICB3aWR0aDogMzJweDtcbiAgaGVpZ2h0OiAzMnB4O1xuICBkaXNwbGF5OiB0YWJsZS1jZWxsO1xuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xufVxuXG4uaW1hZ2UtYm94IGltZ3tcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgb2JqZWN0LWZpdDogY292ZXI7XG4gIG9iamVjdC1wb3NpdGlvbjogNTAlIDAlO1xufVxuXG4uaW52ZW50b3J5LW9iamVjdCB7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICB2ZXJ0aWNhbC1hbGlnbjogdGV4dC10b3A7XG59XG5cbi5vYmplY3QtbmFtZSB7XG4gIGZvbnQtc2l6ZTogMC44ZW07XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBwYWRkaW5nOiAwIDAuMjVlbTtcbn1cblxuLm9iamVjdC10YWdzLWJveCB7XG4gIGRpc3BsYXk6IHRhYmxlO1xuICB0YWJsZS1sYXlvdXQ6IGZpeGVkO1xufVxuXG4ub2JqZWN0LXRhZyB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgcGFkZGluZzogMCAwLjI1ZW07XG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG59XG5cbi5yZXNvdXJjZS10YWcge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG59XG5cbi5yZXNvdXJjZS12YWx1ZSB7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICB3aWR0aDogNGVtO1xuICB0ZXh0LWFsaWduOiByaWdodDtcbiAgZm9udC1mYW1pbHk6IGluaGVyaXQ7XG59XG5cbi50YWctbmFtZSB7XG4gIGZvbnQtc2l6ZTogMC44ZW07XG4gIHRleHQtYWxpZ246IGxlZnQ7XG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XG4gIG1pbi13aWR0aDoxZW07XG4gIG1heC13aWR0aDogMTJlbTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbn1cblxuLnRhZy12YWx1ZS1ib3h7XG4gIGRpc3BsYXk6IHRhYmxlLWNlbGw7XG4gIHdpZHRoOiAxMHB4O1xufVxuXG4udGFnLXZhbHVlIHtcbiAgZm9udC1zaXplOiAxLjBlbTtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIHdpZHRoOiAxMDAlO1xuICBtaW4td2lkdGg6IDFlbTtcbiAgbWF4LXdpZHRoOiAxMmVtO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xufSJdfQ== */"], changeDetection: 0 });
    return GameObjectInventoryComponent;
}());



/***/ }),

/***/ "RDF6":
/*!*************************************!*\
  !*** ./src/app/class/game-table.ts ***!
  \*************************************/
/*! exports provided: GridType, FilterType, GameTable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GridType", function() { return GridType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FilterType", function() { return FilterType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameTable", function() { return GameTable; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/system */ "yNnI");
/* harmony import */ var _game_table_mask__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./game-table-mask */ "AyjR");
/* harmony import */ var _terrain__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./terrain */ "gKYc");






var GridType;
(function (GridType) {
    GridType[GridType["NONE"] = -1] = "NONE";
    GridType[GridType["SQUARE"] = 0] = "SQUARE";
    GridType[GridType["HEX_VERTICAL"] = 1] = "HEX_VERTICAL";
    GridType[GridType["HEX_HORIZONTAL"] = 2] = "HEX_HORIZONTAL";
})(GridType || (GridType = {}));
var FilterType;
(function (FilterType) {
    FilterType["NONE"] = "";
    FilterType["WHITE"] = "white";
    FilterType["BLACK"] = "black";
})(FilterType || (FilterType = {}));
var GameTable = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(GameTable, _super);
    function GameTable() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.name = 'テーブル';
        _this.width = 20;
        _this.height = 20;
        _this.gridSize = 50;
        _this.imageIdentifier = 'imageIdentifier';
        _this.backgroundImageIdentifier = 'imageIdentifier';
        _this.backgroundFilterType = FilterType.NONE;
        _this.selected = false;
        _this.gridType = GridType.SQUARE;
        _this.gridColor = '#000000e6';
        return _this;
    }
    Object.defineProperty(GameTable.prototype, "terrains", {
        get: function () {
            var terrains = [];
            this.children.forEach(function (object) {
                if (object instanceof _terrain__WEBPACK_IMPORTED_MODULE_5__["Terrain"])
                    terrains.push(object);
            });
            return terrains;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTable.prototype, "masks", {
        get: function () {
            var masks = [];
            this.children.forEach(function (object) {
                if (object instanceof _game_table_mask__WEBPACK_IMPORTED_MODULE_4__["GameTableMask"])
                    masks.push(object);
            });
            return masks;
        },
        enumerable: false,
        configurable: true
    });
    // GameObject Lifecycle
    GameTable.prototype.onStoreAdded = function () {
        _super.prototype.onStoreAdded.call(this);
        if (this.selected)
            _core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('SELECT_GAME_TABLE', { identifier: this.identifier });
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "name", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "width", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "height", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "gridSize", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "imageIdentifier", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "backgroundImageIdentifier", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "backgroundFilterType", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "selected", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "gridType", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "gridColor", void 0);
    GameTable = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('game-table')
    ], GameTable);
    return GameTable;
}(_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__["ObjectNode"]));



/***/ }),

/***/ "Sdfd":
/*!*********************************************!*\
  !*** ./src/app/service/tabletop.service.ts ***!
  \*********************************************/
/*! exports provided: TabletopService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabletopService", function() { return TabletopService; });
/* harmony import */ var _udonarium_card__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/card */ "jiu3");
/* harmony import */ var _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/card-stack */ "23G+");
/* harmony import */ var _udonarium_chat_tab__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/chat-tab */ "Sqpr");
/* harmony import */ var _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/chat-tab-list */ "YZvQ");
/* harmony import */ var _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-serializer */ "MDT1");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/dice-symbol */ "l22b");
/* harmony import */ var _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @udonarium/game-character */ "M/aK");
/* harmony import */ var _udonarium_game_table__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @udonarium/game-table */ "RDF6");
/* harmony import */ var _udonarium_game_table_mask__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @udonarium/game-table-mask */ "AyjR");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var _udonarium_tabletop_object__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @udonarium/tabletop-object */ "e8gA");
/* harmony import */ var _udonarium_terrain__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @udonarium/terrain */ "gKYc");
/* harmony import */ var _udonarium_text_note__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @udonarium/text-note */ "WeD8");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _coordinate_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./coordinate.service */ "TzEH");


















var TabletopService = /** @class */ (function () {
    function TabletopService(coordinateService) {
        var _this = this;
        this.coordinateService = coordinateService;
        this._emptyTable = new _udonarium_game_table__WEBPACK_IMPORTED_MODULE_9__["GameTable"]('');
        this.locationMap = new Map();
        this.parentMap = new Map();
        this.characterCache = new TabletopCache(function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.getObjects(_udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]).filter(function (obj) { return obj.isVisibleOnTable; }); });
        this.cardCache = new TabletopCache(function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.getObjects(_udonarium_card__WEBPACK_IMPORTED_MODULE_0__["Card"]).filter(function (obj) { return obj.isVisibleOnTable; }); });
        this.cardStackCache = new TabletopCache(function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.getObjects(_udonarium_card_stack__WEBPACK_IMPORTED_MODULE_1__["CardStack"]).filter(function (obj) { return obj.isVisibleOnTable; }); });
        this.tableMaskCache = new TabletopCache(function () {
            var viewTable = _this.tableSelecter.viewTable;
            return viewTable ? viewTable.masks : [];
        });
        this.terrainCache = new TabletopCache(function () {
            var viewTable = _this.tableSelecter.viewTable;
            return viewTable ? viewTable.terrains : [];
        });
        this.textNoteCache = new TabletopCache(function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.getObjects(_udonarium_text_note__WEBPACK_IMPORTED_MODULE_15__["TextNote"]); });
        this.diceSymbolCache = new TabletopCache(function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.getObjects(_udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_7__["DiceSymbol"]); });
        this.initialize();
    }
    Object.defineProperty(TabletopService.prototype, "tableSelecter", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get('tableSelecter'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopService.prototype, "currentTable", {
        get: function () {
            var table = this.tableSelecter.viewTable;
            return table ? table : this._emptyTable;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopService.prototype, "characters", {
        get: function () { return this.characterCache.objects; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopService.prototype, "cards", {
        get: function () { return this.cardCache.objects; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopService.prototype, "cardStacks", {
        get: function () { return this.cardStackCache.objects; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopService.prototype, "tableMasks", {
        get: function () { return this.tableMaskCache.objects; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopService.prototype, "terrains", {
        get: function () { return this.terrainCache.objects; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopService.prototype, "textNotes", {
        get: function () { return this.textNoteCache.objects; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopService.prototype, "diceSymbols", {
        get: function () { return this.diceSymbolCache.objects; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopService.prototype, "peerCursors", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.getObjects(_udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_11__["PeerCursor"]); },
        enumerable: false,
        configurable: true
    });
    TabletopService.prototype.initialize = function () {
        var _this = this;
        this.refreshCacheAll();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            if (event.data.identifier === _this.currentTable.identifier || event.data.identifier === _this.tableSelecter.identifier) {
                _this.refreshCache(_udonarium_game_table_mask__WEBPACK_IMPORTED_MODULE_10__["GameTableMask"].aliasName);
                _this.refreshCache(_udonarium_terrain__WEBPACK_IMPORTED_MODULE_14__["Terrain"].aliasName);
                return;
            }
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(event.data.identifier);
            if (!object || !(object instanceof _udonarium_tabletop_object__WEBPACK_IMPORTED_MODULE_13__["TabletopObject"])) {
                _this.refreshCache(event.data.aliasName);
            }
            else if (_this.shouldRefreshCache(object)) {
                _this.refreshCache(event.data.aliasName);
                _this.updateMap(object);
            }
        })
            .on('DELETE_GAME_OBJECT', -1000, function (event) {
            var garbage = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(event.data.identifier);
            if (garbage == null || garbage.aliasName.length < 1) {
                _this.refreshCacheAll();
            }
            else {
                _this.refreshCache(garbage.aliasName);
            }
        })
            .on('XML_LOADED', function (event) {
            var xmlElement = event.data.xmlElement;
            // todo:立体地形の上にドロップした時の挙動
            var gameObject = _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_4__["ObjectSerializer"].instance.parseXml(xmlElement);
            if (gameObject instanceof _udonarium_tabletop_object__WEBPACK_IMPORTED_MODULE_13__["TabletopObject"]) {
                var pointer = _this.coordinateService.calcTabletopLocalCoordinate();
                gameObject.location.x = pointer.x - 25;
                gameObject.location.y = pointer.y - 25;
                gameObject.posZ = pointer.z;
                _this.placeToTabletop(gameObject);
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_12__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_12__["PresetSound"].piecePut);
            }
            else if (gameObject instanceof _udonarium_chat_tab__WEBPACK_IMPORTED_MODULE_2__["ChatTab"]) {
                _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_3__["ChatTabList"].instance.addChatTab(gameObject);
            }
        });
    };
    TabletopService.prototype.findCache = function (aliasName) {
        switch (aliasName) {
            case _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"].aliasName:
                return this.characterCache;
            case _udonarium_card__WEBPACK_IMPORTED_MODULE_0__["Card"].aliasName:
                return this.cardCache;
            case _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_1__["CardStack"].aliasName:
                return this.cardStackCache;
            case _udonarium_game_table_mask__WEBPACK_IMPORTED_MODULE_10__["GameTableMask"].aliasName:
                return this.tableMaskCache;
            case _udonarium_terrain__WEBPACK_IMPORTED_MODULE_14__["Terrain"].aliasName:
                return this.terrainCache;
            case _udonarium_text_note__WEBPACK_IMPORTED_MODULE_15__["TextNote"].aliasName:
                return this.textNoteCache;
            case _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_7__["DiceSymbol"].aliasName:
                return this.diceSymbolCache;
            default:
                return null;
        }
    };
    TabletopService.prototype.refreshCache = function (aliasName) {
        var cache = this.findCache(aliasName);
        if (cache)
            cache.refresh();
    };
    TabletopService.prototype.refreshCacheAll = function () {
        this.characterCache.refresh();
        this.cardCache.refresh();
        this.cardStackCache.refresh();
        this.tableMaskCache.refresh();
        this.terrainCache.refresh();
        this.textNoteCache.refresh();
        this.diceSymbolCache.refresh();
        this.clearMap();
    };
    TabletopService.prototype.shouldRefreshCache = function (object) {
        return this.locationMap.get(object.identifier) !== object.location.name || this.parentMap.get(object.identifier) !== object.parentId;
    };
    TabletopService.prototype.updateMap = function (object) {
        this.locationMap.set(object.identifier, object.location.name);
        this.parentMap.set(object.identifier, object.parentId);
    };
    TabletopService.prototype.clearMap = function () {
        this.locationMap.clear();
        this.parentMap.clear();
    };
    TabletopService.prototype.placeToTabletop = function (gameObject) {
        switch (gameObject.aliasName) {
            case _udonarium_game_table_mask__WEBPACK_IMPORTED_MODULE_10__["GameTableMask"].aliasName:
                if (gameObject instanceof _udonarium_game_table_mask__WEBPACK_IMPORTED_MODULE_10__["GameTableMask"])
                    gameObject.isLock = false;
            case _udonarium_terrain__WEBPACK_IMPORTED_MODULE_14__["Terrain"].aliasName:
                if (gameObject instanceof _udonarium_terrain__WEBPACK_IMPORTED_MODULE_14__["Terrain"])
                    gameObject.isLocked = false;
                if (!this.tableSelecter || !this.tableSelecter.viewTable)
                    return;
                this.tableSelecter.viewTable.appendChild(gameObject);
                break;
            default:
                gameObject.setLocation('table');
                break;
        }
    };
    TabletopService.ɵfac = function TabletopService_Factory(t) { return new (t || TabletopService)(_angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵinject"](_coordinate_service__WEBPACK_IMPORTED_MODULE_17__["CoordinateService"])); };
    TabletopService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵdefineInjectable"]({ token: TabletopService, factory: TabletopService.ɵfac });
    return TabletopService;
}());

var TabletopCache = /** @class */ (function () {
    function TabletopCache(refreshCollector) {
        this.refreshCollector = refreshCollector;
        this.needsRefresh = true;
        this._objects = [];
    }
    Object.defineProperty(TabletopCache.prototype, "objects", {
        get: function () {
            if (this.needsRefresh) {
                this._objects = this.refreshCollector();
                this._objects = this._objects ? this._objects : [];
                this.needsRefresh = false;
            }
            return this._objects;
        },
        enumerable: false,
        configurable: true
    });
    TabletopCache.prototype.refresh = function () {
        this.needsRefresh = true;
    };
    return TabletopCache;
}());


/***/ }),

/***/ "Sqpr":
/*!***********************************!*\
  !*** ./src/app/class/chat-tab.ts ***!
  \***********************************/
/*! exports provided: ChatTab */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatTab", function() { return ChatTab; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _chat_message__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat-message */ "edKV");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/synchronize-object/object-serializer */ "MDT1");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./core/system */ "yNnI");






var ChatTab = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(ChatTab, _super);
    function ChatTab() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.name = 'タブ';
        _this._unreadLength = 0;
        return _this;
    }
    Object.defineProperty(ChatTab.prototype, "chatMessages", {
        get: function () { return this.children; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTab.prototype, "unreadLength", {
        get: function () { return this._unreadLength; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTab.prototype, "hasUnread", {
        get: function () { return 0 < this.unreadLength; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTab.prototype, "latestTimeStamp", {
        get: function () {
            var lastIndex = this.chatMessages.length - 1;
            return lastIndex < 0 ? 0 : this.chatMessages[lastIndex].timestamp;
        },
        enumerable: false,
        configurable: true
    });
    // ObjectNode Lifecycle
    ChatTab.prototype.onChildAdded = function (child) {
        _super.prototype.onChildAdded.call(this, child);
        if (child.parent === this && child instanceof _chat_message__WEBPACK_IMPORTED_MODULE_1__["ChatMessage"] && child.isDisplayable) {
            this._unreadLength++;
            _core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].trigger('MESSAGE_ADDED', { tabIdentifier: this.identifier, messageIdentifier: child.identifier });
        }
    };
    ChatTab.prototype.addMessage = function (message) {
        message.tabIdentifier = this.identifier;
        var chat = new _chat_message__WEBPACK_IMPORTED_MODULE_1__["ChatMessage"]();
        for (var key in message) {
            if (key === 'identifier')
                continue;
            if (key === 'tabIdentifier')
                continue;
            if (key === 'text') {
                chat.value = message[key];
                continue;
            }
            if (message[key] == null || message[key] === '')
                continue;
            chat.setAttribute(key, message[key]);
        }
        chat.initialize();
        _core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].trigger('SEND_MESSAGE', { tabIdentifier: this.identifier, messageIdentifier: chat.identifier });
        this.appendChild(chat);
        return chat;
    };
    ChatTab.prototype.markForRead = function () {
        this._unreadLength = 0;
    };
    ChatTab.prototype.innerXml = function () {
        var e_1, _a;
        var xml = '';
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                var child = _c.value;
                if (child instanceof _chat_message__WEBPACK_IMPORTED_MODULE_1__["ChatMessage"] && !child.isDisplayable)
                    continue;
                xml += _core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_4__["ObjectSerializer"].instance.toXml(child);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return xml;
    };
    ;
    ChatTab.prototype.parseInnerXml = function (element) {
        return _super.prototype.parseInnerXml.call(this, element);
    };
    ;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatTab.prototype, "name", void 0);
    ChatTab = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncObject"])('chat-tab')
    ], ChatTab);
    return ChatTab;
}(_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__["ObjectNode"]));



/***/ }),

/***/ "Sy1n":
/*!**********************************!*\
  !*** ./src/app/app.component.ts ***!
  \**********************************/
/*! exports provided: AppComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppComponent", function() { return AppComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/chat-tab-list */ "YZvQ");
/* harmony import */ var _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/file-storage/audio-player */ "zeEm");
/* harmony import */ var _udonarium_core_file_storage_audio_sharing_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/file-storage/audio-sharing-system */ "XMVy");
/* harmony import */ var _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/file-storage/audio-storage */ "Prh6");
/* harmony import */ var _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/file-storage/file-archiver */ "wBZT");
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_file_storage_image_sharing_system__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @udonarium/core/file-storage/image-sharing-system */ "xbks");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _udonarium_core_synchronize_object_object_factory__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-factory */ "+FYa");
/* harmony import */ var _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-serializer */ "MDT1");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_synchronize_object_object_synchronizer__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-synchronizer */ "dQfN");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @udonarium/data-summary-setting */ "zP96");
/* harmony import */ var _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @udonarium/dice-bot */ "JUIv");
/* harmony import */ var _udonarium_Jukebox__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @udonarium/Jukebox */ "glHC");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var component_chat_window_chat_window_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! component/chat-window/chat-window.component */ "wPqI");
/* harmony import */ var component_context_menu_context_menu_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! component/context-menu/context-menu.component */ "e1FT");
/* harmony import */ var component_file_storage_file_storage_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! component/file-storage/file-storage.component */ "OOM5");
/* harmony import */ var component_game_character_generator_game_character_generator_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! component/game-character-generator/game-character-generator.component */ "0cI7");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var component_game_object_inventory_game_object_inventory_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! component/game-object-inventory/game-object-inventory.component */ "R1wr");
/* harmony import */ var component_game_table_setting_game_table_setting_component__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! component/game-table-setting/game-table-setting.component */ "zhae");
/* harmony import */ var component_jukebox_jukebox_component__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! component/jukebox/jukebox.component */ "TaI1");
/* harmony import */ var component_modal_modal_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! component/modal/modal.component */ "EfKb");
/* harmony import */ var component_peer_menu_peer_menu_component__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! component/peer-menu/peer-menu.component */ "F+Vt");
/* harmony import */ var component_text_view_text_view_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! component/text-view/text-view.component */ "AsCv");
/* harmony import */ var component_ui_panel_ui_panel_component__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! component/ui-panel/ui-panel.component */ "VnuA");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var service_chat_message_service__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! service/chat-message.service */ "PEfN");
/* harmony import */ var service_app_config_service__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! service/app-config.service */ "6VpD");
/* harmony import */ var service_save_data_service__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! service/save-data.service */ "Uvtn");
/* harmony import */ var component_game_table_game_table_component__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! component/game-table/game-table.component */ "Umgr");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var component_network_indicator_network_indicator_component__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! component/network-indicator/network-indicator.component */ "kf6k");














































var _c0 = ["modalLayer"];
function AppComponent_li_56_Template(rf, ctx) { if (rf & 1) {
    var _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "li", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function AppComponent_li_56_Template_li_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r4); var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r3.save(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "a", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "i", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "sd_storage");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](6, "\u4FDD\u5B58");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function AppComponent_li_57_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "li", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "a");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "i", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "sd_storage");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", ctx_r1.progresPercent, "%");
} }
var AppComponent = /** @class */ (function () {
    function AppComponent(modalService, panelService, pointerDeviceService, chatMessageService, appConfigService, saveDataService, ngZone) {
        var _this = this;
        this.modalService = modalService;
        this.panelService = panelService;
        this.pointerDeviceService = pointerDeviceService;
        this.chatMessageService = chatMessageService;
        this.appConfigService = appConfigService;
        this.saveDataService = saveDataService;
        this.ngZone = ngZone;
        this.immediateUpdateTimer = null;
        this.lazyUpdateTimer = null;
        this.openPanelCount = 0;
        this.isSaveing = false;
        this.progresPercent = 0;
        this.ngZone.runOutsideAngular(function () {
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["EventSystem"];
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"];
            _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_6__["FileArchiver"].instance.initialize();
            _udonarium_core_file_storage_image_sharing_system__WEBPACK_IMPORTED_MODULE_8__["ImageSharingSystem"].instance.initialize();
            _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_9__["ImageStorage"].instance;
            _udonarium_core_file_storage_audio_sharing_system__WEBPACK_IMPORTED_MODULE_4__["AudioSharingSystem"].instance.initialize();
            _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance;
            _udonarium_core_synchronize_object_object_factory__WEBPACK_IMPORTED_MODULE_10__["ObjectFactory"].instance;
            _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_11__["ObjectSerializer"].instance;
            _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_12__["ObjectStore"].instance;
            _udonarium_core_synchronize_object_object_synchronizer__WEBPACK_IMPORTED_MODULE_13__["ObjectSynchronizer"].instance.initialize();
        });
        this.appConfigService.initialize();
        this.pointerDeviceService.initialize();
        _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_2__["ChatTabList"].instance.initialize();
        _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_15__["DataSummarySetting"].instance.initialize();
        var diceBot = new _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_16__["DiceBot"]('DiceBot');
        diceBot.initialize();
        var jukebox = new _udonarium_Jukebox__WEBPACK_IMPORTED_MODULE_17__["Jukebox"]('Jukebox');
        jukebox.initialize();
        var soundEffect = new _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["SoundEffect"]('SoundEffect');
        soundEffect.initialize();
        _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_2__["ChatTabList"].instance.addChatTab('メインタブ', 'MainTab');
        _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_2__["ChatTabList"].instance.addChatTab('サブタブ', 'SubTab');
        var fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_7__["ImageFile"].createEmpty('none_icon').toContext();
        fileContext.url = './assets/images/ic_account_circle_black_24dp_2x.png';
        var noneIconImage = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_9__["ImageStorage"].instance.add(fileContext);
        _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_3__["AudioPlayer"].resumeAudioContext();
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].dicePick = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/soundeffect-lab/shoulder-touch1.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].dicePut = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/soundeffect-lab/book-stack1.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].diceRoll1 = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/on-jin/spo_ge_saikoro_teburu01.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].diceRoll2 = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/on-jin/spo_ge_saikoro_teburu02.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].cardDraw = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/soundeffect-lab/card-turn-over1.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].cardPick = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/soundeffect-lab/shoulder-touch1.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].cardPut = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/soundeffect-lab/book-stack1.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].cardShuffle = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/soundeffect-lab/card-open1.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].piecePick = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/soundeffect-lab/shoulder-touch1.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].piecePut = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/soundeffect-lab/book-stack1.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].blockPick = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/tm2/tm2_pon002.wav').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].blockPut = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/tm2/tm2_pon002.wav').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].lock = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/tm2/tm2_switch001.wav').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].unlock = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/tm2/tm2_switch001.wav').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].sweep = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/tm2/tm2_swing003.wav').identifier;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].dicePick).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].dicePut).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].diceRoll1).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].diceRoll2).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].cardDraw).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].cardPick).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].cardPut).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].cardShuffle).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].piecePick).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].piecePut).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].blockPick).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].blockPut).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].lock).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].unlock).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].sweep).isHidden = true;
        _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_18__["PeerCursor"].createMyCursor();
        _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_18__["PeerCursor"].myCursor.name = 'プレイヤー';
        _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_18__["PeerCursor"].myCursor.imageIdentifier = noneIconImage.identifier;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', function (event) { _this.lazyNgZoneUpdate(event.isSendFromSelf); })
            .on('DELETE_GAME_OBJECT', function (event) { _this.lazyNgZoneUpdate(event.isSendFromSelf); })
            .on('SYNCHRONIZE_AUDIO_LIST', function (event) { if (event.isSendFromSelf)
            _this.lazyNgZoneUpdate(false); })
            .on('SYNCHRONIZE_FILE_LIST', function (event) { if (event.isSendFromSelf)
            _this.lazyNgZoneUpdate(false); })
            .on('LOAD_CONFIG', function (event) {
            console.log('LOAD_CONFIG !!!');
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"].setApiKey(event.data.webrtc.key);
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"].open();
        })
            .on('FILE_LOADED', function (event) {
            _this.lazyNgZoneUpdate(false);
        })
            .on('OPEN_NETWORK', function (event) {
            console.log('OPEN_NETWORK', event.data.peerId);
            _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_18__["PeerCursor"].myCursor.peerId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"].peerContext.peerId;
            _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_18__["PeerCursor"].myCursor.userId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"].peerContext.userId;
        })
            .on('CLOSE_NETWORK', function (event) {
            console.log('CLOSE_NETWORK', event.data.peerId);
            _this.ngZone.run(function () { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(_this, void 0, void 0, function () {
                return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            if (!(1 < _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"].peerIds.length)) return [3 /*break*/, 2];
                            return [4 /*yield*/, this.modalService.open(component_text_view_text_view_component__WEBPACK_IMPORTED_MODULE_30__["TextViewComponent"], { title: 'ネットワークエラー', text: 'ネットワーク接続に何らかの異常が発生しました。\nこの表示以後、接続が不安定であれば、ページリロードと再接続を試みてください。' })];
                        case 1:
                            _a.sent();
                            return [3 /*break*/, 4];
                        case 2: return [4 /*yield*/, this.modalService.open(component_text_view_text_view_component__WEBPACK_IMPORTED_MODULE_30__["TextViewComponent"], { title: 'ネットワークエラー', text: '接続情報が破棄されました。\nこのウィンドウを閉じると再接続を試みます。' })];
                        case 3:
                            _a.sent();
                            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"].open();
                            _a.label = 4;
                        case 4: return [2 /*return*/];
                    }
                });
            }); });
        })
            .on('CONNECT_PEER', function (event) {
            if (event.isSendFromSelf)
                _this.chatMessageService.calibrateTimeOffset();
            _this.lazyNgZoneUpdate(event.isSendFromSelf);
        })
            .on('DISCONNECT_PEER', function (event) {
            _this.lazyNgZoneUpdate(event.isSendFromSelf);
        });
    }
    AppComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        service_panel_service__WEBPACK_IMPORTED_MODULE_34__["PanelService"].defaultParentViewContainerRef = service_modal_service__WEBPACK_IMPORTED_MODULE_33__["ModalService"].defaultParentViewContainerRef = service_context_menu_service__WEBPACK_IMPORTED_MODULE_32__["ContextMenuService"].defaultParentViewContainerRef = this.modalLayerViewContainerRef;
        setTimeout(function () {
            _this.panelService.open(component_peer_menu_peer_menu_component__WEBPACK_IMPORTED_MODULE_29__["PeerMenuComponent"], { width: 500, height: 450, left: 100 });
            _this.panelService.open(component_chat_window_chat_window_component__WEBPACK_IMPORTED_MODULE_20__["ChatWindowComponent"], { width: 700, height: 400, left: 100, top: 450 });
        }, 0);
    };
    AppComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["EventSystem"].unregister(this);
    };
    AppComponent.prototype.open = function (componentName) {
        var component = null;
        var option = { width: 450, height: 600, left: 100 };
        switch (componentName) {
            case 'PeerMenuComponent':
                component = component_peer_menu_peer_menu_component__WEBPACK_IMPORTED_MODULE_29__["PeerMenuComponent"];
                break;
            case 'ChatWindowComponent':
                component = component_chat_window_chat_window_component__WEBPACK_IMPORTED_MODULE_20__["ChatWindowComponent"];
                option.width = 700;
                break;
            case 'GameTableSettingComponent':
                component = component_game_table_setting_game_table_setting_component__WEBPACK_IMPORTED_MODULE_26__["GameTableSettingComponent"];
                option = { width: 630, height: 400, left: 100 };
                break;
            case 'FileStorageComponent':
                component = component_file_storage_file_storage_component__WEBPACK_IMPORTED_MODULE_22__["FileStorageComponent"];
                break;
            case 'GameCharacterSheetComponent':
                component = component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_24__["GameCharacterSheetComponent"];
                break;
            case 'JukeboxComponent':
                component = component_jukebox_jukebox_component__WEBPACK_IMPORTED_MODULE_27__["JukeboxComponent"];
                break;
            case 'GameCharacterGeneratorComponent':
                component = component_game_character_generator_game_character_generator_component__WEBPACK_IMPORTED_MODULE_23__["GameCharacterGeneratorComponent"];
                option = { width: 500, height: 300, left: 100 };
                break;
            case 'GameObjectInventoryComponent':
                component = component_game_object_inventory_game_object_inventory_component__WEBPACK_IMPORTED_MODULE_25__["GameObjectInventoryComponent"];
                break;
        }
        if (component) {
            option.top = (this.openPanelCount % 10 + 1) * 20;
            option.left = 100 + (this.openPanelCount % 20 + 1) * 5;
            this.openPanelCount = this.openPanelCount + 1;
            this.panelService.open(component, option);
        }
    };
    AppComponent.prototype.save = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var roomName;
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.isSaveing)
                            return [2 /*return*/];
                        this.isSaveing = true;
                        this.progresPercent = 0;
                        roomName = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"].peerContext && 0 < _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"].peerContext.roomName.length
                            ? _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"].peerContext.roomName
                            : 'ルームデータ';
                        return [4 /*yield*/, this.saveDataService.saveRoomAsync(roomName, function (percent) {
                                _this.progresPercent = percent;
                            })];
                    case 1:
                        _a.sent();
                        setTimeout(function () {
                            _this.isSaveing = false;
                            _this.progresPercent = 0;
                        }, 500);
                        return [2 /*return*/];
                }
            });
        });
    };
    AppComponent.prototype.handleFileSelect = function (event) {
        var input = event.target;
        var files = input.files;
        if (files.length)
            _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_6__["FileArchiver"].instance.load(files);
        input.value = '';
    };
    AppComponent.prototype.lazyNgZoneUpdate = function (isImmediate) {
        var _this = this;
        if (isImmediate) {
            if (this.immediateUpdateTimer !== null)
                return;
            this.immediateUpdateTimer = setTimeout(function () {
                _this.immediateUpdateTimer = null;
                if (_this.lazyUpdateTimer != null) {
                    clearTimeout(_this.lazyUpdateTimer);
                    _this.lazyUpdateTimer = null;
                }
                _this.ngZone.run(function () { });
            }, 0);
        }
        else {
            if (this.lazyUpdateTimer !== null)
                return;
            this.lazyUpdateTimer = setTimeout(function () {
                _this.lazyUpdateTimer = null;
                if (_this.immediateUpdateTimer != null) {
                    clearTimeout(_this.immediateUpdateTimer);
                    _this.immediateUpdateTimer = null;
                }
                _this.ngZone.run(function () { });
            }, 100);
        }
    };
    AppComponent.ɵfac = function AppComponent_Factory(t) { return new (t || AppComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_33__["ModalService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_34__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_35__["PointerDeviceService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_chat_message_service__WEBPACK_IMPORTED_MODULE_36__["ChatMessageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_app_config_service__WEBPACK_IMPORTED_MODULE_37__["AppConfigService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_save_data_service__WEBPACK_IMPORTED_MODULE_38__["SaveDataService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"])); };
    AppComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: AppComponent, selectors: [["app-root"]], viewQuery: function AppComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵviewQuery"](_c0, 3, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"]);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.modalLayerViewContainerRef = _t.first);
        } }, decls: 61, vars: 7, consts: [["id", "app-table-layer", 2, "position", "absolute", "width", "100%", "height", "100%", "overflow", "hidden"], [3, "top", "left", "width", "height", "title"], [3, "click"], ["routerLink", "/", "routerLinkActive", "active"], [1, "material-icons", "icon-size"], [1, "material-icons"], ["type", "file", "multiple", "", "accept", "application/xml,text/xml,application/zip", 2, "display", "none", 3, "change"], [3, "click", 4, "ngIf"], ["style", "pointer-events: none;", 4, "ngIf"], ["modalLayer", ""], [1, "networkIndicator"], [2, "pointer-events", "none"], [1, "material-icons", "vibration-amine"]], template: function AppComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "game-table");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "ui-panel", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "nav");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "ul");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "li", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function AppComponent_Template_li_click_5_listener() { return ctx.open("PeerMenuComponent"); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "a", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "i", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](9, "people");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](11, "\u63A5\u7D9A");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](12, "li", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function AppComponent_Template_li_click_12_listener() { return ctx.open("ChatWindowComponent"); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](13, "a", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](14, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](15, "i", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](16, "speaker_notes");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](17, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](18, "\u30C1\u30E3\u30C3\u30C8\u753B\u9762");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](19, "li", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function AppComponent_Template_li_click_19_listener() { return ctx.open("GameTableSettingComponent"); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](20, "a", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](21, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](22, "i", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](23, "layers");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](24, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](25, "\u30C6\u30FC\u30D6\u30EB\u8A2D\u5B9A");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](26, "li", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function AppComponent_Template_li_click_26_listener() { return ctx.open("FileStorageComponent"); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](27, "a", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](28, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](29, "i", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](30, "photo_library");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](31, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](32, "\u753B\u50CF");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](33, "li", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function AppComponent_Template_li_click_33_listener() { return ctx.open("JukeboxComponent"); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](34, "a", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](35, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](36, "i", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](37, "queue_music");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](38, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](39, "\u97F3\u697D");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](40, "li", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function AppComponent_Template_li_click_40_listener() { return ctx.open("GameObjectInventoryComponent"); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](41, "a", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](42, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](43, "i", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](44, "folder_shared");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](45, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](46, "\u30A4\u30F3\u30D9\u30F3\u30C8\u30EA");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](47, "li");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](48, "a", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](49, "label");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](50, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](51, "i", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](52, "open_in_browser");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](53, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](54, "ZIP\u8AAD\u8FBC");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](55, "input", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("change", function AppComponent_Template_input_change_55_listener($event) { return ctx.handleFileSelect($event); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](56, AppComponent_li_56_Template, 7, 0, "li", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](57, AppComponent_li_57_Template, 7, 1, "li", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](58, "div", null, 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](60, "network-indicator", 10);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("top", 0)("left", 0)("width", 100)("height", 470)("title", "\u30E1\u30CB\u30E5\u30FC");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](54);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.isSaveing);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.isSaveing);
        } }, directives: [component_game_table_game_table_component__WEBPACK_IMPORTED_MODULE_39__["GameTableComponent"], component_ui_panel_ui_panel_component__WEBPACK_IMPORTED_MODULE_31__["UIPanelComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_40__["NgIf"], component_network_indicator_network_indicator_component__WEBPACK_IMPORTED_MODULE_41__["NetworkIndicatorComponent"]], styles: ["nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\n    list-style:none;\n    padding: 0px;\n    margin: 0px;\n  \n}\n\nnav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%] {\n  text-align: center;\n  padding: 5px;\n  color: #CCC;\n  color: #444;\n\n  cursor: -moz-pointer;\n  cursor: -webkit-pointer;\n  cursor: pointer;\n}\n\nnav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%]:hover {\n  color: #CCC;\n  background-color: rgba(30, 30, 30, 0.8);\n}\n\nnav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%]    > a[_ngcontent-%COMP%] {\n  height: 128px;\n  width: 128px;\n  font-size: 8px;\n  -webkit-user-select: none;\n          user-select: none;\n}\n\nnav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%]    > a[_ngcontent-%COMP%]    > label[_ngcontent-%COMP%] {\n  cursor: -moz-pointer;\n  cursor: -webkit-pointer;\n  cursor: pointer;\n}\n\nnav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 24px;\n}\n\nnav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited {\n  text-decoration: none;\n}\n\n.icon-size[_ngcontent-%COMP%] {\n  font-size: 40px;\n}\n\n.side-menu[_ngcontent-%COMP%] {\n  top: 0px;\n  left: 0px;\n  box-sizing: border-box;\n  overflow: auto;\n  position: absolute;\n  color: #CCC;\n  background-color: rgba(30, 30, 30, 0.8);\n  border:solid 1px #999;\n  padding: 0px;\n  height: 100%;\n  width: 300px;\n}\n\n.networkIndicator[_ngcontent-%COMP%] {\n  display: none;\n  z-index: 9999;\n  pointer-events: none;\n  position: absolute;\n  top: 3px;\n  right: 3px;\n  height: 30px;\n  width: 30px;\n}\n\n.vibration-amine[_ngcontent-%COMP%] {\n  animation: vibration 0.2s infinite;\n}\n\n@keyframes vibration {\n  0%   { transform: scale(1.0, 1.0) translate(0%, 0%); }\n  50%  { transform: scale(1.02, 0.95) translate(0%, 5%); }\n  100% { transform: scale(1.0, 1.0) translate(0%, 0%); }\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksZUFBZTtJQUNmLFlBQVk7SUFDWixXQUFXO0VBQ2I7Ozs7O0dBS0M7QUFDSDs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1osV0FBVztFQUNYLFdBQVc7O0VBRVgsb0JBQW9CO0VBQ3BCLHVCQUF1QjtFQUN2QixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsV0FBVztFQUNYLHVDQUF1QztBQUN6Qzs7QUFDQTtFQUNFLGFBQWE7RUFDYixZQUFZO0VBQ1osY0FBYztFQUNkLHlCQUFpQjtVQUFqQixpQkFBaUI7QUFDbkI7O0FBQ0E7RUFDRSxvQkFBb0I7RUFDcEIsdUJBQXVCO0VBQ3ZCLGVBQWU7QUFDakI7O0FBQ0E7RUFDRSxlQUFlO0FBQ2pCOztBQUNBO0VBQ0UscUJBQXFCO0FBQ3ZCOztBQUVBO0VBQ0UsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLFFBQVE7RUFDUixTQUFTO0VBQ1Qsc0JBQXNCO0VBQ3RCLGNBQWM7RUFDZCxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLHVDQUF1QztFQUN2QyxxQkFBcUI7RUFDckIsWUFBWTtFQUNaLFlBQVk7RUFDWixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsYUFBYTtFQUNiLG9CQUFvQjtFQUNwQixrQkFBa0I7RUFDbEIsUUFBUTtFQUNSLFVBQVU7RUFDVixZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0Usa0NBQWtDO0FBQ3BDOztBQUVBO0VBQ0UsT0FBTyw0Q0FBNEMsRUFBRTtFQUNyRCxPQUFPLDhDQUE4QyxFQUFFO0VBQ3ZELE9BQU8sNENBQTRDLEVBQUU7QUFDdkQiLCJmaWxlIjoiYXBwLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJuYXYgdWwge1xuICAgIGxpc3Qtc3R5bGU6bm9uZTtcbiAgICBwYWRkaW5nOiAwcHg7XG4gICAgbWFyZ2luOiAwcHg7XG4gIC8qXG4gIGJvcmRlcjogMXB4IHNvbGlkICNiYmI7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgcGFkZGluZzogNXB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDMwLCAzMCwgMzAsIDAuOCk7XG4gICovXG59XG5cbm5hdiB1bCA+IGxpIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBwYWRkaW5nOiA1cHg7XG4gIGNvbG9yOiAjQ0NDO1xuICBjb2xvcjogIzQ0NDtcblxuICBjdXJzb3I6IC1tb3otcG9pbnRlcjtcbiAgY3Vyc29yOiAtd2Via2l0LXBvaW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxubmF2IHVsID4gbGk6aG92ZXIge1xuICBjb2xvcjogI0NDQztcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjgpO1xufVxubmF2IHVsID4gbGkgPiBhIHtcbiAgaGVpZ2h0OiAxMjhweDtcbiAgd2lkdGg6IDEyOHB4O1xuICBmb250LXNpemU6IDhweDtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG59XG5uYXYgdWwgPiBsaSA+IGEgPiBsYWJlbCB7XG4gIGN1cnNvcjogLW1vei1wb2ludGVyO1xuICBjdXJzb3I6IC13ZWJraXQtcG9pbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxubmF2IHVsIGkge1xuICBmb250LXNpemU6IDI0cHg7XG59XG5uYXYgdWwgYSwgbmF2IHVsIGE6aG92ZXIsIG5hdiB1bCBhOmFjdGl2ZSwgbmF2IHVsIGE6dmlzaXRlZCB7XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbn1cblxuLmljb24tc2l6ZSB7XG4gIGZvbnQtc2l6ZTogNDBweDtcbn1cblxuLnNpZGUtbWVudSB7XG4gIHRvcDogMHB4O1xuICBsZWZ0OiAwcHg7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIG92ZXJmbG93OiBhdXRvO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGNvbG9yOiAjQ0NDO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDMwLCAzMCwgMzAsIDAuOCk7XG4gIGJvcmRlcjpzb2xpZCAxcHggIzk5OTtcbiAgcGFkZGluZzogMHB4O1xuICBoZWlnaHQ6IDEwMCU7XG4gIHdpZHRoOiAzMDBweDtcbn1cblxuLm5ldHdvcmtJbmRpY2F0b3Ige1xuICBkaXNwbGF5OiBub25lO1xuICB6LWluZGV4OiA5OTk5O1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDNweDtcbiAgcmlnaHQ6IDNweDtcbiAgaGVpZ2h0OiAzMHB4O1xuICB3aWR0aDogMzBweDtcbn1cblxuLnZpYnJhdGlvbi1hbWluZSB7XG4gIGFuaW1hdGlvbjogdmlicmF0aW9uIDAuMnMgaW5maW5pdGU7XG59XG5cbkBrZXlmcmFtZXMgdmlicmF0aW9uIHtcbiAgMCUgICB7IHRyYW5zZm9ybTogc2NhbGUoMS4wLCAxLjApIHRyYW5zbGF0ZSgwJSwgMCUpOyB9XG4gIDUwJSAgeyB0cmFuc2Zvcm06IHNjYWxlKDEuMDIsIDAuOTUpIHRyYW5zbGF0ZSgwJSwgNSUpOyB9XG4gIDEwMCUgeyB0cmFuc2Zvcm06IHNjYWxlKDEuMCwgMS4wKSB0cmFuc2xhdGUoMCUsIDAlKTsgfVxufVxuIl19 */"] });
    return AppComponent;
}());

service_panel_service__WEBPACK_IMPORTED_MODULE_34__["PanelService"].UIPanelComponentClass = component_ui_panel_ui_panel_component__WEBPACK_IMPORTED_MODULE_31__["UIPanelComponent"];
service_context_menu_service__WEBPACK_IMPORTED_MODULE_32__["ContextMenuService"].ContextMenuComponentClass = component_context_menu_context_menu_component__WEBPACK_IMPORTED_MODULE_21__["ContextMenuComponent"];
service_modal_service__WEBPACK_IMPORTED_MODULE_33__["ModalService"].ModalComponentClass = component_modal_modal_component__WEBPACK_IMPORTED_MODULE_28__["ModalComponent"];


/***/ }),

/***/ "TaI1":
/*!********************************************************!*\
  !*** ./src/app/component/jukebox/jukebox.component.ts ***!
  \********************************************************/
/*! exports provided: JukeboxComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "JukeboxComponent", function() { return JukeboxComponent; });
/* harmony import */ var _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/core/file-storage/audio-player */ "zeEm");
/* harmony import */ var _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/file-storage/audio-storage */ "Prh6");
/* harmony import */ var _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/file-storage/file-archiver */ "wBZT");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ "ofXK");










function JukeboxComponent_div_8_button_1_Template(rf, ctx) { if (rf & 1) {
    var _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "button", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function JukeboxComponent_div_8_button_1_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r11); var audio_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit; var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](); return ctx_r9.play(audio_r2); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1, "\u8A66\u8074/\u518D\u751F");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} if (rf & 2) {
    var audio_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("disabled", !audio_r2.isReady);
} }
function JukeboxComponent_div_8_button_2_Template(rf, ctx) { if (rf & 1) {
    var _r14 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "button", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function JukeboxComponent_div_8_button_2_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r14); var ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2); return ctx_r13.stop(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1, "\u8A66\u8074/\u505C\u6B62");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} if (rf & 2) {
    var audio_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("disabled", !audio_r2.isReady);
} }
function JukeboxComponent_div_8_button_3_Template(rf, ctx) { if (rf & 1) {
    var _r18 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "button", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function JukeboxComponent_div_8_button_3_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r18); var audio_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit; var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](); return ctx_r16.playBGM(audio_r2); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1, "BGM/\u518D\u751F");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} if (rf & 2) {
    var audio_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("disabled", !audio_r2.isReady);
} }
function JukeboxComponent_div_8_button_4_Template(rf, ctx) { if (rf & 1) {
    var _r22 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "button", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function JukeboxComponent_div_8_button_4_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r22); var audio_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit; var ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](); return ctx_r20.stopBGM(audio_r2); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1, "BGM/\u505C\u6B62");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} if (rf & 2) {
    var audio_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("disabled", !audio_r2.isReady);
} }
function JukeboxComponent_div_8_span_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1, "\u3010\u8A66\u8074\u4E2D\u3011");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} }
function JukeboxComponent_div_8_span_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1, "\u3010BGM\u3011");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} }
function JukeboxComponent_div_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](1, JukeboxComponent_div_8_button_1_Template, 2, 1, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](2, JukeboxComponent_div_8_button_2_Template, 2, 1, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](3, JukeboxComponent_div_8_button_3_Template, 2, 1, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](4, JukeboxComponent_div_8_button_4_Template, 2, 1, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](5, JukeboxComponent_div_8_span_5_Template, 2, 0, "span", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](6, JukeboxComponent_div_8_span_6_Template, 2, 0, "span", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](7, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} if (rf & 2) {
    var audio_r2 = ctx.$implicit;
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", audio_r2 !== (ctx_r0.auditionPlayer == null ? null : ctx_r0.auditionPlayer.audio) || (ctx_r0.auditionPlayer == null ? null : ctx_r0.auditionPlayer.paused));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", audio_r2 === (ctx_r0.auditionPlayer == null ? null : ctx_r0.auditionPlayer.audio) && !(ctx_r0.auditionPlayer == null ? null : ctx_r0.auditionPlayer.paused));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", audio_r2 !== (ctx_r0.jukebox == null ? null : ctx_r0.jukebox.audio));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", audio_r2 === (ctx_r0.jukebox == null ? null : ctx_r0.jukebox.audio));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", audio_r2 === (ctx_r0.auditionPlayer == null ? null : ctx_r0.auditionPlayer.audio) && !(ctx_r0.auditionPlayer == null ? null : ctx_r0.auditionPlayer.paused));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", audio_r2 === (ctx_r0.jukebox == null ? null : ctx_r0.jukebox.audio));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](audio_r2.name);
} }
function JukeboxComponent_div_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1, "\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3055\u308C\u305F\u97F3\u697D\u30D5\u30A1\u30A4\u30EB\u306F\u3053\u3053\u306B\u8868\u793A\u3055\u308C\u307E\u3059\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} }
var JukeboxComponent = /** @class */ (function () {
    function JukeboxComponent(modalService, panelService, ngZone) {
        this.modalService = modalService;
        this.panelService = panelService;
        this.ngZone = ngZone;
        this.auditionPlayer = new _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_0__["AudioPlayer"]();
        this.lazyUpdateTimer = null;
    }
    Object.defineProperty(JukeboxComponent.prototype, "volume", {
        get: function () { return _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_0__["AudioPlayer"].volume; },
        set: function (volume) { _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_0__["AudioPlayer"].volume = volume; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(JukeboxComponent.prototype, "auditionVolume", {
        get: function () { return _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_0__["AudioPlayer"].auditionVolume; },
        set: function (auditionVolume) { _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_0__["AudioPlayer"].auditionVolume = auditionVolume; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(JukeboxComponent.prototype, "audios", {
        get: function () { return _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_1__["AudioStorage"].instance.audios.filter(function (audio) { return !audio.isHidden; }); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(JukeboxComponent.prototype, "jukebox", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get('Jukebox'); },
        enumerable: false,
        configurable: true
    });
    JukeboxComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.modalService.title = _this.panelService.title = 'ジュークボックス'; });
        this.auditionPlayer.volumeType = _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_0__["VolumeType"].AUDITION;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(this)
            .on('*', function (event) {
            if (event.eventName.startsWith('FILE_'))
                _this.lazyNgZoneUpdate();
        });
    };
    JukeboxComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(this);
        this.stop();
    };
    JukeboxComponent.prototype.play = function (audio) {
        this.auditionPlayer.play(audio);
    };
    JukeboxComponent.prototype.stop = function () {
        this.auditionPlayer.stop();
    };
    JukeboxComponent.prototype.playBGM = function (audio) {
        this.jukebox.play(audio.identifier, true);
    };
    JukeboxComponent.prototype.stopBGM = function (audio) {
        if (this.jukebox.audio === audio)
            this.jukebox.stop();
    };
    JukeboxComponent.prototype.handleFileSelect = function (event) {
        var input = event.target;
        var files = input.files;
        if (files.length)
            _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_2__["FileArchiver"].instance.load(files);
        input.value = '';
    };
    JukeboxComponent.prototype.lazyNgZoneUpdate = function () {
        var _this = this;
        if (this.lazyUpdateTimer !== null)
            return;
        this.lazyUpdateTimer = setTimeout(function () {
            _this.lazyUpdateTimer = null;
            _this.ngZone.run(function () { });
        }, 100);
    };
    JukeboxComponent.ɵfac = function JukeboxComponent_Factory(t) { return new (t || JukeboxComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_6__["ModalService"]), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_5__["NgZone"])); };
    JukeboxComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({ type: JukeboxComponent, selectors: [["app-jukebox"]], decls: 29, vars: 4, consts: [["type", "range", "min", "0", "max", "1", "step", "0.01", 3, "ngModel", "ngModelChange"], ["class", "box", 4, "ngFor", "ngForOf"], [4, "ngIf"], [1, "drop-zone"], [1, "material-icons", "large-font"], [1, "small-font"], ["type", "file", "multiple", "", "accept", "audio/*", 2, "display", "none", 3, "change"], [2, "font-size", "12px"], [1, "box"], [3, "disabled", "click", 4, "ngIf"], [3, "disabled", "click"]], template: function JukeboxComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1, "\u8A66\u8074\u97F3\u91CF\uFF1A");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](2, "input", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function JukeboxComponent_Template_input_ngModelChange_2_listener($event) { return ctx.auditionVolume = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4, "BGM\u97F3\u91CF\uFF1A");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](5, "input", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function JukeboxComponent_Template_input_ngModelChange_5_listener($event) { return ctx.volume = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](6, "hr");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](7, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](8, JukeboxComponent_div_8_Template, 9, 7, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](9, JukeboxComponent_div_9_Template, 2, 0, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](10, "label");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](11, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](12, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](13, "i", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](14, "playlist_add");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](15, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](16, "\u3053\u3053\u306B\u97F3\u697D\u3092\u30C9\u30ED\u30C3\u30D7");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](17, "div", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](18, "\u307E\u305F\u306F\u3053\u3053\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u9078\u629E");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](19, "input", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("change", function JukeboxComponent_Template_input_change_19_listener($event) { return ctx.handleFileSelect($event); });
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](20, "div", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](21, "br");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](22, "\uFF11\u30D5\u30A1\u30A4\u30EB\u306B\u3064\u304D10MB\u307E\u3067");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](23, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](24, "\u203B\u300C\u8A66\u8074\u300D\u306F\u81EA\u5206\u306E\u30B9\u30D4\u30FC\u30AB\u30FC\u3060\u3051\u3067\u97F3\u697D\u30921\u56DE\u518D\u751F\u3057\u307E\u3059\u3002");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](25, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](26, "\u203B\u300CBGM\u300D\u306F\u30EB\u30FC\u30E0\u5185\u306E\u5168\u54E1\u30671\u3064\u306E\u97F3\u697D\u3092\u30EB\u30FC\u30D7\u518D\u751F\u3057\u307E\u3059\u3002");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](27, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](28, "\u203B\u73FE\u884C\u30D0\u30FC\u30B8\u30E7\u30F3\u306E\u30BB\u30FC\u30D6\u30C7\u30FC\u30BF\uFF08zip\uFF09\u306B\u306F\u97F3\u697D\u30D5\u30A1\u30A4\u30EB\u306F\u542B\u307E\u308C\u307E\u305B\u3093\u3002\uFF08\u6BCE\u56DE\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u304C\u5FC5\u8981\u3067\u3059\uFF09");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", ctx.auditionVolume);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", ctx.volume);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", ctx.audios);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.audios.length < 1);
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_8__["RangeValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgModel"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgForOf"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgIf"]], styles: [".drop-zone[_ngcontent-%COMP%] {\n  border: 2px dashed #555;\n  border-radius: 5px;\n  padding: 25px;\n  text-align: center;\n  font: 24px bold 'Vollkorn';\n  color: #444;\n  cursor: pointer;\n}\n\n.large-font[_ngcontent-%COMP%] {\n  font-size: 64px;\n}\n\n.small-font[_ngcontent-%COMP%] {\n  font-size: 12px;\n}\n\n.box[_ngcontent-%COMP%] {\n  border-bottom:1px dotted #888;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImp1a2Vib3guY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHVCQUF1QjtFQUd2QixrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLGtCQUFrQjtFQUNsQiwwQkFBMEI7RUFDMUIsV0FBVztFQUNYLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLDZCQUE2QjtBQUMvQiIsImZpbGUiOiJqdWtlYm94LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZHJvcC16b25lIHtcbiAgYm9yZGVyOiAycHggZGFzaGVkICM1NTU7XG4gIC1tb3otYm9yZGVyLXJhZGl1czogNXB4O1xuICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDVweDtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBwYWRkaW5nOiAyNXB4O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGZvbnQ6IDI0cHggYm9sZCAnVm9sbGtvcm4nO1xuICBjb2xvcjogIzQ0NDtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4ubGFyZ2UtZm9udCB7XG4gIGZvbnQtc2l6ZTogNjRweDtcbn1cblxuLnNtYWxsLWZvbnQge1xuICBmb250LXNpemU6IDEycHg7XG59XG5cbi5ib3gge1xuICBib3JkZXItYm90dG9tOjFweCBkb3R0ZWQgIzg4ODtcbn0iXX0= */"] });
    return JukeboxComponent;
}());



/***/ }),

/***/ "TzEH":
/*!***********************************************!*\
  !*** ./src/app/service/coordinate.service.ts ***!
  \***********************************************/
/*! exports provided: CoordinateService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CoordinateService", function() { return CoordinateService; });
/* harmony import */ var _udonarium_transform_transform__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/transform/transform */ "tRmd");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _pointer_device_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pointer-device.service */ "GPP8");



var CoordinateService = /** @class */ (function () {
    function CoordinateService(pointerDeviceService) {
        this.pointerDeviceService = pointerDeviceService;
        this.tabletopOriginElement = document.body;
    }
    CoordinateService.prototype.convertToLocal = function (pointer, element) {
        if (element === void 0) { element = document.body; }
        var transformer = new _udonarium_transform_transform__WEBPACK_IMPORTED_MODULE_0__["Transform"](element);
        var ray = transformer.globalToLocal(pointer.x, pointer.y, pointer.z ? pointer.z : 0);
        transformer.clear();
        return { x: ray.x, y: ray.y, z: ray.z };
    };
    CoordinateService.prototype.convertToGlobal = function (pointer, element) {
        if (element === void 0) { element = document.body; }
        var transformer = new _udonarium_transform_transform__WEBPACK_IMPORTED_MODULE_0__["Transform"](element);
        var ray = transformer.localToGlobal(pointer.x, pointer.y, pointer.z ? pointer.z : 0);
        transformer.clear();
        return { x: ray.x, y: ray.y, z: ray.z };
    };
    CoordinateService.prototype.convertLocalToLocal = function (pointer, from, to) {
        var transformer = new _udonarium_transform_transform__WEBPACK_IMPORTED_MODULE_0__["Transform"](from);
        var local = transformer.globalToLocal(pointer.x, pointer.y, pointer.z ? pointer.z : 0);
        var ray = transformer.localToLocal(local.x, local.y, 0, to);
        transformer.clear();
        return { x: ray.x, y: ray.y, z: ray.z };
    };
    CoordinateService.prototype.calcTabletopLocalCoordinate = function (coordinate, target) {
        if (coordinate === void 0) { coordinate = { x: this.pointerDeviceService.pointers[0].x, y: this.pointerDeviceService.pointers[0].y, z: 0 }; }
        if (target === void 0) { target = this.pointerDeviceService.targetElement; }
        if (target.contains(this.tabletopOriginElement)) {
            coordinate = this.convertToLocal(coordinate, this.tabletopOriginElement);
            coordinate.z = 0;
        }
        else {
            coordinate = this.convertLocalToLocal(coordinate, target, this.tabletopOriginElement);
        }
        return { x: coordinate.x, y: coordinate.y, z: 0 < coordinate.z ? coordinate.z : 0 };
    };
    CoordinateService.ɵfac = function CoordinateService_Factory(t) { return new (t || CoordinateService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵinject"](_pointer_device_service__WEBPACK_IMPORTED_MODULE_2__["PointerDeviceService"])); };
    CoordinateService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineInjectable"]({ token: CoordinateService, factory: CoordinateService.ɵfac, providedIn: 'root' });
    return CoordinateService;
}());



/***/ }),

/***/ "Umgr":
/*!**************************************************************!*\
  !*** ./src/app/component/game-table/game-table.component.ts ***!
  \**************************************************************/
/*! exports provided: GameTableComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameTableComponent", function() { return GameTableComponent; });
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_game_table__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/game-table */ "RDF6");
/* harmony import */ var component_game_table_setting_game_table_setting_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! component/game-table-setting/game-table-setting.component */ "zhae");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var _grid_line_render__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./grid-line-render */ "GEdf");
/* harmony import */ var _table_mouse_gesture__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./table-mouse-gesture */ "al1o");
/* harmony import */ var _table_touch_gesture__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./table-touch-gesture */ "5d7p");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var service_coordinate_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! service/coordinate.service */ "TzEH");
/* harmony import */ var service_image_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/image.service */ "Hvpu");
/* harmony import */ var service_tabletop_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! service/tabletop.service */ "Sdfd");
/* harmony import */ var service_tabletop_action_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! service/tabletop-action.service */ "AFBa");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var component_terrain_terrain_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! component/terrain/terrain.component */ "4v+P");
/* harmony import */ var component_game_table_mask_game_table_mask_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! component/game-table-mask/game-table-mask.component */ "3v9A");
/* harmony import */ var component_text_note_text_note_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! component/text-note/text-note.component */ "7AbD");
/* harmony import */ var directive_tooltip_directive__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! directive/tooltip.directive */ "ts4F");
/* harmony import */ var component_card_stack_card_stack_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! component/card-stack/card-stack.component */ "tLw4");
/* harmony import */ var component_card_card_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! component/card/card.component */ "4fXm");
/* harmony import */ var component_dice_symbol_dice_symbol_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! component/dice-symbol/dice-symbol.component */ "FREB");
/* harmony import */ var component_game_character_game_character_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! component/game-character/game-character.component */ "AHLi");
/* harmony import */ var component_peer_cursor_peer_cursor_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! component/peer-cursor/peer-cursor.component */ "gfSO");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");


























var _c0 = ["root"];
var _c1 = ["gameTable"];
var _c2 = ["gameObjects"];
var _c3 = ["gridCanvas"];
function GameTableComponent_terrain_11_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](0, "terrain", 17);
} if (rf & 2) {
    var terrain_r12 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("terrain", terrain_r12);
} }
function GameTableComponent_game_table_mask_12_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](0, "game-table-mask", 18);
} if (rf & 2) {
    var mask_r13 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("gameTableMask", mask_r13);
} }
var _c4 = function (a0) { return { "z-index": a0 }; };
function GameTableComponent_text_note_13_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](0, "text-note", 19);
} if (rf & 2) {
    var textNote_r14 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("textNote", textNote_r14)("appTooltip", textNote_r14)("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpureFunction1"](3, _c4, textNote_r14.zindex));
} }
var _c5 = function (a0, a1) { return { "z-index": a0, "transform": a1 }; };
function GameTableComponent_card_stack_14_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](0, "card-stack", 20);
} if (rf & 2) {
    var cardStack_r15 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("cardStack", cardStack_r15)("appTooltip", cardStack_r15)("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpureFunction2"](3, _c5, cardStack_r15.zindex, "translateZ(" + cardStack_r15.zindex * 0.001 + "px)"));
} }
function GameTableComponent_card_15_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](0, "card", 21);
} if (rf & 2) {
    var card_r16 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("card", card_r16)("appTooltip", card_r16)("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpureFunction2"](3, _c5, card_r16.zindex, "translateZ(" + card_r16.zindex * 0.001 + "px)"));
} }
function GameTableComponent_dice_symbol_16_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](0, "dice-symbol", 22);
} if (rf & 2) {
    var diceSymbol_r17 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("diceSymbol", diceSymbol_r17)("appTooltip", diceSymbol_r17);
} }
function GameTableComponent_game_character_17_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](0, "game-character", 23);
} if (rf & 2) {
    var character_r18 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("gameCharacter", character_r18)("appTooltip", character_r18);
} }
function GameTableComponent_peer_cursor_18_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](0, "peer-cursor", 24);
} if (rf & 2) {
    var cursor_r19 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("cursor", cursor_r19);
} }
var _c6 = function (a0, a1) { return [a0, a1]; };
var _c7 = function (a0) { return { "is-grabbing": a0 }; };
var GameTableComponent = /** @class */ (function () {
    function GameTableComponent(ngZone, contextMenuService, pointerDeviceService, coordinateService, imageService, tabletopService, tabletopActionService, modalService) {
        this.ngZone = ngZone;
        this.contextMenuService = contextMenuService;
        this.pointerDeviceService = pointerDeviceService;
        this.coordinateService = coordinateService;
        this.imageService = imageService;
        this.tabletopService = tabletopService;
        this.tabletopActionService = tabletopActionService;
        this.modalService = modalService;
        this.isTransformMode = false;
        this.viewPotisonX = 100;
        this.viewPotisonY = 0;
        this.viewPotisonZ = 0;
        this.viewRotateX = 50;
        this.viewRotateY = 0;
        this.viewRotateZ = 10;
        this.mouseGesture = null;
        this.touchGesture = null;
    }
    Object.defineProperty(GameTableComponent.prototype, "tableSelecter", {
        get: function () { return this.tabletopService.tableSelecter; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "currentTable", {
        get: function () { return this.tabletopService.currentTable; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "tableImage", {
        get: function () {
            return this.imageService.getSkeletonOr(this.currentTable.imageIdentifier);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "backgroundImage", {
        get: function () {
            return this.imageService.getEmptyOr(this.currentTable.backgroundImageIdentifier);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "backgroundFilterType", {
        get: function () {
            return this.currentTable.backgroundFilterType;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "isPointerDragging", {
        get: function () { return this.pointerDeviceService.isDragging; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "characters", {
        get: function () { return this.tabletopService.characters; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "tableMasks", {
        get: function () { return this.tabletopService.tableMasks; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "cards", {
        get: function () { return this.tabletopService.cards; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "cardStacks", {
        get: function () { return this.tabletopService.cardStacks; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "terrains", {
        get: function () { return this.tabletopService.terrains; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "textNotes", {
        get: function () { return this.tabletopService.textNotes; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "diceSymbols", {
        get: function () { return this.tabletopService.diceSymbols; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "peerCursors", {
        get: function () { return this.tabletopService.peerCursors; },
        enumerable: false,
        configurable: true
    });
    GameTableComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            if (event.data.identifier !== _this.currentTable.identifier && event.data.identifier !== _this.tableSelecter.identifier)
                return;
            console.log('UPDATE_GAME_OBJECT GameTableComponent ' + _this.currentTable.identifier);
            _this.setGameTableGrid(_this.currentTable.width, _this.currentTable.height, _this.currentTable.gridSize, _this.currentTable.gridType, _this.currentTable.gridColor);
        })
            .on('DRAG_LOCKED_OBJECT', function (event) {
            _this.isTransformMode = true;
            _this.pointerDeviceService.isDragging = false;
            var opacity = _this.tableSelecter.gridShow ? 1.0 : 0.0;
            _this.gridCanvas.nativeElement.style.opacity = opacity + '';
        });
        this.tabletopActionService.makeDefaultTable();
        this.tabletopActionService.makeDefaultTabletopObjects();
    };
    GameTableComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.initializeTableTouchGesture();
            _this.initializeTableMouseGesture();
        });
        this.cancelInput();
        this.setGameTableGrid(this.currentTable.width, this.currentTable.height, this.currentTable.gridSize, this.currentTable.gridType, this.currentTable.gridColor);
        this.setTransform(0, 0, 0, 0, 0, 0);
        this.coordinateService.tabletopOriginElement = this.gameObjects.nativeElement;
    };
    GameTableComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__["EventSystem"].unregister(this);
        this.mouseGesture.destroy();
        this.touchGesture.destroy();
    };
    GameTableComponent.prototype.initializeTableTouchGesture = function () {
        this.touchGesture = new _table_touch_gesture__WEBPACK_IMPORTED_MODULE_6__["TableTouchGesture"](this.rootElementRef.nativeElement, this.ngZone);
        this.touchGesture.onstart = this.onTableTouchStart.bind(this);
        this.touchGesture.onend = this.onTableTouchEnd.bind(this);
        this.touchGesture.ongesture = this.onTableTouchGesture.bind(this);
        this.touchGesture.ontransform = this.onTableTouchTransform.bind(this);
    };
    GameTableComponent.prototype.initializeTableMouseGesture = function () {
        this.mouseGesture = new _table_mouse_gesture__WEBPACK_IMPORTED_MODULE_5__["TableMouseGesture"](this.rootElementRef.nativeElement);
        this.mouseGesture.onstart = this.onTableMouseStart.bind(this);
        this.mouseGesture.onend = this.onTableMouseEnd.bind(this);
        this.mouseGesture.ontransform = this.onTableMouseTransform.bind(this);
    };
    GameTableComponent.prototype.onTableTouchStart = function () {
        this.mouseGesture.cancel();
    };
    GameTableComponent.prototype.onTableTouchEnd = function () {
        this.cancelInput();
    };
    GameTableComponent.prototype.onTableTouchGesture = function () {
        this.cancelInput();
    };
    GameTableComponent.prototype.onTableTouchTransform = function (transformX, transformY, transformZ, rotateX, rotateY, rotateZ, event, srcEvent) {
        var _this = this;
        if (!this.isTransformMode || document.body !== document.activeElement)
            return;
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu && this.contextMenuService.isShow) {
            this.ngZone.run(function () { return _this.contextMenuService.close(); });
        }
        if (srcEvent.cancelable)
            srcEvent.preventDefault();
        //
        var scale = (1000 + Math.abs(this.viewPotisonZ)) / 1000;
        transformX *= scale;
        transformY *= scale;
        if (80 < rotateX + this.viewRotateX)
            rotateX += 80 - (rotateX + this.viewRotateX);
        if (rotateX + this.viewRotateX < 0)
            rotateX += 0 - (rotateX + this.viewRotateX);
        if (750 < transformZ + this.viewPotisonZ)
            transformZ += 750 - (transformZ + this.viewPotisonZ);
        this.setTransform(transformX, transformY, transformZ, rotateX, rotateY, rotateZ);
    };
    GameTableComponent.prototype.onTableMouseStart = function (e) {
        if (e.target.contains(this.gameObjects.nativeElement) || e.button === 1 || e.button === 2) {
            this.isTransformMode = true;
        }
        else {
            this.isTransformMode = false;
            this.pointerDeviceService.isDragging = true;
            this.gridCanvas.nativeElement.style.opacity = 1.0 + '';
        }
        if (!document.activeElement.contains(e.target)) {
            this.removeSelectionRanges();
            this.removeFocus();
        }
    };
    GameTableComponent.prototype.onTableMouseEnd = function (e) {
        this.cancelInput();
    };
    GameTableComponent.prototype.onTableMouseTransform = function (transformX, transformY, transformZ, rotateX, rotateY, rotateZ, event, srcEvent) {
        var _this = this;
        if (!this.isTransformMode || document.body !== document.activeElement)
            return;
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu && this.contextMenuService.isShow) {
            this.ngZone.run(function () { return _this.contextMenuService.close(); });
        }
        if (srcEvent.cancelable)
            srcEvent.preventDefault();
        //
        var scale = (1000 + Math.abs(this.viewPotisonZ)) / 1000;
        transformX *= scale;
        transformY *= scale;
        this.setTransform(transformX, transformY, transformZ, rotateX, rotateY, rotateZ);
    };
    GameTableComponent.prototype.cancelInput = function () {
        this.mouseGesture.cancel();
        this.isTransformMode = true;
        this.pointerDeviceService.isDragging = false;
        var opacity = this.tableSelecter.gridShow ? 1.0 : 0.0;
        this.gridCanvas.nativeElement.style.opacity = opacity + '';
    };
    GameTableComponent.prototype.onContextMenu = function (e) {
        var _this = this;
        if (!document.activeElement.contains(this.gameObjects.nativeElement))
            return;
        e.preventDefault();
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu)
            return;
        var menuPosition = this.pointerDeviceService.pointers[0];
        var objectPosition = this.coordinateService.calcTabletopLocalCoordinate();
        var menuActions = [];
        Array.prototype.push.apply(menuActions, this.tabletopActionService.makeDefaultContextMenuActions(objectPosition));
        menuActions.push(service_context_menu_service__WEBPACK_IMPORTED_MODULE_3__["ContextMenuSeparator"]);
        menuActions.push({
            name: 'テーブル設定',
            action: function () {
                _this.modalService.open(component_game_table_setting_game_table_setting_component__WEBPACK_IMPORTED_MODULE_2__["GameTableSettingComponent"]);
            }
        });
        this.contextMenuService.open(menuPosition, menuActions, this.currentTable.name);
    };
    GameTableComponent.prototype.setTransform = function (transformX, transformY, transformZ, rotateX, rotateY, rotateZ) {
        this.viewRotateX += rotateX;
        this.viewRotateY += rotateY;
        this.viewRotateZ += rotateZ;
        this.viewPotisonX += transformX;
        this.viewPotisonY += transformY;
        this.viewPotisonZ += transformZ;
        this.gameTable.nativeElement.style.transform = 'translateZ(' + this.viewPotisonZ + 'px) translateY(' + this.viewPotisonY + 'px) translateX(' + this.viewPotisonX + 'px) rotateY(' + this.viewRotateY + 'deg) rotateX(' + this.viewRotateX + 'deg) rotateZ(' + this.viewRotateZ + 'deg) ';
    };
    GameTableComponent.prototype.setGameTableGrid = function (width, height, gridSize, gridType, gridColor) {
        if (gridSize === void 0) { gridSize = 50; }
        if (gridType === void 0) { gridType = _udonarium_game_table__WEBPACK_IMPORTED_MODULE_1__["GridType"].SQUARE; }
        if (gridColor === void 0) { gridColor = '#000000e6'; }
        this.gameTable.nativeElement.style.width = width * gridSize + 'px';
        this.gameTable.nativeElement.style.height = height * gridSize + 'px';
        var render = new _grid_line_render__WEBPACK_IMPORTED_MODULE_4__["GridLineRender"](this.gridCanvas.nativeElement);
        render.render(width, height, gridSize, gridType, gridColor);
        var opacity = this.tableSelecter.gridShow ? 1.0 : 0.0;
        this.gridCanvas.nativeElement.style.opacity = opacity + '';
    };
    GameTableComponent.prototype.removeSelectionRanges = function () {
        var selection = window.getSelection();
        if (!selection.isCollapsed) {
            selection.removeAllRanges();
        }
    };
    GameTableComponent.prototype.removeFocus = function () {
        if (document.activeElement instanceof HTMLElement) {
            document.activeElement.blur();
        }
    };
    GameTableComponent.prototype.trackByGameObject = function (index, gameObject) {
        return gameObject.identifier;
    };
    GameTableComponent.ɵfac = function GameTableComponent_Factory(t) { return new (t || GameTableComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_7__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_3__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_8__["PointerDeviceService"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](service_coordinate_service__WEBPACK_IMPORTED_MODULE_9__["CoordinateService"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](service_image_service__WEBPACK_IMPORTED_MODULE_10__["ImageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](service_tabletop_service__WEBPACK_IMPORTED_MODULE_11__["TabletopService"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](service_tabletop_action_service__WEBPACK_IMPORTED_MODULE_12__["TabletopActionService"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_13__["ModalService"])); };
    GameTableComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdefineComponent"]({ type: GameTableComponent, selectors: [["game-table"]], viewQuery: function GameTableComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵviewQuery"](_c0, 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵviewQuery"](_c1, 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵviewQuery"](_c2, 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵviewQuery"](_c3, 3);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵloadQuery"]()) && (ctx.rootElementRef = _t.first);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵloadQuery"]()) && (ctx.gameTable = _t.first);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵloadQuery"]()) && (ctx.gameObjects = _t.first);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵloadQuery"]()) && (ctx.gridCanvas = _t.first);
        } }, hostBindings: function GameTableComponent_HostBindings(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("contextmenu", function GameTableComponent_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });
        } }, decls: 19, vars: 33, consts: [[1, "background-image", "is-pointer-events-none", 3, "ngClass"], [1, "component", "is-fill", "is-perspective", 3, "ngClass"], ["root", ""], [1, "component-content", "is-fill", "is-3d"], ["gameTable", ""], ["id", "app-game-table", 1, "game-table", "table-image", "is-3d"], ["gameObjects", ""], [1, "grid-canvas", "is-fill", "is-pointer-events-none"], ["gridCanvas", ""], ["class", "is-3d", 3, "terrain", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["class", "is-3d", 3, "gameTableMask", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["class", "is-3d", 3, "textNote", "appTooltip", "ngStyle", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["class", "is-3d", 3, "cardStack", "appTooltip", "ngStyle", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["class", "is-3d", 3, "card", "appTooltip", "ngStyle", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["class", "is-3d", 3, "diceSymbol", "appTooltip", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["class", "is-3d", 3, "gameCharacter", "appTooltip", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["class", "is-3d", 3, "cursor", 4, "ngFor", "ngForOf", "ngForTrackBy"], [1, "is-3d", 3, "terrain"], [1, "is-3d", 3, "gameTableMask"], [1, "is-3d", 3, "textNote", "appTooltip", "ngStyle"], [1, "is-3d", 3, "cardStack", "appTooltip", "ngStyle"], [1, "is-3d", 3, "card", "appTooltip", "ngStyle"], [1, "is-3d", 3, "diceSymbol", "appTooltip"], [1, "is-3d", 3, "gameCharacter", "appTooltip"], [1, "is-3d", 3, "cursor"]], template: function GameTableComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](1, "safe");
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](2, "div", 1, 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](4, "div", 3, 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](6, "div", 5, 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](8, "safe");
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](9, "canvas", 7, 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](11, GameTableComponent_terrain_11_Template, 1, 1, "terrain", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](12, GameTableComponent_game_table_mask_12_Template, 1, 1, "game-table-mask", 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](13, GameTableComponent_text_note_13_Template, 1, 5, "text-note", 11);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](14, GameTableComponent_card_stack_14_Template, 1, 6, "card-stack", 12);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](15, GameTableComponent_card_15_Template, 1, 6, "card", 13);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](16, GameTableComponent_dice_symbol_16_Template, 1, 2, "dice-symbol", 14);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](17, GameTableComponent_game_character_17_Template, 1, 2, "game-character", 15);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](18, GameTableComponent_peer_cursor_18_Template, 1, 1, "peer-cursor", 16);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind2"](1, 22, "url(" + ctx.backgroundImage.url + ")", "style"));
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpureFunction2"](28, _c6, ctx.backgroundFilterType ? "is-filter" : "", ctx.backgroundFilterType));
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpureFunction1"](31, _c7, ctx.isPointerDragging));
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](4);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind2"](8, 25, "url(" + ctx.tableImage.url + ")", "style"));
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngForOf", ctx.terrains)("ngForTrackBy", ctx.trackByGameObject);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngForOf", ctx.tableMasks)("ngForTrackBy", ctx.trackByGameObject);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngForOf", ctx.textNotes)("ngForTrackBy", ctx.trackByGameObject);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngForOf", ctx.cardStacks)("ngForTrackBy", ctx.trackByGameObject);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngForOf", ctx.cards)("ngForTrackBy", ctx.trackByGameObject);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngForOf", ctx.diceSymbols)("ngForTrackBy", ctx.trackByGameObject);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngForOf", ctx.characters)("ngForTrackBy", ctx.trackByGameObject);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngForOf", ctx.peerCursors)("ngForTrackBy", ctx.trackByGameObject);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_14__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_14__["NgForOf"], component_terrain_terrain_component__WEBPACK_IMPORTED_MODULE_15__["TerrainComponent"], component_game_table_mask_game_table_mask_component__WEBPACK_IMPORTED_MODULE_16__["GameTableMaskComponent"], component_text_note_text_note_component__WEBPACK_IMPORTED_MODULE_17__["TextNoteComponent"], directive_tooltip_directive__WEBPACK_IMPORTED_MODULE_18__["TooltipDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_14__["NgStyle"], component_card_stack_card_stack_component__WEBPACK_IMPORTED_MODULE_19__["CardStackComponent"], component_card_card_component__WEBPACK_IMPORTED_MODULE_20__["CardComponent"], component_dice_symbol_dice_symbol_component__WEBPACK_IMPORTED_MODULE_21__["DiceSymbolComponent"], component_game_character_game_character_component__WEBPACK_IMPORTED_MODULE_22__["GameCharacterComponent"], component_peer_cursor_peer_cursor_component__WEBPACK_IMPORTED_MODULE_23__["PeerCursorComponent"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_24__["SafePipe"]], styles: [".is-grabbing[_ngcontent-%COMP%] {\n  cursor: grabbing;\n}\n\n.is-perspective[_ngcontent-%COMP%] {\n  perspective: 1000px;\n}\n\n.is-fill[_ngcontent-%COMP%] {\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  margin: auto;\n}\n\n.is-3d[_ngcontent-%COMP%] {\n  transform-style: preserve-3d;\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n  position: absolute;\n}\n\n.is-pointer-events-none[_ngcontent-%COMP%] {\n  pointer-events: none;\n}\n\n.component[_ngcontent-%COMP%] {\n  -webkit-user-select: none;\n  user-select: none;\n  -moz-user-drag: none;\n  -webkit-user-drag: none;\n\n  touch-action: manipulation;\n\n  height: 100%;\n  width: 100%;\n\n  overflow: hidden;\n}\n\n.component-content[_ngcontent-%COMP%] {\n  height: 2000px;\n  width: 2000px;\n}\n\n.grid-canvas[_ngcontent-%COMP%] {\n  opacity: 0.0;\n  transform: translateZ(0.15px);\n  transition: 0.3s ease-out;\n\n  -webkit-backface-visibility: hidden;\n\n          backface-visibility: hidden;\n}\n\n.game-table[_ngcontent-%COMP%] {\n  height: 100%;\n  width: 100%;\n}\n\n.table-image[_ngcontent-%COMP%] {\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background-repeat: no-repeat;\n  background-size: 100% 100%;\n}\n\n.background-image[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  margin: -5px;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n}\n\n.background-image.is-filter[_ngcontent-%COMP%] {\n  will-change: filter;\n}\n\n.background-image.is-filter.white[_ngcontent-%COMP%] {\n  filter: blur(5px);\n}\n\n.background-image.is-filter.black[_ngcontent-%COMP%] {\n  filter: blur(5px);\n}\n\n.background-image.is-filter[_ngcontent-%COMP%]::after {\n  display: block;\n  content: '';\n  width: 100%;\n  height: 100%;\n}\n\n.background-image.is-filter.white[_ngcontent-%COMP%]::after {\n  background-color: hsl(0, 0%, 97%);\n  filter: opacity(0.2);\n}\n\n.background-image.is-filter.black[_ngcontent-%COMP%]::after {\n  background-color: hsl(0, 0%, 10%);\n  filter: opacity(0.3);\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUtdGFibGUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUdFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUVFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxrQkFBa0I7RUFDbEIsTUFBTTtFQUNOLE9BQU87RUFDUCxTQUFTO0VBQ1QsUUFBUTtFQUNSLFlBQVk7QUFDZDs7QUFFQTtFQUVFLDRCQUE0QjtFQUM1QixtQ0FBMkI7VUFBM0IsMkJBQTJCO0VBQzNCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUVFLHlCQUF5QjtFQUN6QixpQkFBaUI7RUFDakIsb0JBQW9CO0VBQ3BCLHVCQUF1Qjs7RUFFdkIsMEJBQTBCOztFQUUxQixZQUFZO0VBQ1osV0FBVzs7RUFFWCxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsYUFBYTtBQUNmOztBQUVBO0VBQ0UsWUFBWTtFQUNaLDZCQUE2QjtFQUk3Qix5QkFBeUI7O0VBRXpCLG1DQUEyQjs7VUFBM0IsMkJBQTJCO0FBQzdCOztBQUVBO0VBQ0UsWUFBWTtFQUNaLFdBQVc7QUFDYjs7QUFFQTtFQUNFLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFDM0Isa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixXQUFXO0VBQ1gsNEJBQTRCO0VBQzVCLDBCQUEwQjtBQUM1Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixNQUFNO0VBQ04sT0FBTztFQUNQLFNBQVM7RUFDVCxRQUFRO0VBQ1IsWUFBWTtFQUNaLDRCQUE0QjtFQUM1QiwyQkFBMkI7RUFDM0Isc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsY0FBYztFQUNkLFdBQVc7RUFDWCxXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBO0VBQ0UsaUNBQWlDO0VBQ2pDLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLGlDQUFpQztFQUNqQyxvQkFBb0I7QUFDdEIiLCJmaWxlIjoiZ2FtZS10YWJsZS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmlzLWdyYWJiaW5nIHtcbiAgY3Vyc29yOiAtbW96LWdyYWJiaW5nO1xuICBjdXJzb3I6IC13ZWJraXQtZ3JhYmJpbmc7XG4gIGN1cnNvcjogZ3JhYmJpbmc7XG59XG5cbi5pcy1wZXJzcGVjdGl2ZSB7XG4gIC13ZWJraXQtcGVyc3BlY3RpdmU6IDEwMDBweDtcbiAgcGVyc3BlY3RpdmU6IDEwMDBweDtcbn1cblxuLmlzLWZpbGwge1xuICBkaXNwbGF5OiBibG9jaztcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgcmlnaHQ6IDA7XG4gIG1hcmdpbjogYXV0bztcbn1cblxuLmlzLTNkIHtcbiAgLXdlYmtpdC10cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xuICB0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbn1cblxuLmlzLXBvaW50ZXItZXZlbnRzLW5vbmUge1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbn1cblxuLmNvbXBvbmVudCB7XG4gIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XG4gIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XG4gIHVzZXItc2VsZWN0OiBub25lO1xuICAtbW96LXVzZXItZHJhZzogbm9uZTtcbiAgLXdlYmtpdC11c2VyLWRyYWc6IG5vbmU7XG5cbiAgdG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247XG5cbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcblxuICBvdmVyZmxvdzogaGlkZGVuO1xufVxuXG4uY29tcG9uZW50LWNvbnRlbnQge1xuICBoZWlnaHQ6IDIwMDBweDtcbiAgd2lkdGg6IDIwMDBweDtcbn1cblxuLmdyaWQtY2FudmFzIHtcbiAgb3BhY2l0eTogMC4wO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVooMC4xNXB4KTtcbiAgLXdlYmtpdC10cmFuc2l0aW9uOiAwLjNzIGVhc2Utb3V0O1xuICAtbW96LXRyYW5zaXRpb246IDAuM3MgZWFzZS1vdXQ7XG4gIC1vLXRyYW5zaXRpb246IDAuM3MgZWFzZS1vdXQ7XG4gIHRyYW5zaXRpb246IDAuM3MgZWFzZS1vdXQ7XG5cbiAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuO1xufVxuXG4uZ2FtZS10YWJsZSB7XG4gIGhlaWdodDogMTAwJTtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi50YWJsZS1pbWFnZSB7XG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHdpZHRoOiAxMDAlO1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXNpemU6IDEwMCUgMTAwJTtcbn1cblxuLmJhY2tncm91bmQtaW1hZ2Uge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgYm90dG9tOiAwO1xuICByaWdodDogMDtcbiAgbWFyZ2luOiAtNXB4O1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7XG4gIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XG59XG5cbi5iYWNrZ3JvdW5kLWltYWdlLmlzLWZpbHRlciB7XG4gIHdpbGwtY2hhbmdlOiBmaWx0ZXI7XG59XG5cbi5iYWNrZ3JvdW5kLWltYWdlLmlzLWZpbHRlci53aGl0ZSB7XG4gIGZpbHRlcjogYmx1cig1cHgpO1xufVxuXG4uYmFja2dyb3VuZC1pbWFnZS5pcy1maWx0ZXIuYmxhY2sge1xuICBmaWx0ZXI6IGJsdXIoNXB4KTtcbn1cblxuLmJhY2tncm91bmQtaW1hZ2UuaXMtZmlsdGVyOjphZnRlciB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBjb250ZW50OiAnJztcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbn1cblxuLmJhY2tncm91bmQtaW1hZ2UuaXMtZmlsdGVyLndoaXRlOjphZnRlciB7XG4gIGJhY2tncm91bmQtY29sb3I6IGhzbCgwLCAwJSwgOTclKTtcbiAgZmlsdGVyOiBvcGFjaXR5KDAuMik7XG59XG5cbi5iYWNrZ3JvdW5kLWltYWdlLmlzLWZpbHRlci5ibGFjazo6YWZ0ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBoc2woMCwgMCUsIDEwJSk7XG4gIGZpbHRlcjogb3BhY2l0eSgwLjMpO1xufVxuIl19 */"] });
    return GameTableComponent;
}());



/***/ }),

/***/ "Uvtn":
/*!**********************************************!*\
  !*** ./src/app/service/save-data.service.ts ***!
  \**********************************************/
/*! exports provided: SaveDataService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SaveDataService", function() { return SaveDataService; });
/* harmony import */ var _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/chat-tab-list */ "YZvQ");
/* harmony import */ var _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/file-storage/file-archiver */ "wBZT");
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _udonarium_core_file_storage_mime_type__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/file-storage/mime-type */ "NVMP");
/* harmony import */ var _udonarium_core_system_util_promise_queue__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/system/util/promise-queue */ "w5+g");
/* harmony import */ var _udonarium_core_system_util_xml_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/system/util/xml-util */ "cfGu");
/* harmony import */ var _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/data-summary-setting */ "zP96");
/* harmony import */ var _udonarium_room__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @udonarium/room */ "Dmu7");
/* harmony import */ var vkbeautify__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! vkbeautify */ "NH6c");
/* harmony import */ var vkbeautify__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(vkbeautify__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/core */ "fXoL");











var SaveDataService = /** @class */ (function () {
    function SaveDataService(ngZone) {
        this.ngZone = ngZone;
    }
    SaveDataService.prototype.saveRoomAsync = function (fileName, updateCallback) {
        var _this = this;
        if (fileName === void 0) { fileName = 'ルームデータ'; }
        return SaveDataService.queue.add(function (resolve, reject) { return resolve(_this._saveRoomAsync(fileName, updateCallback)); });
    };
    SaveDataService.prototype._saveRoomAsync = function (fileName, updateCallback) {
        if (fileName === void 0) { fileName = 'ルームデータ'; }
        var files = [];
        var roomXml = this.convertToXml(new _udonarium_room__WEBPACK_IMPORTED_MODULE_8__["Room"]());
        var chatXml = this.convertToXml(_udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_0__["ChatTabList"].instance);
        var summarySetting = this.convertToXml(_udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_7__["DataSummarySetting"].instance);
        files.push(new File([roomXml], 'data.xml', { type: 'text/plain' }));
        files.push(new File([chatXml], 'chat.xml', { type: 'text/plain' }));
        files.push(new File([summarySetting], 'summary.xml', { type: 'text/plain' }));
        files = files.concat(this.searchImageFiles(roomXml));
        files = files.concat(this.searchImageFiles(chatXml));
        return this.saveAsync(files, this.appendTimestamp(fileName), updateCallback);
    };
    SaveDataService.prototype.saveGameObjectAsync = function (gameObject, fileName, updateCallback) {
        var _this = this;
        if (fileName === void 0) { fileName = 'xml_data'; }
        return SaveDataService.queue.add(function (resolve, reject) { return resolve(_this._saveGameObjectAsync(gameObject, fileName, updateCallback)); });
    };
    SaveDataService.prototype._saveGameObjectAsync = function (gameObject, fileName, updateCallback) {
        if (fileName === void 0) { fileName = 'xml_data'; }
        var files = [];
        var xml = this.convertToXml(gameObject);
        files.push(new File([xml], 'data.xml', { type: 'text/plain' }));
        files = files.concat(this.searchImageFiles(xml));
        return this.saveAsync(files, this.appendTimestamp(fileName), updateCallback);
    };
    SaveDataService.prototype.saveAsync = function (files, zipName, updateCallback) {
        var _this = this;
        var progresPercent = -1;
        return _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_1__["FileArchiver"].instance.saveAsync(files, zipName, function (meta) {
            var percent = meta.percent | 0;
            if (percent <= progresPercent)
                return;
            progresPercent = percent;
            _this.ngZone.run(function () { return updateCallback(progresPercent); });
        });
    };
    SaveDataService.prototype.convertToXml = function (gameObject) {
        var xmlDeclaration = '<?xml version="1.0" encoding="UTF-8"?>';
        return xmlDeclaration + '\n' + vkbeautify__WEBPACK_IMPORTED_MODULE_9__["xml"](gameObject.toXml(), 2);
    };
    SaveDataService.prototype.searchImageFiles = function (xml) {
        var xmlElement = _udonarium_core_system_util_xml_util__WEBPACK_IMPORTED_MODULE_6__["XmlUtil"].xml2element(xml);
        var files = [];
        if (!xmlElement)
            return files;
        var images = {};
        var imageElements = xmlElement.ownerDocument.querySelectorAll('*[type="image"]');
        for (var i = 0; i < imageElements.length; i++) {
            var identifier = imageElements[i].innerHTML;
            images[identifier] = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance.get(identifier);
        }
        imageElements = xmlElement.ownerDocument.querySelectorAll('*[imageIdentifier], *[backgroundImageIdentifier]');
        for (var i = 0; i < imageElements.length; i++) {
            var identifier = imageElements[i].getAttribute('imageIdentifier');
            if (identifier)
                images[identifier] = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance.get(identifier);
            var backgroundImageIdentifier = imageElements[i].getAttribute('backgroundImageIdentifier');
            if (backgroundImageIdentifier)
                images[backgroundImageIdentifier] = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance.get(backgroundImageIdentifier);
        }
        for (var identifier in images) {
            var image = images[identifier];
            if (image && image.state === _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__["ImageState"].COMPLETE) {
                files.push(new File([image.blob], image.identifier + '.' + _udonarium_core_file_storage_mime_type__WEBPACK_IMPORTED_MODULE_4__["MimeType"].extension(image.blob.type), { type: image.blob.type }));
            }
        }
        return files;
    };
    SaveDataService.prototype.appendTimestamp = function (fileName) {
        var date = new Date();
        var year = date.getFullYear();
        var month = ('00' + (date.getMonth() + 1)).slice(-2);
        var day = ('00' + date.getDate()).slice(-2);
        var hours = ('00' + date.getHours()).slice(-2);
        var minutes = ('00' + date.getMinutes()).slice(-2);
        return fileName + ("_" + year + "-" + month + "-" + day + "_" + hours + minutes);
    };
    SaveDataService.queue = new _udonarium_core_system_util_promise_queue__WEBPACK_IMPORTED_MODULE_5__["PromiseQueue"]('SaveDataServiceQueue');
    SaveDataService.ɵfac = function SaveDataService_Factory(t) { return new (t || SaveDataService)(_angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵinject"](_angular_core__WEBPACK_IMPORTED_MODULE_10__["NgZone"])); };
    SaveDataService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵdefineInjectable"]({ token: SaveDataService, factory: SaveDataService.ɵfac, providedIn: 'root' });
    return SaveDataService;
}());



/***/ }),

/***/ "VnuA":
/*!**********************************************************!*\
  !*** ./src/app/component/ui-panel/ui-panel.component.ts ***!
  \**********************************************************/
/*! exports provided: UIPanelComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UIPanelComponent", function() { return UIPanelComponent; });
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/animations */ "R0Ic");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var directive_draggable_directive__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! directive/draggable.directive */ "z2Us");
/* harmony import */ var directive_resizable_directive__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! directive/resizable.directive */ "pCHt");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ "ofXK");









var _c0 = ["draggablePanel"];
var _c1 = ["scrollablePanel"];
var _c2 = ["content"];
var _c3 = function (a0) { return { "pointer-events-none": a0 }; };
var _c4 = ["*"];
var UIPanelComponent = /** @class */ (function () {
    function UIPanelComponent(panelService, pointerDeviceService) {
        this.panelService = panelService;
        this.pointerDeviceService = pointerDeviceService;
        this.preLeft = 0;
        this.preTop = 0;
        this.preWidth = 100;
        this.preHeight = 100;
        this.isFullScreen = false;
    }
    Object.defineProperty(UIPanelComponent.prototype, "title", {
        get: function () { return this.panelService.title; },
        set: function (title) { this.panelService.title = title; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIPanelComponent.prototype, "left", {
        get: function () { return this.panelService.left; },
        set: function (left) { this.panelService.left = left; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIPanelComponent.prototype, "top", {
        get: function () { return this.panelService.top; },
        set: function (top) { this.panelService.top = top; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIPanelComponent.prototype, "width", {
        get: function () { return this.panelService.width; },
        set: function (width) { this.panelService.width = width; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIPanelComponent.prototype, "height", {
        get: function () { return this.panelService.height; },
        set: function (height) { this.panelService.height = height; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIPanelComponent.prototype, "isPointerDragging", {
        get: function () { return this.pointerDeviceService.isDragging; },
        enumerable: false,
        configurable: true
    });
    UIPanelComponent.prototype.ngOnInit = function () {
        this.panelService.scrollablePanel = this.scrollablePanel.nativeElement;
    };
    UIPanelComponent.prototype.toggleFullScreen = function () {
        var panel = this.draggablePanel.nativeElement;
        if (panel.offsetLeft <= 0
            && panel.offsetTop <= 0
            && panel.offsetWidth >= window.innerWidth
            && panel.offsetHeight >= window.innerHeight) {
            this.isFullScreen = false;
        }
        else {
            this.isFullScreen = true;
        }
        if (this.isFullScreen) {
            this.preLeft = panel.offsetLeft;
            this.preTop = panel.offsetTop;
            this.preWidth = panel.offsetWidth;
            this.preHeight = panel.offsetHeight;
            this.left = 0;
            this.top = 0;
            this.width = window.innerWidth;
            this.height = window.innerHeight;
            panel.style.left = this.left + 'px';
            panel.style.top = this.top + 'px';
            panel.style.width = this.width + 'px';
            panel.style.height = this.height + 'px';
        }
        else {
            this.left = this.preLeft;
            this.top = this.preTop;
            this.width = this.preWidth;
            this.height = this.preHeight;
        }
    };
    UIPanelComponent.prototype.close = function () {
        if (this.panelService)
            this.panelService.close();
    };
    UIPanelComponent.ɵfac = function UIPanelComponent_Factory(t) { return new (t || UIPanelComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_2__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_3__["PointerDeviceService"])); };
    UIPanelComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: UIPanelComponent, selectors: [["ui-panel"]], viewQuery: function UIPanelComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵviewQuery"](_c0, 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵviewQuery"](_c1, 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵviewQuery"](_c2, 3, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"]);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.draggablePanel = _t.first);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.scrollablePanel = _t.first);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.content = _t.first);
        } }, inputs: { title: "title", left: "left", top: "top", width: "width", height: "height" }, features: [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵProvidersFeature"]([
                service_panel_service__WEBPACK_IMPORTED_MODULE_2__["PanelService"],
            ])], ngContentSelectors: _c4, decls: 16, vars: 14, consts: [["appDraggable", "", "appResizable", "", 1, "draggable-panel", 3, "ngClass", "draggable.stack"], ["draggablePanel", ""], [1, "title"], [1, "title-button"], [3, "click"], [1, "material-icons", 2, "font-size", "14px"], [1, "scrollable-panel"], ["scrollablePanel", ""], ["content", ""]], template: function UIPanelComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojectionDef"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0, 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "button", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function UIPanelComponent_Template_button_click_4_listener() { return ctx.toggleFullScreen(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "i", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](6, "fullscreen");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "button", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function UIPanelComponent_Template_button_click_7_listener() { return ctx.close(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "i", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](9, "close");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](10);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](11, "div", 6, 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojection"](13);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](14, "div", null, 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleProp"]("left", ctx.left, "px")("top", ctx.top, "px")("width", ctx.width, "px")("height", ctx.height, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("@flyInOut", "in")("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](12, _c3, ctx.isPointerDragging))("draggable.stack", ".draggable-panel");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](10);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", ctx.panelService.title, " ");
        } }, directives: [directive_draggable_directive__WEBPACK_IMPORTED_MODULE_4__["DraggableDirective"], directive_resizable_directive__WEBPACK_IMPORTED_MODULE_5__["ResizableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_6__["NgClass"]], styles: [".draggable-panel[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  overflow: visible;\n  position: absolute;\n\n  color: #444;\n  background: linear-gradient(-30deg, rgba(240,218,189, 0.9), rgba(255, 244, 232, 0.9));\n  border: solid 1px #999;\n\n  padding: 0px;\n  top: 200px;\n\n  height: 200px;\n  width: 300px;\n  max-height: 100%;\n  max-width: 100%;\n}\n\n.scrollable-panel[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  overflow: auto;\n  position: absolute;\n  top: 25px;\n  bottom: 0;\n  width: 100%;\n  padding: 8px;\n  overscroll-behavior: contain;\n  -webkit-overflow-scrolling: touch;\n}\n\n.title[_ngcontent-%COMP%] {\n  overflow: hidden;\n  white-space: nowrap;\n  box-sizing: border-box;\n  font-size: 12px;\n  height: 25px;\n  padding: 2px 5px;\n  width: 100%;\n  background-color: #555;\n  color: #CCC;\n  -webkit-user-select: none;\n          user-select: none;\n}\n\n.title-button[_ngcontent-%COMP%] {\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  background: none;\n  border: none;\n  border-radius: 0;\n  outline: none;\n  color: #CCC;\n}\n\n.pointer-events-none[_ngcontent-%COMP%] {\n  pointer-events: none;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVpLXBhbmVsLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxzQkFBc0I7RUFDdEIsaUJBQWlCO0VBQ2pCLGtCQUFrQjs7RUFFbEIsV0FBVztFQUNYLHFGQUFxRjtFQUNyRixzQkFBc0I7O0VBRXRCLFlBQVk7RUFDWixVQUFVOztFQUVWLGFBQWE7RUFDYixZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsY0FBYztFQUNkLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsU0FBUztFQUNULFdBQVc7RUFDWCxZQUFZO0VBQ1osNEJBQTRCO0VBQzVCLGlDQUFpQztBQUNuQzs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsc0JBQXNCO0VBQ3RCLGVBQWU7RUFDZixZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIsV0FBVztFQUNYLHlCQUFpQjtVQUFqQixpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsUUFBUTtFQUNSLE1BQU07QUFDUjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLGFBQWE7RUFDYixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEIiLCJmaWxlIjoidWktcGFuZWwuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5kcmFnZ2FibGUtcGFuZWwge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuXG4gIGNvbG9yOiAjNDQ0O1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoLTMwZGVnLCByZ2JhKDI0MCwyMTgsMTg5LCAwLjkpLCByZ2JhKDI1NSwgMjQ0LCAyMzIsIDAuOSkpO1xuICBib3JkZXI6IHNvbGlkIDFweCAjOTk5O1xuXG4gIHBhZGRpbmc6IDBweDtcbiAgdG9wOiAyMDBweDtcblxuICBoZWlnaHQ6IDIwMHB4O1xuICB3aWR0aDogMzAwcHg7XG4gIG1heC1oZWlnaHQ6IDEwMCU7XG4gIG1heC13aWR0aDogMTAwJTtcbn1cblxuLnNjcm9sbGFibGUtcGFuZWwge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBvdmVyZmxvdzogYXV0bztcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDI1cHg7XG4gIGJvdHRvbTogMDtcbiAgd2lkdGg6IDEwMCU7XG4gIHBhZGRpbmc6IDhweDtcbiAgb3ZlcnNjcm9sbC1iZWhhdmlvcjogY29udGFpbjtcbiAgLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6IHRvdWNoO1xufVxuXG4udGl0bGUge1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBmb250LXNpemU6IDEycHg7XG4gIGhlaWdodDogMjVweDtcbiAgcGFkZGluZzogMnB4IDVweDtcbiAgd2lkdGg6IDEwMCU7XG4gIGJhY2tncm91bmQtY29sb3I6ICM1NTU7XG4gIGNvbG9yOiAjQ0NDO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbn1cblxuLnRpdGxlLWJ1dHRvbiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgcmlnaHQ6IDA7XG4gIHRvcDogMDtcbn1cblxuLnRpdGxlIGJ1dHRvbiB7XG4gIGJhY2tncm91bmQ6IG5vbmU7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm9yZGVyLXJhZGl1czogMDtcbiAgb3V0bGluZTogbm9uZTtcbiAgY29sb3I6ICNDQ0M7XG59XG5cbi5wb2ludGVyLWV2ZW50cy1ub25lIHtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59Il19 */"], data: { animation: [
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('flyInOut', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('100ms ease-out', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale(0.8, 0.8)', opacity: '0', offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale(1.0, 1.0)', opacity: '1', offset: 1.0 })
                        ]))
                    ]),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => void', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(100, Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale(0, 0)' }))
                    ])
                ])
            ] } });
    return UIPanelComponent;
}());



/***/ }),

/***/ "WeD8":
/*!************************************!*\
  !*** ./src/app/class/text-note.ts ***!
  \************************************/
/*! exports provided: TextNote */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextNote", function() { return TextNote; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _data_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./data-element */ "gkrD");
/* harmony import */ var _tabletop_object__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tabletop-object */ "e8gA");
/* harmony import */ var _tabletop_object_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./tabletop-object-util */ "g6Hf");





var TextNote = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(TextNote, _super);
    function TextNote() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.rotate = 0;
        _this.zindex = 0;
        _this.password = '';
        return _this;
    }
    TextNote_1 = TextNote;
    Object.defineProperty(TextNote.prototype, "width", {
        get: function () { return this.getCommonValue('width', 1); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNote.prototype, "height", {
        get: function () { return this.getCommonValue('height', 1); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNote.prototype, "fontSize", {
        get: function () { return this.getCommonValue('fontsize', 1); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNote.prototype, "title", {
        get: function () { return this.getCommonValue('title', ''); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNote.prototype, "text", {
        get: function () { return this.getCommonValue('text', ''); },
        set: function (text) { this.setCommonValue('text', text); },
        enumerable: false,
        configurable: true
    });
    TextNote.prototype.toTopmost = function () {
        Object(_tabletop_object_util__WEBPACK_IMPORTED_MODULE_4__["moveToTopmost"])(this);
    };
    TextNote.create = function (title, text, fontSize, width, height, identifier) {
        if (fontSize === void 0) { fontSize = 16; }
        if (width === void 0) { width = 1; }
        if (height === void 0) { height = 1; }
        var object = identifier ? new TextNote_1(identifier) : new TextNote_1();
        object.createDataElements();
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('width', width, {}, 'width_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('height', height, {}, 'height_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('fontsize', fontSize, {}, 'fontsize_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('title', title, {}, 'title_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('text', text, { type: 'note', currentValue: text }, 'text_' + object.identifier));
        object.initialize();
        return object;
    };
    var TextNote_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], TextNote.prototype, "rotate", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], TextNote.prototype, "zindex", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], TextNote.prototype, "password", void 0);
    TextNote = TextNote_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('text-note')
    ], TextNote);
    return TextNote;
}(_tabletop_object__WEBPACK_IMPORTED_MODULE_3__["TabletopObject"]));



/***/ }),

/***/ "Wiwm":
/*!**********************************************************!*\
  !*** ./src/app/component/chat-tab/chat-tab.component.ts ***!
  \**********************************************************/
/*! exports provided: ChatTabComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatTabComponent", function() { return ChatTabComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_chat_message__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/chat-message */ "edKV");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_core_system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/system/util/resettable-timeout */ "9ht1");
/* harmony import */ var _udonarium_core_system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/system/util/zero-timeout */ "eS09");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var component_chat_message_chat_message_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! component/chat-message/chat-message.component */ "KUN8");











var _c0 = ["logContainer"];
var _c1 = ["messageContainer"];
function ChatTabComponent_ng_container_4_ng_container_1_chat_message_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "chat-message", 7);
} if (rf & 2) {
    var chatMessage_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("chatMessage", chatMessage_r5);
} }
function ChatTabComponent_ng_container_4_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, ChatTabComponent_ng_container_4_ng_container_1_chat_message_1_Template, 1, 1, "chat-message", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var chatMessage_r5 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", chatMessage_r5.isDisplayable);
} }
function ChatTabComponent_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, ChatTabComponent_ng_container_4_ng_container_1_Template, 2, 1, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r2.chatMessages)("ngForTrackBy", ctx_r2.trackByChatMessage);
} }
function ChatTabComponent_ng_container_5_chat_message_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "chat-message", 7);
} if (rf & 2) {
    var chatMessage_r9 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("chatMessage", chatMessage_r9);
} }
function ChatTabComponent_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, ChatTabComponent_ng_container_5_chat_message_1_Template, 1, 1, "chat-message", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r3.sampleMessages);
} }
var ua = window.navigator.userAgent.toLowerCase();
var isiOS = ua.indexOf('iphone') > -1 || ua.indexOf('ipad') > -1 || ua.indexOf('macintosh') > -1 && 'ontouchend' in document;
var ChatTabComponent = /** @class */ (function () {
    function ChatTabComponent(ngZone, changeDetector, panelService) {
        var _this = this;
        this.ngZone = ngZone;
        this.changeDetector = changeDetector;
        this.panelService = panelService;
        this.sampleMessages = [
            { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: 'チュートリアル', text: 'サーバーを使用しないTRPGオンセツールです。参加者同士で接続し、コマや画像ファイルなどを同期します。' },
            { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: 'チュートリアル', text: '全てのデータが各参加者のブラウザ内にあるため、ルームの状態を次回に持ち越したい場合は、必ず「保存」を実行してセーブデータ（zip）を生成してください。保存したzipの読み込みはブラウザ画面へのファイルドロップで行えます。' },
            { from: 'System', to: '???', timestamp: 0, imageIdentifier: '', tag: '', name: 'チュートリアル > プレイヤー', text: 'ダイレクトメッセージ（秘密会話）はセーブデータに記録されません。' },
            { from: 'System', to: '???', timestamp: 0, imageIdentifier: '', tag: '', name: 'チュートリアル > プレイヤー', text: 'また、過去のダイレクトメッセージはあなたのIDが更新されると同じルーム内であっても見えなくなります。注意してください。' },
            { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: 'チュートリアル', text: '動作推奨環境はデスクトップChromeです。今のところ、スマホからだと上手く操作できません。' },
            { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: 'チュートリアル', text: 'チュートリアルは以上です。このチュートリアルは最初のチャットを入力すると非表示になります。' },
            { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: '秘密のことばについて', text: '/cb あたなの好きなお寿司はマグロですか？' },
        ];
        this.topTimestamp = 0;
        this.botomTimestamp = 0;
        this.needUpdate = true;
        this.topElm = null;
        this.bottomElm = null;
        this.topElmBox = null;
        this.bottomElmBox = null;
        this.topIndex = 0;
        this.bottomIndex = 0;
        this.minMessageHeight = 61;
        this.preScrollTop = 0;
        this.scrollSpeed = 0;
        this._chatMessages = [];
        this.scrollEventShortTimer = null;
        this.scrollEventLongTimer = null;
        this.addMessageEventTimer = null;
        this.callbackOnScroll = function () { return _this.onScroll(); };
        this.callbackOnScrollToBottom = function () { return _this.resetMessages(); };
        this.onAddMessage = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
    }
    Object.defineProperty(ChatTabComponent.prototype, "chatMessages", {
        get: function () {
            if (!this.chatTab)
                return [];
            if (this.needUpdate) {
                this.needUpdate = false;
                var chatMessages = this.chatTab ? this.chatTab.chatMessages : [];
                this.adjustIndex();
                this._chatMessages = chatMessages.slice(this.topIndex, this.bottomIndex + 1);
                this.topTimestamp = 0 < this._chatMessages.length ? this._chatMessages[0].timestamp : 0;
                this.botomTimestamp = 0 < this._chatMessages.length ? this._chatMessages[this._chatMessages.length - 1].timestamp : 0;
            }
            return this._chatMessages;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabComponent.prototype, "minScrollHeight", {
        get: function () {
            var length = this.chatTab ? this.chatTab.chatMessages.length : this.sampleMessages.length;
            return (length < 10000 ? length : 10000) * this.minMessageHeight;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabComponent.prototype, "topSpace", {
        get: function () { return this.minScrollHeight - this.bottomSpace; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabComponent.prototype, "bottomSpace", {
        get: function () {
            return 0 < this.chatMessages.length
                ? (this.chatTab.chatMessages.length - this.bottomIndex - 1) * this.minMessageHeight
                : 0;
        },
        enumerable: false,
        configurable: true
    });
    ChatTabComponent.prototype.ngOnInit = function () {
        var e_1, _a;
        var _this = this;
        var messages = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.sampleMessages), _c = _b.next(); !_c.done; _c = _b.next()) {
                var context = _c.value;
                var message = new _udonarium_chat_message__WEBPACK_IMPORTED_MODULE_2__["ChatMessage"]();
                for (var key in context) {
                    if (key === 'identifier')
                        continue;
                    if (key === 'tabIdentifier')
                        continue;
                    if (key === 'text') {
                        message.value = context[key];
                        continue;
                    }
                    if (context[key] == null || context[key] === '')
                        continue;
                    message.setAttribute(key, context[key]);
                }
                messages.push(message);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        this.sampleMessages = messages;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(this)
            .on('MESSAGE_ADDED', function (event) {
            var message = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(event.data.messageIdentifier);
            if (!message || !_this.chatTab.contains(message))
                return;
            if (_this.topTimestamp <= message.timestamp) {
                _this.changeDetector.markForCheck();
                _this.needUpdate = true;
                _this.onMessageInit();
            }
        })
            .on('UPDATE_GAME_OBJECT', function (event) {
            var message = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(event.data.identifier);
            if (message && message instanceof _udonarium_chat_message__WEBPACK_IMPORTED_MODULE_2__["ChatMessage"]
                && _this.topTimestamp <= message.timestamp && message.timestamp <= _this.botomTimestamp
                && _this.chatTab.contains(message)) {
                _this.changeDetector.markForCheck();
            }
        });
    };
    ChatTabComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.scrollEventShortTimer = new _udonarium_core_system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_5__["ResettableTimeout"](function () { return _this.lazyScrollUpdate(); }, 33);
            _this.scrollEventLongTimer = new _udonarium_core_system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_5__["ResettableTimeout"](function () { return _this.lazyScrollUpdate(false); }, 66);
            _this.onScroll();
            _this.panelService.scrollablePanel.addEventListener('scroll', _this.callbackOnScroll, false);
            _this.panelService.scrollablePanel.addEventListener('scrolltobottom', _this.callbackOnScrollToBottom, false);
        });
    };
    ChatTabComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(this);
        this.panelService.scrollablePanel.removeEventListener('scroll', this.callbackOnScroll, false);
        this.panelService.scrollablePanel.removeEventListener('scrolltobottom', this.callbackOnScrollToBottom, false);
        this.scrollEventShortTimer.clear();
        this.scrollEventLongTimer.clear();
        if (this.addMessageEventTimer)
            clearTimeout(this.addMessageEventTimer);
        this.addMessageEventTimer = null;
    };
    ChatTabComponent.prototype.ngOnChanges = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.resetMessages(); });
    };
    ChatTabComponent.prototype.ngAfterViewChecked = function () {
        var _this = this;
        if (!this.topElm || !this.bottomElm)
            return;
        this.ngZone.runOutsideAngular(function () {
            Promise.resolve().then(function () { return _this.adjustScrollPosition(); });
        });
    };
    ChatTabComponent.prototype.onMessageInit = function () {
        var _this = this;
        if (this.addMessageEventTimer != null)
            return;
        this.ngZone.runOutsideAngular(function () {
            _this.addMessageEventTimer = setTimeout(function () {
                _this.addMessageEventTimer = null;
                _this.ngZone.run(function () { return _this.onAddMessage.emit(); });
            }, 0);
        });
    };
    ChatTabComponent.prototype.resetMessages = function () {
        var lastIndex = this.chatTab.chatMessages.length - 1;
        this.topIndex = lastIndex - Math.floor(this.panelService.scrollablePanel.clientHeight / this.minMessageHeight);
        this.bottomIndex = lastIndex;
        this.needUpdate = true;
        this.preScrollTop = -1;
        this.scrollSpeed = 0;
        this.topElm = this.bottomElm = null;
        this.adjustIndex();
        this.changeDetector.markForCheck();
    };
    ChatTabComponent.prototype.trackByChatMessage = function (index, message) {
        return message.identifier;
    };
    ChatTabComponent.prototype.adjustIndex = function () {
        var chatMessages = this.chatTab ? this.chatTab.chatMessages : [];
        var lastIndex = 0 < chatMessages.length ? chatMessages.length - 1 : 0;
        if (this.topIndex < 0) {
            this.topIndex = 0;
        }
        if (lastIndex < this.bottomIndex) {
            this.bottomIndex = lastIndex;
        }
        if (this.topIndex < 0)
            this.topIndex = 0;
        if (this.bottomIndex < 0)
            this.bottomIndex = 0;
        if (lastIndex < this.topIndex)
            this.topIndex = lastIndex;
        if (lastIndex < this.bottomIndex)
            this.bottomIndex = lastIndex;
    };
    ChatTabComponent.prototype.getScrollPosition = function () {
        var top = this.panelService.scrollablePanel.scrollTop;
        var clientHeight = this.panelService.scrollablePanel.clientHeight;
        var scrollHeight = this.panelService.scrollablePanel.scrollHeight;
        if (top < 0)
            top = 0;
        if (scrollHeight - clientHeight < top)
            top = scrollHeight - clientHeight;
        var bottom = top + clientHeight;
        return { top: top, bottom: bottom, clientHeight: clientHeight, scrollHeight: scrollHeight };
    };
    ChatTabComponent.prototype.adjustScrollPosition = function () {
        var _this = this;
        if (!this.topElm || !this.bottomElm)
            return;
        var hasTopElm = this.logContainerRef.nativeElement.contains(this.topElm);
        var hasBotomElm = this.logContainerRef.nativeElement.contains(this.bottomElm);
        var _a = this.checkBlank(hasTopElm, hasBotomElm), hasTopBlank = _a.hasTopBlank, hasBotomBlank = _a.hasBotomBlank;
        this.topElm = this.bottomElm = null;
        if (hasTopBlank || hasBotomBlank || (!hasTopElm && !hasBotomElm)) {
            Object(_udonarium_core_system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_6__["setZeroTimeout"])(function () { return _this.lazyScrollUpdate(); });
        }
    };
    ChatTabComponent.prototype.checkBlank = function (hasTopElm, hasBotomElm) {
        var hasTopBlank = !hasTopElm;
        var hasBotomBlank = !hasBotomElm;
        if (!hasTopElm && !hasBotomElm)
            return { hasTopBlank: hasTopBlank, hasBotomBlank: hasBotomBlank };
        var elm = null;
        var prevBox = null;
        var currentBox = null;
        var diff = 0;
        if (hasBotomElm) {
            elm = this.bottomElm;
            prevBox = this.bottomElmBox;
        }
        else if (hasTopElm) {
            elm = this.topElm;
            prevBox = this.topElmBox;
        }
        currentBox = elm.getBoundingClientRect();
        diff = prevBox.top - currentBox.top - this.scrollSpeed;
        if ((!hasTopBlank || !hasBotomBlank) && Math.pow(0.5, 2) < Math.pow(diff, 2)) {
            this.panelService.scrollablePanel.scrollTop -= diff;
        }
        var logBox = this.logContainerRef.nativeElement.getBoundingClientRect();
        var messageBox = this.messageContainerRef.nativeElement.getBoundingClientRect();
        var messageBoxTop = messageBox.top - logBox.top;
        var messageBoxBottom = messageBoxTop + messageBox.height;
        var scrollPosition = this.getScrollPosition();
        hasTopBlank = scrollPosition.top < messageBoxTop;
        hasBotomBlank = messageBoxBottom < scrollPosition.bottom && scrollPosition.bottom < scrollPosition.scrollHeight;
        return { hasTopBlank: hasTopBlank, hasBotomBlank: hasBotomBlank };
    };
    ChatTabComponent.prototype.markForReadIfNeeded = function () {
        var _this = this;
        if (!this.chatTab.hasUnread)
            return;
        var scrollPosition = this.getScrollPosition();
        if (scrollPosition.scrollHeight <= scrollPosition.bottom + 100) {
            Object(_udonarium_core_system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_6__["setZeroTimeout"])(function () {
                _this.chatTab.markForRead();
                _this.changeDetector.markForCheck();
                _this.ngZone.run(function () { });
            });
        }
    };
    ChatTabComponent.prototype.onScroll = function () {
        this.scrollEventShortTimer.reset();
        if (!this.scrollEventLongTimer.isActive) {
            this.scrollEventLongTimer.reset();
        }
    };
    ChatTabComponent.prototype.lazyScrollUpdate = function (isNormalUpdate) {
        var _this = this;
        if (isNormalUpdate === void 0) { isNormalUpdate = true; }
        this.scrollEventShortTimer.stop();
        this.scrollEventLongTimer.stop();
        var chatMessageElements = this.messageContainerRef.nativeElement.querySelectorAll('chat-message');
        var messageBoxTop = this.messageContainerRef.nativeElement.offsetTop;
        var messageBoxBottom = messageBoxTop + this.messageContainerRef.nativeElement.clientHeight;
        var preTopIndex = this.topIndex;
        var preBottomIndex = this.bottomIndex;
        var scrollPosition = this.getScrollPosition();
        this.scrollSpeed = scrollPosition.top - this.preScrollTop;
        this.preScrollTop = scrollPosition.top;
        var hasTopBlank = scrollPosition.top < messageBoxTop;
        var hasBotomBlank = messageBoxBottom < scrollPosition.bottom && scrollPosition.bottom < scrollPosition.scrollHeight;
        if (!isNormalUpdate) {
            this.scrollEventShortTimer.reset();
        }
        if (!isNormalUpdate && !hasTopBlank && !hasBotomBlank) {
            return;
        }
        var scrollWideTop = scrollPosition.top - (!isNormalUpdate && hasTopBlank ? 100 : 1200);
        var scrollWideBottom = scrollPosition.bottom + (!isNormalUpdate && hasBotomBlank ? 100 : 1200);
        this.markForReadIfNeeded();
        this.calcItemIndexRange(messageBoxTop, messageBoxBottom, scrollWideTop, scrollWideBottom, scrollPosition, chatMessageElements);
        var isChangedIndex = this.topIndex != preTopIndex || this.bottomIndex != preBottomIndex;
        if (!isChangedIndex)
            return;
        this.needUpdate = true;
        this.topElm = chatMessageElements[0];
        this.bottomElm = chatMessageElements[chatMessageElements.length - 1];
        this.topElmBox = this.topElm.getBoundingClientRect();
        this.bottomElmBox = this.bottomElm.getBoundingClientRect();
        Object(_udonarium_core_system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_6__["setZeroTimeout"])(function () {
            var scrollPosition = _this.getScrollPosition();
            _this.scrollSpeed = scrollPosition.top - _this.preScrollTop;
            _this.preScrollTop = scrollPosition.top;
            _this.changeDetector.markForCheck();
            _this.ngZone.run(function () { });
        });
    };
    ChatTabComponent.prototype.calcElementMaxHeight = function (chatMessageElements) {
        var maxHeight = this.minMessageHeight;
        for (var i = chatMessageElements.length - 1; 0 <= i; i--) {
            var height = chatMessageElements[i].clientHeight;
            if (maxHeight < height)
                maxHeight = height;
        }
        return maxHeight;
    };
    ChatTabComponent.prototype.calcItemIndexRange = function (messageBoxTop, messageBoxBottom, scrollWideTop, scrollWideBottom, scrollPosition, chatMessageElements) {
        if (scrollWideTop >= messageBoxBottom || messageBoxTop >= scrollWideBottom) {
            var lastIndex = this.chatTab.chatMessages.length - 1;
            var scrollBottomHeight = scrollPosition.scrollHeight - scrollPosition.top - scrollPosition.clientHeight;
            this.bottomIndex = lastIndex - Math.floor(scrollBottomHeight / this.minMessageHeight);
            this.topIndex = this.bottomIndex - Math.floor(scrollPosition.clientHeight / this.minMessageHeight);
            this.bottomIndex += 1;
            this.topIndex -= 1;
        }
        else {
            var maxHeight = this.calcElementMaxHeight(chatMessageElements);
            if (scrollWideTop < messageBoxTop) {
                this.topIndex -= Math.floor((messageBoxTop - scrollWideTop) / maxHeight) + 1;
            }
            else if (scrollWideTop > messageBoxTop) {
                if (!isiOS)
                    this.topIndex += Math.floor((scrollWideTop - messageBoxTop) / maxHeight);
            }
            if (messageBoxBottom > scrollWideBottom) {
                if (!isiOS)
                    this.bottomIndex -= Math.floor((messageBoxBottom - scrollWideBottom) / maxHeight);
            }
            else if (messageBoxBottom < scrollWideBottom) {
                this.bottomIndex += Math.floor((scrollWideBottom - messageBoxBottom) / maxHeight) + 1;
            }
        }
        this.adjustIndex();
    };
    ChatTabComponent.ɵfac = function ChatTabComponent_Factory(t) { return new (t || ChatTabComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"])); };
    ChatTabComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: ChatTabComponent, selectors: [["chat-tab"]], viewQuery: function ChatTabComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵviewQuery"](_c0, 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵviewQuery"](_c1, 3);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.logContainerRef = _t.first);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.messageContainerRef = _t.first);
        } }, inputs: { chatTab: "chatTab" }, outputs: { onAddMessage: "onAddMessage" }, features: [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵNgOnChangesFeature"]], decls: 6, vars: 6, consts: [[1, "log"], ["logContainer", ""], [1, "virtual-scroll-container"], ["messageContainer", ""], [4, "ngIf"], [4, "ngFor", "ngForOf", "ngForTrackBy"], [3, "chatMessage", 4, "ngIf"], [3, "chatMessage"], [3, "chatMessage", 4, "ngFor", "ngForOf"]], template: function ChatTabComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0, 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 2, 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, ChatTabComponent_ng_container_4_Template, 2, 2, "ng-container", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](5, ChatTabComponent_ng_container_5_Template, 2, 1, "ng-container", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleProp"]("min-height", ctx.minScrollHeight, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleProp"]("margin-bottom", ctx.bottomSpace, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < ctx.chatMessages.length);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.chatMessages.length <= 0);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_8__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgForOf"], component_chat_message_chat_message_component__WEBPACK_IMPORTED_MODULE_9__["ChatMessageComponent"]], styles: [".log[_ngcontent-%COMP%] {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: flex-end;\n  width: 100%;\n  height: 100%;\n}\n\n.virtual-scroll-container[_ngcontent-%COMP%] {\n  flex-shrink: 0;\n  width: 100%;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtdGFiLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLHNCQUFzQjtFQUN0Qix5QkFBeUI7RUFDekIscUJBQXFCO0VBQ3JCLFdBQVc7RUFDWCxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsV0FBVztBQUNiIiwiZmlsZSI6ImNoYXQtdGFiLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubG9nIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG59XG5cbi52aXJ0dWFsLXNjcm9sbC1jb250YWluZXIge1xuICBmbGV4LXNocmluazogMDtcbiAgd2lkdGg6IDEwMCU7XG59XG4iXX0= */"], changeDetection: 0 });
    return ChatTabComponent;
}());



/***/ }),

/***/ "XMVy":
/*!*****************************************************************!*\
  !*** ./src/app/class/core/file-storage/audio-sharing-system.ts ***!
  \*****************************************************************/
/*! exports provided: AudioSharingSystem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioSharingSystem", function() { return AudioSharingSystem; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../system */ "yNnI");
/* harmony import */ var _audio_file__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./audio-file */ "eRQf");
/* harmony import */ var _audio_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./audio-storage */ "Prh6");
/* harmony import */ var _buffer_sharing_task__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./buffer-sharing-task */ "PYk/");
/* harmony import */ var _file_reader_util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./file-reader-util */ "N0uT");






var AudioSharingSystem = /** @class */ (function () {
    function AudioSharingSystem() {
        this.sendTaskMap = new Map();
        this.receiveTaskMap = new Map();
        this.maxSendTask = 2;
        this.maxReceiveTask = 4;
    }
    Object.defineProperty(AudioSharingSystem, "instance", {
        get: function () {
            if (!AudioSharingSystem._instance)
                AudioSharingSystem._instance = new AudioSharingSystem();
            return AudioSharingSystem._instance;
        },
        enumerable: false,
        configurable: true
    });
    AudioSharingSystem.prototype.initialize = function () {
        var _this = this;
        console.log('AudioSharingSystem ready...');
        this.destroy();
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(this)
            .on('CONNECT_PEER', -1, function (event) {
            if (!event.isSendFromSelf)
                return;
            console.log('CONNECT_PEER AudioStorageService !!!', event.data.peerId);
            _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.synchronize();
        })
            .on('SYNCHRONIZE_AUDIO_LIST', function (event) {
            var e_1, _a;
            if (event.isSendFromSelf)
                return;
            console.log('SYNCHRONIZE_AUDIO_LIST ' + event.sendFrom);
            var otherCatalog = event.data;
            var request = [];
            console.log('SYNCHRONIZE_AUDIO_LIST active tasks ', _this.sendTaskMap.size + _this.receiveTaskMap.size);
            try {
                for (var otherCatalog_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(otherCatalog), otherCatalog_1_1 = otherCatalog_1.next(); !otherCatalog_1_1.done; otherCatalog_1_1 = otherCatalog_1.next()) {
                    var item = otherCatalog_1_1.value;
                    var audio = _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.get(item.identifier);
                    if (audio === null) {
                        audio = _audio_file__WEBPACK_IMPORTED_MODULE_2__["AudioFile"].createEmpty(item.identifier);
                        _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.add(audio);
                    }
                    if (audio.state < _audio_file__WEBPACK_IMPORTED_MODULE_2__["AudioState"].COMPLETE && !_this.receiveTaskMap.has(item.identifier)) {
                        request.push({ identifier: item.identifier, state: audio.state });
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (otherCatalog_1_1 && !otherCatalog_1_1.done && (_a = otherCatalog_1.return)) _a.call(otherCatalog_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            // Peer切断時などのエッジケースに対応する
            if (request.length < 1 && !_this.hasActiveTask() && otherCatalog.length < _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.getCatalog().length) {
                _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.synchronize(event.sendFrom);
            }
            if (request.length < 1 || _this.isLimitReceiveTask()) {
                return;
            }
            var index = Math.floor(Math.random() * request.length);
            _this.request([request[index]], event.sendFrom);
        })
            .on('REQUEST_AUDIO_RESOURE', function (event) {
            var e_2, _a, e_3, _b;
            if (event.isSendFromSelf)
                return;
            var request = event.data.identifiers;
            var randomRequest = [];
            try {
                for (var request_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(request), request_1_1 = request_1.next(); !request_1_1.done; request_1_1 = request_1.next()) {
                    var item = request_1_1.value;
                    var audio = _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.get(item.identifier);
                    if (audio && item.state < audio.state)
                        randomRequest.push({ identifier: item.identifier, state: item.state });
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (request_1_1 && !request_1_1.done && (_a = request_1.return)) _a.call(request_1);
                }
                finally { if (e_2) throw e_2.error; }
            }
            if (_this.isLimitSendTask() === false && 0 < randomRequest.length && !_this.existsSendTask(event.data.receiver)) {
                // 送信
                console.log('REQUEST_AUDIO_RESOURE Send!!! ' + event.data.receiver + ' -> ' + randomRequest);
                var index = Math.floor(Math.random() * randomRequest.length);
                var item = randomRequest[index];
                var audio = _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.get(item.identifier);
                _this.startSendTask(audio, event.data.receiver);
            }
            else {
                // 中継
                var candidatePeers = event.data.candidatePeers;
                var index = candidatePeers.indexOf(_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerId);
                if (-1 < index)
                    candidatePeers.splice(index, 1);
                try {
                    for (var candidatePeers_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(candidatePeers), candidatePeers_1_1 = candidatePeers_1.next(); !candidatePeers_1_1.done; candidatePeers_1_1 = candidatePeers_1.next()) {
                        var peerId = candidatePeers_1_1.value;
                        console.log('REQUEST_AUDIO_RESOURE AudioStorageService Relay!!! ' + peerId + ' -> ' + event.data.identifiers);
                        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call(event, peerId);
                        return;
                    }
                }
                catch (e_3_1) { e_3 = { error: e_3_1 }; }
                finally {
                    try {
                        if (candidatePeers_1_1 && !candidatePeers_1_1.done && (_b = candidatePeers_1.return)) _b.call(candidatePeers_1);
                    }
                    finally { if (e_3) throw e_3.error; }
                }
                console.log('REQUEST_FILE_RESOURE AudioStorageService あぶれた...' + event.data.receiver, randomRequest.length);
            }
        })
            .on('UPDATE_AUDIO_RESOURE', function (event) {
            var e_4, _a;
            var updateAudios = event.data;
            console.log('UPDATE_AUDIO_RESOURE AudioStorageService ' + event.sendFrom + ' -> ', updateAudios);
            try {
                for (var updateAudios_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(updateAudios), updateAudios_1_1 = updateAudios_1.next(); !updateAudios_1_1.done; updateAudios_1_1 = updateAudios_1.next()) {
                    var context = updateAudios_1_1.value;
                    if (context.blob)
                        context.blob = new Blob([context.blob], { type: context.type });
                    _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.add(context);
                }
            }
            catch (e_4_1) { e_4 = { error: e_4_1 }; }
            finally {
                try {
                    if (updateAudios_1_1 && !updateAudios_1_1.done && (_a = updateAudios_1.return)) _a.call(updateAudios_1);
                }
                finally { if (e_4) throw e_4.error; }
            }
        })
            .on('START_AUDIO_TRANSMISSION', function (event) {
            console.log('START_AUDIO_TRANSMISSION ' + event.data.fileIdentifier);
            var identifier = event.data.fileIdentifier;
            var audio = _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.get(identifier);
            if (_this.receiveTaskMap.has(identifier) || (audio && _audio_file__WEBPACK_IMPORTED_MODULE_2__["AudioState"].COMPLETE <= audio.state)) {
                console.warn('CANCEL_TASK_ ' + identifier);
                _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('CANCEL_TASK_' + identifier, null, event.sendFrom);
            }
            else {
                _this.startReceiveTask(identifier);
            }
        });
    };
    AudioSharingSystem.prototype.destroy = function () {
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(this);
    };
    AudioSharingSystem.prototype.startSendTask = function (audio, sendTo) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var task, context, _a;
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        task = _buffer_sharing_task__WEBPACK_IMPORTED_MODULE_4__["BufferSharingTask"].createSendTask(audio.identifier, sendTo);
                        this.sendTaskMap.set(audio.identifier, task);
                        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('START_AUDIO_TRANSMISSION', { fileIdentifier: audio.identifier }, sendTo);
                        context = {
                            identifier: audio.identifier,
                            name: audio.name,
                            blob: null,
                            type: '',
                            url: null
                        };
                        if (!(audio.state === _audio_file__WEBPACK_IMPORTED_MODULE_2__["AudioState"].URL)) return [3 /*break*/, 1];
                        context.url = audio.url;
                        return [3 /*break*/, 3];
                    case 1:
                        _a = context;
                        return [4 /*yield*/, _file_reader_util__WEBPACK_IMPORTED_MODULE_5__["FileReaderUtil"].readAsArrayBufferAsync(audio.blob)];
                    case 2:
                        _a.blob = (_b.sent());
                        context.type = audio.blob.type;
                        _b.label = 3;
                    case 3:
                        task.onfinish = function () {
                            _this.stopSendTask(task.identifier);
                            _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.synchronize();
                        };
                        task.start(context);
                        return [2 /*return*/];
                }
            });
        });
    };
    AudioSharingSystem.prototype.startReceiveTask = function (identifier) {
        var _this = this;
        var audio = _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.get(identifier);
        var task = _buffer_sharing_task__WEBPACK_IMPORTED_MODULE_4__["BufferSharingTask"].createReceiveTask(identifier);
        this.receiveTaskMap.set(identifier, task);
        task.onprogress = function (task, loded, total) {
            var context = audio.toContext();
            context.name = (loded * 100 / total).toFixed(1) + '%';
            audio.apply(context);
        };
        task.onfinish = function (task, data) {
            _this.stopReceiveTask(task.identifier);
            if (data)
                _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].trigger('UPDATE_AUDIO_RESOURE', [data]);
            _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.synchronize();
        };
        task.start();
        console.log('startReceiveTask => ', this.receiveTaskMap.size);
    };
    AudioSharingSystem.prototype.stopSendTask = function (identifier) {
        var task = this.sendTaskMap.get(identifier);
        if (task) {
            task.cancel();
        }
        this.sendTaskMap.delete(identifier);
        console.log('stopSendTask => ', this.sendTaskMap.size);
    };
    AudioSharingSystem.prototype.stopReceiveTask = function (identifier) {
        var task = this.receiveTaskMap.get(identifier);
        if (task) {
            task.cancel();
        }
        this.receiveTaskMap.delete(identifier);
        console.log('stopReceiveTask => ', this.receiveTaskMap.size);
    };
    AudioSharingSystem.prototype.request = function (request, peerId) {
        console.log('requestFile() ' + peerId);
        var peerIds = _system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerIds;
        peerIds.splice(peerIds.indexOf(_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerId), 1);
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('REQUEST_AUDIO_RESOURE', { identifiers: request, receiver: _system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerId, candidatePeers: peerIds }, peerId);
    };
    AudioSharingSystem.prototype.hasActiveTask = function () {
        return 0 < this.sendTaskMap.size || 0 < this.receiveTaskMap.size;
    };
    AudioSharingSystem.prototype.isLimitSendTask = function () {
        return this.maxSendTask <= this.sendTaskMap.size;
    };
    AudioSharingSystem.prototype.isLimitReceiveTask = function () {
        return this.maxReceiveTask <= this.receiveTaskMap.size;
    };
    AudioSharingSystem.prototype.existsSendTask = function (peerId) {
        var e_5, _a;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.sendTaskMap.values()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var task = _c.value;
                if (task && task.sendTo === peerId)
                    return true;
            }
        }
        catch (e_5_1) { e_5 = { error: e_5_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_5) throw e_5.error; }
        }
        return false;
    };
    return AudioSharingSystem;
}());



/***/ }),

/***/ "YZvQ":
/*!****************************************!*\
  !*** ./src/app/class/chat-tab-list.ts ***!
  \****************************************/
/*! exports provided: ChatTabList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatTabList", function() { return ChatTabList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _chat_tab__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat-tab */ "Sqpr");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/object-node */ "F67Z");




var ChatTabList = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(ChatTabList, _super);
    function ChatTabList() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ChatTabList_1 = ChatTabList;
    Object.defineProperty(ChatTabList, "instance", {
        get: function () {
            if (!ChatTabList_1._instance) {
                ChatTabList_1._instance = new ChatTabList_1('ChatTabList');
                ChatTabList_1._instance.initialize();
            }
            return ChatTabList_1._instance;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabList.prototype, "chatTabs", {
        get: function () { return this.children; },
        enumerable: false,
        configurable: true
    });
    ChatTabList.prototype.addChatTab = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        var chatTab = null;
        if (args[0] instanceof _chat_tab__WEBPACK_IMPORTED_MODULE_1__["ChatTab"]) {
            chatTab = args[0];
        }
        else {
            var tabName = args[0];
            var identifier = args[1];
            chatTab = new _chat_tab__WEBPACK_IMPORTED_MODULE_1__["ChatTab"](identifier);
            chatTab.name = tabName;
            chatTab.initialize();
        }
        return this.appendChild(chatTab);
    };
    ChatTabList.prototype.parseInnerXml = function (element) {
        var e_1, _a;
        try {
            // XMLからの新規作成を許可せず、既存のオブジェクトを更新する
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(ChatTabList_1.instance.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                var child = _c.value;
                child.destroy();
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        var context = ChatTabList_1.instance.toContext();
        context.syncData = this.toContext().syncData;
        ChatTabList_1.instance.apply(context);
        ChatTabList_1.instance.update();
        _super.prototype.parseInnerXml.apply(ChatTabList_1.instance, [element]);
        this.destroy();
    };
    var ChatTabList_1;
    ChatTabList = ChatTabList_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncObject"])('chat-tab-list')
    ], ChatTabList);
    return ChatTabList;
}(_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__["ObjectNode"]));



/***/ }),

/***/ "ZAI4":
/*!*******************************!*\
  !*** ./src/app/app.module.ts ***!
  \*******************************/
/*! exports provided: AppModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppModule", function() { return AppModule; });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/platform-browser */ "jhN1");
/* harmony import */ var _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/platform-browser/animations */ "R1ws");
/* harmony import */ var component_badge_badge_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! component/badge/badge.component */ "xKeS");
/* harmony import */ var component_card_stack_list_card_stack_list_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! component/card-stack-list/card-stack-list.component */ "k8BA");
/* harmony import */ var component_card_stack_card_stack_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! component/card-stack/card-stack.component */ "tLw4");
/* harmony import */ var component_card_card_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! component/card/card.component */ "4fXm");
/* harmony import */ var component_chat_input_chat_input_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! component/chat-input/chat-input.component */ "+l6h");
/* harmony import */ var component_chat_message_chat_message_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! component/chat-message/chat-message.component */ "KUN8");
/* harmony import */ var component_chat_palette_chat_palette_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! component/chat-palette/chat-palette.component */ "jC/+");
/* harmony import */ var component_chat_tab_setting_chat_tab_setting_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! component/chat-tab-setting/chat-tab-setting.component */ "yrmS");
/* harmony import */ var component_chat_tab_chat_tab_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! component/chat-tab/chat-tab.component */ "Wiwm");
/* harmony import */ var component_chat_window_chat_window_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! component/chat-window/chat-window.component */ "wPqI");
/* harmony import */ var component_context_menu_context_menu_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! component/context-menu/context-menu.component */ "e1FT");
/* harmony import */ var component_dice_symbol_dice_symbol_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! component/dice-symbol/dice-symbol.component */ "FREB");
/* harmony import */ var component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! component/file-selecter/file-selecter.component */ "FR7b");
/* harmony import */ var component_file_storage_file_storage_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! component/file-storage/file-storage.component */ "OOM5");
/* harmony import */ var component_game_character_generator_game_character_generator_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! component/game-character-generator/game-character-generator.component */ "0cI7");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var component_game_character_game_character_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! component/game-character/game-character.component */ "AHLi");
/* harmony import */ var component_game_data_element_game_data_element_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! component/game-data-element/game-data-element.component */ "CvDi");
/* harmony import */ var component_game_object_inventory_game_object_inventory_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! component/game-object-inventory/game-object-inventory.component */ "R1wr");
/* harmony import */ var component_game_table_mask_game_table_mask_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! component/game-table-mask/game-table-mask.component */ "3v9A");
/* harmony import */ var component_game_table_setting_game_table_setting_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! component/game-table-setting/game-table-setting.component */ "zhae");
/* harmony import */ var component_game_table_game_table_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! component/game-table/game-table.component */ "Umgr");
/* harmony import */ var component_jukebox_jukebox_component__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! component/jukebox/jukebox.component */ "TaI1");
/* harmony import */ var component_lobby_lobby_component__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! component/lobby/lobby.component */ "tYii");
/* harmony import */ var component_modal_modal_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! component/modal/modal.component */ "EfKb");
/* harmony import */ var component_network_indicator_network_indicator_component__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! component/network-indicator/network-indicator.component */ "kf6k");
/* harmony import */ var component_overview_panel_overview_panel_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! component/overview-panel/overview-panel.component */ "BLsz");
/* harmony import */ var component_password_check_password_check_component__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! component/password-check/password-check.component */ "pY18");
/* harmony import */ var component_peer_cursor_peer_cursor_component__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! component/peer-cursor/peer-cursor.component */ "gfSO");
/* harmony import */ var component_peer_menu_peer_menu_component__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! component/peer-menu/peer-menu.component */ "F+Vt");
/* harmony import */ var component_room_setting_room_setting_component__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! component/room-setting/room-setting.component */ "aL7I");
/* harmony import */ var component_terrain_terrain_component__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! component/terrain/terrain.component */ "4v+P");
/* harmony import */ var component_text_note_text_note_component__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! component/text-note/text-note.component */ "7AbD");
/* harmony import */ var component_text_view_text_view_component__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! component/text-view/text-view.component */ "AsCv");
/* harmony import */ var component_ui_panel_ui_panel_component__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! component/ui-panel/ui-panel.component */ "VnuA");
/* harmony import */ var directive_draggable_directive__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! directive/draggable.directive */ "z2Us");
/* harmony import */ var directive_movable_directive__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! directive/movable.directive */ "+Kyd");
/* harmony import */ var directive_resizable_directive__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! directive/resizable.directive */ "pCHt");
/* harmony import */ var directive_rotable_directive__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! directive/rotable.directive */ "3jYK");
/* harmony import */ var directive_tooltip_directive__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! directive/tooltip.directive */ "ts4F");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");
/* harmony import */ var service_app_config_service__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! service/app-config.service */ "6VpD");
/* harmony import */ var service_chat_message_service__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! service/chat-message.service */ "PEfN");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var service_game_object_inventory_service__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! service/game-object-inventory.service */ "LjVp");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var service_tabletop_service__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! service/tabletop.service */ "Sdfd");
/* harmony import */ var _app_component__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./app.component */ "Sy1n");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! @angular/core */ "fXoL");























































var AppModule = /** @class */ (function () {
    function AppModule() {
    }
    AppModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_54__["ɵɵdefineNgModule"]({ type: AppModule, bootstrap: [_app_component__WEBPACK_IMPORTED_MODULE_53__["AppComponent"]] });
    AppModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_54__["ɵɵdefineInjector"]({ factory: function AppModule_Factory(t) { return new (t || AppModule)(); }, providers: [
            service_app_config_service__WEBPACK_IMPORTED_MODULE_45__["AppConfigService"],
            service_chat_message_service__WEBPACK_IMPORTED_MODULE_46__["ChatMessageService"],
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_47__["ContextMenuService"],
            service_modal_service__WEBPACK_IMPORTED_MODULE_49__["ModalService"],
            service_game_object_inventory_service__WEBPACK_IMPORTED_MODULE_48__["GameObjectInventoryService"],
            service_panel_service__WEBPACK_IMPORTED_MODULE_50__["PanelService"],
            service_pointer_device_service__WEBPACK_IMPORTED_MODULE_51__["PointerDeviceService"],
            service_tabletop_service__WEBPACK_IMPORTED_MODULE_52__["TabletopService"],
        ], imports: [[
                _angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__["BrowserModule"],
                _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_3__["BrowserAnimationsModule"],
                _angular_common__WEBPACK_IMPORTED_MODULE_0__["CommonModule"],
                _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormsModule"]
            ]] });
    return AppModule;
}());

(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_54__["ɵɵsetNgModuleScope"](AppModule, { declarations: [_app_component__WEBPACK_IMPORTED_MODULE_53__["AppComponent"],
        component_badge_badge_component__WEBPACK_IMPORTED_MODULE_4__["BadgeComponent"],
        component_card_card_component__WEBPACK_IMPORTED_MODULE_7__["CardComponent"],
        component_card_stack_card_stack_component__WEBPACK_IMPORTED_MODULE_6__["CardStackComponent"],
        component_card_stack_list_card_stack_list_component__WEBPACK_IMPORTED_MODULE_5__["CardStackListComponent"],
        component_chat_message_chat_message_component__WEBPACK_IMPORTED_MODULE_9__["ChatMessageComponent"],
        component_chat_palette_chat_palette_component__WEBPACK_IMPORTED_MODULE_10__["ChatPaletteComponent"],
        component_chat_tab_chat_tab_component__WEBPACK_IMPORTED_MODULE_12__["ChatTabComponent"],
        component_chat_tab_setting_chat_tab_setting_component__WEBPACK_IMPORTED_MODULE_11__["ChatTabSettingComponent"],
        component_chat_window_chat_window_component__WEBPACK_IMPORTED_MODULE_13__["ChatWindowComponent"],
        component_context_menu_context_menu_component__WEBPACK_IMPORTED_MODULE_14__["ContextMenuComponent"],
        component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_16__["FileSelecterComponent"],
        component_file_storage_file_storage_component__WEBPACK_IMPORTED_MODULE_17__["FileStorageComponent"],
        component_game_character_generator_game_character_generator_component__WEBPACK_IMPORTED_MODULE_18__["GameCharacterGeneratorComponent"],
        component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_19__["GameCharacterSheetComponent"],
        component_game_character_game_character_component__WEBPACK_IMPORTED_MODULE_20__["GameCharacterComponent"],
        component_game_data_element_game_data_element_component__WEBPACK_IMPORTED_MODULE_21__["GameDataElementComponent"],
        component_game_object_inventory_game_object_inventory_component__WEBPACK_IMPORTED_MODULE_22__["GameObjectInventoryComponent"],
        component_game_table_mask_game_table_mask_component__WEBPACK_IMPORTED_MODULE_23__["GameTableMaskComponent"],
        component_game_table_setting_game_table_setting_component__WEBPACK_IMPORTED_MODULE_24__["GameTableSettingComponent"],
        component_game_table_game_table_component__WEBPACK_IMPORTED_MODULE_25__["GameTableComponent"],
        component_jukebox_jukebox_component__WEBPACK_IMPORTED_MODULE_26__["JukeboxComponent"],
        component_lobby_lobby_component__WEBPACK_IMPORTED_MODULE_27__["LobbyComponent"],
        component_modal_modal_component__WEBPACK_IMPORTED_MODULE_28__["ModalComponent"],
        component_overview_panel_overview_panel_component__WEBPACK_IMPORTED_MODULE_30__["OverviewPanelComponent"],
        component_password_check_password_check_component__WEBPACK_IMPORTED_MODULE_31__["PasswordCheckComponent"],
        component_peer_menu_peer_menu_component__WEBPACK_IMPORTED_MODULE_33__["PeerMenuComponent"],
        component_room_setting_room_setting_component__WEBPACK_IMPORTED_MODULE_34__["RoomSettingComponent"],
        component_ui_panel_ui_panel_component__WEBPACK_IMPORTED_MODULE_38__["UIPanelComponent"],
        pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_44__["SafePipe"],
        component_chat_palette_chat_palette_component__WEBPACK_IMPORTED_MODULE_10__["ChatPaletteComponent"],
        component_text_view_text_view_component__WEBPACK_IMPORTED_MODULE_37__["TextViewComponent"],
        component_terrain_terrain_component__WEBPACK_IMPORTED_MODULE_35__["TerrainComponent"],
        component_peer_cursor_peer_cursor_component__WEBPACK_IMPORTED_MODULE_32__["PeerCursorComponent"],
        component_text_note_text_note_component__WEBPACK_IMPORTED_MODULE_36__["TextNoteComponent"],
        directive_movable_directive__WEBPACK_IMPORTED_MODULE_40__["MovableDirective"],
        directive_rotable_directive__WEBPACK_IMPORTED_MODULE_42__["RotableDirective"],
        component_network_indicator_network_indicator_component__WEBPACK_IMPORTED_MODULE_29__["NetworkIndicatorComponent"],
        component_dice_symbol_dice_symbol_component__WEBPACK_IMPORTED_MODULE_15__["DiceSymbolComponent"],
        directive_tooltip_directive__WEBPACK_IMPORTED_MODULE_43__["TooltipDirective"],
        directive_draggable_directive__WEBPACK_IMPORTED_MODULE_39__["DraggableDirective"],
        directive_resizable_directive__WEBPACK_IMPORTED_MODULE_41__["ResizableDirective"],
        component_chat_input_chat_input_component__WEBPACK_IMPORTED_MODULE_8__["ChatInputComponent"]], imports: [_angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__["BrowserModule"],
        _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_3__["BrowserAnimationsModule"],
        _angular_common__WEBPACK_IMPORTED_MODULE_0__["CommonModule"],
        _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormsModule"]] }); })();


/***/ }),

/***/ "aL7I":
/*!******************************************************************!*\
  !*** ./src/app/component/room-setting/room-setting.component.ts ***!
  \******************************************************************/
/*! exports provided: RoomSettingComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RoomSettingComponent", function() { return RoomSettingComponent; });
/* harmony import */ var _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/core/system/network/peer-context */ "ztsr");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/forms */ "3Pt+");








function RoomSettingComponent_div_0_div_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, " \u30EB\u30FC\u30E0\u306E\u540D\u524D\u306F\u5FC5\u9808\u3067\u3059\u3002 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](4, " \u30EB\u30FC\u30E0\u306E\u540D\u524D\u306F\u5FC5\u9808\u3067\u3059\u3002 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](5, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](6, " \u30EB\u30FC\u30E0\u540D\u524D\u306E\u9577\u3055\u306F128\u4EE5\u5185\u306B\u3057\u3066\u304F\u3060\u3055\u3044\u3002 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    var _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("hidden", !_r3.errors.required);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("hidden", !_r3.errors.minlength);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("hidden", !_r3.errors.maxlength);
} }
function RoomSettingComponent_div_0_div_11_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, " \u30D1\u30B9\u30EF\u30FC\u30C9\u306E\u9577\u3055\u306F12\u4EE5\u5185\u306B\u3057\u3066\u304F\u3060\u3055\u3044\u3002 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    var _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("hidden", !_r4.errors.maxlength);
} }
function RoomSettingComponent_div_0_div_12_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1, " \u30EB\u30FC\u30E0\u306E\u540D\u524D\u3068\u30D1\u30B9\u30EF\u30FC\u30C9\u306E\u5408\u8A08\u304C\u9577\u3059\u304E\u308B\u3088\u3046\u3067\u3059\u3002\u3069\u3061\u3089\u304B\u3092\u5C11\u3057\u77ED\u304F\u3057\u3066\u307F\u3066\u304F\u3060\u3055\u3044\u3002 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} }
function RoomSettingComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    var _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "\u30EB\u30FC\u30E0\u540D : ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "input", 3, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("input", function RoomSettingComponent_div_0_Template_input_input_3_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r9); var ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](); return ctx_r8.calcPeerId($event.target.value, ctx_r8.password); })("ngModelChange", function RoomSettingComponent_div_0_Template_input_ngModelChange_3_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r9); var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](); return ctx_r10.roomName = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](5, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](6, "\u30D1\u30B9\u30EF\u30FC\u30C9: ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "input", 5, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("input", function RoomSettingComponent_div_0_Template_input_input_7_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r9); var ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](); return ctx_r11.calcPeerId(ctx_r11.roomName, $event.target.value); })("ngModelChange", function RoomSettingComponent_div_0_Template_input_ngModelChange_7_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r9); var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](); return ctx_r12.password = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](9, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](10, RoomSettingComponent_div_0_div_10_Template, 7, 3, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](11, RoomSettingComponent_div_0_div_11_Template, 3, 1, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](12, RoomSettingComponent_div_0_div_12_Template, 2, 0, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](13, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](14, "button", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function RoomSettingComponent_div_0_Template_button_click_14_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r9); var ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](); return ctx_r13.createRoom(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](15, "\u65B0\u3057\u3044\u30EB\u30FC\u30E0\u3092\u4F5C\u6210");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    var _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](4);
    var _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](8);
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngModel", ctx_r0.roomName);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngModel", ctx_r0.password);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", _r3.errors && (_r3.dirty || _r3.touched));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", _r4.errors && (_r4.dirty || _r4.touched));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !ctx_r0.validateLength);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("disabled", !_r3.valid || !_r4.valid || !ctx_r0.validateLength);
} }
function RoomSettingComponent_ng_template_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "span", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1, "\u4ED6\u306E\u53C2\u52A0\u8005\u3068\u63A5\u7D9A\u3057\u305F\u307E\u307E\u3067\u306F\u30EB\u30FC\u30E0\u4F5C\u6210\u3092\u884C\u3048\u307E\u305B\u3093\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](2, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3, "\u5225\u306E\u30EB\u30FC\u30E0\u306B\u63A5\u7D9A\u3057\u305F\u3044\u5834\u5408\u306F\u3001\u4ED6\u306E\u53C2\u52A0\u8005\u3068\u306E\u63A5\u7D9A\u3092\u5207\u3063\u3066\u304F\u3060\u3055\u3044\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](4, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](5, "\uFF08\u203B\u30DA\u30FC\u30B8\u30EA\u30ED\u30FC\u30C9\u3067\u5207\u65AD\u3067\u304D\u307E\u3059\u3002\uFF09");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} }
var RoomSettingComponent = /** @class */ (function () {
    function RoomSettingComponent(panelService, modalService) {
        this.panelService = panelService;
        this.modalService = modalService;
        this.peers = [];
        this.isReloading = false;
        this.roomName = 'ふつうの部屋';
        this.password = '';
        this.isPrivate = false;
        this.validateLength = false;
    }
    Object.defineProperty(RoomSettingComponent.prototype, "peerId", {
        get: function () { return _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerId; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RoomSettingComponent.prototype, "isConnected", {
        get: function () { return _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerIds.length <= 1 ? false : true; },
        enumerable: false,
        configurable: true
    });
    RoomSettingComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.modalService.title = _this.panelService.title = 'ルーム作成'; });
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(this);
        this.calcPeerId(this.roomName, this.password);
    };
    RoomSettingComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(this);
    };
    RoomSettingComponent.prototype.calcPeerId = function (roomName, password) {
        var userId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerContext ? _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerContext.userId : _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_0__["PeerContext"].generateId();
        var context = _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_0__["PeerContext"].create(userId, _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_0__["PeerContext"].generateId('***'), roomName, password);
        this.validateLength = context.peerId.length < 64 ? true : false;
    };
    RoomSettingComponent.prototype.createRoom = function () {
        var userId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerContext ? _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerContext.userId : _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_0__["PeerContext"].generateId();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["Network"].open(userId, _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_0__["PeerContext"].generateId('***'), this.roomName, this.password);
        _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_2__["PeerCursor"].myCursor.peerId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerId;
        this.modalService.resolve();
    };
    RoomSettingComponent.ɵfac = function RoomSettingComponent_Factory(t) { return new (t || RoomSettingComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_4__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_5__["ModalService"])); };
    RoomSettingComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({ type: RoomSettingComponent, selectors: [["room-setting"]], decls: 6, vars: 2, consts: [[4, "ngIf", "ngIfElse"], [2, "font-size", "12px"], ["other_content", ""], ["required", "", "minlength", "1", "maxlength", "128", "placeholder", "\u30EB\u30FC\u30E0\u306E\u540D\u524D\u306F\u5FC5\u9808", 1, "input", 3, "ngModel", "input", "ngModelChange"], ["roomNameValidation", "ngModel"], ["maxlength", "12", "placeholder", "\u7A7A\u306A\u3089\u30D1\u30B9\u30EF\u30FC\u30C9\u306A\u3057", 1, "input", 3, "ngModel", "input", "ngModelChange"], ["passwordValidation", "ngModel"], [4, "ngIf"], [3, "disabled", "click"], [3, "hidden"]], template: function RoomSettingComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](0, RoomSettingComponent_div_0_Template, 16, 6, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "span", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3, "\u203B\u4F5C\u6210\u3057\u305F\u30EB\u30FC\u30E0\u306F\u53C2\u52A0\u8005\u304C0\u4EBA\u306B\u306A\u3063\u305F\u6642\u70B9\u3067\u89E3\u6563\u3057\u307E\u3059\u3002\u30EB\u30FC\u30E0\u306E\u72B6\u614B\u3092\u6B21\u56DE\u306B\u6301\u3061\u8D8A\u3057\u305F\u3044\u5834\u5408\u306F\u5FC5\u305A\u300C\u4FDD\u5B58\u300D\u3057\u3066\u304F\u3060\u3055\u3044\u3002");
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](4, RoomSettingComponent_ng_template_4_Template, 6, 0, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
        } if (rf & 2) {
            var _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !ctx.isConnected)("ngIfElse", _r1);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_6__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["RequiredValidator"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["MinLengthValidator"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["MaxLengthValidator"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgModel"]], styles: [".box[_ngcontent-%COMP%] {\n  border-bottom:1px dotted #888;\n}\n.image[_ngcontent-%COMP%] {\n  padding: 0px;\n  width: 64px;\n  height: 64px;\n  display: inline-block;\n  vertical-align: top;\n}\n.contain[_ngcontent-%COMP%] {\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.input[_ngcontent-%COMP%] {\n  width: 100%;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvb20tc2V0dGluZy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsNkJBQTZCO0FBQy9CO0FBQ0E7RUFDRSxZQUFZO0VBQ1osV0FBVztFQUNYLFlBQVk7RUFDWixxQkFBcUI7RUFDckIsbUJBQW1CO0FBQ3JCO0FBRUE7RUFDRSxrQ0FBa0M7RUFDbEMsNEJBQTRCO0VBQzVCLHdCQUF3QjtBQUMxQjtBQUVBO0VBQ0UsV0FBVztBQUNiIiwiZmlsZSI6InJvb20tc2V0dGluZy5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmJveCB7XG4gIGJvcmRlci1ib3R0b206MXB4IGRvdHRlZCAjODg4O1xufVxuLmltYWdlIHtcbiAgcGFkZGluZzogMHB4O1xuICB3aWR0aDogNjRweDtcbiAgaGVpZ2h0OiA2NHB4O1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHZlcnRpY2FsLWFsaWduOiB0b3A7XG59XG5cbi5jb250YWluIHtcbiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyIGNlbnRlcjtcbiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgYmFja2dyb3VuZC1zaXplOiBjb250YWluO1xufVxuXG4uaW5wdXQge1xuICB3aWR0aDogMTAwJTtcbn0iXX0= */"] });
    return RoomSettingComponent;
}());



/***/ }),

/***/ "al1o":
/*!*************************************************************!*\
  !*** ./src/app/component/game-table/table-mouse-gesture.ts ***!
  \*************************************************************/
/*! exports provided: TableMouseGestureEvent, TableMouseGesture */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TableMouseGestureEvent", function() { return TableMouseGestureEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TableMouseGesture", function() { return TableMouseGesture; });
/* harmony import */ var directive_input_handler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! directive/input-handler */ "96Ug");

var TableMouseGestureEvent;
(function (TableMouseGestureEvent) {
    TableMouseGestureEvent["DRAG"] = "drag";
    TableMouseGestureEvent["ZOOM"] = "zoom";
    TableMouseGestureEvent["ROTATE"] = "rotate";
    TableMouseGestureEvent["KEYBOARD"] = "keyboard";
})(TableMouseGestureEvent || (TableMouseGestureEvent = {}));
var Keyboard;
(function (Keyboard) {
    Keyboard["ArrowLeft"] = "ArrowLeft";
    Keyboard["ArrowUp"] = "ArrowUp";
    Keyboard["ArrowRight"] = "ArrowRight";
    Keyboard["ArrowDown"] = "ArrowDown";
})(Keyboard || (Keyboard = {}));
var TableMouseGesture = /** @class */ (function () {
    function TableMouseGesture(targetElement) {
        var _this = this;
        this.targetElement = targetElement;
        this.currentPositionX = 0;
        this.currentPositionY = 0;
        this.buttonCode = 0;
        this.input = null;
        this.callbackOnWheel = function (e) { return _this.onWheel(e); };
        this.callbackOnKeydown = function (e) { return _this.onKeydown(e); };
        this.onstart = null;
        this.onend = null;
        this.ontransform = null;
        this.initialize();
    }
    Object.defineProperty(TableMouseGesture.prototype, "isGrabbing", {
        get: function () { return this.input.isGrabbing; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TableMouseGesture.prototype, "isDragging", {
        get: function () { return this.input.isDragging; },
        enumerable: false,
        configurable: true
    });
    TableMouseGesture.prototype.initialize = function () {
        this.input = new directive_input_handler__WEBPACK_IMPORTED_MODULE_0__["InputHandler"](this.targetElement, { capture: true });
        this.addEventListeners();
        this.input.onStart = this.onInputStart.bind(this);
        this.input.onMove = this.onInputMove.bind(this);
        this.input.onEnd = this.onInputEnd.bind(this);
    };
    TableMouseGesture.prototype.cancel = function () {
        this.input.cancel();
    };
    TableMouseGesture.prototype.destroy = function () {
        this.input.destroy();
        this.removeEventListeners();
    };
    TableMouseGesture.prototype.onInputStart = function (ev) {
        this.currentPositionX = this.input.pointer.x;
        this.currentPositionY = this.input.pointer.y;
        this.buttonCode = ev.button;
        if (this.onstart)
            this.onstart(ev);
    };
    TableMouseGesture.prototype.onInputEnd = function (ev) {
        if (this.onend)
            this.onend(ev);
    };
    TableMouseGesture.prototype.onInputMove = function (ev) {
        var x = this.input.pointer.x;
        var y = this.input.pointer.y;
        var deltaX = x - this.currentPositionX;
        var deltaY = y - this.currentPositionY;
        var transformX = 0;
        var transformY = 0;
        var transformZ = 0;
        var rotateX = 0;
        var rotateY = 0;
        var rotateZ = 0;
        var event = TableMouseGestureEvent.DRAG;
        if (this.buttonCode === 2) {
            event = TableMouseGestureEvent.ROTATE;
            rotateZ = -deltaX / 5;
            rotateX = -deltaY / 5;
        }
        else {
            transformX = deltaX;
            transformY = deltaY;
        }
        this.currentPositionX = x;
        this.currentPositionY = y;
        if (this.ontransform)
            this.ontransform(transformX, transformY, transformZ, rotateX, rotateY, rotateZ, event, ev);
    };
    TableMouseGesture.prototype.onWheel = function (ev) {
        var pixelDeltaY = 0;
        switch (ev.deltaMode) {
            case WheelEvent.DOM_DELTA_LINE:
                pixelDeltaY = ev.deltaY * 16;
                break;
            case WheelEvent.DOM_DELTA_PAGE:
                pixelDeltaY = ev.deltaY * window.innerHeight;
                break;
            default:
                pixelDeltaY = ev.deltaY;
                break;
        }
        var transformX = 0;
        var transformY = 0;
        var transformZ = 0;
        var rotateX = 0;
        var rotateY = 0;
        var rotateZ = 0;
        transformZ = pixelDeltaY * -1.5;
        if (Math.pow(300, 2) < Math.pow(transformZ, 2))
            transformZ = Math.min(Math.max(transformZ, -300), 300);
        if (this.ontransform)
            this.ontransform(transformX, transformY, transformZ, rotateX, rotateY, rotateZ, TableMouseGestureEvent.ZOOM, ev);
    };
    TableMouseGesture.prototype.onKeydown = function (ev) {
        var transformX = 0;
        var transformY = 0;
        var transformZ = 0;
        var rotateX = 0;
        var rotateY = 0;
        var rotateZ = 0;
        var key = this.getKeyName(ev);
        switch (key) {
            case Keyboard.ArrowLeft:
                if (ev.shiftKey) {
                    rotateZ = -2;
                }
                else {
                    transformX = 10;
                }
                break;
            case Keyboard.ArrowUp:
                if (ev.shiftKey) {
                    rotateX = -2;
                }
                else if (ev.ctrlKey) {
                    transformZ = 150;
                }
                else {
                    transformY = 10;
                }
                break;
            case Keyboard.ArrowRight:
                if (ev.shiftKey) {
                    rotateZ = 2;
                }
                else {
                    transformX = -10;
                }
                break;
            case Keyboard.ArrowDown:
                if (ev.shiftKey) {
                    rotateX = 2;
                }
                else if (ev.ctrlKey) {
                    transformZ = -150;
                }
                else {
                    transformY = -10;
                }
                break;
        }
        var isArrowKey = Keyboard[key] != null;
        if (isArrowKey && this.ontransform)
            this.ontransform(transformX, transformY, transformZ, rotateX, rotateY, rotateZ, TableMouseGestureEvent.KEYBOARD, ev);
    };
    TableMouseGesture.prototype.getKeyName = function (keyboard) {
        if (keyboard.key)
            return keyboard.key;
        switch (keyboard.keyCode) {
            case 37: return Keyboard.ArrowLeft;
            case 38: return Keyboard.ArrowUp;
            case 39: return Keyboard.ArrowRight;
            case 40: return Keyboard.ArrowDown;
            default: return '';
        }
    };
    TableMouseGesture.prototype.addEventListeners = function () {
        this.targetElement.addEventListener('wheel', this.callbackOnWheel, false);
        document.body.addEventListener('keydown', this.callbackOnKeydown, false);
    };
    TableMouseGesture.prototype.removeEventListeners = function () {
        this.targetElement.removeEventListener('wheel', this.callbackOnWheel, false);
        document.body.removeEventListener('keydown', this.callbackOnKeydown, false);
    };
    return TableMouseGesture;
}());



/***/ }),

/***/ "baV6":
/*!*******************************************************!*\
  !*** ./src/app/class/core/system/util/string-util.ts ***!
  \*******************************************************/
/*! exports provided: StringUtil */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StringUtil", function() { return StringUtil; });
var StringUtil;
(function (StringUtil) {
    function toHalfWidth(str) {
        return str.replace(/[！-～]/g, function (c) { return String.fromCharCode(c.charCodeAt(0) - 0xFEE0); });
    }
    StringUtil.toHalfWidth = toHalfWidth;
})(StringUtil || (StringUtil = {}));


/***/ }),

/***/ "cfGu":
/*!****************************************************!*\
  !*** ./src/app/class/core/system/util/xml-util.ts ***!
  \****************************************************/
/*! exports provided: XmlUtil */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "XmlUtil", function() { return XmlUtil; });
var XmlUtil;
(function (XmlUtil) {
    var encodePattern = /&|<|>|"|'/g;
    var encodeMap = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '\"': '&quot;',
        '\'': '&apos;',
    };
    var decodePattern = /&amp;|&lt;|&gt;|&quot;|&apos;/g;
    var decodeMap = {
        '&amp;': '&',
        '&lt;': '<',
        '&gt;': '>',
        '&quot;': '\"',
        '&apos;': '\'',
    };
    var sanitizePattern = /((?:[\0-\x08\x0B\f\x0E-\x1F\uFFFD\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/g;
    function xml2element(xml) {
        var domParser = new DOMParser();
        var xmlDocument = null;
        try {
            xml = sanitizeXml(xml);
            xmlDocument = domParser.parseFromString(xml, 'application/xml');
            var parsererror = xmlDocument.getElementsByTagName('parsererror');
            if (parsererror.length) {
                console.error('XMLのパースに失敗しました', xmlDocument.documentElement);
                xmlDocument = null;
            }
        }
        catch (error) {
            console.error(error);
        }
        return xmlDocument ? xmlDocument.documentElement : null;
    }
    XmlUtil.xml2element = xml2element;
    function encodeEntityReference(string) {
        return string.replace(encodePattern, encodeReplacer);
    }
    XmlUtil.encodeEntityReference = encodeEntityReference;
    function decodeEntityReference(string) {
        return string.replace(decodePattern, decodeReplacer);
    }
    XmlUtil.decodeEntityReference = decodeEntityReference;
    function sanitizeXml(xml) {
        return xml.replace(sanitizePattern, '').trim();
    }
    function encodeReplacer(char) {
        return encodeMap[char];
    }
    function decodeReplacer(entity) {
        return decodeMap[entity];
    }
})(XmlUtil || (XmlUtil = {}));


/***/ }),

/***/ "dQSv":
/*!********************************************!*\
  !*** ./src/app/class/database/database.ts ***!
  \********************************************/
/*! exports provided: Database */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Database", function() { return Database; });
/* harmony import */ var _core_system_util_promise_queue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/system/util/promise-queue */ "w5+g");

// 試験実装中
var Database = /** @class */ (function () {
    function Database() {
        this.queue = new _core_system_util_promise_queue__WEBPACK_IMPORTED_MODULE_0__["PromiseQueue"]('DatabaseQueue');
        this.openDB(Database.DB_NAME, Database.VERSION);
    }
    Database.prototype.openDB = function (dbName, version) {
        var _this = this;
        return this.queue.add(function (resolve, reject) {
            console.log('openDB');
            var request = indexedDB.open(dbName, version);
            request.onerror = function (event) {
                console.error(request.error, event);
                if (request.error.name === 'VersionError') {
                    indexedDB.deleteDatabase(dbName);
                    _this.openDB(dbName, version);
                }
                // request.errorCode に対して行うこと!
                resolve();
            };
            request.onblocked = function (event) {
                console.warn('openDB onblocked');
                // 他のタブがデータベースを読み込んでいる場合は、処理を進める前に
                // それらを閉じなければなりません。
                alert('このサイトを開いている他のタブをすべて閉じてください!');
            };
            request.onupgradeneeded = function (event) {
                console.log('openDB onupgradeneeded');
                _this.initializeDB(request.result);
                _this.createStores();
            };
            request.onsuccess = function (event) {
                console.log('openDB onsuccess');
                _this.initializeDB(request.result);
                resolve();
            };
        });
    };
    Database.prototype.createStores = function () {
        console.log('createStores');
        if (this.db.objectStoreNames.contains('PeerHistory')) {
            this.db.deleteObjectStore('PeerHistory');
        }
        var objectStore = this.db.createObjectStore('PeerHistory', { keyPath: 'peerId' });
        objectStore.createIndex('timestamp', 'timestamp', { unique: false });
        // データを追加する前に objectStore の作成を完了させるため、 
        // transaction oncomplete を使用します。
        objectStore.transaction.oncomplete = function (event) {
            console.log('createStores oncomplete');
            // 新たに作成した objectStore に値を保存します。
            /*
            var customerObjectStore = db.transaction("customers", "readwrite").objectStore("customers");
            for (var i in customerData) {
              customerObjectStore.add(customerData[i]);
            }
            */
        };
    };
    Database.prototype.initializeDB = function (db) {
        console.log('initializeDB');
        // 別のページがバージョン変更を求めた場合に、通知されるようにするためのハンドラを追加するようにしてください。
        // データベースを閉じなければなりません。データベースを閉じると、別のページがデータベースをアップグレードできます。
        // これを行わなければ、ユーザがタブを閉じるまでデータベースはアップグレードされません。
        db.onversionchange = function (event) {
            console.warn('db.onversionchange.');
            db.close();
            alert('新しいバージョンのページが使用可能になりました。再読み込みしてください!');
        };
        db.onabort = function (event) {
            console.error(event);
        };
        db.onerror = function (event) {
            console.error(event);
        };
        this.db = db;
        // データベースを使用する処理
    };
    Database.prototype.addPeerHistory = function (myPeerId, otherPeerIds) {
        var _this = this;
        this.queue.add(function (resolve, reject) {
            console.log('addPeerHistory');
            var transaction = _this.db.transaction(['PeerHistory'], 'readwrite');
            var store = transaction.objectStore('PeerHistory');
            transaction.oncomplete = function (event) {
                console.log('addPeerHistory done.', 'readwrite');
                resolve();
            };
            transaction.onerror = function (event) {
                console.error(event);
                resolve();
            };
            var history = {
                peerId: myPeerId,
                timestamp: Date.now(),
                history: otherPeerIds
            };
            store.put(history);
        });
    };
    Database.prototype.deletePeerHistory = function (peerId) {
        var _this = this;
        this.queue.add(function (resolve, reject) {
            var transaction = _this.db.transaction(['PeerHistory'], 'readwrite');
            var store = transaction.objectStore('PeerHistory');
            transaction.oncomplete = function (event) {
                console.log('addPeerHistory done.', 'readwrite');
                resolve();
            };
            transaction.onerror = function (event) {
                console.error(event);
                resolve();
            };
            store.delete(peerId);
        });
    };
    Database.prototype.getPeerHistory = function () {
        var _this = this;
        return this.queue.add(function (resolve, reject) {
            console.log('getPeerHistory');
            var transaction = _this.db.transaction(['PeerHistory'], 'readonly');
            var store = transaction.objectStore('PeerHistory');
            var request = store.openCursor();
            var history = [];
            transaction.oncomplete = function (event) {
                console.log('getPeerHistory done.');
                resolve(history);
            };
            transaction.onerror = function (event) {
                console.error(event);
                resolve(history);
            };
            request.onerror = function (event) {
                console.error(event);
                resolve(history);
            };
            request.onsuccess = function (event) {
                var cursor = request.result;
                if (cursor) {
                    console.log('id:' + cursor.key + ' value:', cursor.value);
                    history.push(cursor.value);
                    cursor.continue();
                }
                else {
                    console.log('Entries all displayed.');
                }
            };
        });
    };
    Database.DB_NAME = 'UdonariumDataBase';
    Database.VERSION = 1;
    return Database;
}());



/***/ }),

/***/ "dQfN":
/*!**********************************************************************!*\
  !*** ./src/app/class/core/synchronize-object/object-synchronizer.ts ***!
  \**********************************************************************/
/*! exports provided: ObjectSynchronizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectSynchronizer", function() { return ObjectSynchronizer; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../system */ "yNnI");
/* harmony import */ var _object_factory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./object-factory */ "+FYa");
/* harmony import */ var _object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./object-store */ "hm7o");
/* harmony import */ var _synchronize_task__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./synchronize-task */ "jLOE");





var ObjectSynchronizer = /** @class */ (function () {
    function ObjectSynchronizer() {
        this.requestMap = new Map();
        this.peerMap = new Map();
        this.tasks = [];
    }
    Object.defineProperty(ObjectSynchronizer, "instance", {
        get: function () {
            if (!ObjectSynchronizer._instance)
                ObjectSynchronizer._instance = new ObjectSynchronizer();
            return ObjectSynchronizer._instance;
        },
        enumerable: false,
        configurable: true
    });
    ObjectSynchronizer.prototype.initialize = function () {
        var _this = this;
        this.destroy();
        console.log('ObjectSynchronizer ready...');
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(this)
            .on('CONNECT_PEER', 2, function (event) {
            if (!event.isSendFromSelf)
                return;
            console.log('CONNECT_PEER GameRoomService !!!', event.data.peerId);
            _this.sendCatalog(event.data.peerId);
        })
            .on('DISCONNECT_PEER', function (event) {
            _this.removePeerMap(event.data.peerId);
        })
            .on('SYNCHRONIZE_GAME_OBJECT', function (event) {
            var e_1, _a;
            if (event.isSendFromSelf)
                return;
            console.log('SYNCHRONIZE_GAME_OBJECT ' + event.sendFrom);
            var catalog = event.data;
            try {
                for (var catalog_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(catalog), catalog_1_1 = catalog_1.next(); !catalog_1_1.done; catalog_1_1 = catalog_1.next()) {
                    var item = catalog_1_1.value;
                    if (_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.isDeleted(item.identifier)) {
                        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('DELETE_GAME_OBJECT', { identifier: item.identifier }, event.sendFrom);
                    }
                    else {
                        _this.addRequestMap(item, event.sendFrom);
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (catalog_1_1 && !catalog_1_1.done && (_a = catalog_1.return)) _a.call(catalog_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            _this.synchronize();
        })
            .on('REQUEST_GAME_OBJECT', function (event) {
            if (event.isSendFromSelf)
                return;
            if (_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.isDeleted(event.data)) {
                _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('DELETE_GAME_OBJECT', { identifier: event.data }, event.sendFrom);
            }
            else {
                var object = _object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(event.data);
                if (object)
                    _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('UPDATE_GAME_OBJECT', object.toContext(), event.sendFrom);
            }
        })
            .on('UPDATE_GAME_OBJECT', function (event) {
            var context = event.data;
            var object = _object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(context.identifier);
            if (object) {
                if (!event.isSendFromSelf)
                    _this.updateObject(object, context);
            }
            else if (_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.isDeleted(context.identifier)) {
                _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('DELETE_GAME_OBJECT', { identifier: context.identifier }, event.sendFrom);
            }
            else {
                _this.createObject(context);
            }
        })
            .on('DELETE_GAME_OBJECT', function (event) {
            var context = event.data;
            _object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.delete(context.identifier, false);
        });
    };
    ObjectSynchronizer.prototype.destroy = function () {
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(this);
    };
    ObjectSynchronizer.prototype.updateObject = function (object, context) {
        if (context.majorVersion + context.minorVersion > object.version) {
            object.apply(context);
        }
    };
    ObjectSynchronizer.prototype.createObject = function (context) {
        var newObject = _object_factory__WEBPACK_IMPORTED_MODULE_2__["ObjectFactory"].instance.create(context.aliasName, context.identifier);
        if (!newObject) {
            console.warn(context.aliasName + ' is Unknown...?', context);
            return;
        }
        _object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.add(newObject, false);
        newObject.apply(context);
    };
    ObjectSynchronizer.prototype.sendCatalog = function (sendTo) {
        var catalog = _object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.getCatalog();
        var interval = setInterval(function () {
            var count = catalog.length < 2048 ? catalog.length : 2048;
            _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('SYNCHRONIZE_GAME_OBJECT', catalog.splice(0, count), sendTo);
            if (catalog.length < 1)
                clearInterval(interval);
        });
    };
    ObjectSynchronizer.prototype.addRequestMap = function (item, sendFrom) {
        var request = this.requestMap.get(item.identifier);
        if (request && request.version === item.version) {
            request.holderIds.push(sendFrom);
            this.addPeerMap(sendFrom);
        }
        else if (!request || request.version < item.version) {
            this.requestMap.set(item.identifier, { identifier: item.identifier, version: item.version, holderIds: [sendFrom], ttl: 2 });
            this.addPeerMap(sendFrom);
        }
    };
    ObjectSynchronizer.prototype.addPeerMap = function (targetPeerId) {
        if (!this.peerMap.has(targetPeerId))
            this.peerMap.set(targetPeerId, []);
    };
    ObjectSynchronizer.prototype.removePeerMap = function (targetPeerId) {
        this.peerMap.delete(targetPeerId);
    };
    ObjectSynchronizer.prototype.synchronize = function () {
        while (0 < this.requestMap.size && this.tasks.length < 32)
            this.runSynchronizeTask();
    };
    ObjectSynchronizer.prototype.runSynchronizeTask = function () {
        var _this = this;
        var targetPeerId = this.getTargetPeerId();
        var requests = this.makeRequestList(targetPeerId);
        if (requests.length < 1) {
            this.removePeerMap(targetPeerId);
            return;
        }
        var task = _synchronize_task__WEBPACK_IMPORTED_MODULE_4__["SynchronizeTask"].create(targetPeerId, requests);
        this.tasks.push(task);
        var targetPeerIdTasks = this.peerMap.get(targetPeerId);
        if (targetPeerIdTasks)
            targetPeerIdTasks.push(task);
        task.onfinish = function (task) {
            _this.tasks.splice(_this.tasks.indexOf(task), 1);
            var targetPeerIdTasks = _this.peerMap.get(targetPeerId);
            if (targetPeerIdTasks)
                targetPeerIdTasks.splice(targetPeerIdTasks.indexOf(task), 1);
            _this.synchronize();
        };
        task.ontimeout = function (task, remainedRequests) {
            console.log('GameObject synchronize タイムアウト');
            remainedRequests.forEach(function (request) { return _this.requestMap.set(request.identifier, request); });
        };
    };
    ObjectSynchronizer.prototype.makeRequestList = function (targetPeerId, maxRequest) {
        var e_2, _a;
        if (maxRequest === void 0) { maxRequest = 32; }
        var requests = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.requestMap), _c = _b.next(); !_c.done; _c = _b.next()) {
                var _d = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__read"])(_c.value, 2), identifier = _d[0], request = _d[1];
                if (maxRequest <= requests.length)
                    break;
                if (!request.holderIds.includes(targetPeerId))
                    continue;
                var gameObject = _object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(request.identifier);
                if (!gameObject || gameObject.version < request.version)
                    requests.push(request);
                this.requestMap.delete(identifier);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
        return requests;
    };
    ObjectSynchronizer.prototype.getTargetPeerId = function () {
        var _a, e_3, _b;
        var min = 9999;
        var selectPeerId = null;
        var peerContexts = _system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerContexts;
        for (var i = peerContexts.length - 1; 0 <= i; i--) {
            var rand = Math.floor(Math.random() * (i + 1));
            _a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__read"])([peerContexts[rand], peerContexts[i]], 2), peerContexts[i] = _a[0], peerContexts[rand] = _a[1];
        }
        try {
            for (var peerContexts_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(peerContexts), peerContexts_1_1 = peerContexts_1.next(); !peerContexts_1_1.done; peerContexts_1_1 = peerContexts_1.next()) {
                var peerContext = peerContexts_1_1.value;
                var tasks = this.peerMap.get(peerContext.peerId);
                if (peerContext.isOpen && tasks && tasks.length < min) {
                    min = tasks.length;
                    selectPeerId = peerContext.peerId;
                }
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (peerContexts_1_1 && !peerContexts_1_1.done && (_b = peerContexts_1.return)) _b.call(peerContexts_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return selectPeerId;
    };
    return ObjectSynchronizer;
}());



/***/ }),

/***/ "e1FT":
/*!******************************************************************!*\
  !*** ./src/app/component/context-menu/context-menu.component.ts ***!
  \******************************************************************/
/*! exports provided: ContextMenuComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextMenuComponent", function() { return ContextMenuComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ "ofXK");




var _c0 = ["root"];
function ContextMenuComponent_div_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r1.title);
} }
function ContextMenuComponent_ng_container_4_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainer"](0);
} }
var _c1 = function (a0) { return { action: a0 }; };
function ContextMenuComponent_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ContextMenuComponent_ng_container_4_ng_container_1_Template, 1, 0, "ng-container", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var action_r7 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    var _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](8);
    var _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngTemplateOutlet", (action_r7 == null ? null : action_r7.type) === "separator" ? _r5 : _r3)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](2, _c1, action_r7));
} }
function ContextMenuComponent_ng_template_5_div_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "i", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "arrow_forward_ios");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ContextMenuComponent_ng_template_5_context_menu_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "context-menu", 14);
} if (rf & 2) {
    var action_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().action;
    var ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("title", action_r9.name)("actions", ctx_r11.subMenu)("isSubmenu", true);
} }
function ContextMenuComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    var _r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "li", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ContextMenuComponent_ng_template_5_Template_li_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r14); var action_r9 = ctx.action; var ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r13.doAction(action_r9); })("mouseenter", function ContextMenuComponent_ng_template_5_Template_li_mouseenter_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r14); var action_r9 = ctx.action; var ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r15.showSubMenu(action_r9); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ContextMenuComponent_ng_template_5_div_3_Template, 3, 0, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ContextMenuComponent_ng_template_5_context_menu_4_Template, 1, 3, "context-menu", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var action_r9 = ctx.action;
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](action_r9.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", action_r9.subActions);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.subMenu && ctx_r4.parentMenu === action_r9);
} }
function ContextMenuComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "li");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "hr", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
var _c2 = function (a0, a1, a2) { return { "submenu-panel": a0, "is-max-limit": a1, "pointer-events-none": a2 }; };
var ContextMenuComponent = /** @class */ (function () {
    function ContextMenuComponent(elementRef, contextMenuService, pointerDeviceService) {
        var _this = this;
        this.elementRef = elementRef;
        this.contextMenuService = contextMenuService;
        this.pointerDeviceService = pointerDeviceService;
        this.title = '';
        this.actions = [];
        this.isSubmenu = false;
        this.callbackOnOutsideClick = function (e) { return _this.onOutsideClick(e); };
    }
    Object.defineProperty(ContextMenuComponent.prototype, "isPointerDragging", {
        get: function () { return this.pointerDeviceService.isDragging; },
        enumerable: false,
        configurable: true
    });
    ContextMenuComponent.prototype.ngOnInit = function () {
        if (!this.isSubmenu) {
            this.title = this.contextMenuService.title;
            this.actions = this.contextMenuService.actions;
        }
    };
    ContextMenuComponent.prototype.ngAfterViewInit = function () {
        if (!this.isSubmenu) {
            this.adjustPositionRoot();
            document.addEventListener('touchstart', this.callbackOnOutsideClick, true);
            document.addEventListener('mousedown', this.callbackOnOutsideClick, true);
        }
        else {
            this.adjustPositionSub();
        }
    };
    ContextMenuComponent.prototype.ngOnDestroy = function () {
        document.removeEventListener('touchstart', this.callbackOnOutsideClick, true);
        document.removeEventListener('mousedown', this.callbackOnOutsideClick, true);
    };
    ContextMenuComponent.prototype.onOutsideClick = function (event) {
        if (this.rootElementRef.nativeElement.contains(event.target) === false) {
            this.close();
        }
    };
    ContextMenuComponent.prototype.onContextMenu = function (e) {
        e.stopPropagation();
        e.preventDefault();
    };
    ContextMenuComponent.prototype.adjustPositionRoot = function () {
        var panel = this.rootElementRef.nativeElement;
        panel.style.left = this.contextMenuService.position.x + 'px';
        panel.style.top = this.contextMenuService.position.y + 'px';
        var panelBox = panel.getBoundingClientRect();
        var diffLeft = 0;
        var diffTop = 0;
        if (window.innerWidth < panelBox.right + diffLeft) {
            diffLeft += window.innerWidth - (panelBox.right + diffLeft);
        }
        if (panelBox.left + diffLeft < 0) {
            diffLeft += 0 - (panelBox.left + diffLeft);
        }
        if (window.innerHeight < panelBox.bottom + diffTop) {
            diffTop += window.innerHeight - (panelBox.bottom + diffTop);
        }
        if (panelBox.top + diffTop < 0) {
            diffTop += 0 - (panelBox.top + diffTop);
        }
        panel.style.left = panel.offsetLeft + diffLeft + 'px';
        panel.style.top = panel.offsetTop + diffTop + 'px';
    };
    ContextMenuComponent.prototype.adjustPositionSub = function () {
        var parent = this.elementRef.nativeElement.parentElement;
        var submenu = this.rootElementRef.nativeElement;
        var parentBox = parent.getBoundingClientRect();
        var submenuBox = submenu.getBoundingClientRect();
        var diffLeft = 0;
        var diffTop = 0;
        if (window.innerWidth < submenuBox.right + diffLeft) {
            diffLeft -= parentBox.width + submenuBox.width;
            diffLeft += 8;
        }
        if (submenuBox.left + diffLeft < 0) {
            diffLeft += 0 - (submenuBox.left + diffLeft);
        }
        if (window.innerHeight < submenuBox.bottom + diffTop) {
            diffTop += window.innerHeight - (submenuBox.bottom + diffTop);
        }
        if (submenuBox.top + diffTop < 0) {
            diffTop += 0 - (submenuBox.top + diffTop);
        }
        submenu.style.left = submenu.offsetLeft + diffLeft + 'px';
        submenu.style.top = submenu.offsetTop + diffTop + 'px';
    };
    ContextMenuComponent.prototype.doAction = function (action) {
        this.showSubMenu(action);
        if (action.action != null) {
            action.action();
            this.close();
        }
    };
    ContextMenuComponent.prototype.showSubMenu = function (action) {
        var _this = this;
        this.hideSubMenu();
        clearTimeout(this.showSubMenuTimer);
        if (action.subActions == null || action.subActions.length < 1)
            return;
        this.showSubMenuTimer = setTimeout(function () {
            _this.parentMenu = action;
            _this.subMenu = action.subActions;
            clearTimeout(_this.hideSubMenuTimer);
        }, 250);
    };
    ContextMenuComponent.prototype.hideSubMenu = function () {
        var _this = this;
        clearTimeout(this.hideSubMenuTimer);
        this.hideSubMenuTimer = setTimeout(function () {
            _this.subMenu = null;
        }, 1200);
    };
    ContextMenuComponent.prototype.close = function () {
        if (this.contextMenuService)
            this.contextMenuService.close();
    };
    ContextMenuComponent.ɵfac = function ContextMenuComponent_Factory(t) { return new (t || ContextMenuComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_1__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_2__["PointerDeviceService"])); };
    ContextMenuComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ContextMenuComponent, selectors: [["context-menu"]], viewQuery: function ContextMenuComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c0, 3);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.rootElementRef = _t.first);
        } }, hostBindings: function ContextMenuComponent_HostBindings(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("contextmenu", function ContextMenuComponent_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });
        } }, inputs: { title: "title", actions: "actions", isSubmenu: "isSubmenu" }, decls: 9, vars: 7, consts: [[1, "component", 3, "ngClass", "mouseleave"], ["root", ""], ["class", "title", 4, "ngIf"], [4, "ngFor", "ngForOf"], ["actionMenu", ""], ["separator", ""], [1, "title"], [4, "ngTemplateOutlet", "ngTemplateOutletContext"], [1, "hasHighlight", 3, "click", "mouseenter"], [1, "menu-title"], ["class", "sub-menu-arrow", 4, "ngIf"], [3, "title", "actions", "isSubmenu", 4, "ngIf"], [1, "sub-menu-arrow"], [1, "material-icons", 2, "font-size", "1em", "vertical-align", "bottom"], [3, "title", "actions", "isSubmenu"], [1, "separator"]], template: function ContextMenuComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0, 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mouseleave", function ContextMenuComponent_Template_div_mouseleave_0_listener() { return ctx.hideSubMenu(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ContextMenuComponent_div_2_Template, 2, 1, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "ul");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ContextMenuComponent_ng_container_4_Template, 2, 4, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, ContextMenuComponent_ng_template_5_Template, 5, 3, "ng-template", null, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, ContextMenuComponent_ng_template_7_Template, 2, 0, "ng-template", null, 5, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction3"](3, _c2, ctx.isSubmenu, !ctx.isSubmenu, ctx.isPointerDragging));
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 0 < ctx.title.length);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.actions);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_3__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_3__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_3__["NgForOf"], _angular_common__WEBPACK_IMPORTED_MODULE_3__["NgTemplateOutlet"], ContextMenuComponent], styles: [".component[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  overflow: visible;\n  position: absolute;\n\n  background: linear-gradient(-30deg, rgba(240,218,189, 0.9), rgba(255, 244, 232, 0.9));\n  border: solid 1px #999;\n  padding: 0px;\n\n  white-space: nowrap;\n  -webkit-user-select: none;\n  user-select: none;\n\n  -moz-user-drag: none;\n  -webkit-user-drag: none;\n  z-index: 9900;\n}\n.submenu-panel[_ngcontent-%COMP%] {\n  position: absolute;\n  left: calc(100% - 4px);\n  top: -16px;\n}\n.pointer-events-none[_ngcontent-%COMP%] {\n  pointer-events: none;\n}\n.is-max-limit[_ngcontent-%COMP%] {\n  max-height: 100%;\n  max-width: 100%;\n}\n.title[_ngcontent-%COMP%]{\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 18em;\n  font-size: 12px;\n  text-align: center;\n  padding: 4px 16px;\n  margin: 0 2px;\n  color: #444;\n  border-bottom: 1px solid #AAA;\n}\n.menu-title[_ngcontent-%COMP%] {\n  display: inline-block;\n}\nhr.separator[_ngcontent-%COMP%] {\n  margin: 0.1em -12px;\n  height: 1px;\n  border: 0;\n  background-color: #AAA;\n}\n.sub-menu-arrow[_ngcontent-%COMP%] {\n  display: inline-block;\n  position: absolute;\n  top: 2px;\n  bottom: 0;\n  right: 1px;\n}\nul[_ngcontent-%COMP%] {\n  list-style: none;\n  padding: 2px 0;\n  margin: 0;\n}\nul[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%] {\n  position: relative;\n  cursor: -moz-default;\n  cursor: -webkit-default;\n  cursor: default;\n\n  padding: 2px 20px;\n  font-size: 12px;\n  color: #444;\n}\nul[_ngcontent-%COMP%]    > li.hasHighlight[_ngcontent-%COMP%]:hover {\n  color: #CCC;\n  background-color: rgba(30, 30, 30, 0.8);\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRleHQtbWVudS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usc0JBQXNCO0VBQ3RCLGlCQUFpQjtFQUNqQixrQkFBa0I7O0VBRWxCLHFGQUFxRjtFQUNyRixzQkFBc0I7RUFDdEIsWUFBWTs7RUFFWixtQkFBbUI7RUFHbkIseUJBQXlCO0VBQ3pCLGlCQUFpQjs7RUFFakIsb0JBQW9CO0VBQ3BCLHVCQUF1QjtFQUN2QixhQUFhO0FBQ2Y7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixzQkFBc0I7RUFDdEIsVUFBVTtBQUNaO0FBQ0E7RUFDRSxvQkFBb0I7QUFDdEI7QUFDQTtFQUNFLGdCQUFnQjtFQUNoQixlQUFlO0FBQ2pCO0FBQ0E7RUFDRSxnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixlQUFlO0VBQ2YsZUFBZTtFQUNmLGtCQUFrQjtFQUNsQixpQkFBaUI7RUFDakIsYUFBYTtFQUNiLFdBQVc7RUFDWCw2QkFBNkI7QUFDL0I7QUFDQTtFQUNFLHFCQUFxQjtBQUN2QjtBQUNBO0VBQ0UsbUJBQW1CO0VBQ25CLFdBQVc7RUFDWCxTQUFTO0VBQ1Qsc0JBQXNCO0FBQ3hCO0FBQ0E7RUFDRSxxQkFBcUI7RUFDckIsa0JBQWtCO0VBQ2xCLFFBQVE7RUFDUixTQUFTO0VBQ1QsVUFBVTtBQUNaO0FBQ0E7RUFDRSxnQkFBZ0I7RUFDaEIsY0FBYztFQUNkLFNBQVM7QUFDWDtBQUNBO0VBQ0Usa0JBQWtCO0VBQ2xCLG9CQUFvQjtFQUNwQix1QkFBdUI7RUFDdkIsZUFBZTs7RUFFZixpQkFBaUI7RUFDakIsZUFBZTtFQUNmLFdBQVc7QUFDYjtBQUNBO0VBQ0UsV0FBVztFQUNYLHVDQUF1QztBQUN6QyIsImZpbGUiOiJjb250ZXh0LW1lbnUuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb21wb25lbnQge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgtMzBkZWcsIHJnYmEoMjQwLDIxOCwxODksIDAuOSksIHJnYmEoMjU1LCAyNDQsIDIzMiwgMC45KSk7XG4gIGJvcmRlcjogc29saWQgMXB4ICM5OTk7XG4gIHBhZGRpbmc6IDBweDtcblxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuXG4gIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XG4gIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XG4gIHVzZXItc2VsZWN0OiBub25lO1xuXG4gIC1tb3otdXNlci1kcmFnOiBub25lO1xuICAtd2Via2l0LXVzZXItZHJhZzogbm9uZTtcbiAgei1pbmRleDogOTkwMDtcbn1cbi5zdWJtZW51LXBhbmVsIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiBjYWxjKDEwMCUgLSA0cHgpO1xuICB0b3A6IC0xNnB4O1xufVxuLnBvaW50ZXItZXZlbnRzLW5vbmUge1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbn1cbi5pcy1tYXgtbGltaXQge1xuICBtYXgtaGVpZ2h0OiAxMDAlO1xuICBtYXgtd2lkdGg6IDEwMCU7XG59XG4udGl0bGV7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICBtYXgtd2lkdGg6IDE4ZW07XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBwYWRkaW5nOiA0cHggMTZweDtcbiAgbWFyZ2luOiAwIDJweDtcbiAgY29sb3I6ICM0NDQ7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjQUFBO1xufVxuLm1lbnUtdGl0bGUge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG59XG5oci5zZXBhcmF0b3Ige1xuICBtYXJnaW46IDAuMWVtIC0xMnB4O1xuICBoZWlnaHQ6IDFweDtcbiAgYm9yZGVyOiAwO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjQUFBO1xufVxuLnN1Yi1tZW51LWFycm93IHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMnB4O1xuICBib3R0b206IDA7XG4gIHJpZ2h0OiAxcHg7XG59XG51bCB7XG4gIGxpc3Qtc3R5bGU6IG5vbmU7XG4gIHBhZGRpbmc6IDJweCAwO1xuICBtYXJnaW46IDA7XG59XG51bCA+IGxpIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBjdXJzb3I6IC1tb3otZGVmYXVsdDtcbiAgY3Vyc29yOiAtd2Via2l0LWRlZmF1bHQ7XG4gIGN1cnNvcjogZGVmYXVsdDtcblxuICBwYWRkaW5nOiAycHggMjBweDtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBjb2xvcjogIzQ0NDtcbn1cbnVsID4gbGkuaGFzSGlnaGxpZ2h0OmhvdmVyIHtcbiAgY29sb3I6ICNDQ0M7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMzAsIDMwLCAzMCwgMC44KTtcbn0iXX0= */"] });
    return ContextMenuComponent;
}());



/***/ }),

/***/ "e8gA":
/*!******************************************!*\
  !*** ./src/app/class/tabletop-object.ts ***!
  \******************************************/
/*! exports provided: TabletopObject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabletopObject", function() { return TabletopObject; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/file-storage/image-file */ "FjwV");
/* harmony import */ var _core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _data_element__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./data-element */ "gkrD");







var TabletopObject = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(TabletopObject, _super);
    function TabletopObject() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.location = {
            name: 'table',
            x: 0,
            y: 0
        };
        _this.posZ = 0;
        _this._imageFile = _core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_1__["ImageFile"].Empty;
        _this._dataElements = {};
        return _this;
    }
    Object.defineProperty(TabletopObject.prototype, "isVisibleOnTable", {
        get: function () { return this.location.name === 'table'; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopObject.prototype, "rootDataElement", {
        // GameDataElement getter/setter
        get: function () {
            var e_1, _a;
            try {
                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var node = _c.value;
                    if (node.getAttribute('name') === this.aliasName)
                        return node;
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return null;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopObject.prototype, "imageDataElement", {
        get: function () { return this.getElement('image'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopObject.prototype, "commonDataElement", {
        get: function () { return this.getElement('common'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopObject.prototype, "detailDataElement", {
        get: function () { return this.getElement('detail'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopObject.prototype, "imageFile", {
        get: function () {
            if (!this.imageDataElement)
                return this._imageFile;
            var imageIdElement = this.imageDataElement.getFirstElementByName('imageIdentifier');
            if (imageIdElement && this._imageFile.identifier !== imageIdElement.value) {
                var file = _core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_2__["ImageStorage"].instance.get(imageIdElement.value);
                this._imageFile = file ? file : _core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_1__["ImageFile"].Empty;
            }
            return this._imageFile;
        },
        enumerable: false,
        configurable: true
    });
    TabletopObject.prototype.createDataElements = function () {
        this.initialize();
        var aliasName = this.aliasName;
        if (!this.rootDataElement) {
            var rootElement = _data_element__WEBPACK_IMPORTED_MODULE_6__["DataElement"].create(aliasName, '', {}, aliasName + '_' + this.identifier);
            this.appendChild(rootElement);
        }
        if (!this.imageDataElement) {
            this.rootDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_6__["DataElement"].create('image', '', {}, 'image_' + this.identifier));
            this.imageDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_6__["DataElement"].create('imageIdentifier', '', { type: 'image' }, 'imageIdentifier_' + this.identifier));
        }
        if (!this.commonDataElement)
            this.rootDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_6__["DataElement"].create('common', '', {}, 'common_' + this.identifier));
        if (!this.detailDataElement)
            this.rootDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_6__["DataElement"].create('detail', '', {}, 'detail_' + this.identifier));
    };
    TabletopObject.prototype.getElement = function (name, from) {
        if (from === void 0) { from = this.rootDataElement; }
        if (!from)
            return null;
        var element = this._dataElements[name] ? _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(this._dataElements[name]) : null;
        if (!element || !from.contains(element)) {
            element = from.getFirstElementByName(name);
            this._dataElements[name] = element ? element.identifier : null;
        }
        return element;
    };
    TabletopObject.prototype.getCommonValue = function (elementName, defaultValue) {
        var element = this.getElement(elementName, this.commonDataElement);
        if (!element)
            return defaultValue;
        if (typeof defaultValue === 'number') {
            var number = +element.value;
            return (Number.isNaN(number) ? defaultValue : number);
        }
        else {
            return (element.value + '');
        }
    };
    TabletopObject.prototype.setCommonValue = function (elementName, value) {
        var element = this.getElement(elementName, this.commonDataElement);
        if (!element) {
            return;
        }
        element.value = value;
    };
    TabletopObject.prototype.getImageFile = function (elementName) {
        if (!this.imageDataElement)
            return null;
        var image = this.getElement(elementName, this.imageDataElement);
        return image ? _core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_2__["ImageStorage"].instance.get(image.value) : null;
    };
    TabletopObject.prototype.setImageFile = function (elementName, imageFile) {
        var image = imageFile ? this.getElement(elementName, this.imageDataElement) : null;
        if (!image)
            return;
        image.value = imageFile.identifier;
    };
    TabletopObject.prototype.setLocation = function (location) {
        this.location.name = location;
        this.update();
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], TabletopObject.prototype, "location", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], TabletopObject.prototype, "posZ", void 0);
    TabletopObject = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncObject"])('TabletopObject')
    ], TabletopObject);
    return TabletopObject;
}(_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_4__["ObjectNode"]));



/***/ }),

/***/ "eRQf":
/*!*******************************************************!*\
  !*** ./src/app/class/core/file-storage/audio-file.ts ***!
  \*******************************************************/
/*! exports provided: AudioState, AudioFile */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioState", function() { return AudioState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioFile", function() { return AudioFile; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _file_reader_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./file-reader-util */ "N0uT");


var AudioState;
(function (AudioState) {
    AudioState[AudioState["NULL"] = 0] = "NULL";
    AudioState[AudioState["THUMBNAIL"] = 1] = "THUMBNAIL";
    AudioState[AudioState["COMPLETE"] = 2] = "COMPLETE";
    AudioState[AudioState["URL"] = 1000] = "URL";
})(AudioState || (AudioState = {}));
var AudioFile = /** @class */ (function () {
    function AudioFile() {
        this.context = {
            identifier: '',
            name: '',
            blob: null,
            type: '',
            url: ''
        };
        this.isHidden = false;
    }
    Object.defineProperty(AudioFile.prototype, "identifier", {
        get: function () { return this.context.identifier; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(AudioFile.prototype, "name", {
        get: function () { return this.context.name; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(AudioFile.prototype, "blob", {
        get: function () { return this.context.blob; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(AudioFile.prototype, "url", {
        get: function () { return this.context.url; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(AudioFile.prototype, "isReady", {
        get: function () { return AudioState.NULL < this.state; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioFile.prototype, "state", {
        get: function () {
            if (!this.url && !this.blob)
                return AudioState.NULL;
            if (this.url && !this.blob)
                return AudioState.URL;
            return AudioState.COMPLETE;
        },
        enumerable: false,
        configurable: true
    });
    AudioFile.createEmpty = function (identifier) {
        var audio = new AudioFile();
        audio.context.identifier = identifier;
        return audio;
    };
    AudioFile.create = function (arg) {
        if (typeof arg === 'string') {
            var audio = new AudioFile();
            audio.context.identifier = arg;
            audio.context.name = arg;
            audio.context.url = arg;
            return audio;
        }
        else {
            var audio = new AudioFile();
            audio.apply(arg);
            return audio;
        }
    };
    AudioFile.createAsync = function (arg) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(arg instanceof File)) return [3 /*break*/, 2];
                        return [4 /*yield*/, AudioFile._createAsync(arg, arg.name)];
                    case 1: return [2 /*return*/, _a.sent()];
                    case 2:
                        if (!(arg instanceof Blob)) return [3 /*break*/, 4];
                        return [4 /*yield*/, AudioFile._createAsync(arg)];
                    case 3: return [2 /*return*/, _a.sent()];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    AudioFile._createAsync = function (blob, name) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var arrayBuffer, audio, _a;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, _file_reader_util__WEBPACK_IMPORTED_MODULE_1__["FileReaderUtil"].readAsArrayBufferAsync(blob)];
                    case 1:
                        arrayBuffer = _b.sent();
                        audio = new AudioFile();
                        _a = audio.context;
                        return [4 /*yield*/, _file_reader_util__WEBPACK_IMPORTED_MODULE_1__["FileReaderUtil"].calcSHA256Async(arrayBuffer)];
                    case 2:
                        _a.identifier = _b.sent();
                        audio.context.name = name;
                        audio.context.blob = new Blob([arrayBuffer], { type: blob.type });
                        audio.context.type = audio.context.blob.type;
                        audio.context.url = window.URL.createObjectURL(audio.context.blob);
                        if (!audio.context.name)
                            audio.context.name = audio.context.identifier;
                        return [2 /*return*/, audio];
                }
            });
        });
    };
    AudioFile.prototype.destroy = function () {
        this.revokeURLs();
    };
    AudioFile.prototype.apply = function (context) {
        if (!this.context.identifier && context.identifier)
            this.context.identifier = context.identifier;
        if (context.name)
            this.context.name = context.name;
        if (!this.context.blob && context.blob)
            this.context.blob = context.blob;
        if (!this.context.type && context.type)
            this.context.type = context.type;
        if (!this.context.url && context.url) {
            if (this.state !== AudioState.URL)
                window.URL.revokeObjectURL(this.context.url);
            this.context.url = context.url;
        }
        this.createURLs();
    };
    AudioFile.prototype.createURLs = function () {
        if (this.state === AudioState.URL)
            return;
        if (this.context.blob && this.context.url === '')
            this.context.url = window.URL.createObjectURL(this.context.blob);
    };
    AudioFile.prototype.revokeURLs = function () {
        if (this.state === AudioState.URL)
            return;
        window.URL.revokeObjectURL(this.context.url);
    };
    AudioFile.prototype.toContext = function () {
        return {
            identifier: this.context.identifier,
            name: this.context.name,
            blob: this.context.blob,
            type: this.context.type,
            url: this.context.url
        };
    };
    return AudioFile;
}());



/***/ }),

/***/ "eS09":
/*!********************************************************!*\
  !*** ./src/app/class/core/system/util/zero-timeout.ts ***!
  \********************************************************/
/*! exports provided: setZeroTimeout, clearZeroTimeout */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setZeroTimeout", function() { return setZeroTimeout; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clearZeroTimeout", function() { return clearZeroTimeout; });
var i = 0;
var timeouts = new Map();
var channel = new MessageChannel();
function setZeroTimeout(fn) {
    if (i === 0x100000000) // max queue size
        i = 0;
    if (++i in timeouts)
        throw new Error('setZeroTimeout queue overflow.');
    timeouts.set(i, fn);
    channel.port2.postMessage(i);
    return i;
}
function clearZeroTimeout(id) {
    timeouts.delete(id);
}
channel.port1.onmessage = function (ev) {
    var fn = timeouts.get(ev.data);
    timeouts.delete(ev.data);
    if (fn)
        fn();
};
channel.port1.start();
channel.port2.start();


/***/ }),

/***/ "edKV":
/*!***************************************!*\
  !*** ./src/app/class/chat-message.ts ***!
  \***************************************/
/*! exports provided: ChatMessage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatMessage", function() { return ChatMessage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/system */ "yNnI");





var ChatMessage = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(ChatMessage, _super);
    function ChatMessage() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._sendTo = [];
        _this._tags = [];
        return _this;
    }
    Object.defineProperty(ChatMessage.prototype, "tabIdentifier", {
        get: function () { return this.parent.identifier; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "text", {
        get: function () { return this.value; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "timestamp", {
        get: function () {
            var timestamp = this.getAttribute('timestamp');
            var num = timestamp ? +timestamp : 0;
            return Number.isNaN(num) ? 1 : num;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "sendTo", {
        get: function () {
            if (this._to !== this.to) {
                this._to = this.to;
                this._sendTo = this.to != null && 0 < this.to.trim().length ? this.to.trim().split(/\s+/) : [];
            }
            return this._sendTo;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "tags", {
        get: function () {
            if (this._tag !== this.tag) {
                this._tag = this.tag;
                this._tags = this.tag != null && 0 < this.tag.trim().length ? this.tag.trim().split(/\s+/) : [];
            }
            return this._tags;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "image", {
        get: function () { return _core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_1__["ImageStorage"].instance.get(this.imageIdentifier); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "index", {
        get: function () { return this.minorIndex + this.timestamp; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "isDirect", {
        get: function () { return 0 < this.sendTo.length ? true : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "isSendFromSelf", {
        get: function () { return this.from === _core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerContext.userId || this.originFrom === _core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerContext.userId; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "isRelatedToMe", {
        get: function () { return (-1 < this.sendTo.indexOf(_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerContext.userId)) || this.isSendFromSelf ? true : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "isDisplayable", {
        get: function () { return this.isDirect ? this.isRelatedToMe : true; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "isSystem", {
        get: function () { return -1 < this.tags.indexOf('system') ? true : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "isDicebot", {
        get: function () { return this.isSystem && this.from === 'System-BCDice' ? true : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "isSecret", {
        get: function () { return -1 < this.tags.indexOf('secret') ? true : false; },
        enumerable: false,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatMessage.prototype, "originFrom", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatMessage.prototype, "from", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatMessage.prototype, "to", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatMessage.prototype, "name", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatMessage.prototype, "tag", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatMessage.prototype, "dicebot", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatMessage.prototype, "imageIdentifier", void 0);
    ChatMessage = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncObject"])('chat')
    ], ChatMessage);
    return ChatMessage;
}(_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__["ObjectNode"]));



/***/ }),

/***/ "g6Hf":
/*!***********************************************!*\
  !*** ./src/app/class/tabletop-object-util.ts ***!
  \***********************************************/
/*! exports provided: moveToTopmost */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "moveToTopmost", function() { return moveToTopmost; });
/* harmony import */ var _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core/synchronize-object/object-store */ "hm7o");

function moveToTopmost(topmost, otherRelatives) {
    if (otherRelatives === void 0) { otherRelatives = []; }
    var objects = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_0__["ObjectStore"].instance.getObjects(topmost.aliasName);
    otherRelatives.forEach(function (aliasName) { return objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_0__["ObjectStore"].instance.getObjects(aliasName)); });
    objects = objects.filter(function (obj) { return obj.isVisibleOnTable; });
    var maxZindex = -1;
    var hasConflict = false;
    for (var i = 0; i < objects.length; i++) {
        if (maxZindex === objects[i].zindex) {
            hasConflict = true;
        }
        else if (maxZindex < objects[i].zindex) {
            maxZindex = objects[i].zindex;
            hasConflict = false;
        }
    }
    if (maxZindex === topmost.zindex && !hasConflict)
        return;
    topmost.zindex = maxZindex + 1;
    if (topmost.zindex < objects.length + 256)
        return;
    objects.sort(function (a, b) { return a.zindex - b.zindex; });
    for (var i = 0; i < objects.length; i++) {
        objects[i].zindex = i;
    }
}


/***/ }),

/***/ "gKYc":
/*!**********************************!*\
  !*** ./src/app/class/terrain.ts ***!
  \**********************************/
/*! exports provided: TerrainViewState, Terrain */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TerrainViewState", function() { return TerrainViewState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Terrain", function() { return Terrain; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _data_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./data-element */ "gkrD");
/* harmony import */ var _tabletop_object__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tabletop-object */ "e8gA");




var TerrainViewState;
(function (TerrainViewState) {
    TerrainViewState[TerrainViewState["NULL"] = 0] = "NULL";
    TerrainViewState[TerrainViewState["FLOOR"] = 1] = "FLOOR";
    TerrainViewState[TerrainViewState["WALL"] = 2] = "WALL";
    TerrainViewState[TerrainViewState["ALL"] = 3] = "ALL";
})(TerrainViewState || (TerrainViewState = {}));
var Terrain = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(Terrain, _super);
    function Terrain() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.isLocked = false;
        _this.mode = TerrainViewState.ALL;
        _this.rotate = 0;
        return _this;
    }
    Terrain_1 = Terrain;
    Object.defineProperty(Terrain.prototype, "width", {
        get: function () { return this.getCommonValue('width', 1); },
        set: function (width) { this.setCommonValue('width', width); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terrain.prototype, "height", {
        get: function () { return this.getCommonValue('height', 1); },
        set: function (height) { this.setCommonValue('height', height); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terrain.prototype, "depth", {
        get: function () { return this.getCommonValue('depth', 1); },
        set: function (depth) { this.setCommonValue('depth', depth); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terrain.prototype, "name", {
        get: function () { return this.getCommonValue('name', ''); },
        set: function (name) { this.setCommonValue('name', name); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terrain.prototype, "wallImage", {
        get: function () { return this.getImageFile('wall'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terrain.prototype, "floorImage", {
        get: function () { return this.getImageFile('floor'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terrain.prototype, "hasWall", {
        get: function () { return this.mode & TerrainViewState.WALL ? true : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terrain.prototype, "hasFloor", {
        get: function () { return this.mode & TerrainViewState.FLOOR ? true : false; },
        enumerable: false,
        configurable: true
    });
    Terrain.create = function (name, width, depth, height, wall, floor, identifier) {
        var object = null;
        if (identifier) {
            object = new Terrain_1(identifier);
        }
        else {
            object = new Terrain_1();
        }
        object.createDataElements();
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('name', name, {}, 'name_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('width', width, {}, 'width_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('height', height, {}, 'height_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('depth', depth, {}, 'depth_' + object.identifier));
        object.imageDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('wall', wall, { type: 'image' }, 'wall_' + object.identifier));
        object.imageDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('floor', floor, { type: 'image' }, 'floor_' + object.identifier));
        object.initialize();
        return object;
    };
    var Terrain_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], Terrain.prototype, "isLocked", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], Terrain.prototype, "mode", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], Terrain.prototype, "rotate", void 0);
    Terrain = Terrain_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('terrain')
    ], Terrain);
    return Terrain;
}(_tabletop_object__WEBPACK_IMPORTED_MODULE_3__["TabletopObject"]));



/***/ }),

/***/ "gfSO":
/*!****************************************************************!*\
  !*** ./src/app/component/peer-cursor/peer-cursor.component.ts ***!
  \****************************************************************/
/*! exports provided: PeerCursorComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PeerCursorComponent", function() { return PeerCursorComponent; });
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_core_system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/system/util/resettable-timeout */ "9ht1");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_batch_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! service/batch.service */ "taL5");
/* harmony import */ var service_coordinate_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! service/coordinate.service */ "TzEH");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");








var _c0 = ["cursor"];
var _c1 = ["opacity"];
function PeerCursorComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 1, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "div", 3, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](4, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](5, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](6, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "span", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind2"](5, 3, "url(" + ctx_r0.iconUrl + ")", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](ctx_r0.name);
} }
var PeerCursorComponent = /** @class */ (function () {
    function PeerCursorComponent(batchService, coordinateService, ngZone) {
        var _this = this;
        this.batchService = batchService;
        this.coordinateService = coordinateService;
        this.ngZone = ngZone;
        this.cursor = _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_2__["PeerCursor"].myCursor;
        this.cursorElement = null;
        this.opacityElement = null;
        this.fadeOutTimer = null;
        this.updateInterval = null;
        this.callcack = function (e) { return _this.onMouseMove(e); };
        this._x = 0;
        this._y = 0;
    }
    Object.defineProperty(PeerCursorComponent.prototype, "iconUrl", {
        get: function () { return this.cursor.image.url; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PeerCursorComponent.prototype, "name", {
        get: function () { return this.cursor.name; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PeerCursorComponent.prototype, "isMine", {
        get: function () { return this.cursor.isMine; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PeerCursorComponent.prototype, "delayMs", {
        get: function () {
            var maxDelay = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__["Network"].peerIds.length * 16.6;
            return maxDelay < 100 ? 100 : maxDelay;
        },
        enumerable: false,
        configurable: true
    });
    PeerCursorComponent.prototype.ngOnInit = function () {
        var _this = this;
        if (!this.isMine) {
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__["EventSystem"].register(this)
                .on('CURSOR_MOVE', function (event) {
                if (event.sendFrom !== _this.cursor.peerId)
                    return;
                _this.batchService.add(function () {
                    _this.stopTransition();
                    _this.setAnimatedTransition();
                    _this.setPosition(event.data[0], event.data[1], event.data[2]);
                    _this.resetFadeOut();
                }, _this);
            });
        }
    };
    PeerCursorComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        if (this.isMine) {
            this.ngZone.runOutsideAngular(function () {
                document.body.addEventListener('mousemove', _this.callcack);
                document.body.addEventListener('touchmove', _this.callcack);
            });
        }
        else {
            this.cursorElement = this.cursorElementRef.nativeElement;
            this.opacityElement = this.opacityElementRef.nativeElement;
            this.setAnimatedTransition();
            this.setPosition(0, 0, 0);
            this.resetFadeOut();
        }
    };
    PeerCursorComponent.prototype.ngOnDestroy = function () {
        document.body.removeEventListener('mousemove', this.callcack);
        document.body.removeEventListener('touchmove', this.callcack);
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__["EventSystem"].unregister(this);
        this.batchService.remove(this);
        if (this.fadeOutTimer)
            this.fadeOutTimer.clear();
    };
    PeerCursorComponent.prototype.onMouseMove = function (e) {
        var _this = this;
        var x = e.touches ? e.changedTouches[0].pageX : e.pageX;
        var y = e.touches ? e.changedTouches[0].pageY : e.pageY;
        if (x === this._x && y === this._y)
            return;
        this._x = x;
        this._y = y;
        this._target = e.target;
        if (!this.updateInterval) {
            this.updateInterval = setTimeout(function () {
                _this.updateInterval = null;
                _this.calcLocalCoordinate(_this._x, _this._y, _this._target);
            }, this.delayMs);
        }
    };
    PeerCursorComponent.prototype.calcLocalCoordinate = function (x, y, target) {
        if (!document.getElementById('app-table-layer').contains(target))
            return;
        var coordinate = { x: x, y: y, z: 0 };
        coordinate = this.coordinateService.calcTabletopLocalCoordinate(coordinate, target);
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__["EventSystem"].call('CURSOR_MOVE', [coordinate.x, coordinate.y, coordinate.z]);
    };
    PeerCursorComponent.prototype.resetFadeOut = function () {
        var _this = this;
        this.opacityElement.style.opacity = '1.0';
        if (this.fadeOutTimer == null) {
            this.fadeOutTimer = new _udonarium_core_system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_1__["ResettableTimeout"](function () {
                _this.opacityElement.style.opacity = '0.0';
            }, 3000);
        }
        this.fadeOutTimer.reset();
    };
    PeerCursorComponent.prototype.stopTransition = function () {
        this.cursorElement.style.transform = window.getComputedStyle(this.cursorElement).transform;
    };
    PeerCursorComponent.prototype.setAnimatedTransition = function () {
        this.cursorElement.style.transition = "transform " + (this.delayMs + 33) + "ms linear, opacity 0.5s ease-out";
    };
    PeerCursorComponent.prototype.setPosition = function (x, y, z) {
        this.cursorElement.style.transform = 'translateX(' + x + 'px) translateY(' + y + 'px) translateZ(' + z + 'px)';
    };
    PeerCursorComponent.ɵfac = function PeerCursorComponent_Factory(t) { return new (t || PeerCursorComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](service_batch_service__WEBPACK_IMPORTED_MODULE_4__["BatchService"]), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](service_coordinate_service__WEBPACK_IMPORTED_MODULE_5__["CoordinateService"]), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_3__["NgZone"])); };
    PeerCursorComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({ type: PeerCursorComponent, selectors: [["peer-cursor"], ["", "peer-cursor", ""]], viewQuery: function PeerCursorComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵviewQuery"](_c0, 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵviewQuery"](_c1, 1);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵloadQuery"]()) && (ctx.cursorElementRef = _t.first);
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵloadQuery"]()) && (ctx.opacityElementRef = _t.first);
        } }, inputs: { cursor: "cursor" }, decls: 1, vars: 1, consts: [["class", "component is-3d is-transition is-pointer-events-none", 4, "ngIf"], [1, "component", "is-3d", "is-transition", "is-pointer-events-none"], ["cursor", ""], [1, "peer-cursor", "is-3d", "is-transition"], ["opacity", ""], [1, "icon"], [1, "name", "is-center"], [2, "white-space", "nowrap"]], template: function PeerCursorComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](0, PeerCursorComponent_div_0_Template, 9, 6, "div", 0);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !ctx.isMine);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_6__["NgIf"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_7__["SafePipe"]], styles: [".component[_ngcontent-%COMP%] {\n  position: absolute;\n  overflow: visible;\n  -webkit-user-select: none;\n  user-select: none;\n  -moz-user-drag: none;\n  -webkit-user-drag: none;\n}\n\n.is-transition[_ngcontent-%COMP%] {\n  transition: transform 133ms linear, opacity 0.5s ease-out;\n}\n\n.peer-cursor[_ngcontent-%COMP%] {\n  height: 45px;\n  width: 45px;\n  position: absolute;\n  left: 0;\n  top: 0;\n  box-sizing: border-box;\n  border: solid 1px rgba(240, 218, 189);\n  border-radius: 50% 50% 5% 50%;\n  background-color: rgba(240, 218, 189, 0.9);\n  transform-origin: 100% 100%;\n  transform: translateX(-100%) translateY(-100%)  rotateX(-90deg) rotateZ(45deg);\n}\n\n.icon[_ngcontent-%COMP%] {\n  overflow: visible;\n  height: 100%;\n  width: 100%;\n  border-radius: 100%;\n  background-position: top, center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  transform: rotateZ(-45deg) scale(0.85);\n}\n\n.name[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  font-size: 7px;\n  padding: 2px 5px;\n  border-radius: 14px;\n  color: #CCC;\n  background-color: rgba(30, 30, 30, 0.8);\n}\n\n.is-center[_ngcontent-%COMP%] {\n  position: absolute;\n  left: 50%;\n  top: -26px;\n  transform: translateX(-50%);\n}\n\n.is-3d[_ngcontent-%COMP%] {\n  transform-style: preserve-3d;\n}\n\n.is-pointer-events-none[_ngcontent-%COMP%] {\n  pointer-events: none;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBlZXItY3Vyc29yLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7RUFDbEIsaUJBQWlCO0VBRWpCLHlCQUF5QjtFQUN6QixpQkFBaUI7RUFDakIsb0JBQW9CO0VBQ3BCLHVCQUF1QjtBQUN6Qjs7QUFFQTtFQUNFLHlEQUF5RDtBQUMzRDs7QUFFQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsa0JBQWtCO0VBQ2xCLE9BQU87RUFDUCxNQUFNO0VBQ04sc0JBQXNCO0VBQ3RCLHFDQUFxQztFQUNyQyw2QkFBNkI7RUFDN0IsMENBQTBDO0VBQzFDLDJCQUEyQjtFQUMzQiw4RUFBOEU7QUFDaEY7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIsWUFBWTtFQUNaLFdBQVc7RUFDWCxtQkFBbUI7RUFDbkIsZ0NBQWdDO0VBQ2hDLDRCQUE0QjtFQUM1QixzQkFBc0I7RUFDdEIsc0NBQXNDO0FBQ3hDOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGNBQWM7RUFDZCxnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLFdBQVc7RUFDWCx1Q0FBdUM7QUFDekM7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsU0FBUztFQUNULFVBQVU7RUFDViwyQkFBMkI7QUFDN0I7O0FBRUE7RUFFRSw0QkFBNEI7QUFDOUI7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEIiLCJmaWxlIjoicGVlci1jdXJzb3IuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb21wb25lbnQge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIG92ZXJmbG93OiB2aXNpYmxlO1xuICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgLW1vei11c2VyLWRyYWc6IG5vbmU7XG4gIC13ZWJraXQtdXNlci1kcmFnOiBub25lO1xufVxuXG4uaXMtdHJhbnNpdGlvbiB7XG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAxMzNtcyBsaW5lYXIsIG9wYWNpdHkgMC41cyBlYXNlLW91dDtcbn1cblxuLnBlZXItY3Vyc29yIHtcbiAgaGVpZ2h0OiA0NXB4O1xuICB3aWR0aDogNDVweDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiAwO1xuICB0b3A6IDA7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlcjogc29saWQgMXB4IHJnYmEoMjQwLCAyMTgsIDE4OSk7XG4gIGJvcmRlci1yYWRpdXM6IDUwJSA1MCUgNSUgNTAlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI0MCwgMjE4LCAxODksIDAuOSk7XG4gIHRyYW5zZm9ybS1vcmlnaW46IDEwMCUgMTAwJTtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0xMDAlKSB0cmFuc2xhdGVZKC0xMDAlKSAgcm90YXRlWCgtOTBkZWcpIHJvdGF0ZVooNDVkZWcpO1xufVxuXG4uaWNvbiB7XG4gIG92ZXJmbG93OiB2aXNpYmxlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHdpZHRoOiAxMDAlO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiB0b3AsIGNlbnRlcjtcbiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcbiAgdHJhbnNmb3JtOiByb3RhdGVaKC00NWRlZykgc2NhbGUoMC44NSk7XG59XG5cbi5uYW1lIHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgZm9udC1zaXplOiA3cHg7XG4gIHBhZGRpbmc6IDJweCA1cHg7XG4gIGJvcmRlci1yYWRpdXM6IDE0cHg7XG4gIGNvbG9yOiAjQ0NDO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDMwLCAzMCwgMzAsIDAuOCk7XG59XG5cbi5pcy1jZW50ZXIge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDUwJTtcbiAgdG9wOiAtMjZweDtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpO1xufVxuXG4uaXMtM2Qge1xuICAtd2Via2l0LXRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XG4gIHRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XG59XG5cbi5pcy1wb2ludGVyLWV2ZW50cy1ub25lIHtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59Il19 */"] });
    return PeerCursorComponent;
}());



/***/ }),

/***/ "gkrD":
/*!***************************************!*\
  !*** ./src/app/class/data-element.ts ***!
  \***************************************/
/*! exports provided: DataElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataElement", function() { return DataElement; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/object-node */ "F67Z");



var DataElement = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(DataElement, _super);
    function DataElement() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DataElement_1 = DataElement;
    Object.defineProperty(DataElement.prototype, "isNumberResource", {
        get: function () { return this.type != null && this.type === 'numberResource'; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DataElement.prototype, "isNote", {
        get: function () { return this.type != null && this.type === 'note'; },
        enumerable: false,
        configurable: true
    });
    DataElement.create = function (name, value, attributes, identifier) {
        if (value === void 0) { value = ''; }
        if (attributes === void 0) { attributes = {}; }
        if (identifier === void 0) { identifier = ''; }
        var dataElement;
        if (identifier && 0 < identifier.length) {
            dataElement = new DataElement_1(identifier);
        }
        else {
            dataElement = new DataElement_1();
        }
        dataElement.attributes = attributes;
        dataElement.name = name;
        dataElement.value = value;
        dataElement.initialize();
        return dataElement;
    };
    DataElement.prototype.getElementsByName = function (name) {
        var e_1, _a;
        var children = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                var child = _c.value;
                if (child instanceof DataElement_1) {
                    if (child.getAttribute('name') === name)
                        children.push(child);
                    Array.prototype.push.apply(children, child.getElementsByName(name));
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return children;
    };
    DataElement.prototype.getElementsByType = function (type) {
        var e_2, _a;
        var children = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                var child = _c.value;
                if (child instanceof DataElement_1) {
                    if (child.getAttribute('type') === type)
                        children.push(child);
                    Array.prototype.push.apply(children, child.getElementsByType(type));
                }
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
        return children;
    };
    DataElement.prototype.getFirstElementByName = function (name) {
        var e_3, _a;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                var child = _c.value;
                if (child instanceof DataElement_1) {
                    if (child.getAttribute('name') === name)
                        return child;
                    var match = child.getFirstElementByName(name);
                    if (match)
                        return match;
                }
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return null;
    };
    var DataElement_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DataElement.prototype, "name", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DataElement.prototype, "type", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DataElement.prototype, "currentValue", void 0);
    DataElement = DataElement_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('data')
    ], DataElement);
    return DataElement;
}(_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__["ObjectNode"]));



/***/ }),

/***/ "glHC":
/*!**********************************!*\
  !*** ./src/app/class/Jukebox.ts ***!
  \**********************************/
/*! exports provided: Jukebox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Jukebox", function() { return Jukebox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/file-storage/audio-player */ "zeEm");
/* harmony import */ var _core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/file-storage/audio-storage */ "Prh6");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/synchronize-object/game-object */ "xdgh");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./core/system */ "yNnI");






var Jukebox = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(Jukebox, _super);
    function Jukebox() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.audioIdentifier = '';
        _this.startTime = 0;
        _this.isLoop = false;
        _this.isPlaying = false;
        _this.audioPlayer = new _core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__["AudioPlayer"]();
        return _this;
    }
    Object.defineProperty(Jukebox.prototype, "audio", {
        get: function () { return _core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__["AudioStorage"].instance.get(this.audioIdentifier); },
        enumerable: false,
        configurable: true
    });
    // GameObject Lifecycle
    Jukebox.prototype.onStoreAdded = function () {
        _super.prototype.onStoreAdded.call(this);
        this.unlockAfterUserInteraction();
    };
    // GameObject Lifecycle
    Jukebox.prototype.onStoreRemoved = function () {
        _super.prototype.onStoreRemoved.call(this);
        this._stop();
    };
    Jukebox.prototype.play = function (identifier, isLoop) {
        if (isLoop === void 0) { isLoop = false; }
        var audio = _core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__["AudioStorage"].instance.get(identifier);
        if (!audio || !audio.isReady)
            return;
        this.audioIdentifier = identifier;
        this.isPlaying = true;
        this.isLoop = isLoop;
        this._play();
    };
    Jukebox.prototype._play = function () {
        this._stop();
        if (!this.audio || !this.audio.isReady) {
            this.playAfterFileUpdate();
            return;
        }
        this.audioPlayer.loop = true;
        this.audioPlayer.play(this.audio);
    };
    Jukebox.prototype.stop = function () {
        this.audioIdentifier = '';
        this.isPlaying = false;
        this._stop();
    };
    Jukebox.prototype._stop = function () {
        this.unregisterEvent();
        this.audioPlayer.stop();
    };
    Jukebox.prototype.playAfterFileUpdate = function () {
        var _this = this;
        _core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].register(this)
            .on('UPDATE_AUDIO_RESOURE', -100, function (event) {
            _this._play();
        });
    };
    Jukebox.prototype.unlockAfterUserInteraction = function () {
        var _this = this;
        var callback = function () {
            document.body.removeEventListener('touchstart', callback, true);
            document.body.removeEventListener('mousedown', callback, true);
            _this.audioPlayer.stop();
            if (_this.isPlaying)
                _this._play();
        };
        document.body.addEventListener('touchstart', callback, true);
        document.body.addEventListener('mousedown', callback, true);
    };
    Jukebox.prototype.unregisterEvent = function () {
        _core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].unregister(this, 'UPDATE_AUDIO_RESOURE');
    };
    // override
    Jukebox.prototype.apply = function (context) {
        var audioIdentifier = this.audioIdentifier;
        var isPlaying = this.isPlaying;
        _super.prototype.apply.call(this, context);
        if ((audioIdentifier !== this.audioIdentifier || !isPlaying) && this.isPlaying) {
            this._play();
        }
        else if (isPlaying !== this.isPlaying && !this.isPlaying) {
            this._stop();
        }
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], Jukebox.prototype, "audioIdentifier", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], Jukebox.prototype, "startTime", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], Jukebox.prototype, "isLoop", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], Jukebox.prototype, "isPlaying", void 0);
    Jukebox = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncObject"])('jukebox')
    ], Jukebox);
    return Jukebox;
}(_core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_4__["GameObject"]));



/***/ }),

/***/ "hm7o":
/*!***************************************************************!*\
  !*** ./src/app/class/core/synchronize-object/object-store.ts ***!
  \***************************************************************/
/*! exports provided: ObjectStore */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectStore", function() { return ObjectStore; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../system */ "yNnI");
/* harmony import */ var _system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../system/util/zero-timeout */ "eS09");



var ObjectStore = /** @class */ (function () {
    function ObjectStore() {
        var _this = this;
        this.identifierMap = new Map();
        this.aliasNameMap = new Map();
        this.garbageMap = new Map();
        this.queueMap = new Map();
        this.updateInterval = null;
        this.garbageCollectionInterval = null;
        this.updateCallback = function () { _this.updateQueue(); };
        console.log('ObjectStore ready...');
    }
    Object.defineProperty(ObjectStore, "instance", {
        get: function () {
            if (!ObjectStore._instance)
                ObjectStore._instance = new ObjectStore();
            return ObjectStore._instance;
        },
        enumerable: false,
        configurable: true
    });
    ;
    ObjectStore.prototype.add = function (object, shouldBroadcast) {
        if (shouldBroadcast === void 0) { shouldBroadcast = true; }
        if (this.get(object.identifier) != null || this.isDeleted(object.identifier))
            return null;
        this.identifierMap.set(object.identifier, object);
        var objectsMap = this.aliasNameMap.has(object.aliasName) ? this.aliasNameMap.get(object.aliasName) : this.aliasNameMap.set(object.aliasName, new Map()).get(object.aliasName);
        objectsMap.set(object.identifier, object);
        object.onStoreAdded();
        if (shouldBroadcast)
            this.update(object.toContext());
        return object;
    };
    ObjectStore.prototype.remove = function (object) {
        if (!this.identifierMap.has(object.identifier))
            return null;
        this.identifierMap.delete(object.identifier);
        var objectsMap = this.aliasNameMap.get(object.aliasName);
        if (objectsMap)
            objectsMap.delete(object.identifier);
        object.onStoreRemoved();
        return object;
    };
    ObjectStore.prototype.delete = function (arg, shouldBroadcast) {
        if (shouldBroadcast === void 0) { shouldBroadcast = true; }
        var object = null;
        var identifier = null;
        if (typeof arg === 'string') {
            object = this.get(arg);
            identifier = arg;
        }
        else {
            object = arg;
            identifier = arg.identifier;
        }
        this.markForDelete(identifier);
        return object == null ? null : this._delete(object, shouldBroadcast);
    };
    ObjectStore.prototype._delete = function (object, shouldBroadcast) {
        if (this.remove(object) === null)
            return null;
        if (shouldBroadcast)
            _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('DELETE_GAME_OBJECT', { identifier: object.identifier });
        return object;
    };
    ObjectStore.prototype.markForDelete = function (identifier) {
        this.garbageMap.set(identifier, performance.now());
        this.garbageCollection(10 * 60 * 1000);
    };
    ObjectStore.prototype.get = function (identifier) {
        return this.identifierMap.has(identifier) ? this.identifierMap.get(identifier) : null;
    };
    ObjectStore.prototype.getObjects = function (arg) {
        if (arg == null) {
            return Array.from(this.identifierMap.values());
        }
        var aliasName = '';
        if (typeof arg === 'string') {
            aliasName = arg;
        }
        else {
            aliasName = arg.aliasName;
        }
        return this.aliasNameMap.has(aliasName) ? Array.from(this.aliasNameMap.get(aliasName).values()) : [];
    };
    ObjectStore.prototype.update = function (arg) {
        var context = null;
        if (typeof arg === 'string') {
            var object = this.get(arg);
            if (object)
                context = object.toContext();
        }
        else {
            context = arg;
        }
        if (!context)
            return;
        if (this.queueMap.has(context.identifier)) {
            var queue = this.queueMap.get(context.identifier);
            for (var key in context) {
                queue[key] = context[key];
            }
            return;
        }
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('UPDATE_GAME_OBJECT', context);
        this.queueMap.set(context.identifier, context);
        if (this.updateInterval === null) {
            this.updateInterval = Object(_system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_2__["setZeroTimeout"])(this.updateCallback);
        }
    };
    ObjectStore.prototype.updateQueue = function () {
        this.queueMap.clear();
        this.updateInterval = null;
    };
    ObjectStore.prototype.isDeleted = function (identifier) {
        var timeStamp = this.garbageMap.get(identifier);
        return timeStamp != null;
    };
    ObjectStore.prototype.getCatalog = function () {
        var e_1, _a;
        var catalog = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.identifierMap.values()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var object = _c.value;
                catalog.push({ identifier: object.identifier, version: object.version });
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return catalog;
    };
    ObjectStore.prototype.clearDeleteHistory = function () {
        this.garbageMap.clear();
    };
    ObjectStore.prototype.garbageCollection = function (arg) {
        var _this = this;
        if (typeof arg === 'number') {
            if (this.garbageCollectionInterval === null) {
                this.garbageCollectionInterval = setTimeout(function () { _this.garbageCollectionInterval = null; }, 1000);
                this._garbageCollection(arg);
            }
        }
        else {
            this.garbageMap.delete(arg.identifier);
        }
    };
    ObjectStore.prototype._garbageCollection = function (ms) {
        var nowDate = performance.now();
        var checkLength = this.garbageMap.size - 100000;
        if (checkLength < 1)
            return;
        var entries = this.garbageMap.entries();
        while (checkLength < 1) {
            checkLength--;
            var item = entries.next();
            if (item.done)
                break;
            var identifier = item.value[0];
            var timeStamp = item.value[1];
            if (timeStamp + ms < nowDate)
                continue;
            this.garbageMap.delete(identifier);
        }
    };
    return ObjectStore;
}());



/***/ }),

/***/ "jC/+":
/*!******************************************************************!*\
  !*** ./src/app/component/chat-palette/chat-palette.component.ts ***!
  \******************************************************************/
/*! exports provided: ChatPaletteComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatPaletteComponent", function() { return ChatPaletteComponent; });
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/dice-bot */ "JUIv");
/* harmony import */ var _udonarium_game_character__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/game-character */ "M/aK");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_chat_message_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/chat-message.service */ "PEfN");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var component_chat_input_chat_input_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! component/chat-input/chat-input.component */ "+l6h");
/* harmony import */ var component_badge_badge_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! component/badge/badge.component */ "xKeS");












var _c0 = ["chatInput"];
var _c1 = ["chatPlette"];
function ChatPaletteComponent_label_4_badge_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](0, "badge", 12);
} if (rf & 2) {
    var chatTab_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("count", chatTab_r7.unreadLength);
} }
function ChatPaletteComponent_label_4_Template(rf, ctx) { if (rf & 1) {
    var _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "input", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function ChatPaletteComponent_label_4_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r11); var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](); return ctx_r10.chatTabidentifier = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](4, ChatPaletteComponent_label_4_badge_4_Template, 1, 1, "badge", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} if (rf & 2) {
    var chatTab_r7 = ctx.$implicit;
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpropertyInterpolate"]("value", chatTab_r7.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", ctx_r0.chatTabidentifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](chatTab_r7.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", chatTab_r7.hasUnread);
} }
function ChatPaletteComponent_div_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "i", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "info_outline");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3, " \u30C1\u30E3\u30C3\u30C8\u30D1\u30EC\u30C3\u30C8\u7DE8\u96C6\u4E2D\u3067\u3059");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} }
function ChatPaletteComponent_div_8_ng_container_3_option_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "option", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} if (rf & 2) {
    var palette_r15 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpropertyInterpolate"]("value", palette_r15);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](palette_r15);
} }
function ChatPaletteComponent_div_8_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](1, ChatPaletteComponent_div_8_ng_container_3_option_1_Template, 2, 2, "option", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", ctx_r13.palette.getPalette());
} }
function ChatPaletteComponent_div_8_Template(rf, ctx) { if (rf & 1) {
    var _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "select", 16, 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("input", function ChatPaletteComponent_div_8_Template_select_input_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r17); var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](); return ctx_r16.selectPalette($event.target.value); })("click", function ChatPaletteComponent_div_8_Template_select_click_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r17); var ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](); return ctx_r18.clickPalette($event.target.value); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](3, ChatPaletteComponent_div_8_ng_container_3_Template, 2, 1, "ng-container", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r3.palette);
} }
function ChatPaletteComponent_div_9_Template(rf, ctx) { if (rf & 1) {
    var _r20 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "textarea", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function ChatPaletteComponent_div_9_Template_textarea_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r20); var ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](); return ctx_r19.editPalette = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", ctx_r4.editPalette);
} }
function ChatPaletteComponent_span_12_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1, "\u30C1\u30E3\u30C3\u30C8\u30D1\u30EC\u30C3\u30C8\u306E\u7DE8\u96C6");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} }
function ChatPaletteComponent_span_13_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1, "\u30C1\u30E3\u30C3\u30C8\u30D1\u30EC\u30C3\u30C8\u3092\u78BA\u5B9A");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} }
var ChatPaletteComponent = /** @class */ (function () {
    function ChatPaletteComponent(chatMessageService, panelService) {
        this.chatMessageService = chatMessageService;
        this.panelService = panelService;
        this.character = null;
        this._gameType = '';
        this.chatTabidentifier = '';
        this.text = '';
        this.sendTo = '';
        this.isEdit = false;
        this.editPalette = '';
        this.doubleClickTimer = null;
    }
    Object.defineProperty(ChatPaletteComponent.prototype, "palette", {
        get: function () { return this.character.chatPalette; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatPaletteComponent.prototype, "gameType", {
        get: function () { return this._gameType; },
        set: function (gameType) {
            this._gameType = gameType;
            if (this.character.chatPalette)
                this.character.chatPalette.dicebot = gameType;
        },
        enumerable: false,
        configurable: true
    });
    ;
    ;
    Object.defineProperty(ChatPaletteComponent.prototype, "sendFrom", {
        get: function () { return this.character.identifier; },
        set: function (sendFrom) {
            this.onSelectedCharacter(sendFrom);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatPaletteComponent.prototype, "diceBotInfos", {
        get: function () { return _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_2__["DiceBot"].diceBotInfos; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatPaletteComponent.prototype, "chatTab", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_0__["ObjectStore"].instance.get(this.chatTabidentifier); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatPaletteComponent.prototype, "myPeer", {
        get: function () { return _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_4__["PeerCursor"].myCursor; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatPaletteComponent.prototype, "otherPeers", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_0__["ObjectStore"].instance.getObjects(_udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_4__["PeerCursor"]); },
        enumerable: false,
        configurable: true
    });
    ChatPaletteComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.updatePanelTitle(); });
        this.chatTabidentifier = this.chatMessageService.chatTabs ? this.chatMessageService.chatTabs[0].identifier : '';
        this.gameType = this.character.chatPalette ? this.character.chatPalette.dicebot : '';
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(this)
            .on('DELETE_GAME_OBJECT', -1000, function (event) {
            if (_this.character && _this.character.identifier === event.data.identifier) {
                _this.panelService.close();
            }
            if (_this.chatTabidentifier === event.data.identifier) {
                _this.chatTabidentifier = _this.chatMessageService.chatTabs ? _this.chatMessageService.chatTabs[0].identifier : '';
            }
        });
    };
    ChatPaletteComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(this);
        if (this.isEdit)
            this.toggleEditMode();
    };
    ChatPaletteComponent.prototype.updatePanelTitle = function () {
        this.panelService.title = this.character.name + ' のチャットパレット';
    };
    ChatPaletteComponent.prototype.onSelectedCharacter = function (identifier) {
        if (this.isEdit)
            this.toggleEditMode();
        var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_0__["ObjectStore"].instance.get(identifier);
        if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_3__["GameCharacter"]) {
            this.character = object;
            var gameType = this.character.chatPalette ? this.character.chatPalette.dicebot : '';
            if (0 < gameType.length)
                this.gameType = gameType;
        }
        this.updatePanelTitle();
    };
    ChatPaletteComponent.prototype.selectPalette = function (line) {
        this.text = line;
    };
    ChatPaletteComponent.prototype.clickPalette = function (line) {
        var _this = this;
        if (this.doubleClickTimer && this.text === line) {
            clearTimeout(this.doubleClickTimer);
            this.doubleClickTimer = null;
            this.chatInputComponent.sendChat(null);
        }
        else {
            this.text = line;
            this.doubleClickTimer = setTimeout(function () { _this.doubleClickTimer = null; }, 400);
        }
    };
    ChatPaletteComponent.prototype.sendChat = function (value) {
        if (this.chatTab) {
            var text = this.palette.evaluate(value.text, this.character.rootDataElement);
            this.chatMessageService.sendMessage(this.chatTab, text, value.gameType, value.sendFrom, value.sendTo);
        }
    };
    ChatPaletteComponent.prototype.resetPletteSelect = function () {
        if (!this.chatPletteElementRef.nativeElement)
            return;
        this.chatPletteElementRef.nativeElement.selectedIndex = -1;
    };
    ChatPaletteComponent.prototype.toggleEditMode = function () {
        this.isEdit = this.isEdit ? false : true;
        if (this.isEdit) {
            this.editPalette = this.palette.value + '';
        }
        else {
            this.palette.setPalette(this.editPalette);
        }
    };
    ChatPaletteComponent.ɵfac = function ChatPaletteComponent_Factory(t) { return new (t || ChatPaletteComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](service_chat_message_service__WEBPACK_IMPORTED_MODULE_6__["ChatMessageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"])); };
    ChatPaletteComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({ type: ChatPaletteComponent, selectors: [["chat-palette"]], viewQuery: function ChatPaletteComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵviewQuery"](_c0, 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵviewQuery"](_c1, 1);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵloadQuery"]()) && (ctx.chatInputComponent = _t.first);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵloadQuery"]()) && (ctx.chatPletteElementRef = _t.first);
        } }, inputs: { character: "character" }, decls: 14, vars: 11, consts: [[1, "flex-container"], [2, "flex-grow", "0"], [1, "chat-tab"], [4, "ngFor", "ngForOf"], [3, "onlyCharacters", "chatTabidentifier", "gameType", "sendFrom", "text", "gameTypeChange", "sendFromChange", "textChange", "chat"], ["chatInput", ""], ["class", "edit-info", 4, "ngIf"], ["style", "flex-grow: 1; height: 0; min-height: 100px;", 4, "ngIf"], ["type", "submit", 3, "click"], [4, "ngIf"], ["name", "chat-tab", "type", "radio", "ng-control", "options", 3, "value", "ngModel", "ngModelChange"], ["class", "badge", 3, "count", 4, "ngIf"], [1, "badge", 3, "count"], [1, "edit-info"], [1, "material-icons", 2, "vertical-align", "bottom", "size", "0.8rem"], [2, "flex-grow", "1", "height", "0", "min-height", "100px"], ["size", "5", 1, "palette", 2, "overflow-y", "auto", 3, "input", "click"], ["chatPlette", ""], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], ["placeholder", "\u30C1\u30E3\u30C3\u30C8\u30D1\u30EC\u30C3\u30C8", 1, "palette", 2, "resize", "none", 3, "ngModel", "ngModelChange"]], template: function ChatPaletteComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](2, "form");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](4, ChatPaletteComponent_label_4_Template, 5, 4, "label", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](5, "chat-input", 4, 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("gameTypeChange", function ChatPaletteComponent_Template_chat_input_gameTypeChange_5_listener($event) { return ctx.gameType = $event; })("sendFromChange", function ChatPaletteComponent_Template_chat_input_sendFromChange_5_listener($event) { return ctx.sendFrom = $event; })("textChange", function ChatPaletteComponent_Template_chat_input_textChange_5_listener($event) { return ctx.text = $event; })("chat", function ChatPaletteComponent_Template_chat_input_chat_5_listener($event) { return ctx.sendChat($event); });
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](7, ChatPaletteComponent_div_7_Template, 4, 0, "div", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](8, ChatPaletteComponent_div_8_Template, 4, 1, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](9, ChatPaletteComponent_div_9_Template, 2, 1, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](10, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](11, "button", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function ChatPaletteComponent_Template_button_click_11_listener() { return ctx.toggleEditMode(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](12, ChatPaletteComponent_span_12_Template, 2, 0, "span", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](13, ChatPaletteComponent_span_13_Template, 2, 0, "span", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", ctx.chatMessageService.chatTabs);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("onlyCharacters", true)("chatTabidentifier", ctx.chatTabidentifier)("gameType", ctx.gameType)("sendFrom", ctx.sendFrom)("text", ctx.text);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.isEdit);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx.isEdit);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.isEdit);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx.isEdit);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.isEdit);
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_8__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgForm"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgForOf"], component_chat_input_chat_input_component__WEBPACK_IMPORTED_MODULE_10__["ChatInputComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["RadioControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgModel"], component_badge_badge_component__WEBPACK_IMPORTED_MODULE_11__["BadgeComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgSelectOption"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["ɵangular_packages_forms_forms_x"]], styles: [".edit-info[_ngcontent-%COMP%] {\n  width: 100%;\n  text-align: center;\n  color: #CCC;\n  background-color: rgba(30, 30, 30, 0.8);\n}\n.palette[_ngcontent-%COMP%] {\n\n  box-sizing: border-box;\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", Verdana, Meiryo, sans-serif;\n  width: 100%;\n  height: 100%;\n}\n.flex-container[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n.chat-tab[_ngcontent-%COMP%] {\n  padding : 0 5px 5px 5px;\n  -webkit-user-select: none;\n          user-select: none;\n}\n.chat-tab[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n  display: inline-block;\n  position: relative;\n}\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%] {\n  display: none;\n}\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%] {\n  display: inline-block;\n  vertical-align: middle;\n  outline: 0;\n  font-size: 8px;\n  background-color: transparent;\n  color: #444; \n  border: solid 1px #555;\n  padding: 2px 8px;\n  margin: 2px;\n  border-radius: 100px;\n  cursor: pointer;\n}\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%]:hover {\n  background-color: #888;\n  color: #eee;\n  border: solid 1px #555;\n}\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]:checked    + div[_ngcontent-%COMP%] {\n  background: #555;\n  color: #CCC;\n}\n.badge[_ngcontent-%COMP%] {\n  position: absolute;\n  top: -4px;\n  right: 0;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtcGFsZXR0ZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsV0FBVztFQUNYLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsdUNBQXVDO0FBQ3pDO0FBQ0E7QUFDQSxXQUFXO0VBQ1Qsc0JBQXNCO0VBQ3RCLDZGQUE2RjtFQUM3RixXQUFXO0VBQ1gsWUFBWTtBQUNkO0FBRUE7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLFlBQVk7QUFDZDtBQUVBO0VBQ0UsdUJBQXVCO0VBQ3ZCLHlCQUFpQjtVQUFqQixpQkFBaUI7QUFDbkI7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQixrQkFBa0I7QUFDcEI7QUFFQTtFQUNFLGFBQWE7QUFDZjtBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLHNCQUFzQjtFQUN0QixVQUFVO0VBQ1YsY0FBYztFQUNkLDZCQUE2QjtFQUM3QixXQUFXO0VBQ1gsc0JBQXNCO0VBQ3RCLGdCQUFnQjtFQUNoQixXQUFXO0VBQ1gsb0JBQW9CO0VBQ3BCLGVBQWU7QUFDakI7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixXQUFXO0VBQ1gsc0JBQXNCO0FBQ3hCO0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsV0FBVztBQUNiO0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsU0FBUztFQUNULFFBQVE7QUFDViIsImZpbGUiOiJjaGF0LXBhbGV0dGUuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5lZGl0LWluZm8ge1xuICB3aWR0aDogMTAwJTtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBjb2xvcjogI0NDQztcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjgpO1xufVxuLnBhbGV0dGUge1xuLyouaW5wdXQgeyovXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGZvbnQtZmFtaWx5OiAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsIFwiSGVsdmV0aWNhIE5ldWVcIiwgVmVyZGFuYSwgTWVpcnlvLCBzYW5zLXNlcmlmO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG4uZmxleC1jb250YWluZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBoZWlnaHQ6IDEwMCU7XG59XG5cbi5jaGF0LXRhYiB7XG4gIHBhZGRpbmcgOiAwIDVweCA1cHggNXB4O1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbn1cblxuLmNoYXQtdGFiIGxhYmVsIHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG5cbi5jaGF0LXRhYiBpbnB1dFt0eXBlPVwicmFkaW9cIl0ge1xuICBkaXNwbGF5OiBub25lO1xufVxuXG4uY2hhdC10YWIgaW5wdXRbdHlwZT1cInJhZGlvXCJdICsgZGl2IHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICBvdXRsaW5lOiAwO1xuICBmb250LXNpemU6IDhweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIGNvbG9yOiAjNDQ0OyBcbiAgYm9yZGVyOiBzb2xpZCAxcHggIzU1NTtcbiAgcGFkZGluZzogMnB4IDhweDtcbiAgbWFyZ2luOiAycHg7XG4gIGJvcmRlci1yYWRpdXM6IDEwMHB4O1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5jaGF0LXRhYiBpbnB1dFt0eXBlPVwicmFkaW9cIl0gKyBkaXY6aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjODg4O1xuICBjb2xvcjogI2VlZTtcbiAgYm9yZGVyOiBzb2xpZCAxcHggIzU1NTtcbn1cblxuLmNoYXQtdGFiIGlucHV0W3R5cGU9XCJyYWRpb1wiXTpjaGVja2VkICsgZGl2IHtcbiAgYmFja2dyb3VuZDogIzU1NTtcbiAgY29sb3I6ICNDQ0M7XG59XG5cbi5iYWRnZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAtNHB4O1xuICByaWdodDogMDtcbn0iXX0= */"] });
    return ChatPaletteComponent;
}());



/***/ }),

/***/ "jJIX":
/*!****************************************************************!*\
  !*** ./src/app/class/core/system/network/skyway-connection.ts ***!
  \****************************************************************/
/*! exports provided: SkyWayConnection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SkyWayConnection", function() { return SkyWayConnection; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var msgpack_lite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! msgpack-lite */ "HlZf");
/* harmony import */ var msgpack_lite__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(msgpack_lite__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _util_compress__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/compress */ "ynNQ");
/* harmony import */ var _util_zero_timeout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/zero-timeout */ "eS09");
/* harmony import */ var _connection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./connection */ "Hcv6");
/* harmony import */ var _peer_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./peer-context */ "ztsr");
/* harmony import */ var _skyway_data_connection__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./skyway-data-connection */ "N5Fg");







var SkyWayConnection = /** @class */ (function () {
    function SkyWayConnection() {
        this._peerIds = [];
        this.peerContexts = [];
        this.callback = new _connection__WEBPACK_IMPORTED_MODULE_4__["ConnectionCallback"]();
        this.bandwidthUsage = 0;
        this.key = '';
        this.connections = [];
        this.listAllPeersCache = [];
        this.httpRequestInterval = performance.now() + 500;
        this.queue = Promise.resolve();
        this.relayingPeerIds = new Map();
        this.maybeUnavailablePeerIds = new Set();
    }
    Object.defineProperty(SkyWayConnection.prototype, "peerId", {
        get: function () { return this.peerContext ? this.peerContext.peerId : '???'; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SkyWayConnection.prototype, "peerIds", {
        get: function () { return this._peerIds; },
        enumerable: false,
        configurable: true
    });
    SkyWayConnection.prototype.open = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        console.log('open', args);
        if (args.length === 0) {
            this.peerContext = _peer_context__WEBPACK_IMPORTED_MODULE_5__["PeerContext"].create(_peer_context__WEBPACK_IMPORTED_MODULE_5__["PeerContext"].generateId());
        }
        else if (args.length === 1) {
            this.peerContext = _peer_context__WEBPACK_IMPORTED_MODULE_5__["PeerContext"].create(args[0]);
        }
        else {
            this.peerContext = _peer_context__WEBPACK_IMPORTED_MODULE_5__["PeerContext"].create(args[0], args[1], args[2], args[3]);
        }
        this.openPeer();
    };
    SkyWayConnection.prototype.close = function () {
        if (this.peer)
            this.peer.destroy();
        this.disconnectAll();
        this.peer = null;
        this.peerContext = null;
    };
    SkyWayConnection.prototype.connect = function (peerId) {
        if (!this.shouldConnect(peerId))
            return false;
        var conn = new _skyway_data_connection__WEBPACK_IMPORTED_MODULE_6__["SkyWayDataConnection"](this.peer.connect(peerId, {
            serialization: 'none',
            metadata: { sendFrom: this.peerId }
        }));
        this.openDataConnection(conn);
        return true;
    };
    SkyWayConnection.prototype.shouldConnect = function (peerId) {
        if (!this.peerContext || !this.peer || !this.peerId) {
            console.log('connect() is Fail. IDが割り振られるまで待てや');
            return false;
        }
        if (this.peerId === peerId) {
            console.log('connect() is Fail. ' + peerId + ' is me.');
            return false;
        }
        if (this.findDataConnection(peerId)) {
            console.log('connect() is Fail. <' + peerId + '> is already connecting.');
            return false;
        }
        if (peerId && peerId.length && peerId !== this.peerId)
            return true;
        return false;
    };
    SkyWayConnection.prototype.disconnect = function (peerId) {
        var conn = this.findDataConnection(peerId);
        if (!conn)
            return false;
        this.closeDataConnection(conn);
        return true;
    };
    SkyWayConnection.prototype.disconnectAll = function () {
        var e_1, _a;
        console.log('<closeAllDataConnection()>');
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.connections.concat()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var conn = _c.value;
                this.closeDataConnection(conn);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
    };
    SkyWayConnection.prototype.send = function (data, sendTo) {
        var _this = this;
        if (this.connections.length < 1)
            return;
        var container = {
            data: msgpack_lite__WEBPACK_IMPORTED_MODULE_1__["encode"](data),
            ttl: 1
        };
        var byteLength = container.data.byteLength;
        this.bandwidthUsage += byteLength;
        this.queue = this.queue.then(function () { return new Promise(function (resolve, reject) {
            Object(_util_zero_timeout__WEBPACK_IMPORTED_MODULE_3__["setZeroTimeout"])(function () { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(_this, void 0, void 0, function () {
                var compressed;
                return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            if (!(1 * 1024 < container.data.byteLength)) return [3 /*break*/, 2];
                            return [4 /*yield*/, Object(_util_compress__WEBPACK_IMPORTED_MODULE_2__["compressAsync"])(container.data)];
                        case 1:
                            compressed = _a.sent();
                            if (compressed.byteLength < container.data.byteLength) {
                                container.data = compressed;
                                container.isCompressed = true;
                            }
                            _a.label = 2;
                        case 2:
                            if (sendTo) {
                                this.sendUnicast(container, sendTo);
                            }
                            else {
                                this.sendBroadcast(container);
                            }
                            this.bandwidthUsage -= byteLength;
                            return [2 /*return*/, resolve()];
                    }
                });
            }); });
        }); });
    };
    SkyWayConnection.prototype.sendUnicast = function (container, sendTo) {
        container.ttl = 0;
        var conn = this.findDataConnection(sendTo);
        if (conn && conn.open)
            conn.send(container);
    };
    SkyWayConnection.prototype.sendBroadcast = function (container) {
        var e_2, _a;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.connections), _c = _b.next(); !_c.done; _c = _b.next()) {
                var conn = _c.value;
                if (conn.open)
                    conn.send(container);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
    };
    SkyWayConnection.prototype.setApiKey = function (key) {
        if (this.key !== key)
            console.log('Key Change');
        this.key = key;
    };
    SkyWayConnection.prototype.listAllPeers = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            if (!_this.peer)
                return resolve([]);
            var now = performance.now();
            if (now < _this.httpRequestInterval) {
                console.warn('httpRequestInterval... ' + (_this.httpRequestInterval - now));
                resolve(_this.listAllPeersCache.concat());
                return;
            }
            _this.httpRequestInterval = now + 6000;
            _this.peer.listAllPeers(function (list) {
                _this.listAllPeersCache = list.concat();
                resolve(list);
            });
        });
    };
    SkyWayConnection.prototype.openPeer = function () {
        var _this = this;
        if (this.peer) {
            console.warn('It is already opened.');
            this.close();
        }
        var peer = new Peer(this.peerContext.peerId, { key: this.key }); // SkyWay
        peer.on('open', function (id) {
            console.log('My peer ID is: ' + id);
            if (!_this.peerContext || _this.peerContext.peerId !== id) {
                _this.peerContext = _peer_context__WEBPACK_IMPORTED_MODULE_5__["PeerContext"].parse(id);
            }
            _this.peerContext.isOpen = true;
            console.log('My peer Context', _this.peerContext);
            if (_this.callback.onOpen)
                _this.callback.onOpen(_this.peerId);
        });
        peer.on('connection', function (conn) {
            _this.openDataConnection(new _skyway_data_connection__WEBPACK_IMPORTED_MODULE_6__["SkyWayDataConnection"](conn));
        });
        peer.on('error', function (err) {
            console.error('<' + _this.peerId + '> ' + err.type + ' => ' + err.message);
            var errorMessage = _this.getSkyWayErrorMessage(err.type);
            errorMessage += ': ' + err.message;
            switch (err.type) {
                case 'peer-unavailable':
                case 'invalid-id':
                case 'invalid-key':
                case 'list-error':
                case 'server-error':
                    break;
                case 'disconnected':
                case 'socket-error':
                default:
                    if (_this.peerContext && _this.peerContext.isOpen) {
                        if (_this.callback.onClose)
                            _this.callback.onClose(_this.peerId);
                    }
                    break;
            }
            if (_this.callback.onError)
                _this.callback.onError(_this.peerId, errorMessage);
        });
        this.peer = peer;
    };
    SkyWayConnection.prototype.openDataConnection = function (conn) {
        var _this = this;
        if (this.addDataConnection(conn) === false)
            return;
        var index = this.connections.indexOf(conn);
        var context = null;
        if (0 <= index)
            context = this.peerContexts[index];
        this.maybeUnavailablePeerIds.add(conn.remoteId);
        conn.on('data', function (data) {
            _this.onData(conn, data);
        });
        conn.on('open', function () {
            _this.maybeUnavailablePeerIds.delete(conn.remoteId);
            if (context)
                context.isOpen = true;
            _this.updatePeerList();
            if (_this.callback.onConnect)
                _this.callback.onConnect(conn.remoteId);
        });
        conn.on('close', function () {
            _this.closeDataConnection(conn);
            if (_this.callback.onDisconnect)
                _this.callback.onDisconnect(conn.remoteId);
        });
        conn.on('error', function (err) {
            _this.closeDataConnection(conn);
            if (_this.callback.onError)
                _this.callback.onError(conn.remoteId, err);
        });
    };
    SkyWayConnection.prototype.closeDataConnection = function (conn) {
        conn.close();
        var index = this.connections.indexOf(conn);
        if (0 <= index) {
            console.log(conn.remoteId + ' is えんいー' + 'index:' + index + ' length:' + this.connections.length);
            this.connections.splice(index, 1);
            this.peerContexts.splice(index, 1);
        }
        this.relayingPeerIds.delete(conn.remoteId);
        this.relayingPeerIds.forEach(function (peerIds) {
            var index = peerIds.indexOf(conn.remoteId);
            if (0 <= index)
                peerIds.splice(index, 1);
        });
        console.log('<close()> Peer:' + conn.remoteId + ' length:' + this.connections.length + ':' + this.peerContexts.length);
        this.updatePeerList();
    };
    SkyWayConnection.prototype.addDataConnection = function (conn) {
        var existConn = this.findDataConnection(conn.remoteId);
        if (existConn !== null) {
            console.log('add() is Fail. ' + conn.remoteId + ' is already connecting.');
            if (existConn !== conn) {
                if (existConn.metadata.sendFrom < conn.metadata.sendFrom) {
                    this.closeDataConnection(conn);
                }
                else {
                    this.closeDataConnection(existConn);
                    this.addDataConnection(conn);
                    return true;
                }
            }
            return false;
        }
        this.connections.push(conn);
        this.peerContexts.push(_peer_context__WEBPACK_IMPORTED_MODULE_5__["PeerContext"].parse(conn.remoteId));
        console.log('<add()> Peer:' + conn.remoteId + ' length:' + this.connections.length);
        return true;
    };
    SkyWayConnection.prototype.findDataConnection = function (peerId) {
        var e_3, _a;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.connections), _c = _b.next(); !_c.done; _c = _b.next()) {
                var conn = _c.value;
                if (conn.remoteId === peerId) {
                    return conn;
                }
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return null;
    };
    SkyWayConnection.prototype.onData = function (conn, container) {
        var _this = this;
        if (container.peers && 0 < container.peers.length)
            this.onUpdatePeerList(conn, container);
        if (0 < container.ttl)
            this.onRelay(conn, container);
        if (this.callback.onData) {
            var byteLength_1 = container.data.byteLength;
            this.bandwidthUsage += byteLength_1;
            this.queue = this.queue.then(function () { return new Promise(function (resolve, reject) {
                Object(_util_zero_timeout__WEBPACK_IMPORTED_MODULE_3__["setZeroTimeout"])(function () { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(_this, void 0, void 0, function () {
                    var data, _a;
                    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                        switch (_b.label) {
                            case 0:
                                if (!container.isCompressed) return [3 /*break*/, 2];
                                return [4 /*yield*/, Object(_util_compress__WEBPACK_IMPORTED_MODULE_2__["decompressAsync"])(container.data)];
                            case 1:
                                _a = _b.sent();
                                return [3 /*break*/, 3];
                            case 2:
                                _a = container.data;
                                _b.label = 3;
                            case 3:
                                data = _a;
                                this.callback.onData(conn.remoteId, msgpack_lite__WEBPACK_IMPORTED_MODULE_1__["decode"](data));
                                this.bandwidthUsage -= byteLength_1;
                                return [2 /*return*/, resolve()];
                        }
                    });
                }); });
            }); });
        }
    };
    SkyWayConnection.prototype.onRelay = function (conn, container) {
        var e_4, _a;
        container.ttl--;
        var relayingPeerIds = this.relayingPeerIds.get(conn.remoteId);
        if (relayingPeerIds == null)
            return;
        try {
            for (var relayingPeerIds_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(relayingPeerIds), relayingPeerIds_1_1 = relayingPeerIds_1.next(); !relayingPeerIds_1_1.done; relayingPeerIds_1_1 = relayingPeerIds_1.next()) {
                var peerId = relayingPeerIds_1_1.value;
                var conn_1 = this.findDataConnection(peerId);
                if (conn_1 && conn_1.open) {
                    console.log('<' + peerId + '> 転送しなきゃ・・・');
                    conn_1.send(container);
                }
            }
        }
        catch (e_4_1) { e_4 = { error: e_4_1 }; }
        finally {
            try {
                if (relayingPeerIds_1_1 && !relayingPeerIds_1_1.done && (_a = relayingPeerIds_1.return)) _a.call(relayingPeerIds_1);
            }
            finally { if (e_4) throw e_4.error; }
        }
    };
    SkyWayConnection.prototype.onUpdatePeerList = function (conn, container) {
        var e_5, _a;
        var relayingPeerIds = [];
        var unknownPeerIds = [];
        var diff = diffArray(this._peerIds, container.peers);
        relayingPeerIds = diff.diff1;
        unknownPeerIds = diff.diff2;
        this.relayingPeerIds.set(conn.remoteId, relayingPeerIds);
        container.peers = container.peers.concat(relayingPeerIds);
        if (unknownPeerIds.length) {
            try {
                for (var unknownPeerIds_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(unknownPeerIds), unknownPeerIds_1_1 = unknownPeerIds_1.next(); !unknownPeerIds_1_1.done; unknownPeerIds_1_1 = unknownPeerIds_1.next()) {
                    var peerId = unknownPeerIds_1_1.value;
                    if (!this.maybeUnavailablePeerIds.has(peerId) && this.connect(peerId)) {
                        console.log('auto connect to unknown Peer <' + peerId + '>');
                    }
                }
            }
            catch (e_5_1) { e_5 = { error: e_5_1 }; }
            finally {
                try {
                    if (unknownPeerIds_1_1 && !unknownPeerIds_1_1.done && (_a = unknownPeerIds_1.return)) _a.call(unknownPeerIds_1);
                }
                finally { if (e_5) throw e_5.error; }
            }
        }
    };
    SkyWayConnection.prototype.updatePeerList = function () {
        var e_6, _a;
        var peerIds = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.connections), _c = _b.next(); !_c.done; _c = _b.next()) {
                var conn = _c.value;
                if (conn.open)
                    peerIds.push(conn.remoteId);
            }
        }
        catch (e_6_1) { e_6 = { error: e_6_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_6) throw e_6.error; }
        }
        peerIds.push(this.peerId);
        peerIds.sort(function (a, b) {
            if (a > b)
                return 1;
            if (a < b)
                return -1;
            return 0;
        });
        this._peerIds = peerIds;
        console.log('<update()>', peerIds);
        this.notifyPeerList();
        return peerIds;
    };
    SkyWayConnection.prototype.notifyPeerList = function () {
        if (this.connections.length < 1)
            return;
        var container = {
            data: msgpack_lite__WEBPACK_IMPORTED_MODULE_1__["encode"]([]),
            peers: this._peerIds,
            ttl: 1
        };
        this.sendBroadcast(container);
    };
    SkyWayConnection.prototype.getSkyWayErrorMessage = function (errType) {
        switch (errType) {
            case 'peer-unavailable':
                return 'そのPeer IDは利用できません。';
            case 'invalid-id':
                return 'Peer IDが不正です。';
            case 'invalid-key':
                return 'SkyWay APIキーが無効です。';
            case 'list-error':
                return 'SkyWay APIキーのREST APIが許可されてません。';
            case 'server-error':
                return 'SkyWayのシグナリングサーバからPeer一覧を取得できませんでした。';
            case 'disconnected':
                return 'SkyWayのシグナリングサーバに接続されていません。';
            case 'socket-error':
                return 'SkyWayのシグナリングサーバとの接続が失われました。';
            default:
                return 'SkyWayに関する不明なエラーが発生しました(' + errType + ')';
        }
    };
    return SkyWayConnection;
}());

function diffArray(array1, array2) {
    var e_7, _a;
    var diff1 = [];
    var diff2 = [];
    var includesInArray1 = false;
    var includesInArray2 = false;
    try {
        for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(array1.concat(array2)), _c = _b.next(); !_c.done; _c = _b.next()) {
            var item = _c.value;
            includesInArray1 = array1.includes(item);
            includesInArray2 = array2.includes(item);
            if (includesInArray1 && !includesInArray2) {
                diff1.push(item);
            }
            else if (!includesInArray1 && includesInArray2) {
                diff2.push(item);
            }
        }
    }
    catch (e_7_1) { e_7 = { error: e_7_1 }; }
    finally {
        try {
            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        }
        finally { if (e_7) throw e_7.error; }
    }
    return { diff1: diff1, diff2: diff2 };
}


/***/ }),

/***/ "jLOE":
/*!*******************************************************************!*\
  !*** ./src/app/class/core/synchronize-object/synchronize-task.ts ***!
  \*******************************************************************/
/*! exports provided: SynchronizeTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SynchronizeTask", function() { return SynchronizeTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../system */ "yNnI");
/* harmony import */ var _system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../system/util/resettable-timeout */ "9ht1");



var SynchronizeTask = /** @class */ (function () {
    function SynchronizeTask(peerId) {
        this.peerId = peerId;
        this.requestMap = new Map();
    }
    SynchronizeTask.create = function (peerId, requests) {
        if (SynchronizeTask.tasksMap.size < 1) {
            _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(SynchronizeTask.key)
                .on('DISCONNECT_PEER', function (event) {
                SynchronizeTask.onDisconnect(event.data.peerId);
            })
                .on('UPDATE_GAME_OBJECT', function (event) {
                if (event.isSendFromSelf)
                    return;
                SynchronizeTask.onUpdate(event.data.identifier);
            })
                .on('DELETE_GAME_OBJECT', function (event) {
                if (event.isSendFromSelf)
                    return;
                SynchronizeTask.onUpdate(event.data.identifier);
            });
        }
        var task = new SynchronizeTask(peerId);
        task.initialize(requests);
        return task;
    };
    SynchronizeTask.prototype.cancel = function () {
        var e_1, _a;
        if (this.timeoutTimer)
            this.timeoutTimer.clear();
        this.timeoutTimer = null;
        this.onsynchronize = this.onfinish = this.ontimeout = null;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.requestMap.values()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var request = _c.value;
                this.deleteTasksMap(request.identifier);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        ;
        this.requestMap.clear();
    };
    SynchronizeTask.prototype.initialize = function (requests) {
        var e_2, _a;
        var _this = this;
        try {
            for (var requests_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(requests), requests_1_1 = requests_1.next(); !requests_1_1.done; requests_1_1 = requests_1.next()) {
                var request = requests_1_1.value;
                request.ttl--;
                this.requestMap.set(request.identifier, request);
                var tasks = SynchronizeTask.tasksMap.get(request.identifier);
                if (tasks == null)
                    tasks = [];
                tasks.push(this);
                SynchronizeTask.tasksMap.set(request.identifier, tasks);
                var sendTo = this.peerId != null && request.holderIds.includes(this.peerId) ? this.peerId : null;
                _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('REQUEST_GAME_OBJECT', request.identifier, sendTo);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (requests_1_1 && !requests_1_1.done && (_a = requests_1.return)) _a.call(requests_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        if (this.requestMap.size < 1) {
            setTimeout(function () { return _this.finish(); });
            return;
        }
        this.resetTimeout();
    };
    SynchronizeTask.prototype.finish = function () {
        if (this.onfinish)
            this.onfinish(this);
        this.cancel();
    };
    SynchronizeTask.prototype.timeout = function () {
        if (this.ontimeout)
            this.ontimeout(this, Array.from(this.requestMap.values()).filter(function (request) { return 0 <= request.ttl; }));
        this.finish();
    };
    SynchronizeTask.onDisconnect = function (peerId) {
        var e_3, _a, e_4, _b;
        try {
            for (var _c = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(SynchronizeTask.tasksMap.values()), _d = _c.next(); !_d.done; _d = _c.next()) {
                var tasks = _d.value;
                try {
                    for (var _e = (e_4 = void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(tasks.concat())), _f = _e.next(); !_f.done; _f = _e.next()) {
                        var task = _f.value;
                        if (task.peerId === peerId)
                            task.timeout();
                    }
                }
                catch (e_4_1) { e_4 = { error: e_4_1 }; }
                finally {
                    try {
                        if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                    }
                    finally { if (e_4) throw e_4.error; }
                }
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            }
            finally { if (e_3) throw e_3.error; }
        }
        if (SynchronizeTask.tasksMap.size < 1)
            _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(SynchronizeTask.key);
    };
    SynchronizeTask.onUpdate = function (identifier) {
        var e_5, _a;
        if (!SynchronizeTask.tasksMap.has(identifier))
            return;
        var tasks = SynchronizeTask.tasksMap.get(identifier);
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(tasks.concat()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var task = _c.value;
                task.onUpdate(identifier);
            }
        }
        catch (e_5_1) { e_5 = { error: e_5_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_5) throw e_5.error; }
        }
        if (SynchronizeTask.tasksMap.size < 1)
            _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(SynchronizeTask.key);
    };
    SynchronizeTask.prototype.onUpdate = function (identifier) {
        this.requestMap.delete(identifier);
        if (this.onsynchronize)
            this.onsynchronize(this, identifier);
        if (this.requestMap.size < 1) {
            this.finish();
        }
        else {
            this.resetTimeout();
        }
    };
    SynchronizeTask.prototype.deleteTasksMap = function (identifier) {
        var tasks = SynchronizeTask.tasksMap.get(identifier);
        var index = tasks.indexOf(this);
        if (-1 < index)
            tasks.splice(index, 1);
        if (tasks.length < 1)
            SynchronizeTask.tasksMap.delete(identifier);
    };
    SynchronizeTask.prototype.resetTimeout = function () {
        var _this = this;
        if (this.timeoutTimer == null)
            this.timeoutTimer = new _system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_2__["ResettableTimeout"](function () { return _this.timeout(); }, 30 * 1000);
        this.timeoutTimer.reset();
    };
    SynchronizeTask.key = {};
    SynchronizeTask.tasksMap = new Map();
    return SynchronizeTask;
}());



/***/ }),

/***/ "jiu3":
/*!*******************************!*\
  !*** ./src/app/class/card.ts ***!
  \*******************************/
/*! exports provided: CardState, Card */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CardState", function() { return CardState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Card", function() { return Card; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/system */ "yNnI");
/* harmony import */ var _data_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./data-element */ "gkrD");
/* harmony import */ var _peer_cursor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./peer-cursor */ "+UEV");
/* harmony import */ var _tabletop_object__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./tabletop-object */ "e8gA");
/* harmony import */ var _tabletop_object_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./tabletop-object-util */ "g6Hf");







var CardState;
(function (CardState) {
    CardState[CardState["FRONT"] = 0] = "FRONT";
    CardState[CardState["BACK"] = 1] = "BACK";
})(CardState || (CardState = {}));
var Card = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(Card, _super);
    function Card() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.state = CardState.FRONT;
        _this.rotate = 0;
        _this.owner = '';
        _this.zindex = 0;
        return _this;
    }
    Card_1 = Card;
    Object.defineProperty(Card.prototype, "isVisibleOnTable", {
        get: function () { return this.location.name === 'table' && (!this.parentIsAssigned || this.parentIsDestroyed); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "name", {
        get: function () { return this.getCommonValue('name', ''); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "size", {
        get: function () { return this.getCommonValue('size', 2); },
        set: function (size) { this.setCommonValue('size', size); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "frontImage", {
        get: function () { return this.getImageFile('front'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "backImage", {
        get: function () { return this.getImageFile('back'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "imageFile", {
        get: function () { return this.isVisible ? this.frontImage : this.backImage; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "ownerName", {
        get: function () {
            var object = _peer_cursor__WEBPACK_IMPORTED_MODULE_4__["PeerCursor"].findByUserId(this.owner);
            return object ? object.name : '';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "hasOwner", {
        get: function () { return 0 < this.owner.length; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "isHand", {
        get: function () { return _core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerContext.userId === this.owner; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "isFront", {
        get: function () { return this.state === CardState.FRONT; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "isVisible", {
        get: function () { return this.isHand || this.isFront; },
        enumerable: false,
        configurable: true
    });
    Card.prototype.faceUp = function () {
        this.state = CardState.FRONT;
        this.owner = '';
    };
    Card.prototype.faceDown = function () {
        this.state = CardState.BACK;
        this.owner = '';
    };
    Card.prototype.toTopmost = function () {
        Object(_tabletop_object_util__WEBPACK_IMPORTED_MODULE_6__["moveToTopmost"])(this, ['card-stack']);
    };
    Card.create = function (name, fornt, back, size, identifier) {
        if (size === void 0) { size = 2; }
        var object = null;
        if (identifier) {
            object = new Card_1(identifier);
        }
        else {
            object = new Card_1();
        }
        object.createDataElements();
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('name', name, {}, 'name_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('size', size, {}, 'size_' + object.identifier));
        object.imageDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('front', fornt, { type: 'image' }, 'front_' + object.identifier));
        object.imageDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('back', back, { type: 'image' }, 'back_' + object.identifier));
        object.initialize();
        return object;
    };
    var Card_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], Card.prototype, "state", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], Card.prototype, "rotate", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], Card.prototype, "owner", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], Card.prototype, "zindex", void 0);
    Card = Card_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('card')
    ], Card);
    return Card;
}(_tabletop_object__WEBPACK_IMPORTED_MODULE_5__["TabletopObject"]));



/***/ }),

/***/ "k8BA":
/*!************************************************************************!*\
  !*** ./src/app/component/card-stack-list/card-stack-list.component.ts ***!
  \************************************************************************/
/*! exports provided: CardStackListComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CardStackListComponent", function() { return CardStackListComponent; });
/* harmony import */ var _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var directive_tooltip_directive__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! directive/tooltip.directive */ "ts4F");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");










function CardStackListComponent_div_4_Template(rf, ctx) { if (rf & 1) {
    var _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "div", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](2, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](3, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](5, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](6, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](7, "button", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function CardStackListComponent_div_4_Template_button_click_7_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r3); var card_r1 = ctx.$implicit; var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](); return ctx_r2.drawCard(card_r1); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](8, "\u5C71\u672D\u304B\u3089\u51FA\u3059");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](9, "button", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function CardStackListComponent_div_4_Template_button_click_9_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r3); var card_r1 = ctx.$implicit; var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](); return ctx_r4.showDetail(card_r1); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](10, "i", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](11, "settings");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](12, "\u7DE8\u96C6");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](13, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](14, "button", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function CardStackListComponent_div_4_Template_button_click_14_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r3); var card_r1 = ctx.$implicit; var ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](); return ctx_r5.up(card_r1); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](15, "\u2191");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](16, "button", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function CardStackListComponent_div_4_Template_button_click_16_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r3); var card_r1 = ctx.$implicit; var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](); return ctx_r6.down(card_r1); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](17, "\u2193");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](18, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} if (rf & 2) {
    var card_r1 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("appTooltip", card_r1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind2"](3, 5, "url(" + (card_r1 == null ? null : card_r1.frontImage == null ? null : card_r1.frontImage.url) + ")", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind2"](5, 8, "url(" + (card_r1 == null ? null : card_r1.backImage == null ? null : card_r1.backImage.url) + ")", "style"));
} }
var CardStackListComponent = /** @class */ (function () {
    function CardStackListComponent(panelService, changeDetector) {
        this.panelService = panelService;
        this.changeDetector = changeDetector;
        this.cardStack = null;
        this.owner = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerContext.userId;
    }
    CardStackListComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.panelService.title = _this.cardStack.name + ' のカード一覧'; });
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.get(event.data.identifier);
            if (!_this.cardStack || !object)
                return;
            if ((_this.cardStack === object)
                || (object instanceof _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_0__["ObjectNode"] && _this.cardStack.contains(object))) {
                _this.changeDetector.markForCheck();
            }
            if (event.data.identifier === _this.cardStack.identifier && _this.cardStack.owner !== _this.owner) {
                _this.panelService.close();
            }
        })
            .on('DELETE_GAME_OBJECT', -1000, function (event) {
            if (_this.cardStack && _this.cardStack.identifier === event.data.identifier) {
                _this.panelService.close();
            }
        });
    };
    CardStackListComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].unregister(this);
        if (this.cardStack.owner === this.owner) {
            this.cardStack.owner = '';
        }
    };
    CardStackListComponent.prototype.drawCard = function (card) {
        card.parent.removeChild(card);
        card.location.x = this.cardStack.location.x + 100 + (Math.random() * 50);
        card.location.y = this.cardStack.location.y + 25 + (Math.random() * 50);
        card.location.name = this.cardStack.location.name;
        card.rotate += this.cardStack.rotate;
        if (360 < card.rotate)
            card.rotate -= 360;
        card.toTopmost();
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].cardDraw);
    };
    CardStackListComponent.prototype.up = function (card) {
        var parent = card.parent;
        var index = parent.children.indexOf(card);
        if (0 < index) {
            var prev = parent.children[index - 1];
            parent.insertBefore(card, prev);
        }
    };
    CardStackListComponent.prototype.down = function (card) {
        var parent = card.parent;
        var index = parent.children.indexOf(card);
        if (index < parent.children.length - 1) {
            var next = parent.children[index + 1];
            parent.insertBefore(next, card);
        }
    };
    CardStackListComponent.prototype.close = function (needShuffle) {
        if (needShuffle === void 0) { needShuffle = false; }
        if (needShuffle) {
            this.cardStack.shuffle();
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].call('SHUFFLE_CARD_STACK', { identifier: this.cardStack.identifier });
            _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].cardShuffle);
        }
        this.panelService.close();
    };
    CardStackListComponent.prototype.showDetail = function (gameObject) {
        var coordinate = {
            x: this.panelService.left,
            y: this.panelService.top
        };
        var title = 'カード設定';
        if (gameObject.name.length)
            title += ' - ' + gameObject.name;
        var option = { title: title, left: coordinate.x + 10, top: coordinate.y + 20, width: 600, height: 600 };
        var component = this.panelService.open(component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_4__["GameCharacterSheetComponent"], option);
        component.tabletopObject = gameObject;
    };
    CardStackListComponent.prototype.trackByCard = function (index, card) {
        return card.identifier;
    };
    CardStackListComponent.ɵfac = function CardStackListComponent_Factory(t) { return new (t || CardStackListComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_6__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_5__["ChangeDetectorRef"])); };
    CardStackListComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({ type: CardStackListComponent, selectors: [["card-stack-list"]], inputs: { cardStack: "cardStack" }, decls: 5, vars: 2, consts: [[3, "click"], ["class", "box", 4, "ngFor", "ngForOf", "ngForTrackBy"], [1, "box"], [1, "image-box", 3, "appTooltip"], [1, "image", "contain"], [2, "display", "inline-block"], ["type", "submit", 3, "click"], [1, "material-icons", 2, "font-size", "1.1em", "vertical-align", "text-bottom"]], template: function CardStackListComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "button", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function CardStackListComponent_Template_button_click_1_listener() { return ctx.close(true); });
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "\u30B7\u30E3\u30C3\u30D5\u30EB\u3057\u3066\u30A6\u30A3\u30F3\u30C9\u30A6\u3092\u9589\u3058\u308B");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](3, "hr");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](4, CardStackListComponent_div_4_Template, 19, 11, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", ctx.cardStack.cards)("ngForTrackBy", ctx.trackByCard);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_7__["NgForOf"], directive_tooltip_directive__WEBPACK_IMPORTED_MODULE_8__["TooltipDirective"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_9__["SafePipe"]], styles: [".box[_ngcontent-%COMP%] {\n  border-bottom:1px dotted #888;\n}\n\n.image-box[_ngcontent-%COMP%] {\n  display: inline-block;\n  vertical-align: top;\n}\n\n.image[_ngcontent-%COMP%] {\n  padding: 0px;\n  width: 64px;\n  height: 64px;\n  display: inline-block;\n  vertical-align: top;\n}\n\n.contain[_ngcontent-%COMP%] {\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcmQtc3RhY2stbGlzdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsNkJBQTZCO0FBQy9COztBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsWUFBWTtFQUNaLHFCQUFxQjtFQUNyQixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxrQ0FBa0M7RUFDbEMsNEJBQTRCO0VBQzVCLHdCQUF3QjtBQUMxQiIsImZpbGUiOiJjYXJkLXN0YWNrLWxpc3QuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5ib3gge1xuICBib3JkZXItYm90dG9tOjFweCBkb3R0ZWQgIzg4ODtcbn1cblxuLmltYWdlLWJveCB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcbn1cblxuLmltYWdlIHtcbiAgcGFkZGluZzogMHB4O1xuICB3aWR0aDogNjRweDtcbiAgaGVpZ2h0OiA2NHB4O1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHZlcnRpY2FsLWFsaWduOiB0b3A7XG59XG5cbi5jb250YWluIHtcbiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyIGNlbnRlcjtcbiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgYmFja2dyb3VuZC1zaXplOiBjb250YWluO1xufSJdfQ== */"], changeDetection: 0 });
    return CardStackListComponent;
}());



/***/ }),

/***/ "kf6k":
/*!****************************************************************************!*\
  !*** ./src/app/component/network-indicator/network-indicator.component.ts ***!
  \****************************************************************************/
/*! exports provided: NetworkIndicatorComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NetworkIndicatorComponent", function() { return NetworkIndicatorComponent; });
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");


var NetworkIndicatorComponent = /** @class */ (function () {
    function NetworkIndicatorComponent(elementRef) {
        this.elementRef = elementRef;
        this.timer = null;
        this.needRepeat = false;
    }
    NetworkIndicatorComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        var repeatFunc = function () {
            if (_this.needRepeat) {
                _this.timer = setTimeout(repeatFunc, 650);
                _this.needRepeat = false;
            }
            else {
                _this.timer = null;
                _this.elementRef.nativeElement.style.display = 'none';
            }
        };
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__["EventSystem"].register(this)
            .on('*', function (event) {
            if (_this.needRepeat || _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__["Network"].bandwidthUsage < 3 * 1024)
                return;
            if (_this.timer === null) {
                _this.elementRef.nativeElement.style.display = 'block';
                _this.timer = setTimeout(repeatFunc, 650);
            }
            else {
                _this.needRepeat = true;
            }
        });
    };
    NetworkIndicatorComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__["EventSystem"].unregister(this);
    };
    NetworkIndicatorComponent.ɵfac = function NetworkIndicatorComponent_Factory(t) { return new (t || NetworkIndicatorComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"])); };
    NetworkIndicatorComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: NetworkIndicatorComponent, selectors: [["network-indicator"]], decls: 12, vars: 0, consts: [[1, "sk-cube-grid"], [1, "sk-cube", "sk-cube1"], [1, "sk-cube", "sk-cube2"], [1, "sk-cube", "sk-cube3"], [1, "sk-cube", "sk-cube4"], [1, "sk-cube", "sk-cube5"], [1, "sk-cube", "sk-cube6"], [1, "sk-cube", "sk-cube7"], [1, "sk-cube", "sk-cube8"], [1, "sk-cube", "sk-cube9"], [1, "sk-title"]], template: function NetworkIndicatorComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](2, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](3, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](4, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](5, "div", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](6, "div", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](7, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](8, "div", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](9, "div", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "div", 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](11, "sync");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        } }, styles: [".sk-cube-grid[_ngcontent-%COMP%] {\n  font-size: 8px;\n  color: #444;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(247, 247, 247, 0.6);\n}\n\n.sk-cube[_ngcontent-%COMP%] {\n  background-color: #555;\n}\n\n.sk-title[_ngcontent-%COMP%] {\n  padding: 2px 0;\n  background-color: rgba(247, 247, 247, 0.6);\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ldHdvcmstaW5kaWNhdG9yLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFjO0VBQ2QsV0FBVztFQUNYLFlBQVk7RUFDWixXQUFXO0VBQ1gsMENBQTBDO0FBQzVDOztBQUVBO0VBQ0Usc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsY0FBYztFQUNkLDBDQUEwQztBQUM1QyIsImZpbGUiOiJuZXR3b3JrLWluZGljYXRvci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnNrLWN1YmUtZ3JpZCB7XG4gIGZvbnQtc2l6ZTogOHB4O1xuICBjb2xvcjogIzQ0NDtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDcsIDI0NywgMjQ3LCAwLjYpO1xufVxuXG4uc2stY3ViZSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM1NTU7XG59XG5cbi5zay10aXRsZSB7XG4gIHBhZGRpbmc6IDJweCAwO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI0NywgMjQ3LCAyNDcsIDAuNik7XG59XG4iXX0= */"] });
    return NetworkIndicatorComponent;
}());



/***/ }),

/***/ "l22b":
/*!**************************************!*\
  !*** ./src/app/class/dice-symbol.ts ***!
  \**************************************/
/*! exports provided: DiceType, DiceSymbol */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiceType", function() { return DiceType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiceSymbol", function() { return DiceSymbol; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/system */ "yNnI");
/* harmony import */ var _data_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./data-element */ "gkrD");
/* harmony import */ var _peer_cursor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./peer-cursor */ "+UEV");
/* harmony import */ var _tabletop_object__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./tabletop-object */ "e8gA");






var DiceType;
(function (DiceType) {
    DiceType[DiceType["D2"] = 0] = "D2";
    DiceType[DiceType["D4"] = 1] = "D4";
    DiceType[DiceType["D6"] = 2] = "D6";
    DiceType[DiceType["D8"] = 3] = "D8";
    DiceType[DiceType["D10"] = 4] = "D10";
    DiceType[DiceType["D10_10TIMES"] = 5] = "D10_10TIMES";
    DiceType[DiceType["D12"] = 6] = "D12";
    DiceType[DiceType["D20"] = 7] = "D20";
})(DiceType || (DiceType = {}));
var DiceSymbol = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(DiceSymbol, _super);
    function DiceSymbol() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.face = '0';
        _this.owner = '';
        _this.rotate = 0;
        return _this;
    }
    DiceSymbol_1 = DiceSymbol;
    Object.defineProperty(DiceSymbol.prototype, "name", {
        get: function () { return this.getCommonValue('name', ''); },
        set: function (name) { this.setCommonValue('name', name); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbol.prototype, "size", {
        get: function () { return this.getCommonValue('size', 1); },
        set: function (size) { this.setCommonValue('size', size); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbol.prototype, "faces", {
        get: function () { return this.imageDataElement.children.map(function (element) { return element.name; }); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbol.prototype, "imageFile", {
        get: function () {
            return this.isVisible ?
                this.getImageFile(this.face)
                : this.faces.length
                    ? this.getImageFile(this.faces[0])
                    : null;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbol.prototype, "ownerName", {
        get: function () {
            var object = _peer_cursor__WEBPACK_IMPORTED_MODULE_4__["PeerCursor"].findByUserId(this.owner);
            return object ? object.name : '';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbol.prototype, "hasOwner", {
        get: function () { return 0 < this.owner.length; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbol.prototype, "isMine", {
        get: function () { return _core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerContext.userId === this.owner; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbol.prototype, "isVisible", {
        get: function () { return !this.hasOwner || this.isMine; },
        enumerable: false,
        configurable: true
    });
    DiceSymbol.prototype.diceRoll = function () {
        var faces = this.faces;
        this.face = 0 < faces.length ? faces[Math.floor(Math.random() * faces.length)] : '';
        return this.face;
    };
    DiceSymbol.prototype.setDicetype = function (type) {
        this.makeDiceFace(type);
    };
    DiceSymbol.prototype.makeDiceFace = function (type, identifierSuffix) {
        var _this = this;
        var sided = 1;
        var faces = [];
        var faceGeneratorFunc = function (index) { return (index + 1) + ''; };
        switch (type) {
            case DiceType.D2:
                sided = 2;
                break;
            case DiceType.D4:
                sided = 4;
                break;
            case DiceType.D6:
                sided = 6;
                break;
            case DiceType.D8:
                sided = 8;
                break;
            case DiceType.D10_10TIMES:
                faceGeneratorFunc = function (index) { return (index + 1) + '0'; };
            case DiceType.D10:
                sided = 10;
                break;
            case DiceType.D12:
                sided = 12;
                break;
            case DiceType.D20:
                sided = 20;
                break;
            default:
                sided = 2;
                break;
        }
        for (var i = 0; i < sided; i++) {
            var faceName = faceGeneratorFunc(i);
            var identifier = identifierSuffix != null ? faceName + '_' + identifierSuffix : null;
            faces.push(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create(faceName, '', { type: 'image' }, identifier));
        }
        this.imageDataElement.children.forEach(function (element) { return element.destroy(); });
        faces.forEach(function (element) { return _this.imageDataElement.appendChild(element); });
        this.face = faces[0].name;
        return faces;
    };
    DiceSymbol.create = function (name, type, size, identifier) {
        var object = identifier ? new DiceSymbol_1(identifier) : new DiceSymbol_1();
        object.createDataElements();
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('name', name, {}, 'name_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('size', size, {}, 'size_' + object.identifier));
        object.makeDiceFace(type, object.identifier);
        object.initialize();
        return object;
    };
    var DiceSymbol_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DiceSymbol.prototype, "face", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DiceSymbol.prototype, "owner", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DiceSymbol.prototype, "rotate", void 0);
    DiceSymbol = DiceSymbol_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('dice-symbol')
    ], DiceSymbol);
    return DiceSymbol;
}(_tabletop_object__WEBPACK_IMPORTED_MODULE_5__["TabletopObject"]));



/***/ }),

/***/ "lB2V":
/*!**********************************************!*\
  !*** ./src/app/class/transform/matrix-3d.ts ***!
  \**********************************************/
/*! exports provided: Matrix3D */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Matrix3D", function() { return Matrix3D; });
/* harmony import */ var _css_number__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css-number */ "zAbn");

var Matrix3D = /** @class */ (function () {
    function Matrix3D() {
        this.m11 = 1;
        this.m12 = 0;
        this.m13 = 0;
        this.m14 = 0;
        this.m21 = 0;
        this.m22 = 1;
        this.m23 = 0;
        this.m24 = 0;
        this.m31 = 0;
        this.m32 = 0;
        this.m33 = 1;
        this.m34 = 0;
        this.m41 = 0;
        this.m42 = 0;
        this.m43 = 0;
        this.m44 = 1;
    }
    Matrix3D.create = function (element, style, ret) {
        if (style === void 0) { style = null; }
        if (ret === void 0) { ret = new Matrix3D(); }
        if (element && element.ownerDocument)
            return ret.setCSS((style || window.getComputedStyle(element)).transform);
        return ret.identity();
    };
    Matrix3D.prototype.setData = function (data) {
        if (data == null)
            return;
        var l = data.length;
        if (l == 16) {
            this.m11 = data[0];
            this.m12 = data[1];
            this.m13 = data[2];
            this.m14 = data[3];
            this.m21 = data[4];
            this.m22 = data[5];
            this.m23 = data[6];
            this.m24 = data[7];
            this.m31 = data[8];
            this.m32 = data[9];
            this.m33 = data[10];
            this.m34 = data[11];
            this.m41 = data[12];
            this.m42 = data[13];
            this.m43 = data[14];
            this.m44 = data[15];
        }
        else if (l == 6) {
            this.m11 = data[0];
            this.m12 = data[1];
            this.m13 = 0;
            this.m14 = 0;
            this.m21 = data[2];
            this.m22 = data[3];
            this.m23 = 0;
            this.m24 = 0;
            this.m31 = 0;
            this.m32 = 0;
            this.m33 = 1;
            this.m34 = 0;
            this.m41 = data[4];
            this.m42 = data[5];
            this.m43 = 0;
            this.m44 = 1;
        }
        else if (l == 9) {
            this.m11 = data[0];
            this.m12 = data[1];
            this.m13 = 0;
            this.m14 = data[2];
            this.m21 = data[3];
            this.m22 = data[4];
            this.m23 = 0;
            this.m24 = data[5];
            this.m31 = 0;
            this.m32 = 0;
            this.m33 = 1;
            this.m34 = 0;
            this.m41 = data[6];
            this.m42 = data[7];
            this.m43 = 0;
            this.m44 = data[8];
        }
        return this;
    };
    Matrix3D.prototype.identity = function () {
        this.m11 = 1;
        this.m12 = 0;
        this.m13 = 0;
        this.m14 = 0;
        this.m21 = 0;
        this.m22 = 1;
        this.m23 = 0;
        this.m24 = 0;
        this.m31 = 0;
        this.m32 = 0;
        this.m33 = 1;
        this.m34 = 0;
        this.m41 = 0;
        this.m42 = 0;
        this.m43 = 0;
        this.m44 = 1;
        return this;
    };
    Matrix3D.prototype.scalar = function (scalar) {
        this.m11 *= scalar;
        this.m12 *= scalar;
        this.m13 *= scalar;
        this.m14 *= scalar;
        this.m21 *= scalar;
        this.m22 *= scalar;
        this.m23 *= scalar;
        this.m24 *= scalar;
        this.m31 *= scalar;
        this.m32 *= scalar;
        this.m33 *= scalar;
        this.m34 *= scalar;
        this.m41 *= scalar;
        this.m42 *= scalar;
        this.m43 *= scalar;
        this.m44 *= scalar;
        return this;
    };
    //based on http://code.metager.de/source/xref/mozilla/B2G/gecko/gfx/thebes/gfx3DMatrix.cpp#651
    Matrix3D.prototype.unproject = function (point, ret) {
        if (ret === void 0) { ret = { x: 0, y: 0, z: 0, w: 1 }; }
        var x = point.x * this.m11 + point.y * this.m21 + this.m41;
        var y = point.x * this.m12 + point.y * this.m22 + this.m42;
        var z = point.x * this.m13 + point.y * this.m23 + this.m43;
        var w = point.x * this.m14 + point.y * this.m24 + this.m44;
        var qx = x + this.m31;
        var qy = y + this.m32;
        var qz = z + this.m33;
        var qw = w + this.m34;
        if (w == 0)
            w = 0.0001;
        x /= w;
        y /= w;
        z /= w;
        if (qw == 0)
            qw = 0.0001;
        qx /= qw;
        qy /= qw;
        qz /= qw;
        var wz = qz - z;
        if (wz == 0) {
            ret.x = x;
            ret.y = y;
            ret.z = z;
            ret.w = z;
            return ret;
        }
        var t = -z / wz;
        x += t * (qx - x);
        y += t * (qy - y);
        ret.x = x;
        ret.y = y;
        ret.z = z;
        ret.w = z;
        return ret;
    };
    Matrix3D.prototype.project = function (point, ret) {
        if (ret === void 0) { ret = { x: 0, y: 0, z: 0, w: 1 }; }
        var z = point.z;
        var w = point.x * this.m14 + point.y * this.m24 + z * this.m34 + this.m44;
        var x = point.x * this.m11 + point.y * this.m21 + z * this.m31 + this.m41;
        var y = point.x * this.m12 + point.y * this.m22 + z * this.m32 + this.m42;
        if (w == 0)
            w = 0.0001;
        x /= w;
        y /= w;
        if (w < 0) {
            x -= this.m41;
            y -= this.m42;
            x *= 1 / w;
            y *= 1 / w;
            x += this.m41;
            y += this.m42;
        }
        ret.x = x;
        ret.y = y;
        ret.z = z;
        ret.w = z;
        return ret;
    };
    Matrix3D.prototype.append = function (b) {
        return Matrix3D.multiply(this, b, this);
    };
    Matrix3D.prototype.setPosition = function (position) {
        this.m41 = position.x;
        this.m42 = position.y;
        this.m43 = position.z;
        return this;
    };
    Matrix3D.prototype.getPosition = function (ret) {
        if (ret === void 0) { ret = { x: 0, y: 0, z: 0, w: 1 }; }
        ret.x = this.m41;
        ret.y = this.m42;
        ret.z = this.m43;
        return ret;
    };
    Matrix3D.makePosition = function (position, ret) {
        if (ret === void 0) { ret = new Matrix3D(); }
        ret.identity();
        ret.setPosition(position);
        return ret;
    };
    Matrix3D.prototype.appendPosition = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        var position;
        if (args.length === 1) {
            position = args[0];
        }
        else {
            position = { x: args[0], y: args[1], z: args[2], w: 1 };
        }
        return this.append(Matrix3D.makePosition(position, Matrix3D.MATRIX3D));
    };
    Matrix3D.makePerspective = function (perspective, ret) {
        if (ret === void 0) { ret = new Matrix3D(); }
        ret.identity();
        ret.m34 = perspective ? -(1 / perspective) : 0;
        return ret;
    };
    Matrix3D.prototype.appendPerspective = function (perspective) {
        if (!perspective)
            return this;
        return this.append(Matrix3D.makePerspective(perspective, Matrix3D.MATRIX3D));
    };
    /**
    * Inverts the matrix.
    * -> based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm
    * -> based on https://github.com/mrdoob/three.js/blob/master/src/math/Matrix4.js
    */
    Matrix3D.prototype.invert = function (target) {
        target = target || this;
        var data = [];
        var n11 = this.m11, n12 = this.m12, n13 = this.m13, n14 = this.m14;
        var n21 = this.m21, n22 = this.m22, n23 = this.m23, n24 = this.m24;
        var n31 = this.m31, n32 = this.m32, n33 = this.m33, n34 = this.m34;
        var n41 = this.m41, n42 = this.m42, n43 = this.m43, n44 = this.m44;
        data[0] = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44;
        data[1] = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44;
        data[2] = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44;
        data[3] = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;
        var det = n11 * data[0] + n21 * data[1] + n31 * data[2] + n41 * data[3];
        if (det == 0) {
            console.warn('Can not invert matrix, determinant is 0');
            return this;
        }
        data[4] = n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44;
        data[5] = n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44;
        data[6] = n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44;
        data[7] = n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34;
        data[8] = n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44;
        data[9] = n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44;
        data[10] = n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44;
        data[11] = n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34;
        data[12] = n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43;
        data[13] = n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43;
        data[14] = n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43;
        data[15] = n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33;
        target.setData(data);
        target.scalar(1 / det);
        return target;
    };
    Matrix3D.prototype.setCSS = function (cssString) {
        if (!cssString || cssString == 'none')
            return this.identity();
        var trans = cssString.replace('matrix3d(', '').replace('matrix(', '').replace(')', '').split(',');
        var l = trans.length;
        for (var i = 0; i < l; ++i) {
            trans[i] = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].parse(trans[i]);
        }
        return this.setData(trans);
    };
    Matrix3D.prototype.appendCSS = function (cssString, force2D) {
        if (force2D === void 0) { force2D = false; }
        if (!cssString || cssString == 'none')
            return this;
        if (force2D && cssString.indexOf('matrix3d') >= 0) {
            return this.append(Matrix3D.MATRIX3D.setCSS(cssString).flatten());
        }
        return this.append(Matrix3D.MATRIX3D.setCSS(cssString));
    };
    Matrix3D.prototype.flatten = function () {
        this.m31 = 0;
        this.m32 = 0;
        this.m33 = 1;
        this.m34 = 0;
        this.m44 = 1;
        this.m14 = 0;
        this.m24 = 0;
        this.m43 = 0;
        return this;
    };
    Matrix3D.multiply = function (a, b, ret) {
        if (ret === void 0) { ret = new Matrix3D(); }
        var m11 = a.m11 * b.m11 + a.m12 * b.m21 + a.m13 * b.m31 + a.m14 * b.m41;
        var m12 = a.m11 * b.m12 + a.m12 * b.m22 + a.m13 * b.m32 + a.m14 * b.m42;
        var m13 = a.m11 * b.m13 + a.m12 * b.m23 + a.m13 * b.m33 + a.m14 * b.m43;
        var m14 = a.m11 * b.m14 + a.m12 * b.m24 + a.m13 * b.m34 + a.m14 * b.m44;
        var m21 = a.m21 * b.m11 + a.m22 * b.m21 + a.m23 * b.m31 + a.m24 * b.m41;
        var m22 = a.m21 * b.m12 + a.m22 * b.m22 + a.m23 * b.m32 + a.m24 * b.m42;
        var m23 = a.m21 * b.m13 + a.m22 * b.m23 + a.m23 * b.m33 + a.m24 * b.m43;
        var m24 = a.m21 * b.m14 + a.m22 * b.m24 + a.m23 * b.m34 + a.m24 * b.m44;
        var m31 = a.m31 * b.m11 + a.m32 * b.m21 + a.m33 * b.m31 + a.m34 * b.m41;
        var m32 = a.m31 * b.m12 + a.m32 * b.m22 + a.m33 * b.m32 + a.m34 * b.m42;
        var m33 = a.m31 * b.m13 + a.m32 * b.m23 + a.m33 * b.m33 + a.m34 * b.m43;
        var m34 = a.m31 * b.m14 + a.m32 * b.m24 + a.m33 * b.m34 + a.m34 * b.m44;
        var m41 = a.m41 * b.m11 + a.m42 * b.m21 + a.m43 * b.m31 + a.m44 * b.m41;
        var m42 = a.m41 * b.m12 + a.m42 * b.m22 + a.m43 * b.m32 + a.m44 * b.m42;
        var m43 = a.m41 * b.m13 + a.m42 * b.m23 + a.m43 * b.m33 + a.m44 * b.m43;
        var m44 = a.m41 * b.m14 + a.m42 * b.m24 + a.m43 * b.m34 + a.m44 * b.m44;
        ret.m11 = m11;
        ret.m12 = m12;
        ret.m13 = m13;
        ret.m14 = m14;
        ret.m21 = m21;
        ret.m22 = m22;
        ret.m23 = m23;
        ret.m24 = m24;
        ret.m31 = m31;
        ret.m32 = m32;
        ret.m33 = m33;
        ret.m34 = m34;
        ret.m41 = m41;
        ret.m42 = m42;
        ret.m43 = m43;
        ret.m44 = m44;
        return ret;
    };
    Matrix3D.prototype.toString = function (fractionalDigits) {
        if (fractionalDigits === void 0) { fractionalDigits = 3; }
        return "m11=" + this.m11.toFixed(fractionalDigits)
            + "\tm21=" + this.m21.toFixed(fractionalDigits)
            + "\tm31=" + this.m31.toFixed(fractionalDigits)
            + "\tm41=" + this.m41.toFixed(fractionalDigits)
            + "\nm12=" + this.m12.toFixed(fractionalDigits)
            + "\tm22=" + this.m22.toFixed(fractionalDigits)
            + "\tm32=" + this.m32.toFixed(fractionalDigits)
            + "\tm42=" + this.m42.toFixed(fractionalDigits)
            + "\nm13=" + this.m13.toFixed(fractionalDigits)
            + "\tm23=" + this.m23.toFixed(fractionalDigits)
            + "\tm33=" + this.m33.toFixed(fractionalDigits)
            + "\tm43=" + this.m43.toFixed(fractionalDigits)
            + "\nm14=" + this.m14.toFixed(fractionalDigits)
            + "\tm24=" + this.m24.toFixed(fractionalDigits)
            + "\tm34=" + this.m34.toFixed(fractionalDigits)
            + "\tm44=" + this.m44.toFixed(fractionalDigits);
    };
    Matrix3D.MATRIX3D = new Matrix3D();
    return Matrix3D;
}());



/***/ }),

/***/ "pCHt":
/*!**************************************************!*\
  !*** ./src/app/directive/resizable.directive.ts ***!
  \**************************************************/
/*! exports provided: ResizableDirective */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResizableDirective", function() { return ResizableDirective; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_transform_css_number__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/transform/css-number */ "zAbn");
/* harmony import */ var _resize_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./resize-handler */ "5zlT");




var ResizableDirective = /** @class */ (function () {
    function ResizableDirective(ngZone, elementRef) {
        this.ngZone = ngZone;
        this.elementRef = elementRef;
        this.isDisable = false;
        this.boundsSelector = 'body';
        this.minWidth = 100;
        this.minHeight = 100;
        this.ostart = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onmove = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onend = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.handleMap = new Map();
        this.handleTypes = [
            _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].N,
            _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].E,
            _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].W,
            _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].S,
            _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].NE,
            _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].NW,
            _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].SE,
            _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].SW
        ];
        this.startPosition = { left: 0, top: 0, width: 0, height: 0 };
        this.startPointer = { x: 0, y: 0, z: 0 };
        this.prevTrans = { left: 0, top: 0, width: 0, height: 0 };
    }
    ResizableDirective.prototype.ngAfterViewInit = function () {
        this.initialize();
    };
    ResizableDirective.prototype.ngOnDestroy = function () {
        this.cancel();
        this.destroy();
    };
    ResizableDirective.prototype.initialize = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.handleTypes.forEach(function (type) {
                var handle = new _resize_handler__WEBPACK_IMPORTED_MODULE_2__["ResizeHandler"](_this.elementRef.nativeElement, type);
                _this.handleMap.set(type, handle);
                handle.input.onStart = function (ev) { return _this.onResizeStart(ev, handle); };
                handle.input.onMove = function (ev) { return _this.onResizeMove(ev, handle); };
                handle.input.onEnd = function (ev) { return _this.onResizeEnd(ev, handle); };
                handle.input.onContextMenu = function (ev) { return _this.onContextMenu(ev, handle); };
            });
        });
    };
    ResizableDirective.prototype.cancel = function () {
        this.handleMap.forEach(function (handle) { return handle.input.cancel(); });
    };
    ResizableDirective.prototype.destroy = function () {
        this.handleMap.forEach(function (handle) { return handle.input.destroy(); });
    };
    ResizableDirective.prototype.onResizeStart = function (e, handle) {
        if (e.button === 1 || e.button === 2)
            return this.cancel();
        this.handleMap.forEach(function (h) {
            if (h !== handle)
                h.input.cancel();
        });
        this.startPosition = this.calcElementPosition(this.elementRef.nativeElement);
        this.startPointer = handle.input.pointer;
        this.prevTrans = { left: 0, top: 0, width: 0, height: 0 };
        e.stopPropagation();
    };
    ResizableDirective.prototype.onResizeMove = function (e, handle) {
        var trans = {
            left: 0,
            top: 0,
            width: handle.input.pointer.x - this.startPointer.x,
            height: handle.input.pointer.y - this.startPointer.y
        };
        switch (handle.type) {
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].N:
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].S:
                trans.width = 0;
                break;
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].E:
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].W:
                trans.height = 0;
                break;
        }
        switch (handle.type) {
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].SW:
                trans.left = trans.width;
                trans.width *= -1;
                break;
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].NE:
                trans.top = trans.height;
                trans.height *= -1;
                break;
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].E:
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].S:
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].SE:
                break;
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].N:
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].W:
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].NW:
                trans.left = trans.width;
                trans.top = trans.height;
                trans.width *= -1;
                trans.height *= -1;
                break;
        }
        if (trans.width + this.startPosition.width < this.minWidth) {
            trans.width = this.minWidth - this.startPosition.width;
            trans.left = trans.left !== 0 ? -trans.width : trans.left;
        }
        if (trans.height + this.startPosition.height < this.minHeight) {
            trans.height = this.minHeight - this.startPosition.height;
            trans.top = trans.top !== 0 ? -trans.height : trans.top;
        }
        var diff = {
            left: trans.left - this.prevTrans.left,
            top: trans.top - this.prevTrans.top,
            width: trans.width - this.prevTrans.width,
            height: trans.height - this.prevTrans.height
        };
        var correction = this.calcCorrectionPosition(diff);
        trans.left += correction.left;
        trans.top += correction.top;
        trans.width += correction.width;
        trans.height += correction.height;
        this.elementRef.nativeElement.style.left = trans.left + this.startPosition.left + 'px';
        this.elementRef.nativeElement.style.top = trans.top + this.startPosition.top + 'px';
        this.elementRef.nativeElement.style.width = trans.width + this.startPosition.width + 'px';
        this.elementRef.nativeElement.style.height = trans.height + this.startPosition.height + 'px';
        this.prevTrans = trans;
        if (e.cancelable)
            e.preventDefault();
        e.stopPropagation();
    };
    ResizableDirective.prototype.onResizeEnd = function (e, handle) {
        if (handle.input.isDragging && e.cancelable)
            e.preventDefault();
        e.stopPropagation();
    };
    ResizableDirective.prototype.onContextMenu = function (e, handle) {
        e.stopPropagation();
    };
    ResizableDirective.prototype.calcCorrectionPosition = function (diff) {
        if (diff === void 0) { diff = { left: 0, top: 0, width: 0, height: 0 }; }
        var correction = { left: 0, top: 0, width: 0, height: 0 };
        var box = this.elementRef.nativeElement.getBoundingClientRect();
        var bounds = this.elementRef.nativeElement.ownerDocument.querySelector(this.boundsSelector).getBoundingClientRect();
        if (bounds.right < box.right + diff.left + diff.width) {
            correction.width += bounds.right - (box.right + diff.left + diff.width);
        }
        if (box.left + diff.left < bounds.left) {
            correction.left += bounds.left - (box.left + diff.left);
            correction.width -= correction.left;
        }
        if (bounds.bottom < box.bottom + diff.top + diff.height) {
            correction.height += bounds.bottom - (box.bottom + diff.top + diff.height);
        }
        if (box.top + diff.top < bounds.top) {
            correction.top += bounds.top - (box.top + diff.top);
            correction.height -= correction.top;
        }
        return correction;
    };
    ResizableDirective.prototype.calcElementPosition = function (target) {
        var css = window.getComputedStyle(target);
        return {
            left: _udonarium_transform_css_number__WEBPACK_IMPORTED_MODULE_1__["CSSNumber"].relation(css.left, target.parentElement.offsetWidth, target.parentElement.offsetWidth * 0.5),
            top: _udonarium_transform_css_number__WEBPACK_IMPORTED_MODULE_1__["CSSNumber"].relation(css.top, target.parentElement.offsetHeight, target.parentElement.offsetHeight * 0.5),
            width: _udonarium_transform_css_number__WEBPACK_IMPORTED_MODULE_1__["CSSNumber"].relation(css.width, target.parentElement.offsetWidth, target.parentElement.offsetWidth * 0.5),
            height: _udonarium_transform_css_number__WEBPACK_IMPORTED_MODULE_1__["CSSNumber"].relation(css.height, target.parentElement.offsetHeight, target.parentElement.offsetHeight * 0.5),
        };
    };
    ResizableDirective.ɵfac = function ResizableDirective_Factory(t) { return new (t || ResizableDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"])); };
    ResizableDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: ResizableDirective, selectors: [["", "appResizable", ""]], inputs: { isDisable: ["resizable.disable", "isDisable"], boundsSelector: ["resizable.bounds", "boundsSelector"], minWidth: ["resizable.minWidth", "minWidth"], minHeight: ["resizable.minHeight", "minHeight"] }, outputs: { ostart: "resizable.start", onmove: "resizable.move", onend: "resizable.end" } });
    return ResizableDirective;
}());



/***/ }),

/***/ "pVQh":
/*!**************************************************!*\
  !*** ./src/app/class/core/system/util/base-x.ts ***!
  \**************************************************/
/*! exports provided: base */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "base", function() { return base; });
// base-x encoding / decoding
// Copyright (c) 2018 base-x contributors
// Copyright (c) 2014-2018 The Bitcoin Core developers (base58.cpp)
// Distributed under the MIT software license, see the accompanying
// file LICENSE or http://www.opensource.org/licenses/mit-license.php.
// https://github.com/cryptocoinjs/base-x
function base(ALPHABET) {
    if (ALPHABET.length >= 255)
        throw new TypeError('Alphabet too long');
    var BASE_MAP = new Uint8Array(256);
    for (var j = 0; j < BASE_MAP.length; j++) {
        BASE_MAP[j] = 255;
    }
    for (var i = 0; i < ALPHABET.length; i++) {
        var x = ALPHABET.charAt(i);
        var xc = x.charCodeAt(0);
        if (BASE_MAP[xc] !== 255)
            throw new TypeError(x + ' is ambiguous');
        BASE_MAP[xc] = i;
    }
    var BASE = ALPHABET.length;
    var LEADER = ALPHABET.charAt(0);
    var FACTOR = Math.log(BASE) / Math.log(256); // log(BASE) / log(256), rounded up
    var iFACTOR = Math.log(256) / Math.log(BASE); // log(256) / log(BASE), rounded up
    function encode(source) {
        if (source instanceof Uint8Array) {
        }
        else if (ArrayBuffer.isView(source)) {
            source = new Uint8Array(source.buffer, source.byteOffset, source.byteLength);
        }
        else if (Array.isArray(source)) {
            source = Uint8Array.from(source);
        }
        if (!(source instanceof Uint8Array))
            throw new TypeError('Expected Uint8Array');
        if (source.length === 0)
            return '';
        // Skip & count leading zeroes.
        var zeroes = 0;
        var length = 0;
        var pbegin = 0;
        var pend = source.length;
        while (pbegin !== pend && source[pbegin] === 0) {
            pbegin++;
            zeroes++;
        }
        // Allocate enough space in big-endian base58 representation.
        var size = ((pend - pbegin) * iFACTOR + 1) >>> 0;
        var b58 = new Uint8Array(size);
        // Process the bytes.
        while (pbegin !== pend) {
            var carry = source[pbegin];
            // Apply "b58 = b58 * 256 + ch".
            var i = 0;
            for (var it1 = size - 1; (carry !== 0 || i < length) && (it1 !== -1); it1--, i++) {
                carry += (256 * b58[it1]) >>> 0;
                b58[it1] = (carry % BASE) >>> 0;
                carry = (carry / BASE) >>> 0;
            }
            if (carry !== 0)
                throw new Error('Non-zero carry');
            length = i;
            pbegin++;
        }
        // Skip leading zeroes in base58 result.
        var it2 = size - length;
        while (it2 !== size && b58[it2] === 0) {
            it2++;
        }
        // Translate the result into a string.
        var str = LEADER.repeat(zeroes);
        for (; it2 < size; ++it2)
            str += ALPHABET.charAt(b58[it2]);
        return str;
    }
    function decodeUnsafe(source) {
        if (typeof source !== 'string')
            throw new TypeError('Expected String');
        if (source.length === 0)
            return new Uint8Array();
        var psz = 0;
        // Skip leading spaces.
        if (source[psz] === ' ')
            return;
        // Skip and count leading '1's.
        var zeroes = 0;
        var length = 0;
        while (source[psz] === LEADER) {
            zeroes++;
            psz++;
        }
        // Allocate enough space in big-endian base256 representation.
        var size = (((source.length - psz) * FACTOR) + 1) >>> 0; // log(58) / log(256), rounded up.
        var b256 = new Uint8Array(size);
        // Process the characters.
        while (source[psz]) {
            // Decode character
            var carry = BASE_MAP[source.charCodeAt(psz)];
            // Invalid character
            if (carry === 255)
                return;
            var i = 0;
            for (var it3 = size - 1; (carry !== 0 || i < length) && (it3 !== -1); it3--, i++) {
                carry += (BASE * b256[it3]) >>> 0;
                b256[it3] = (carry % 256) >>> 0;
                carry = (carry / 256) >>> 0;
            }
            if (carry !== 0)
                throw new Error('Non-zero carry');
            length = i;
            psz++;
        }
        // Skip trailing spaces.
        if (source[psz] === ' ')
            return;
        // Skip leading zeroes in b256.
        var it4 = size - length;
        while (it4 !== size && b256[it4] === 0) {
            it4++;
        }
        var vch = new Uint8Array(zeroes + (size - it4));
        var j = zeroes;
        while (it4 !== size) {
            vch[j++] = b256[it4++];
        }
        return vch;
    }
    function decode(string) {
        var buffer = decodeUnsafe(string);
        if (buffer)
            return buffer;
        throw new Error('Non-base' + BASE + ' character');
    }
    return {
        encode: encode,
        decodeUnsafe: decodeUnsafe,
        decode: decode
    };
}


/***/ }),

/***/ "pY18":
/*!**********************************************************************!*\
  !*** ./src/app/component/password-check/password-check.component.ts ***!
  \**********************************************************************/
/*! exports provided: PasswordCheckComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PasswordCheckComponent", function() { return PasswordCheckComponent; });
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/system/network/peer-context */ "ztsr");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/forms */ "3Pt+");






var _c0 = function () { return { standalone: true }; };
var PasswordCheckComponent = /** @class */ (function () {
    function PasswordCheckComponent(panelService, modalService) {
        this.panelService = panelService;
        this.modalService = modalService;
        this.password = '';
        this.help = '';
        this.targetPeerContext = null;
        this.title = '';
        this.targetPeerContext = modalService.option.peerId ? _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_1__["PeerContext"].parse(modalService.option.peerId) : _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_1__["PeerContext"].parse('???');
        this.title = modalService.option.title ? modalService.option.title : '';
    }
    Object.defineProperty(PasswordCheckComponent.prototype, "peerId", {
        get: function () { return _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__["Network"].peerId; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PasswordCheckComponent.prototype, "isConnected", {
        get: function () {
            return _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__["Network"].peerIds.length <= 1 ? false : true;
        },
        enumerable: false,
        configurable: true
    });
    PasswordCheckComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.modalService.title = _this.panelService.title = "\u30D1\u30B9\u30EF\u30FC\u30C9 \uFF1C" + _this.title + "\uFF1E"; });
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__["EventSystem"].register(this);
    };
    PasswordCheckComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__["EventSystem"].unregister(this);
    };
    PasswordCheckComponent.prototype.onInputChange = function (value) {
        this.help = '';
    };
    PasswordCheckComponent.prototype.submit = function () {
        if (this.targetPeerContext.verifyPassword(this.password))
            this.modalService.resolve(this.password);
        this.help = 'パスワードが違います';
    };
    PasswordCheckComponent.ɵfac = function PasswordCheckComponent_Factory(t) { return new (t || PasswordCheckComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_3__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_4__["ModalService"])); };
    PasswordCheckComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({ type: PasswordCheckComponent, selectors: [["password-check"]], decls: 10, vars: 4, consts: [["passwordForm", "ngForm"], ["placeholder", "\u30D1\u30B9\u30EF\u30FC\u30C9", 3, "ngModel", "ngModelOptions", "ngModelChange", "input"], ["type", "submit", 3, "click"], [2, "font-size", "12px"]], template: function PasswordCheckComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "form", null, 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](3, "\u30D1\u30B9\u30EF\u30FC\u30C9: ");
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](4, "input", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("ngModelChange", function PasswordCheckComponent_Template_input_ngModelChange_4_listener($event) { return ctx.password = $event; })("input", function PasswordCheckComponent_Template_input_input_4_listener($event) { return ctx.onInputChange($event.target.value); });
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](5, "button", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function PasswordCheckComponent_Template_button_click_5_listener() { return ctx.submit(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](6, "\u5165\u5BA4");
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](7, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](8, "span", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](9);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](4);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngModel", ctx.password)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpureFunction0"](3, _c0));
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](ctx.help);
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_5__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_5__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_5__["NgForm"], _angular_forms__WEBPACK_IMPORTED_MODULE_5__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_5__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_5__["NgModel"]], styles: [".box[_ngcontent-%COMP%] {\n  border-bottom:1px dotted #888;\n}\n.image[_ngcontent-%COMP%] {\n  padding: 0px;\n  width: 64px;\n  height: 64px;\n  display: inline-block;\n  vertical-align: top;\n}\n.contain[_ngcontent-%COMP%] {\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhc3N3b3JkLWNoZWNrLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSw2QkFBNkI7QUFDL0I7QUFDQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsWUFBWTtFQUNaLHFCQUFxQjtFQUNyQixtQkFBbUI7QUFDckI7QUFFQTtFQUNFLGtDQUFrQztFQUNsQyw0QkFBNEI7RUFDNUIsd0JBQXdCO0FBQzFCIiwiZmlsZSI6InBhc3N3b3JkLWNoZWNrLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYm94IHtcbiAgYm9yZGVyLWJvdHRvbToxcHggZG90dGVkICM4ODg7XG59XG4uaW1hZ2Uge1xuICBwYWRkaW5nOiAwcHg7XG4gIHdpZHRoOiA2NHB4O1xuICBoZWlnaHQ6IDY0cHg7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcbn1cblxuLmNvbnRhaW4ge1xuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXIgY2VudGVyO1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvbnRhaW47XG59Il19 */"] });
    return PasswordCheckComponent;
}());



/***/ }),

/***/ "qBBt":
/*!******************************************************!*\
  !*** ./src/app/class/core/system/network/network.ts ***!
  \******************************************************/
/*! exports provided: Network */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Network", function() { return Network; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _util_zero_timeout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/zero-timeout */ "eS09");
/* harmony import */ var _connection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./connection */ "Hcv6");
/* harmony import */ var _peer_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./peer-context */ "ztsr");
/* harmony import */ var _skyway_connection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./skyway-connection */ "jJIX");





var unknownContext = _peer_context__WEBPACK_IMPORTED_MODULE_3__["PeerContext"].parse('???');
var Network = /** @class */ (function () {
    function Network() {
        var _this = this;
        this.callback = new _connection__WEBPACK_IMPORTED_MODULE_2__["ConnectionCallback"]();
        this.key = '';
        this.queue = new Set();
        this.sendInterval = null;
        this.sendCallback = function () { _this.sendQueue(); };
        this.callbackUnload = function (e) { _this.close(); };
        console.log('Network ready...');
    }
    Object.defineProperty(Network, "instance", {
        get: function () {
            if (!Network._instance)
                Network._instance = new Network();
            return Network._instance;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Network.prototype, "peerId", {
        get: function () { return this.connection ? this.connection.peerId : unknownContext.peerId; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Network.prototype, "peerIds", {
        get: function () { return this.connection ? this.connection.peerIds.concat() : []; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Network.prototype, "peerContexts", {
        get: function () { return this.connection ? this.connection.peerContexts.concat() : []; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Network.prototype, "peerContext", {
        get: function () { return this.connection ? this.connection.peerContext : unknownContext; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Network.prototype, "isOpen", {
        get: function () { return this.connection && this.connection.peerContext ? this.connection.peerContext.isOpen : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Network.prototype, "bandwidthUsage", {
        get: function () { return this.connection ? this.connection.bandwidthUsage : 0; },
        enumerable: false,
        configurable: true
    });
    Network.prototype.open = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (this.connection && this.connection.peerContext) {
            console.warn('It is already opened.');
            this.close();
        }
        console.log('Network open...', args);
        this.connection = this.initializeConnection();
        this.connection.open.apply(this.connection, args);
        window.addEventListener('unload', this.callbackUnload, false);
    };
    Network.prototype.close = function () {
        if (this.connection)
            this.connection.close();
        this.connection = null;
        window.removeEventListener('unload', this.callbackUnload, false);
        console.log('Network close...');
    };
    Network.prototype.connect = function (peerId) {
        if (this.connection)
            return this.connection.connect(peerId);
        return false;
    };
    Network.prototype.disconnect = function (peerId) {
        if (!this.connection)
            return;
        if (this.connection.disconnect(peerId)) {
            console.log('<disconnectPeer()> Peer:' + peerId);
            this.disconnect(peerId);
        }
    };
    Network.prototype.send = function (data, sendTo) {
        this.queue.add({ data: data, sendTo: sendTo });
        if (this.sendInterval === null) {
            this.sendInterval = Object(_util_zero_timeout__WEBPACK_IMPORTED_MODULE_1__["setZeroTimeout"])(this.sendCallback);
        }
    };
    Network.prototype.sendQueue = function () {
        var e_1, _a;
        var broadcast = [];
        var unicast = {};
        var echocast = [];
        var loopCount = this.queue.size < 128 ? this.queue.size : 128;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.queue), _c = _b.next(); !_c.done; _c = _b.next()) {
                var item = _c.value;
                if (loopCount <= 0)
                    break;
                loopCount--;
                this.queue.delete(item);
                if (item.sendTo == null) {
                    broadcast.push(item.data);
                }
                else if (item.sendTo === this.peerId) {
                    echocast.push(item.data);
                }
                else {
                    if (!(item.sendTo in unicast))
                        unicast[item.sendTo] = [];
                    unicast[item.sendTo].push(item.data);
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        // できるだけ一纏めにして送る
        if (this.connection) {
            if (broadcast.length)
                this.connection.send(broadcast);
            for (var sendTo in unicast)
                this.connection.send(unicast[sendTo], sendTo);
        }
        // 自分自身への送信
        if (this.callback.onData) {
            this.callback.onData(null, broadcast);
            this.callback.onData(this.peerId, echocast);
        }
        if (0 < this.queue.size) {
            this.sendInterval = Object(_util_zero_timeout__WEBPACK_IMPORTED_MODULE_1__["setZeroTimeout"])(this.sendCallback);
        }
        else {
            this.sendInterval = null;
        }
    };
    Network.prototype.setApiKey = function (key) {
        if (this.key !== key)
            console.log('Key Change');
        this.key = key;
    };
    Network.prototype.listAllPeers = function () {
        return this.connection ? this.connection.listAllPeers() : Promise.resolve([]);
    };
    Network.prototype.initializeConnection = function () {
        var _this = this;
        var store = new _skyway_connection__WEBPACK_IMPORTED_MODULE_4__["SkyWayConnection"]();
        store.setApiKey(this.key);
        store.callback.onOpen = function (peerId) { if (_this.callback.onOpen)
            _this.callback.onOpen(peerId); };
        store.callback.onClose = function (peerId) { if (_this.callback.onClose)
            _this.callback.onClose(peerId); };
        store.callback.onConnect = function (peerId) { if (_this.callback.onConnect)
            _this.callback.onConnect(peerId); };
        store.callback.onDisconnect = function (peerId) { if (_this.callback.onDisconnect)
            _this.callback.onDisconnect(peerId); };
        store.callback.onData = function (peerId, data) { if (_this.callback.onData)
            _this.callback.onData(peerId, data); };
        store.callback.onError = function (peerId, err) { if (_this.callback.onError)
            _this.callback.onError(peerId, err); };
        if (0 < this.queue.size && this.sendInterval === null)
            this.sendInterval = Object(_util_zero_timeout__WEBPACK_IMPORTED_MODULE_1__["setZeroTimeout"])(this.sendCallback);
        return store;
    };
    return Network;
}());



/***/ }),

/***/ "rl/O":
/*!*****************************************************************!*\
  !*** ./src/app/class/core/synchronize-object/decorator-core.ts ***!
  \*****************************************************************/
/*! exports provided: defineSyncObject, defineSyncVariable, defineSyncAttribute */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defineSyncObject", function() { return defineSyncObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defineSyncVariable", function() { return defineSyncVariable; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defineSyncAttribute", function() { return defineSyncAttribute; });
/* harmony import */ var _object_factory__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./object-factory */ "+FYa");

function defineSyncObject(alias) {
    return function (constructor) {
        _object_factory__WEBPACK_IMPORTED_MODULE_0__["ObjectFactory"].instance.register(constructor, alias);
    };
}
function defineSyncVariable() {
    return function (target, key) {
        function getter() {
            return this.context.syncData[key];
        }
        function setter(value) {
            this.context.syncData[key] = value;
            this.update();
        }
        Object.defineProperty(target, key, {
            get: getter,
            set: setter,
            enumerable: true,
            configurable: true
        });
    };
}
function defineSyncAttribute() {
    return function (target, key) {
        function getter() {
            return this.getAttribute(key);
        }
        function setter(value) {
            this.setAttribute(key, value);
        }
        Object.defineProperty(target, key, {
            get: getter,
            set: setter,
            enumerable: true,
            configurable: true
        });
    };
}


/***/ }),

/***/ "tLw4":
/*!**************************************************************!*\
  !*** ./src/app/component/card-stack/card-stack.component.ts ***!
  \**************************************************************/
/*! exports provided: CardStackComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CardStackComponent", function() { return CardStackComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/animations */ "R0Ic");
/* harmony import */ var _udonarium_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/card */ "jiu3");
/* harmony import */ var _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/card-stack */ "23G+");
/* harmony import */ var _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var component_card_stack_list_card_stack_list_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! component/card-stack-list/card-stack-list.component */ "k8BA");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var directive_input_handler__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! directive/input-handler */ "96Ug");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_image_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! service/image.service */ "Hvpu");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var directive_movable_directive__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! directive/movable.directive */ "+Kyd");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var directive_rotable_directive__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! directive/rotable.directive */ "3jYK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");






















var _c0 = function (a0) { return { "transform": a0 }; };
function CardStackComponent_div_2_Template(rf, ctx) { if (rf & 1) {
    var _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵlistener"]("@shuffle.start", function CardStackComponent_div_2_Template_div_animation_shuffle_start_0_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵrestoreView"](_r5); var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵnextContext"](); return ctx_r4.animationShuffleStarted($event); })("@shuffle.done", function CardStackComponent_div_2_Template_div_animation_shuffle_done_0_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵrestoreView"](_r5); var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵnextContext"](); return ctx_r6.animationShuffleDone($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelement"](1, "img", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("@shuffle", ctx_r0.animeState);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpureFunction1"](6, _c0, "rotateZ(" + ctx_r0.topCard.rotate + "deg)"))("src", _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipeBind2"](2, 3, ctx_r0.imageFile.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵsanitizeUrl"]);
} }
function CardStackComponent_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](1, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](2, "i", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](3, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](4, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](5, "i", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](6, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](7, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](8, "i", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](9, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](10, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](11, "i", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](12, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementContainerEnd"]();
} }
function CardStackComponent_div_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](0, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](1, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpureFunction1"](2, _c0, "translateY(-50%) translateX(-50%) translateX(" + ctx_r2.size * ctx_r2.gridSize / 2 + "px)"));
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtextInterpolate1"]("", ctx_r2.cards.length, "\u679A");
} }
function CardStackComponent_div_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](0, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](1, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpureFunction1"](2, _c0, "translateY(50%) translateX(-50%) translateX(" + ctx_r3.size * ctx_r3.gridSize / 2 + "px)"));
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtextInterpolate1"]("", ctx_r3.ownerName, " \u304C\u78BA\u8A8D\u4E2D");
} }
var _c1 = function (a0) { return { "is-empty": a0 }; };
var CardStackComponent = /** @class */ (function () {
    function CardStackComponent(ngZone, contextMenuService, panelService, elementRef, changeDetector, imageService, pointerDeviceService) {
        this.ngZone = ngZone;
        this.contextMenuService = contextMenuService;
        this.panelService = panelService;
        this.elementRef = elementRef;
        this.changeDetector = changeDetector;
        this.imageService = imageService;
        this.pointerDeviceService = pointerDeviceService;
        this.cardStack = null;
        this.is3D = false;
        this.animeState = 'inactive';
        this.iconHiddenTimer = null;
        this.gridSize = 50;
        this.movableOption = {};
        this.rotableOption = {};
        this.doubleClickTimer = null;
        this.doubleClickPoint = { x: 0, y: 0 };
        this.input = null;
    }
    Object.defineProperty(CardStackComponent.prototype, "name", {
        get: function () { return this.cardStack.name; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "rotate", {
        get: function () { return this.cardStack.rotate; },
        set: function (rotate) { this.cardStack.rotate = rotate; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "zindex", {
        get: function () { return this.cardStack.zindex; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "isShowTotal", {
        get: function () { return this.cardStack.isShowTotal; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "cards", {
        get: function () { return this.cardStack.cards; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "isEmpty", {
        get: function () { return this.cardStack.isEmpty; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "size", {
        get: function () {
            var card = this.cardStack.topCard;
            return (card ? card.size : 2);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "hasOwner", {
        get: function () { return this.cardStack.hasOwner; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "ownerName", {
        get: function () { return this.cardStack.ownerName; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "topCard", {
        get: function () { return this.cardStack.topCard; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "imageFile", {
        get: function () { return this.imageService.getSkeletonOr(this.cardStack.imageFile); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "isIconHidden", {
        get: function () { return this.iconHiddenTimer != null; },
        enumerable: false,
        configurable: true
    });
    ;
    CardStackComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].register(this)
            .on('SHUFFLE_CARD_STACK', -1000, function (event) {
            if (event.data.identifier === _this.cardStack.identifier) {
                _this.animeState = 'active';
                _this.changeDetector.markForCheck();
            }
        })
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(event.data.identifier);
            if (!_this.cardStack || !object)
                return;
            if ((_this.cardStack === object)
                || (object instanceof _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_4__["ObjectNode"] && _this.cardStack.contains(object))
                || (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_7__["PeerCursor"] && object.userId === _this.cardStack.owner)) {
                _this.changeDetector.markForCheck();
            }
        })
            .on('CARD_STACK_DECREASED', function (event) {
            if (event.data.cardStackIdentifier === _this.cardStack.identifier && _this.cardStack)
                _this.changeDetector.markForCheck();
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('UPDATE_FILE_RESOURE', -1000, function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('DISCONNECT_PEER', function (event) {
            var cursor = _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_7__["PeerCursor"].findByPeerId(event.data.peerId);
            if (!cursor || _this.cardStack.owner === cursor.userId)
                _this.changeDetector.markForCheck();
        });
        this.movableOption = {
            tabletopObject: this.cardStack,
            transformCssOffset: 'translateZ(0.15px)',
            colideLayers: ['terrain']
        };
        this.rotableOption = {
            tabletopObject: this.cardStack
        };
    };
    CardStackComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.input = new directive_input_handler__WEBPACK_IMPORTED_MODULE_11__["InputHandler"](_this.elementRef.nativeElement);
        });
        this.input.onStart = function (e) { return _this.ngZone.run(function () { return _this.onInputStart(e); }); };
    };
    CardStackComponent.prototype.ngOnDestroy = function () {
        this.input.destroy();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].unregister(this);
    };
    CardStackComponent.prototype.animationShuffleStarted = function (event) {
    };
    CardStackComponent.prototype.animationShuffleDone = function (event) {
        this.animeState = 'inactive';
        this.changeDetector.markForCheck();
    };
    CardStackComponent.prototype.onCardDrop = function (e) {
        if (this.cardStack === e.detail || (e.detail instanceof _udonarium_card__WEBPACK_IMPORTED_MODULE_2__["Card"] === false && e.detail instanceof _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_3__["CardStack"] === false)) {
            return;
        }
        e.stopPropagation();
        e.preventDefault();
        if (e.detail instanceof _udonarium_card__WEBPACK_IMPORTED_MODULE_2__["Card"]) {
            var card = e.detail;
            var distance = Math.pow((card.location.x - this.cardStack.location.x), 2) + Math.pow((card.location.y - this.cardStack.location.y), 2) + Math.pow((card.posZ - this.cardStack.posZ), 2);
            if (distance < Math.pow(50, 2))
                this.cardStack.putOnTop(card);
        }
        else if (e.detail instanceof _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_3__["CardStack"]) {
            var cardStack = e.detail;
            var distance = Math.pow((cardStack.location.x - this.cardStack.location.x), 2) + Math.pow((cardStack.location.y - this.cardStack.location.y), 2) + Math.pow((cardStack.posZ - this.cardStack.posZ), 2);
            if (distance < Math.pow(25, 2))
                this.concatStack(cardStack);
        }
    };
    CardStackComponent.prototype.startDoubleClickTimer = function (e) {
        var _this = this;
        if (!this.doubleClickTimer) {
            this.stopDoubleClickTimer();
            this.doubleClickTimer = setTimeout(function () { return _this.stopDoubleClickTimer(); }, e.touches ? 500 : 300);
            this.doubleClickPoint = this.input.pointer;
            return;
        }
        if (e.touches) {
            this.input.onEnd = this.onDoubleClick.bind(this);
        }
        else {
            this.onDoubleClick();
        }
    };
    CardStackComponent.prototype.stopDoubleClickTimer = function () {
        clearTimeout(this.doubleClickTimer);
        this.doubleClickTimer = null;
        this.input.onEnd = null;
    };
    CardStackComponent.prototype.onDoubleClick = function () {
        this.stopDoubleClickTimer();
        var distance = Math.pow((this.doubleClickPoint.x - this.input.pointer.x), 2) + Math.pow((this.doubleClickPoint.y - this.input.pointer.y), 2);
        if (distance < Math.pow(10, 2)) {
            console.log('onDoubleClick !!!!');
            if (this.drawCard() != null) {
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardDraw);
            }
        }
    };
    CardStackComponent.prototype.onDragstart = function (e) {
        e.stopPropagation();
        e.preventDefault();
    };
    CardStackComponent.prototype.onInputStart = function (e) {
        this.startDoubleClickTimer(e);
        this.cardStack.toTopmost();
        this.startIconHiddenTimer();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: this.cardStack.identifier, className: 'GameCharacter' });
    };
    CardStackComponent.prototype.onContextMenu = function (e) {
        var _this = this;
        e.stopPropagation();
        e.preventDefault();
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu)
            return;
        var position = this.pointerDeviceService.pointers[0];
        this.contextMenuService.open(position, [
            {
                name: '１枚引く',
                action: function () {
                    if (_this.drawCard() != null) {
                        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardDraw);
                    }
                }
            },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_12__["ContextMenuSeparator"],
            {
                name: '一番上を表にする',
                action: function () {
                    _this.cardStack.faceUp();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardDraw);
                }
            },
            {
                name: '一番上を裏にする',
                action: function () {
                    _this.cardStack.faceDown();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardDraw);
                }
            },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_12__["ContextMenuSeparator"],
            {
                name: 'すべて表にする',
                action: function () {
                    _this.cardStack.faceUpAll();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardDraw);
                }
            },
            {
                name: 'すべて裏にする',
                action: function () {
                    _this.cardStack.faceDownAll();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardDraw);
                }
            },
            {
                name: 'すべて正位置にする',
                action: function () {
                    _this.cardStack.uprightAll();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardDraw);
                }
            },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_12__["ContextMenuSeparator"],
            {
                name: 'シャッフル',
                action: function () {
                    _this.cardStack.shuffle();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardShuffle);
                    _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].call('SHUFFLE_CARD_STACK', { identifier: _this.cardStack.identifier });
                }
            },
            { name: 'カード一覧', action: function () { _this.showStackList(_this.cardStack); } },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_12__["ContextMenuSeparator"],
            (this.isShowTotal
                ? { name: '枚数を非表示にする', action: function () { _this.cardStack.isShowTotal = false; } }
                : { name: '枚数を表示する', action: function () { _this.cardStack.isShowTotal = true; } }),
            { name: 'カードサイズを揃える', action: function () { if (_this.cardStack.topCard)
                    _this.cardStack.unifyCardsSize(_this.cardStack.topCard.size); } },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_12__["ContextMenuSeparator"],
            {
                name: '山札を人数分に分割する',
                action: function () {
                    _this.splitStack(_udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["Network"].peerIds.length);
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardDraw);
                }
            },
            {
                name: '山札を崩す',
                action: function () {
                    _this.breakStack();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardShuffle);
                }
            },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_12__["ContextMenuSeparator"],
            { name: '詳細を表示', action: function () { _this.showDetail(_this.cardStack); } },
            {
                name: 'コピーを作る',
                action: function () {
                    var cloneObject = _this.cardStack.clone();
                    cloneObject.location.x += _this.gridSize;
                    cloneObject.location.y += _this.gridSize;
                    cloneObject.owner = '';
                    cloneObject.toTopmost();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardPut);
                }
            },
            {
                name: '山札を削除する',
                action: function () {
                    _this.cardStack.setLocation('graveyard');
                    _this.cardStack.destroy();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].sweep);
                }
            },
        ], this.name);
    };
    CardStackComponent.prototype.onMove = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardPick);
    };
    CardStackComponent.prototype.onMoved = function () {
        var _this = this;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardPut);
        this.ngZone.run(function () { return _this.dispatchCardDropEvent(); });
    };
    CardStackComponent.prototype.drawCard = function () {
        var card = this.cardStack.drawCard();
        if (card) {
            this.cardStack.update(); // todo
            card.location.x += 100 + (Math.random() * 50);
            card.location.y += 25 + (Math.random() * 50);
            card.setLocation(this.cardStack.location.name);
        }
        return card;
    };
    CardStackComponent.prototype.breakStack = function () {
        var e_1, _a;
        var cards = this.cardStack.drawCardAll().reverse();
        try {
            for (var cards_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(cards), cards_1_1 = cards_1.next(); !cards_1_1.done; cards_1_1 = cards_1.next()) {
                var card = cards_1_1.value;
                card.location.x += 25 - (Math.random() * 50);
                card.location.y += 25 - (Math.random() * 50);
                card.toTopmost();
                card.setLocation(this.cardStack.location.name);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (cards_1_1 && !cards_1_1.done && (_a = cards_1.return)) _a.call(cards_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        this.cardStack.setLocation('graveyard');
        this.cardStack.destroy();
    };
    CardStackComponent.prototype.splitStack = function (split) {
        if (split < 2)
            return;
        var cardStacks = [];
        for (var i = 0; i < split; i++) {
            var cardStack = _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_3__["CardStack"].create(this.cardStack.name);
            cardStack.location.x = this.cardStack.location.x + 50 - (Math.random() * 100);
            cardStack.location.y = this.cardStack.location.y + 50 - (Math.random() * 100);
            cardStack.posZ = this.cardStack.posZ;
            cardStack.location.name = this.cardStack.location.name;
            cardStack.rotate = this.rotate;
            cardStack.toTopmost();
            cardStacks.push(cardStack);
        }
        var cards = this.cardStack.drawCardAll();
        this.cardStack.setLocation('graveyard');
        this.cardStack.destroy();
        var num = 0;
        var splitIndex = (cards.length / split) * (num + 1);
        for (var i = 0; i < cards.length; i++) {
            cardStacks[num].putOnBottom(cards[i]);
            if (splitIndex <= i + 1) {
                num++;
                splitIndex = (cards.length / split) * (num + 1);
            }
        }
    };
    CardStackComponent.prototype.concatStack = function (topStack, bottomStack) {
        var e_2, _a;
        if (bottomStack === void 0) { bottomStack = this.cardStack; }
        var newCardStack = _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_3__["CardStack"].create(topStack.name);
        newCardStack.location.name = bottomStack.location.name;
        newCardStack.location.x = bottomStack.location.x;
        newCardStack.location.y = bottomStack.location.y;
        newCardStack.posZ = bottomStack.posZ;
        newCardStack.zindex = topStack.zindex;
        newCardStack.rotate = bottomStack.rotate;
        var bottomCards = bottomStack.drawCardAll();
        var topCards = topStack.drawCardAll();
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(topCards.concat(bottomCards)), _c = _b.next(); !_c.done; _c = _b.next()) {
                var card = _c.value;
                newCardStack.putOnBottom(card);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
        bottomStack.setLocation('');
        bottomStack.destroy();
        topStack.setLocation('');
        topStack.destroy();
    };
    CardStackComponent.prototype.dispatchCardDropEvent = function () {
        var element = this.elementRef.nativeElement;
        var parent = element.parentElement;
        var children = parent.children;
        var event = new CustomEvent('carddrop', { detail: this.cardStack, bubbles: true });
        for (var i = 0; i < children.length; i++) {
            children[i].dispatchEvent(event);
        }
    };
    CardStackComponent.prototype.showDetail = function (gameObject) {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });
        var coordinate = this.pointerDeviceService.pointers[0];
        var title = '山札設定';
        if (gameObject.name.length)
            title += ' - ' + gameObject.name;
        var option = { title: title, left: coordinate.x - 300, top: coordinate.y - 300, width: 600, height: 600 };
        var component = this.panelService.open(component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_10__["GameCharacterSheetComponent"], option);
        component.tabletopObject = gameObject;
    };
    CardStackComponent.prototype.showStackList = function (gameObject) {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });
        var coordinate = this.pointerDeviceService.pointers[0];
        var option = { left: coordinate.x - 200, top: coordinate.y - 300, width: 400, height: 600 };
        this.cardStack.owner = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["Network"].peerContext.userId;
        var component = this.panelService.open(component_card_stack_list_card_stack_list_component__WEBPACK_IMPORTED_MODULE_9__["CardStackListComponent"], option);
        component.cardStack = gameObject;
    };
    CardStackComponent.prototype.startIconHiddenTimer = function () {
        var _this = this;
        clearTimeout(this.iconHiddenTimer);
        this.iconHiddenTimer = setTimeout(function () {
            _this.iconHiddenTimer = null;
            _this.changeDetector.markForCheck();
        }, 300);
        this.changeDetector.markForCheck();
    };
    CardStackComponent.ɵfac = function CardStackComponent_Factory(t) { return new (t || CardStackComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_13__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_12__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_14__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_13__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_13__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](service_image_service__WEBPACK_IMPORTED_MODULE_15__["ImageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_16__["PointerDeviceService"])); };
    CardStackComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdefineComponent"]({ type: CardStackComponent, selectors: [["card-stack"]], hostBindings: function CardStackComponent_HostBindings(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵlistener"]("carddrop", function CardStackComponent_carddrop_HostBindingHandler($event) { return ctx.onCardDrop($event); })("dragstart", function CardStackComponent_dragstart_HostBindingHandler($event) { return ctx.onDragstart($event); })("contextmenu", function CardStackComponent_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });
        } }, inputs: { cardStack: "cardStack", is3D: "is3D" }, decls: 6, vars: 11, consts: [["appMovable", "", 1, "component", "is-3d", "is-pointer-events-none", 3, "ngClass", "movable.option", "movable.ondragstart", "movable.ondragend"], ["appRotable", "", 1, "component-content", "is-pointer-events-auto", "is-grab", 3, "rotable.option", "rotable.ondragstart", "rotable.ondragend"], [4, "ngIf"], ["class", "name-tag is-nowrap is-black-background", 3, "ngStyle", 4, "ngIf"], ["class", "name-tag has-length-limit is-nowrap is-black-background", 3, "ngStyle", 4, "ngIf"], [1, "card-image", 3, "ngStyle", "src"], [1, "rotate-grab", "of-left-top"], [1, "material-icons"], [1, "rotate-grab", "of-left-bottom"], [1, "rotate-grab", "of-right-bottom"], [1, "rotate-grab", "of-right-top"], [1, "name-tag", "is-nowrap", "is-black-background", 3, "ngStyle"], [1, "name-tag", "has-length-limit", "is-nowrap", "is-black-background", 3, "ngStyle"]], template: function CardStackComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵlistener"]("movable.ondragstart", function CardStackComponent_Template_div_movable_ondragstart_0_listener() { return ctx.onMove(); })("movable.ondragend", function CardStackComponent_Template_div_movable_ondragend_0_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵlistener"]("rotable.ondragstart", function CardStackComponent_Template_div_rotable_ondragstart_1_listener() { return ctx.onMove(); })("rotable.ondragend", function CardStackComponent_Template_div_rotable_ondragend_1_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtemplate"](2, CardStackComponent_div_2_Template, 3, 8, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtemplate"](3, CardStackComponent_ng_container_3_Template, 13, 0, "ng-container", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtemplate"](4, CardStackComponent_div_4_Template, 3, 4, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtemplate"](5, CardStackComponent_div_5_Template, 3, 4, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵstyleProp"]("width", ctx.size * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpureFunction1"](9, _c1, ctx.isEmpty))("movable.option", ctx.movableOption);
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("rotable.option", ctx.rotableOption);
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("ngIf", ctx.topCard && ctx.imageFile);
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("ngIf", !ctx.isIconHidden);
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("ngIf", ctx.isShowTotal);
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("ngIf", ctx.hasOwner);
        } }, directives: [directive_movable_directive__WEBPACK_IMPORTED_MODULE_17__["MovableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_18__["NgClass"], directive_rotable_directive__WEBPACK_IMPORTED_MODULE_19__["RotableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_18__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_18__["NgStyle"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_20__["SafePipe"]], styles: [".is-grab[_ngcontent-%COMP%] {\n  cursor: grab;\n}\n\n.is-grabbing[_ngcontent-%COMP%] {\n  cursor: grabbing;\n}\n\n.is-transition[_ngcontent-%COMP%] {\n  transition: transform 132ms linear;\n}\n\n.is-3d[_ngcontent-%COMP%] {\n  transform-style: preserve-3d;\n}\n\n.is-pointer-events-none[_ngcontent-%COMP%] {\n  pointer-events: none;\n}\n\n.is-pointer-events-auto[_ngcontent-%COMP%] {\n  pointer-events: auto;\n}\n\n.is-empty[_ngcontent-%COMP%] {\n  height: 100px;\n  width: 100px;\n}\n\n.component[_ngcontent-%COMP%] {\n  position: absolute;\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n  -webkit-user-select: none;\n  user-select: none;\n  \n  -moz-user-drag: none;\n  -webkit-user-drag: none;\n}\n\n.component-content[_ngcontent-%COMP%] {\n  height: 100%;\n  width: 100%;\n  margin-top: -5px;\n  margin-left: -5px;\n  border: solid 5px #CCCCCC;\n  border-radius: 5px;\n  background-color: #CCCCCC;\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n}\n\n.card-image[_ngcontent-%COMP%] {\n  display: block;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  margin: auto;\n  height: auto;\n  width: 100%;\n}\n\n.rotate-grab[_ngcontent-%COMP%] {\n  position: absolute;\n  width: 28px;\n  height: 28px;\n  box-sizing: border-box;\n  cursor: -moz-default;\n  cursor: -webkit-default;\n  cursor: default;\n  z-index: 1;\n  padding: 2px;\n  background-color: #CCCCCC;\n  border-radius: 100%;\n  color: #444;\n  font-size: 8px;\n}\n\n.rotate-grab[_ngcontent-%COMP%] {\n  display: none;\n}\n\n.component[_ngcontent-%COMP%]:hover   .rotate-grab[_ngcontent-%COMP%] {\n  display: block;\n  opacity: 0.5;\n}\n\n.component[_ngcontent-%COMP%]:active   .rotate-grab[_ngcontent-%COMP%] {\n  display: none;\n}\n\n.component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:hover, .component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:active {\n  display: block;\n  opacity: 1;\n}\n\n.of-left-top[_ngcontent-%COMP%] {\n  top: -14px;\n  left: -14px;\n}\n\n.of-left-bottom[_ngcontent-%COMP%] {\n  bottom: -14px;\n  left: -14px;\n}\n\n.of-right-bottom[_ngcontent-%COMP%] {\n  bottom: -14px;\n  right: -14px;\n}\n\n.of-right-top[_ngcontent-%COMP%] {\n  top: -14px;\n  right: -14px;\n}\n\n.name-tag[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  font-size: 15px;\n  padding: 3px 9px;\n  border-radius: 24px;\n  position: absolute;\n  top: 50%\n}\n\n.has-length-limit[_ngcontent-%COMP%] {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 18em;\n}\n\n.is-nowrap[_ngcontent-%COMP%] {\n  white-space: nowrap;\n}\n\n.is-black-background[_ngcontent-%COMP%] {\n  color: #CCC;\n  background-color: rgba(30, 30, 30, 0.8);\n}\n\n.material-icons[_ngcontent-%COMP%] {\n  display: none;\n}\n\n.component[_ngcontent-%COMP%]:hover   .material-icons[_ngcontent-%COMP%], .component[_ngcontent-%COMP%]:active   .material-icons[_ngcontent-%COMP%] {\n  display: inline;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcmQtc3RhY2suY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUdFLFlBQVk7QUFDZDs7QUFFQTtFQUdFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUVFLGtDQUFrQztBQUNwQzs7QUFFQTtFQUVFLDRCQUE0QjtBQUM5Qjs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLGFBQWE7RUFDYixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsbUNBQTJCO1VBQTNCLDJCQUEyQjtFQUUzQix5QkFBeUI7RUFDekIsaUJBQWlCOztFQUVqQixvQkFBb0I7RUFDcEIsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UsWUFBWTtFQUNaLFdBQVc7RUFDWCxnQkFBZ0I7RUFDaEIsaUJBQWlCO0VBQ2pCLHlCQUF5QjtFQUN6QixrQkFBa0I7RUFDbEIseUJBQXlCO0VBQ3pCLG1DQUEyQjtVQUEzQiwyQkFBMkI7QUFDN0I7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsTUFBTTtFQUNOLE9BQU87RUFDUCxTQUFTO0VBQ1QsUUFBUTtFQUNSLFlBQVk7RUFDWixZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLG9CQUFvQjtFQUNwQix1QkFBdUI7RUFDdkIsZUFBZTtFQUNmLFVBQVU7RUFDVixZQUFZO0VBQ1oseUJBQXlCO0VBQ3pCLG1CQUFtQjtFQUNuQixXQUFXO0VBQ1gsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsVUFBVTtBQUNaOztBQUVBO0VBQ0UsVUFBVTtFQUNWLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGFBQWE7RUFDYixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsWUFBWTtBQUNkOztBQUVBO0VBQ0UsVUFBVTtFQUNWLFlBQVk7QUFDZDs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQixrQkFBa0I7RUFDbEI7QUFDRjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsdUJBQXVCO0VBQ3ZCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsdUNBQXVDO0FBQ3pDOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUNBO0VBQ0UsZUFBZTtBQUNqQiIsImZpbGUiOiJjYXJkLXN0YWNrLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaXMtZ3JhYiB7XG4gIGN1cnNvcjogLW1vei1ncmFiO1xuICBjdXJzb3I6IC13ZWJraXQtZ3JhYjtcbiAgY3Vyc29yOiBncmFiO1xufVxuXG4uaXMtZ3JhYmJpbmcge1xuICBjdXJzb3I6IC1tb3otZ3JhYmJpbmc7XG4gIGN1cnNvcjogLXdlYmtpdC1ncmFiYmluZztcbiAgY3Vyc29yOiBncmFiYmluZztcbn1cblxuLmlzLXRyYW5zaXRpb24ge1xuICAtd2Via2l0LXRyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcbn1cblxuLmlzLTNkIHtcbiAgLXdlYmtpdC10cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xuICB0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xufVxuXG4uaXMtcG9pbnRlci1ldmVudHMtbm9uZSB7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xufVxuXG4uaXMtcG9pbnRlci1ldmVudHMtYXV0byB7XG4gIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xufVxuXG4uaXMtZW1wdHkge1xuICBoZWlnaHQ6IDEwMHB4O1xuICB3aWR0aDogMTAwcHg7XG59XG5cbi5jb21wb25lbnQge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIFxuICAtbW96LXVzZXItZHJhZzogbm9uZTtcbiAgLXdlYmtpdC11c2VyLWRyYWc6IG5vbmU7XG59XG5cbi5jb21wb25lbnQtY29udGVudCB7XG4gIGhlaWdodDogMTAwJTtcbiAgd2lkdGg6IDEwMCU7XG4gIG1hcmdpbi10b3A6IC01cHg7XG4gIG1hcmdpbi1sZWZ0OiAtNXB4O1xuICBib3JkZXI6IHNvbGlkIDVweCAjQ0NDQ0NDO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIGJhY2tncm91bmQtY29sb3I6ICNDQ0NDQ0M7XG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcbn1cblxuLmNhcmQtaW1hZ2Uge1xuICBkaXNwbGF5OiBibG9jaztcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICBib3R0b206IDA7XG4gIHJpZ2h0OiAwO1xuICBtYXJnaW46IGF1dG87XG4gIGhlaWdodDogYXV0bztcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5yb3RhdGUtZ3JhYiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDI4cHg7XG4gIGhlaWdodDogMjhweDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgY3Vyc29yOiAtbW96LWRlZmF1bHQ7XG4gIGN1cnNvcjogLXdlYmtpdC1kZWZhdWx0O1xuICBjdXJzb3I6IGRlZmF1bHQ7XG4gIHotaW5kZXg6IDE7XG4gIHBhZGRpbmc6IDJweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI0NDQ0NDQztcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgY29sb3I6ICM0NDQ7XG4gIGZvbnQtc2l6ZTogOHB4O1xufVxuXG4ucm90YXRlLWdyYWIge1xuICBkaXNwbGF5OiBub25lO1xufVxuXG4uY29tcG9uZW50OmhvdmVyIC5yb3RhdGUtZ3JhYiB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBvcGFjaXR5OiAwLjU7XG59XG5cbi5jb21wb25lbnQ6YWN0aXZlIC5yb3RhdGUtZ3JhYiB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbi5jb21wb25lbnQgLnJvdGF0ZS1ncmFiOmhvdmVyLCAuY29tcG9uZW50IC5yb3RhdGUtZ3JhYjphY3RpdmUge1xuICBkaXNwbGF5OiBibG9jaztcbiAgb3BhY2l0eTogMTtcbn1cblxuLm9mLWxlZnQtdG9wIHtcbiAgdG9wOiAtMTRweDtcbiAgbGVmdDogLTE0cHg7XG59XG5cbi5vZi1sZWZ0LWJvdHRvbSB7XG4gIGJvdHRvbTogLTE0cHg7XG4gIGxlZnQ6IC0xNHB4O1xufVxuXG4ub2YtcmlnaHQtYm90dG9tIHtcbiAgYm90dG9tOiAtMTRweDtcbiAgcmlnaHQ6IC0xNHB4O1xufVxuXG4ub2YtcmlnaHQtdG9wIHtcbiAgdG9wOiAtMTRweDtcbiAgcmlnaHQ6IC0xNHB4O1xufVxuXG4ubmFtZS10YWcge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBmb250LXNpemU6IDE1cHg7XG4gIHBhZGRpbmc6IDNweCA5cHg7XG4gIGJvcmRlci1yYWRpdXM6IDI0cHg7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiA1MCVcbn1cblxuLmhhcy1sZW5ndGgtbGltaXQge1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgbWF4LXdpZHRoOiAxOGVtO1xufVxuXG4uaXMtbm93cmFwIHtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbn1cblxuLmlzLWJsYWNrLWJhY2tncm91bmQge1xuICBjb2xvcjogI0NDQztcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjgpO1xufVxuXG4ubWF0ZXJpYWwtaWNvbnMge1xuICBkaXNwbGF5OiBub25lO1xufVxuLmNvbXBvbmVudDpob3ZlciAubWF0ZXJpYWwtaWNvbnMsIC5jb21wb25lbnQ6YWN0aXZlIC5tYXRlcmlhbC1pY29ucyB7XG4gIGRpc3BsYXk6IGlubGluZTtcbn1cbiJdfQ== */"], data: { animation: [
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["trigger"])('shuffle', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["state"])('active', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["style"])({ transform: '' })),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["transition"])('* => active', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["animate"])('800ms ease', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["style"])({ transform: 'scale3d(0, 0, 0) rotateZ(0deg)', offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["style"])({ transform: 'scale3d(1.2, 1.2, 1.2) rotateZ(360deg)', offset: 0.5 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["style"])({ transform: 'scale3d(0.75, 0.75, 0.75) rotateZ(520deg)', offset: 0.75 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["style"])({ transform: 'scale3d(1.125, 1.125, 1.125) rotateZ(630deg)', offset: 0.875 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["style"])({ transform: 'scale3d(1.0, 1.0, 1.0) rotateZ(720deg)', offset: 1.0 })
                        ]))
                    ])
                ])
            ] }, changeDetection: 0 });
    return CardStackComponent;
}());



/***/ }),

/***/ "tRmd":
/*!**********************************************!*\
  !*** ./src/app/class/transform/transform.ts ***!
  \**********************************************/
/*! exports provided: Transform */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Transform", function() { return Transform; });
/* harmony import */ var _css_number__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css-number */ "zAbn");
/* harmony import */ var _matrix_3d__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./matrix-3d */ "lB2V");


var Transform = /** @class */ (function () {
    function Transform(element) {
        this.matrix = new _matrix_3d__WEBPACK_IMPORTED_MODULE_1__["Matrix3D"]();
        this.sceneTransform = new _matrix_3d__WEBPACK_IMPORTED_MODULE_1__["Matrix3D"]();
        this.inverseSceneTransform = new _matrix_3d__WEBPACK_IMPORTED_MODULE_1__["Matrix3D"]();
        this.initialize(element);
    }
    Transform.prototype.clear = function () {
        this.element = null;
        this.matrix.identity();
        return this;
    };
    Transform.prototype.initialize = function (element) {
        if (!element)
            return;
        this.element = element;
        var style = window.getComputedStyle(element);
        var parentWidth = 0;
        var parentHeight = 0;
        if (this.element.parentElement) {
            parentWidth = this.element.parentElement.clientWidth;
            parentHeight = this.element.parentElement.clientHeight;
        }
        else {
            parentWidth = window.innerWidth;
            parentHeight = window.innerHeight;
        }
        this.paddingLeft = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(style.paddingTop, parentWidth);
        this.paddingTop = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(style.paddingTop, parentHeight);
        this.marginLeft = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(style.marginLeft, parentWidth);
        this.marginTop = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(style.marginTop, parentHeight);
        this.borderLeft = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(style.borderLeft, parentWidth);
        this.borderTop = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(style.borderTop, parentHeight);
        this.matrix.setCSS(style.transform);
        this.sceneTransform.identity();
        this.extract(this, this.sceneTransform);
        this.sceneTransform.invert(this.inverseSceneTransform);
        return this;
    };
    Transform.prototype.globalToLocal = function (x, y, z) {
        if (z === void 0) { z = 0; }
        var ret = { x: x, y: y, z: z, w: 1 };
        this.inverseSceneTransform.unproject(ret, ret);
        this.fromBorderBox(ret);
        return ret;
    };
    Transform.prototype.localToGlobal = function (x, y, z) {
        if (z === void 0) { z = 0; }
        var ret = { x: x, y: y, z: z, w: 1 };
        this.sceneTransform.project(ret, ret);
        this.fromBorderBox(ret);
        return ret;
    };
    Transform.prototype.localToLocal = function (x, y, z, to) {
        var local = { x: x, y: y, z: z, w: 1 };
        var transformer = new Transform(to);
        var matrix = _matrix_3d__WEBPACK_IMPORTED_MODULE_1__["Matrix3D"].multiply(this.sceneTransform, transformer.inverseSceneTransform);
        var ret = { x: 0, y: 0, z: 0, w: 1 };
        ret.x = local.x * matrix.m11 + local.y * matrix.m21 + local.z * matrix.m31 + local.w * matrix.m41;
        ret.y = local.x * matrix.m12 + local.y * matrix.m22 + local.z * matrix.m32 + local.w * matrix.m42;
        ret.z = local.x * matrix.m13 + local.y * matrix.m23 + local.z * matrix.m33 + local.w * matrix.m43;
        ret.w = local.x * matrix.m14 + local.y * matrix.m24 + local.z * matrix.m34 + local.w * matrix.m44;
        transformer.clear();
        this.toBorderBox(ret);
        return ret;
    };
    Transform.prototype.extract = function (transform, matrix) {
        var element = transform.element;
        var node = element;
        while (node) {
            this.extractMatrix(node, matrix);
            if (node && node.style.position === 'fixed') {
                console.warn('fixed領域は計算が不正確');
                matrix.appendPosition(window.pageXOffset, window.pageYOffset, 0);
            }
            node = node.parentElement;
        }
    };
    Transform.prototype.extractMatrix = function (node, matrix) {
        if (matrix === void 0) { matrix = null; }
        if (!matrix)
            matrix = new _matrix_3d__WEBPACK_IMPORTED_MODULE_1__["Matrix3D"]();
        if (!node)
            return matrix;
        var element = node;
        var style = window.getComputedStyle(node);
        if (style.transform != 'none') {
            var origin_1 = style.transformOrigin ? style.transformOrigin.split(' ') : [];
            var originX = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(origin_1[0], element.offsetWidth, element.offsetWidth * 0.5);
            var originY = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(origin_1[1], element.offsetHeight, element.offsetHeight * 0.5);
            var originZ = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(origin_1[2], 0, 0);
            matrix.appendPosition(-originX, -originY, -originZ);
            matrix.appendCSS(style.transform);
            matrix.appendPosition(originX, originY, originZ);
        }
        var position = this.getPosition(node);
        matrix.appendPosition(position.x, position.y, 0);
        var perspective = 0;
        if (node.parentElement) {
            var parentStyle = window.getComputedStyle(node.parentElement);
            perspective = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].parse(parentStyle.perspective);
        }
        if (node.parentElement && perspective) {
            var parentStyle = window.getComputedStyle(node.parentElement);
            var perspectiveOrigin = parentStyle.perspectiveOrigin.split(' ');
            var perspectiveOriginX = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(perspectiveOrigin[0], element.parentElement.offsetWidth);
            var perspectiveOriginY = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(perspectiveOrigin[1], element.parentElement.offsetHeight);
            matrix.appendPosition(-perspectiveOriginX, -perspectiveOriginY, 0);
            matrix.appendPerspective(perspective);
            matrix.appendPosition(perspectiveOriginX, perspectiveOriginY, 0);
        }
        return matrix;
    };
    Transform.prototype.getPosition = function (node) {
        var ret = { x: 0, y: 0 };
        ret.x = !node.offsetParent ? node.offsetLeft : node.parentElement === node.offsetParent ? node.offsetLeft : node.parentElement.offsetParent === node.offsetParent ? node.offsetLeft - node.parentElement.offsetLeft : 0;
        ret.y = !node.offsetParent ? node.offsetTop : node.parentElement === node.offsetParent ? node.offsetTop : node.parentElement.offsetParent === node.offsetParent ? node.offsetTop - node.parentElement.offsetTop : 0;
        ret.x += node.offsetParent ? node.offsetParent.clientLeft : 0;
        ret.y += node.offsetParent ? node.offsetParent.clientTop : 0;
        return ret;
    };
    Transform.prototype.fromBorderBox = function (point) {
        point.x += this.paddingLeft;
        point.y += this.paddingTop;
        point.x += this.marginLeft;
        point.y += this.marginTop;
        point.x -= this.borderLeft;
        point.y -= this.borderTop;
    };
    Transform.prototype.toBorderBox = function (point) {
        point.x -= this.paddingLeft;
        point.y -= this.paddingTop;
        point.x -= this.marginLeft;
        point.y -= this.marginTop;
        point.x += this.borderLeft;
        point.y += this.borderTop;
    };
    return Transform;
}());



/***/ }),

/***/ "tYii":
/*!****************************************************!*\
  !*** ./src/app/component/lobby/lobby.component.ts ***!
  \****************************************************/
/*! exports provided: LobbyComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LobbyComponent", function() { return LobbyComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system/network/peer-context */ "ztsr");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var component_password_check_password_check_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! component/password-check/password-check.component */ "pY18");
/* harmony import */ var component_room_setting_room_setting_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! component/room-setting/room-setting.component */ "aL7I");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ "ofXK");











function LobbyComponent_div_0_ng_container_6_ng_container_12_td_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "td");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](1, "i", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](2, "lock");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
} }
function LobbyComponent_div_0_ng_container_6_ng_container_12_td_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "td");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](1, "-");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
} }
function LobbyComponent_div_0_ng_container_6_ng_container_12_button_11_Template(rf, ctx) { if (rf & 1) {
    var _r12 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "button", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("click", function LobbyComponent_div_0_ng_container_6_ng_container_12_button_11_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r12); var room_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]().$implicit; var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](3); return ctx_r10.connect(room_r6.peerContexts); });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](1, "\u63A5\u7D9A");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
} if (rf & 2) {
    var room_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]().$implicit;
    var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("disabled", (room_r6.peerContexts[0] == null ? null : room_r6.peerContexts[0].roomId) === ctx_r9.currentRoom);
} }
function LobbyComponent_div_0_ng_container_6_ng_container_12_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](1, "tr");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](2, "td", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](4, "td", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](6, LobbyComponent_div_0_ng_container_6_ng_container_12_td_6_Template, 3, 0, "td", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](7, LobbyComponent_div_0_ng_container_6_ng_container_12_td_7_Template, 2, 0, "td", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](8, "td");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](10, "td");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](11, LobbyComponent_div_0_ng_container_6_ng_container_12_button_11_Template, 2, 1, "button", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var room_r6 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate"](room_r6.peerContexts[0] == null ? null : room_r6.peerContexts[0].roomId);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate"](room_r6.roomName);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", room_r6.peerContexts[0].hasPassword);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", !room_r6.peerContexts[0].hasPassword);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"]("", room_r6.peerContexts.length, "\u4EBA");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", 0 < room_r6.alias.length);
} }
function LobbyComponent_div_0_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](1, "table", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](2, "tr");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](3, "th");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](4, "\u30EB\u30FC\u30E0ID");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](5, "th", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](6, "\u30EB\u30FC\u30E0\u540D");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](7, "th");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](8, "\u30D1\u30B9\u30EF\u30FC\u30C9");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](9, "th");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](10, "\u53C2\u52A0\u8005");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](11, "th");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](12, LobbyComponent_div_0_ng_container_6_ng_container_12_Template, 12, 6, "ng-container", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngForOf", ctx_r3.rooms);
} }
function LobbyComponent_div_0_span_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "span", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate"](ctx_r4.help);
} }
function LobbyComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    var _r15 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](1, "button", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("click", function LobbyComponent_div_0_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r15); var ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](); return ctx_r14.reload(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](2, "\u4E00\u89A7\u3092\u66F4\u65B0");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](3, "button", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("click", function LobbyComponent_div_0_Template_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r15); var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](); return ctx_r16.showRoomSetting(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](4, "\u65B0\u3057\u3044\u30EB\u30FC\u30E0\u3092\u4F5C\u6210\u3059\u308B");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](5, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](6, LobbyComponent_div_0_ng_container_6_Template, 13, 1, "ng-container", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](7, LobbyComponent_div_0_span_7_Template, 2, 1, "span", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("disabled", ctx_r0.isReloading);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx_r0.rooms.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx_r0.rooms.length < 1);
} }
function LobbyComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "span", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](1, "\u5225\u306E\u30EB\u30FC\u30E0\u306B\u63A5\u7D9A\u3057\u305F\u3044\u5834\u5408\u306F\u3001\u4ED6\u306E\u53C2\u52A0\u8005\u3068\u306E\u63A5\u7D9A\u3092\u5207\u3063\u3066\u304F\u3060\u3055\u3044\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](2, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](3, "\uFF08\u203B\u30DA\u30FC\u30B8\u30EA\u30ED\u30FC\u30C9\u3067\u5207\u65AD\u3067\u304D\u307E\u3059\u3002\uFF09");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
} }
var LobbyComponent = /** @class */ (function () {
    function LobbyComponent(panelService, modalService) {
        this.panelService = panelService;
        this.modalService = modalService;
        this.rooms = [];
        this.isReloading = false;
        this.help = '「一覧を更新」ボタンを押すと接続可能なルーム一覧を表示します。';
    }
    Object.defineProperty(LobbyComponent.prototype, "currentRoom", {
        get: function () { return _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerContext.roomId; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(LobbyComponent.prototype, "peerId", {
        get: function () { return _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(LobbyComponent.prototype, "isConnected", {
        get: function () {
            return _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerIds.length <= 1 ? false : true;
        },
        enumerable: false,
        configurable: true
    });
    LobbyComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.changeTitle(); });
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].register(this)
            .on('OPEN_NETWORK', function (event) {
            _this.changeTitle();
        })
            .on('CONNECT_PEER', function (event) {
            _this.changeTitle();
        });
        this.reload();
    };
    LobbyComponent.prototype.changeTitle = function () {
        this.modalService.title = this.panelService.title = 'ロビー';
        if (_udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerContext.roomName.length) {
            this.modalService.title = this.panelService.title = '＜' + _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerContext.roomName + '/' + _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerContext.roomId + '＞';
        }
    };
    LobbyComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].unregister(this);
    };
    LobbyComponent.prototype.reload = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var peersOfroom, peerIds, peerIds_1, peerIds_1_1, peerId, context, alias, alias;
            var e_1, _a;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        this.isReloading = true;
                        this.help = '検索中...';
                        this.rooms = [];
                        peersOfroom = {};
                        return [4 /*yield*/, _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].listAllPeers()];
                    case 1:
                        peerIds = _b.sent();
                        try {
                            for (peerIds_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(peerIds), peerIds_1_1 = peerIds_1.next(); !peerIds_1_1.done; peerIds_1_1 = peerIds_1.next()) {
                                peerId = peerIds_1_1.value;
                                context = _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_2__["PeerContext"].parse(peerId);
                                if (context.isRoom) {
                                    alias = context.roomId + context.roomName;
                                    if (!(alias in peersOfroom)) {
                                        peersOfroom[alias] = [];
                                    }
                                    peersOfroom[alias].push(context);
                                }
                            }
                        }
                        catch (e_1_1) { e_1 = { error: e_1_1 }; }
                        finally {
                            try {
                                if (peerIds_1_1 && !peerIds_1_1.done && (_a = peerIds_1.return)) _a.call(peerIds_1);
                            }
                            finally { if (e_1) throw e_1.error; }
                        }
                        for (alias in peersOfroom) {
                            this.rooms.push({ alias: alias, roomName: peersOfroom[alias][0].roomName, peerContexts: peersOfroom[alias] });
                        }
                        this.rooms.sort(function (a, b) {
                            if (a.alias < b.alias)
                                return -1;
                            if (a.alias > b.alias)
                                return 1;
                            return 0;
                        });
                        this.help = '接続可能なルームが見つかりませんでした。「新しいルームを作成する」で新規ルームを作成できます。';
                        this.isReloading = false;
                        return [2 /*return*/];
                }
            });
        });
    };
    LobbyComponent.prototype.connect = function (peerContexts) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var context, password, userId, triedPeer;
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        context = peerContexts[0];
                        password = '';
                        if (!context.hasPassword) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.modalService.open(component_password_check_password_check_component__WEBPACK_IMPORTED_MODULE_5__["PasswordCheckComponent"], { peerId: context.peerId, title: context.roomName + "/" + context.roomId })];
                    case 1:
                        password = _a.sent();
                        if (password == null)
                            password = '';
                        _a.label = 2;
                    case 2:
                        if (!context.verifyPassword(password))
                            return [2 /*return*/];
                        userId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerContext ? _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerContext.userId : _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_2__["PeerContext"].generateId();
                        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].open(userId, context.roomId, context.roomName, password);
                        _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_4__["PeerCursor"].myCursor.peerId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId;
                        triedPeer = [];
                        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].register(triedPeer)
                            .on('OPEN_NETWORK', function (event) {
                            var e_2, _a;
                            console.log('LobbyComponent OPEN_PEER', event.data.peerId);
                            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].unregister(triedPeer);
                            _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.clearDeleteHistory();
                            try {
                                for (var peerContexts_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(peerContexts), peerContexts_1_1 = peerContexts_1.next(); !peerContexts_1_1.done; peerContexts_1_1 = peerContexts_1.next()) {
                                    var context_1 = peerContexts_1_1.value;
                                    _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].connect(context_1.peerId);
                                }
                            }
                            catch (e_2_1) { e_2 = { error: e_2_1 }; }
                            finally {
                                try {
                                    if (peerContexts_1_1 && !peerContexts_1_1.done && (_a = peerContexts_1.return)) _a.call(peerContexts_1);
                                }
                                finally { if (e_2) throw e_2.error; }
                            }
                            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].register(triedPeer)
                                .on('CONNECT_PEER', function (event) {
                                console.log('接続成功！', event.data.peerId);
                                triedPeer.push(event.data.peerId);
                                console.log('接続成功 ' + triedPeer.length + '/' + peerContexts.length);
                                if (peerContexts.length <= triedPeer.length) {
                                    _this.resetNetwork();
                                    _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].unregister(triedPeer);
                                }
                            })
                                .on('DISCONNECT_PEER', function (event) {
                                console.warn('接続失敗', event.data.peerId);
                                triedPeer.push(event.data.peerId);
                                console.warn('接続失敗 ' + triedPeer.length + '/' + peerContexts.length);
                                if (peerContexts.length <= triedPeer.length) {
                                    _this.resetNetwork();
                                    _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].unregister(triedPeer);
                                }
                            });
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    LobbyComponent.prototype.resetNetwork = function () {
        if (_udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerContexts.length < 1) {
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].open();
            _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_4__["PeerCursor"].myCursor.peerId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId;
        }
    };
    LobbyComponent.prototype.showRoomSetting = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.modalService.open(component_room_setting_room_setting_component__WEBPACK_IMPORTED_MODULE_6__["RoomSettingComponent"], { width: 700, height: 400, left: 0, top: 400 })];
                    case 1:
                        _a.sent();
                        this.reload();
                        this.help = '「一覧を更新」ボタンを押すと接続可能なルーム一覧を表示します。';
                        return [2 /*return*/];
                }
            });
        });
    };
    LobbyComponent.ɵfac = function LobbyComponent_Factory(t) { return new (t || LobbyComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_8__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_9__["ModalService"])); };
    LobbyComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdefineComponent"]({ type: LobbyComponent, selectors: [["lobby"]], decls: 3, vars: 2, consts: [[4, "ngIf", "ngIfElse"], ["other_content", ""], [3, "disabled", "click"], [3, "click"], [4, "ngIf"], ["style", "font-size: 12px;", 4, "ngIf"], [1, "room-list"], [1, "room-name"], [4, "ngFor", "ngForOf"], [1, "is-small-font"], ["type", "submit", 3, "disabled", "click", 4, "ngIf"], [1, "material-icons", 2, "vertical-align", "middle", "font-size", "0.9rem"], ["type", "submit", 3, "disabled", "click"], [2, "font-size", "12px"]], template: function LobbyComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](0, LobbyComponent_div_0_Template, 8, 3, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](1, LobbyComponent_ng_template_1_Template, 4, 0, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplateRefExtractor"]);
        } if (rf & 2) {
            var _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵreference"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", !ctx.isConnected)("ngIfElse", _r1);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_10__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_10__["NgForOf"]], styles: [".box[_ngcontent-%COMP%] {\n  border-bottom:1px dotted #888;\n}\n.image[_ngcontent-%COMP%] {\n  padding: 0px;\n  width: 64px;\n  height: 64px;\n  display: inline-block;\n  vertical-align: top;\n}\n.contain[_ngcontent-%COMP%] {\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.room-list[_ngcontent-%COMP%] {\n  font-size: 12px;\n  border: 0;\n  border-spacing: 0;\n  padding: 0;\n  width: 100%;\n  max-width: 100%;\n  white-space: nowrap;\n}\n.room-list[_ngcontent-%COMP%]    > tr[_ngcontent-%COMP%]    > *[_ngcontent-%COMP%] {\n  padding: 1px 0.5em;\n  text-align: center;\n}\n.room-name[_ngcontent-%COMP%] {\n  white-space: normal;\n  word-wrap: break-word;\n  overflow-wrap: anywhere;\n  word-break: break-word;\n  min-width: 50%;\n}\n.is-small-font[_ngcontent-%COMP%] {\n  font-size: 10px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvYmJ5LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSw2QkFBNkI7QUFDL0I7QUFDQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsWUFBWTtFQUNaLHFCQUFxQjtFQUNyQixtQkFBbUI7QUFDckI7QUFFQTtFQUNFLGtDQUFrQztFQUNsQyw0QkFBNEI7RUFDNUIsd0JBQXdCO0FBQzFCO0FBRUE7RUFDRSxlQUFlO0VBQ2YsU0FBUztFQUNULGlCQUFpQjtFQUNqQixVQUFVO0VBQ1YsV0FBVztFQUNYLGVBQWU7RUFDZixtQkFBbUI7QUFDckI7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixrQkFBa0I7QUFDcEI7QUFFQTtFQUNFLG1CQUFtQjtFQUNuQixxQkFBcUI7RUFDckIsdUJBQXVCO0VBQ3ZCLHNCQUFzQjtFQUN0QixjQUFjO0FBQ2hCO0FBRUE7RUFDRSxlQUFlO0FBQ2pCIiwiZmlsZSI6ImxvYmJ5LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYm94IHtcbiAgYm9yZGVyLWJvdHRvbToxcHggZG90dGVkICM4ODg7XG59XG4uaW1hZ2Uge1xuICBwYWRkaW5nOiAwcHg7XG4gIHdpZHRoOiA2NHB4O1xuICBoZWlnaHQ6IDY0cHg7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcbn1cblxuLmNvbnRhaW4ge1xuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXIgY2VudGVyO1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvbnRhaW47XG59XG5cbi5yb29tLWxpc3Qge1xuICBmb250LXNpemU6IDEycHg7XG4gIGJvcmRlcjogMDtcbiAgYm9yZGVyLXNwYWNpbmc6IDA7XG4gIHBhZGRpbmc6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBtYXgtd2lkdGg6IDEwMCU7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG59XG5cbi5yb29tLWxpc3QgPiB0ciA+ICoge1xuICBwYWRkaW5nOiAxcHggMC41ZW07XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLnJvb20tbmFtZSB7XG4gIHdoaXRlLXNwYWNlOiBub3JtYWw7XG4gIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgb3ZlcmZsb3ctd3JhcDogYW55d2hlcmU7XG4gIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XG4gIG1pbi13aWR0aDogNTAlO1xufVxuXG4uaXMtc21hbGwtZm9udCB7XG4gIGZvbnQtc2l6ZTogMTBweDtcbn1cbiJdfQ== */"] });
    return LobbyComponent;
}());



/***/ }),

/***/ "taL5":
/*!******************************************!*\
  !*** ./src/app/service/batch.service.ts ***!
  \******************************************/
/*! exports provided: BatchService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BatchService", function() { return BatchService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");

var BatchService = /** @class */ (function () {
    function BatchService() {
        this.batchTask = new Map();
        this.batchTaskTimer = null;
    }
    BatchService.prototype.add = function (task, key) {
        var _this = this;
        if (key === void 0) { key = {}; }
        this.batchTask.set(key, task);
        if (this.batchTaskTimer != null)
            return;
        this.execBatch();
        this.batchTaskTimer = setInterval(function () {
            if (0 < _this.batchTask.size) {
                _this.execBatch();
            }
            else {
                clearInterval(_this.batchTaskTimer);
                _this.batchTaskTimer = null;
            }
        }, 66);
    };
    BatchService.prototype.remove = function (key) {
        if (key === void 0) { key = {}; }
        this.batchTask.delete(key);
    };
    BatchService.prototype.execBatch = function () {
        this.batchTask.forEach(function (task) { return task(); });
        this.batchTask.clear();
    };
    BatchService.ɵfac = function BatchService_Factory(t) { return new (t || BatchService)(); };
    BatchService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: BatchService, factory: BatchService.ɵfac, providedIn: 'root' });
    return BatchService;
}());



/***/ }),

/***/ "ts4F":
/*!************************************************!*\
  !*** ./src/app/directive/tooltip.directive.ts ***!
  \************************************************/
/*! exports provided: TooltipDirective */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TooltipDirective", function() { return TooltipDirective; });
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var component_overview_panel_overview_panel_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! component/overview-panel/overview-panel.component */ "BLsz");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");





var TooltipDirective = /** @class */ (function () {
    function TooltipDirective(ngZone, viewContainerRef, componentFactoryResolver, pointerDeviceService) {
        var _this = this;
        this.ngZone = ngZone;
        this.viewContainerRef = viewContainerRef;
        this.componentFactoryResolver = componentFactoryResolver;
        this.pointerDeviceService = pointerDeviceService;
        this.callbackOnMouseEnter = function (e) { return _this.onMouseEnter(e); };
        this.callbackOnMouseLeave = function (e) { return _this.onMouseLeave(e); };
        this.callbackOnMouseDown = function (e) { return _this.onMouseDown(e); };
    }
    TooltipDirective.prototype.ngOnInit = function () { };
    TooltipDirective.prototype.ngAfterViewInit = function () {
        this.addEventListeners(this.viewContainerRef.element.nativeElement);
    };
    TooltipDirective.prototype.ngOnDestroy = function () {
        this.removeEventListeners(this.viewContainerRef.element.nativeElement);
        this.clearTimer();
        this.close();
    };
    TooltipDirective.prototype.onMouseEnter = function (e) {
        this.clearTimer();
        if (!this.tooltipComponentRef)
            this.startOpenTimer();
    };
    TooltipDirective.prototype.onMouseLeave = function (e) {
        this.clearTimer();
        if (this.tooltipComponentRef)
            this.startCloseTimer();
    };
    TooltipDirective.prototype.onMouseDown = function (e) {
        var _this = this;
        if (!this.tooltipComponentRef)
            return;
        if (!this.tooltipComponentRef.location.nativeElement.contains(e.target)
            && !this.viewContainerRef.element.nativeElement.contains(e.target)) {
            this.ngZone.run(function () { return _this.closeAll(); });
        }
    };
    TooltipDirective.prototype.startOpenTimer = function () {
        var _this = this;
        var pointerX = this.pointerDeviceService.pointerX;
        var pointerY = this.pointerDeviceService.pointerY;
        this.openTooltipTimer = setTimeout(function () {
            _this.openTooltipTimer = null;
            var magnitude = Math.pow((pointerX - _this.pointerDeviceService.pointerX), 2) + Math.pow((pointerY - _this.pointerDeviceService.pointerY), 2);
            if (4 < magnitude) {
                _this.startOpenTimer();
            }
            else {
                _this.ngZone.run(function () { return _this.open(); });
            }
        }, 100);
    };
    TooltipDirective.prototype.startCloseTimer = function () {
        var _this = this;
        this.closeTooltipTimer = setTimeout(function () {
            _this.closeTooltipTimer = null;
            if (_this.tooltipComponentRef && _this.tooltipComponentRef.location.nativeElement.contains(document.activeElement)) {
                _this.startCloseTimer();
            }
            else {
                _this.ngZone.run(function () { return _this.closeAll(); });
            }
        }, 400);
    };
    TooltipDirective.prototype.clearTimer = function () {
        if (this.closeTooltipTimer)
            clearTimeout(this.closeTooltipTimer);
        if (this.openTooltipTimer)
            clearTimeout(this.openTooltipTimer);
        this.closeTooltipTimer = this.openTooltipTimer = null;
    };
    TooltipDirective.prototype.open = function () {
        var _this = this;
        this.closeAll();
        if (this.pointerDeviceService.isDragging)
            return;
        var parentViewContainerRef = service_context_menu_service__WEBPACK_IMPORTED_MODULE_2__["ContextMenuService"].defaultParentViewContainerRef;
        var injector = parentViewContainerRef.injector;
        var panelComponentFactory = this.componentFactoryResolver.resolveComponentFactory(component_overview_panel_overview_panel_component__WEBPACK_IMPORTED_MODULE_1__["OverviewPanelComponent"]);
        this.tooltipComponentRef = parentViewContainerRef.createComponent(panelComponentFactory, parentViewContainerRef.length, injector);
        this.tooltipComponentRef.instance.tabletopObject = this.tabletopObject;
        this.tooltipComponentRef.instance.left = this.pointerDeviceService.pointerX;
        this.tooltipComponentRef.instance.top = this.pointerDeviceService.pointerY;
        this.addEventListeners(this.tooltipComponentRef.location.nativeElement);
        this.ngZone.runOutsideAngular(function () {
            document.body.addEventListener('touchstart', _this.callbackOnMouseDown, true);
            document.body.addEventListener('mousedown', _this.callbackOnMouseDown, true);
        });
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__["EventSystem"].register(this)
            .on('DELETE_GAME_OBJECT', -1000, function (event) {
            if (_this.tabletopObject && _this.tabletopObject.identifier === event.data.identifier)
                _this.closeAll();
        });
        this.tooltipComponentRef.onDestroy(function () {
            _this.removeEventListeners(_this.tooltipComponentRef.location.nativeElement);
            document.body.removeEventListener('touchstart', _this.callbackOnMouseDown, true);
            document.body.removeEventListener('mousedown', _this.callbackOnMouseDown, true);
            _this.clearTimer();
            _this.tooltipComponentRef = null;
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_0__["EventSystem"].unregister(_this);
        });
        TooltipDirective.activeTooltips.push(this.tooltipComponentRef);
    };
    TooltipDirective.prototype.close = function () {
        if (!this.tooltipComponentRef)
            return;
        var index = TooltipDirective.activeTooltips.indexOf(this.tooltipComponentRef);
        if (0 <= index)
            TooltipDirective.activeTooltips.splice(index, 1);
        this.tooltipComponentRef.destroy();
        this.tooltipComponentRef = null;
    };
    TooltipDirective.prototype.closeAll = function () {
        TooltipDirective.activeTooltips.forEach(function (componentRef) { return componentRef.destroy(); });
        TooltipDirective.activeTooltips = [];
        this.close();
    };
    TooltipDirective.prototype.addEventListeners = function (element) {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            element.addEventListener('mouseenter', _this.callbackOnMouseEnter, false);
            element.addEventListener('mouseleave', _this.callbackOnMouseLeave, false);
        });
    };
    TooltipDirective.prototype.removeEventListeners = function (element) {
        element.removeEventListener('mouseenter', this.callbackOnMouseEnter, false);
        element.removeEventListener('mouseleave', this.callbackOnMouseLeave, false);
    };
    TooltipDirective.activeTooltips = [];
    TooltipDirective.ɵfac = function TooltipDirective_Factory(t) { return new (t || TooltipDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_3__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_3__["ViewContainerRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_3__["ComponentFactoryResolver"]), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_4__["PointerDeviceService"])); };
    TooltipDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineDirective"]({ type: TooltipDirective, selectors: [["", "appTooltip", ""]], inputs: { tabletopObject: ["appTooltip", "tabletopObject"] } });
    return TooltipDirective;
}());



/***/ }),

/***/ "uH+U":
/*!***************************************!*\
  !*** ./src/app/class/chat-palette.ts ***!
  \***************************************/
/*! exports provided: ChatPalette */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatPalette", function() { return ChatPalette; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _core_system_util_string_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/system/util/string-util */ "baV6");




var ChatPalette = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(ChatPalette, _super);
    function ChatPalette() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.dicebot = '';
        _this._palettes = [];
        _this._paletteLines = [];
        _this._paletteVariables = [];
        _this.isAnalized = false;
        return _this;
    }
    Object.defineProperty(ChatPalette.prototype, "paletteLines", {
        //TODO: キャラシ項目のコピー
        get: function () {
            if (!this.isAnalized)
                this.parse(this.value);
            return this._paletteLines;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatPalette.prototype, "paletteVariables", {
        get: function () {
            if (!this.isAnalized)
                this.parse(this.value);
            return this._paletteVariables;
        },
        enumerable: false,
        configurable: true
    });
    ChatPalette.prototype.getPalette = function () {
        if (!this.isAnalized)
            this.parse(this.value);
        return this._palettes;
    };
    ChatPalette.prototype.setPalette = function (paletteSource) {
        this.value = paletteSource;
        this.isAnalized = false;
    };
    ChatPalette.prototype.evaluate = function (line, extendVariables) {
        var _this = this;
        var evaluate = '';
        if (typeof line === 'string') {
            evaluate = line;
        }
        else {
            evaluate = line.palette;
        }
        console.log(evaluate);
        var limit = 128;
        var loop = 0;
        var isContinue = true;
        while (isContinue) {
            loop++;
            isContinue = false;
            evaluate = evaluate.replace(/[{｛]\s*([^{}｛｝]+)\s*[}｝]/g, function (match, name) {
                var e_1, _a;
                name = _core_system_util_string_util__WEBPACK_IMPORTED_MODULE_3__["StringUtil"].toHalfWidth(name);
                console.log(name);
                isContinue = true;
                try {
                    for (var _b = (e_1 = void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(_this.paletteVariables)), _c = _b.next(); !_c.done; _c = _b.next()) {
                        var variable = _c.value;
                        if (variable.name == name)
                            return variable.value;
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
                if (extendVariables) {
                    var element = extendVariables.getFirstElementByName(name);
                    if (element)
                        return element.isNumberResource ? element.currentValue + '' : element.value + '';
                }
                return '';
            });
            if (limit < loop)
                isContinue = false;
        }
        return evaluate;
    };
    ChatPalette.prototype.parse = function (paletteSource) {
        var e_2, _a;
        this._palettes = paletteSource.split('\n');
        this._paletteLines = [];
        this._paletteVariables = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this._palettes), _c = _b.next(); !_c.done; _c = _b.next()) {
                var palette = _c.value;
                var variable = this.parseVariable(palette);
                if (variable) {
                    this._paletteVariables.push(variable);
                    continue;
                }
                var line = { palette: palette };
                this._paletteLines.push(line);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
        this.isAnalized = true;
    };
    ChatPalette.prototype.parseVariable = function (palette) {
        var array = /^\s*[/／]{2}([^=＝{}｛｝\s]+)\s*[=＝]\s*(.+)\s*/gi.exec(palette);
        if (!array)
            return null;
        var variable = {
            name: _core_system_util_string_util__WEBPACK_IMPORTED_MODULE_3__["StringUtil"].toHalfWidth(array[1]),
            value: array[2]
        };
        return variable;
    };
    // override
    ChatPalette.prototype.apply = function (context) {
        _super.prototype.apply.call(this, context);
        this.isAnalized = false;
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], ChatPalette.prototype, "dicebot", void 0);
    ChatPalette = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('chat-palette')
    ], ChatPalette);
    return ChatPalette;
}(_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__["ObjectNode"]));



/***/ }),

/***/ "veT5":
/*!***************************************!*\
  !*** ./src/app/class/sound-effect.ts ***!
  \***************************************/
/*! exports provided: PresetSound, SoundEffect */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PresetSound", function() { return PresetSound; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SoundEffect", function() { return SoundEffect; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/file-storage/audio-player */ "zeEm");
/* harmony import */ var _core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/file-storage/audio-storage */ "Prh6");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/synchronize-object/game-object */ "xdgh");
/* harmony import */ var _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./core/system */ "yNnI");







var PresetSound = /** @class */ (function () {
    function PresetSound() {
    }
    PresetSound.dicePick = '';
    PresetSound.dicePut = '';
    PresetSound.diceRoll1 = '';
    PresetSound.diceRoll2 = '';
    PresetSound.cardDraw = '';
    PresetSound.cardPick = '';
    PresetSound.cardPut = '';
    PresetSound.cardShuffle = '';
    PresetSound.piecePick = '';
    PresetSound.piecePut = '';
    PresetSound.blockPick = '';
    PresetSound.blockPut = '';
    PresetSound.lock = '';
    PresetSound.unlock = '';
    PresetSound.sweep = '';
    return PresetSound;
}());

var SoundEffect = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(SoundEffect, _super);
    function SoundEffect() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SoundEffect_1 = SoundEffect;
    // GameObject Lifecycle
    SoundEffect.prototype.onStoreAdded = function () {
        _super.prototype.onStoreAdded.call(this);
        _core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].register(this)
            .on('SOUND_EFFECT', function (event) {
            _core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__["AudioPlayer"].play(_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__["AudioStorage"].instance.get(event.data), 0.5);
        })
            .on('SEND_MESSAGE', function (event) {
            var chatMessage = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(event.data.messageIdentifier);
            if (!chatMessage || !chatMessage.isSendFromSelf || !chatMessage.isDicebot)
                return;
            if (Math.random() < 0.5) {
                SoundEffect_1.play(PresetSound.diceRoll1);
            }
            else {
                SoundEffect_1.play(PresetSound.diceRoll2);
            }
        });
    };
    // GameObject Lifecycle
    SoundEffect.prototype.onStoreRemoved = function () {
        _super.prototype.onStoreRemoved.call(this);
        _core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].unregister(this);
    };
    SoundEffect.prototype.play = function (arg) {
        SoundEffect_1.play(arg);
    };
    SoundEffect.play = function (arg) {
        var identifier = '';
        if (typeof arg === 'string') {
            identifier = arg;
        }
        else {
            identifier = arg.identifier;
        }
        SoundEffect_1._play(identifier);
    };
    SoundEffect._play = function (identifier) {
        _core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].call('SOUND_EFFECT', identifier);
    };
    var SoundEffect_1;
    SoundEffect = SoundEffect_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncObject"])('sound-effect')
    ], SoundEffect);
    return SoundEffect;
}(_core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_4__["GameObject"]));



/***/ }),

/***/ "w5+g":
/*!*********************************************************!*\
  !*** ./src/app/class/core/system/util/promise-queue.ts ***!
  \*********************************************************/
/*! exports provided: PromiseQueue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PromiseQueue", function() { return PromiseQueue; });
var PromiseQueue = /** @class */ (function () {
    function PromiseQueue(name) {
        if (name === void 0) { name = 'Queue'; }
        this.name = name;
        this.queue = Promise.resolve();
        this._length = 0;
    }
    Object.defineProperty(PromiseQueue.prototype, "length", {
        get: function () { return this._length; },
        enumerable: false,
        configurable: true
    });
    PromiseQueue.prototype.add = function (arg) {
        var _this = this;
        this._length++;
        console.log(this.name + " add: " + this._length);
        if (typeof arg.then == 'function') {
            this.queue = this.queue.then(function () { return arg; }); // promise
        }
        else if (0 < arg.length) {
            this.queue = this.queue.then(function () { return new Promise(arg); }); // executor
        }
        else {
            this.queue = this.queue.then(arg); // task
        }
        var ret = this.queue;
        this.queue = this.queue.catch(function (reason) {
            console.error(reason);
        });
        this.queue = this.queue.then(function () {
            _this._length--;
            console.log(_this.name + " done: " + _this._length);
        });
        return ret;
    };
    return PromiseQueue;
}());



/***/ }),

/***/ "wBZT":
/*!**********************************************************!*\
  !*** ./src/app/class/core/file-storage/file-archiver.ts ***!
  \**********************************************************/
/*! exports provided: FileArchiver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FileArchiver", function() { return FileArchiver; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! file-saver */ "Iab2");
/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(file_saver__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jszip_dist_jszip_min_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jszip/dist/jszip.min.js */ "xOOu");
/* harmony import */ var jszip_dist_jszip_min_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jszip_dist_jszip_min_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../system */ "yNnI");
/* harmony import */ var _system_util_xml_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../system/util/xml-util */ "cfGu");
/* harmony import */ var _audio_storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./audio-storage */ "Prh6");
/* harmony import */ var _file_reader_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./file-reader-util */ "N0uT");
/* harmony import */ var _image_storage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./image-storage */ "JQpJ");
/* harmony import */ var _mime_type__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./mime-type */ "NVMP");









var MEGA_BYTE = 1024 * 1024;
var FileArchiver = /** @class */ (function () {
    function FileArchiver() {
        this.maxImageSize = 2 * MEGA_BYTE;
        this.maxAudioeSize = 10 * MEGA_BYTE;
        console.log('FileArchiver ready...');
    }
    Object.defineProperty(FileArchiver, "instance", {
        get: function () {
            if (!FileArchiver._instance)
                FileArchiver._instance = new FileArchiver();
            return FileArchiver._instance;
        },
        enumerable: false,
        configurable: true
    });
    FileArchiver.prototype.initialize = function () {
        this.destroy();
        this.addEventListeners();
    };
    FileArchiver.prototype.destroy = function () {
        this.removeEventListeners();
    };
    FileArchiver.prototype.addEventListeners = function () {
        var _this = this;
        this.removeEventListeners();
        this.callbackOnDragEnter = function (e) { return _this.onDragEnter(e); };
        this.callbackOnDragOver = function (e) { return _this.onDragOver(e); };
        this.callbackOnDrop = function (e) { return _this.onDrop(e); };
        document.body.addEventListener('dragenter', this.callbackOnDragEnter, false);
        document.body.addEventListener('dragover', this.callbackOnDragOver, false);
        document.body.addEventListener('drop', this.callbackOnDrop, false);
    };
    FileArchiver.prototype.removeEventListeners = function () {
        document.body.removeEventListener('dragenter', this.callbackOnDragEnter, false);
        document.body.removeEventListener('dragover', this.callbackOnDragOver, false);
        document.body.removeEventListener('drop', this.callbackOnDrop, false);
        this.callbackOnDragEnter = null;
        this.callbackOnDragOver = null;
        this.callbackOnDrop = null;
    };
    FileArchiver.prototype.onDragEnter = function (event) {
        event.preventDefault();
    };
    ;
    FileArchiver.prototype.onDragOver = function (event) {
        event.preventDefault();
    };
    ;
    FileArchiver.prototype.onDrop = function (event) {
        event.preventDefault();
        console.log('onDrop', event.dataTransfer);
        var files = event.dataTransfer.files;
        this.load(files);
    };
    ;
    FileArchiver.prototype.load = function (files) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var loadFiles, loadFiles_1, loadFiles_1_1, file, e_1_1;
            var e_1, _a;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!files)
                            return [2 /*return*/];
                        loadFiles = files instanceof FileList ? toArrayOfFileList(files) : files;
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 9, 10, 11]);
                        loadFiles_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(loadFiles), loadFiles_1_1 = loadFiles_1.next();
                        _b.label = 2;
                    case 2:
                        if (!!loadFiles_1_1.done) return [3 /*break*/, 8];
                        file = loadFiles_1_1.value;
                        return [4 /*yield*/, this.handleImage(file)];
                    case 3:
                        _b.sent();
                        return [4 /*yield*/, this.handleAudio(file)];
                    case 4:
                        _b.sent();
                        return [4 /*yield*/, this.handleText(file)];
                    case 5:
                        _b.sent();
                        return [4 /*yield*/, this.handleZip(file)];
                    case 6:
                        _b.sent();
                        _system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('FILE_LOADED', { file: file });
                        _b.label = 7;
                    case 7:
                        loadFiles_1_1 = loadFiles_1.next();
                        return [3 /*break*/, 2];
                    case 8: return [3 /*break*/, 11];
                    case 9:
                        e_1_1 = _b.sent();
                        e_1 = { error: e_1_1 };
                        return [3 /*break*/, 11];
                    case 10:
                        try {
                            if (loadFiles_1_1 && !loadFiles_1_1.done && (_a = loadFiles_1.return)) _a.call(loadFiles_1);
                        }
                        finally { if (e_1) throw e_1.error; }
                        return [7 /*endfinally*/];
                    case 11: return [2 /*return*/];
                }
            });
        });
    };
    FileArchiver.prototype.handleImage = function (file) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (file.type.indexOf('image/') < 0)
                            return [2 /*return*/];
                        if (this.maxImageSize < file.size) {
                            console.warn("File size limit exceeded. -> " + file.name + " (" + (file.size / 1024 / 1024).toFixed(2) + "MB)");
                            return [2 /*return*/];
                        }
                        console.log(file.name + ' type:' + file.type);
                        return [4 /*yield*/, _image_storage__WEBPACK_IMPORTED_MODULE_7__["ImageStorage"].instance.addAsync(file)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    FileArchiver.prototype.handleAudio = function (file) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (file.type.indexOf('audio/') < 0)
                            return [2 /*return*/];
                        if (this.maxAudioeSize < file.size) {
                            console.warn("File size limit exceeded. -> " + file.name + " (" + (file.size / 1024 / 1024).toFixed(2) + "MB)");
                            return [2 /*return*/];
                        }
                        console.log(file.name + ' type:' + file.type);
                        return [4 /*yield*/, _audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.addAsync(file)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    FileArchiver.prototype.handleText = function (file) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var xmlElement, _a, _b, reason_1;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (file.type.indexOf('text/') < 0)
                            return [2 /*return*/];
                        console.log(file.name + ' type:' + file.type);
                        _c.label = 1;
                    case 1:
                        _c.trys.push([1, 3, , 4]);
                        _b = (_a = _system_util_xml_util__WEBPACK_IMPORTED_MODULE_4__["XmlUtil"]).xml2element;
                        return [4 /*yield*/, _file_reader_util__WEBPACK_IMPORTED_MODULE_6__["FileReaderUtil"].readAsTextAsync(file)];
                    case 2:
                        xmlElement = _b.apply(_a, [_c.sent()]);
                        if (xmlElement)
                            _system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('XML_LOADED', { xmlElement: xmlElement });
                        return [3 /*break*/, 4];
                    case 3:
                        reason_1 = _c.sent();
                        console.warn(reason_1);
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    FileArchiver.prototype.handleZip = function (file) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var zip, reason_2, zipEntries, zipEntries_1, zipEntries_1_1, zipEntry, arraybuffer, reason_3, e_2_1;
            var e_2, _a;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!(0 <= file.type.indexOf('application/') || file.type.length < 1))
                            return [2 /*return*/];
                        zip = new jszip_dist_jszip_min_js__WEBPACK_IMPORTED_MODULE_2__();
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, zip.loadAsync(file)];
                    case 2:
                        zip = _b.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        reason_2 = _b.sent();
                        console.warn(reason_2);
                        return [2 /*return*/];
                    case 4:
                        zipEntries = [];
                        zip.forEach(function (relativePath, zipEntry) { return zipEntries.push(zipEntry); });
                        _b.label = 5;
                    case 5:
                        _b.trys.push([5, 13, 14, 15]);
                        zipEntries_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(zipEntries), zipEntries_1_1 = zipEntries_1.next();
                        _b.label = 6;
                    case 6:
                        if (!!zipEntries_1_1.done) return [3 /*break*/, 12];
                        zipEntry = zipEntries_1_1.value;
                        _b.label = 7;
                    case 7:
                        _b.trys.push([7, 10, , 11]);
                        return [4 /*yield*/, zipEntry.async('arraybuffer')];
                    case 8:
                        arraybuffer = _b.sent();
                        console.log(zipEntry.name + ' 解凍...');
                        return [4 /*yield*/, this.load([new File([arraybuffer], zipEntry.name, { type: _mime_type__WEBPACK_IMPORTED_MODULE_8__["MimeType"].type(zipEntry.name) })])];
                    case 9:
                        _b.sent();
                        return [3 /*break*/, 11];
                    case 10:
                        reason_3 = _b.sent();
                        console.warn(reason_3);
                        return [3 /*break*/, 11];
                    case 11:
                        zipEntries_1_1 = zipEntries_1.next();
                        return [3 /*break*/, 6];
                    case 12: return [3 /*break*/, 15];
                    case 13:
                        e_2_1 = _b.sent();
                        e_2 = { error: e_2_1 };
                        return [3 /*break*/, 15];
                    case 14:
                        try {
                            if (zipEntries_1_1 && !zipEntries_1_1.done && (_a = zipEntries_1.return)) _a.call(zipEntries_1);
                        }
                        finally { if (e_2) throw e_2.error; }
                        return [7 /*endfinally*/];
                    case 15: return [2 /*return*/];
                }
            });
        });
    };
    FileArchiver.prototype.saveAsync = function (files, zipName, updateCallback) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var saveFiles, zip, saveFiles_1, saveFiles_1_1, file, blob;
            var e_3, _a;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!files)
                            return [2 /*return*/];
                        saveFiles = files instanceof FileList ? toArrayOfFileList(files) : files;
                        zip = new jszip_dist_jszip_min_js__WEBPACK_IMPORTED_MODULE_2__();
                        try {
                            for (saveFiles_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(saveFiles), saveFiles_1_1 = saveFiles_1.next(); !saveFiles_1_1.done; saveFiles_1_1 = saveFiles_1.next()) {
                                file = saveFiles_1_1.value;
                                zip.file(file.name, file);
                            }
                        }
                        catch (e_3_1) { e_3 = { error: e_3_1 }; }
                        finally {
                            try {
                                if (saveFiles_1_1 && !saveFiles_1_1.done && (_a = saveFiles_1.return)) _a.call(saveFiles_1);
                            }
                            finally { if (e_3) throw e_3.error; }
                        }
                        return [4 /*yield*/, zip.generateAsync({
                                type: 'blob',
                                compression: 'DEFLATE',
                                compressionOptions: {
                                    level: 6
                                }
                            }, updateCallback)];
                    case 1:
                        blob = _b.sent();
                        Object(file_saver__WEBPACK_IMPORTED_MODULE_1__["saveAs"])(blob, zipName + '.zip');
                        return [2 /*return*/];
                }
            });
        });
    };
    return FileArchiver;
}());

function toArrayOfFileList(fileList) {
    var files = [];
    var length = fileList.length;
    for (var i = 0; i < length; i++) {
        files.push(fileList[i]);
    }
    return files;
}


/***/ }),

/***/ "wPqI":
/*!****************************************************************!*\
  !*** ./src/app/component/chat-window/chat-window.component.ts ***!
  \****************************************************************/
/*! exports provided: ChatWindowComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatWindowComponent", function() { return ChatWindowComponent; });
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var component_chat_tab_setting_chat_tab_setting_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! component/chat-tab-setting/chat-tab-setting.component */ "yrmS");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_chat_message_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! service/chat-message.service */ "PEfN");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var component_chat_input_chat_input_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! component/chat-input/chat-input.component */ "+l6h");
/* harmony import */ var component_chat_tab_chat_tab_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! component/chat-tab/chat-tab.component */ "Wiwm");
/* harmony import */ var component_badge_badge_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! component/badge/badge.component */ "xKeS");













function ChatWindowComponent_chat_tab_2_Template(rf, ctx) { if (rf & 1) {
    var _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "chat-tab", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("onAddMessage", function ChatWindowComponent_chat_tab_2_Template_chat_tab_onAddMessage_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r4); var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](); return ctx_r3.scrollToBottom(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("chatTab", ctx_r0.chatTab);
} }
function ChatWindowComponent_div_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](1, "\u203B\u30C1\u30E3\u30C3\u30C8\u30BF\u30D6\u306E\u5185\u5BB9\u304C\u66F4\u65B0\u3055\u308C\u307E\u3057\u305F\u3002\u30C1\u30E3\u30C3\u30C8\u30BF\u30D6\u3092\u9078\u629E\u3057\u306A\u304A\u3059\u304B\u3001\u3053\u306E\u30C1\u30E3\u30C3\u30C8\u30A6\u30A3\u30F3\u30C9\u30A6\u3092\u958B\u304D\u306A\u304A\u3057\u3066\u304F\u3060\u3055\u3044\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} }
function ChatWindowComponent_label_7_badge_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](0, "badge", 13);
} if (rf & 2) {
    var chatTab_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("count", chatTab_r5.unreadLength);
} }
function ChatWindowComponent_label_7_Template(rf, ctx) { if (rf & 1) {
    var _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "input", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("ngModelChange", function ChatWindowComponent_label_7_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r9); var ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](); return ctx_r8.chatTabidentifier = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](4, ChatWindowComponent_label_7_badge_4_Template, 1, 1, "badge", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} if (rf & 2) {
    var chatTab_r5 = ctx.$implicit;
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpropertyInterpolate"]("value", chatTab_r5.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngModel", ctx_r2.chatTabidentifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](chatTab_r5.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", chatTab_r5.hasUnread);
} }
var ChatWindowComponent = /** @class */ (function () {
    function ChatWindowComponent(chatMessageService, panelService, pointerDeviceService) {
        this.chatMessageService = chatMessageService;
        this.panelService = panelService;
        this.pointerDeviceService = pointerDeviceService;
        this.sendFrom = 'Guest';
        this._chatTabidentifier = '';
        this.isAutoScroll = true;
        this.scrollToBottomTimer = null;
    }
    Object.defineProperty(ChatWindowComponent.prototype, "gameType", {
        get: function () { return this.chatMessageService.gameType; },
        set: function (gameType) { this.chatMessageService.gameType = gameType; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatWindowComponent.prototype, "chatTabidentifier", {
        get: function () { return this._chatTabidentifier; },
        set: function (chatTabidentifier) {
            var hasChanged = this._chatTabidentifier !== chatTabidentifier;
            this._chatTabidentifier = chatTabidentifier;
            this.updatePanelTitle();
            if (hasChanged) {
                this.scrollToBottom(true);
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatWindowComponent.prototype, "chatTab", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_0__["ObjectStore"].instance.get(this.chatTabidentifier); },
        enumerable: false,
        configurable: true
    });
    ChatWindowComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.sendFrom = _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_2__["PeerCursor"].myCursor.identifier;
        this._chatTabidentifier = 0 < this.chatMessageService.chatTabs.length ? this.chatMessageService.chatTabs[0].identifier : '';
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(this)
            .on('MESSAGE_ADDED', function (event) {
            if (event.data.tabIdentifier !== _this.chatTabidentifier)
                return;
            var message = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_0__["ObjectStore"].instance.get(event.data.messageIdentifier);
            if (message && message.isSendFromSelf) {
                _this.isAutoScroll = true;
            }
            else {
                _this.checkAutoScroll();
            }
            if (_this.isAutoScroll && _this.chatTab)
                _this.chatTab.markForRead();
        });
        Promise.resolve().then(function () { return _this.updatePanelTitle(); });
    };
    ChatWindowComponent.prototype.ngAfterViewInit = function () {
        this.scrollToBottom(true);
    };
    ChatWindowComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(this);
    };
    // @TODO やり方はもう少し考えた方がいいい
    ChatWindowComponent.prototype.scrollToBottom = function (isForce) {
        var _this = this;
        if (isForce === void 0) { isForce = false; }
        if (isForce)
            this.isAutoScroll = true;
        if (this.scrollToBottomTimer != null || !this.isAutoScroll)
            return;
        this.scrollToBottomTimer = setTimeout(function () {
            if (_this.chatTab)
                _this.chatTab.markForRead();
            _this.scrollToBottomTimer = null;
            _this.isAutoScroll = false;
            if (_this.panelService.scrollablePanel) {
                _this.panelService.scrollablePanel.scrollTop = _this.panelService.scrollablePanel.scrollHeight;
                var event_1 = new CustomEvent('scrolltobottom', {});
                _this.panelService.scrollablePanel.dispatchEvent(event_1);
            }
        }, 0);
    };
    // @TODO
    ChatWindowComponent.prototype.checkAutoScroll = function () {
        if (!this.panelService.scrollablePanel)
            return;
        var top = this.panelService.scrollablePanel.scrollHeight - this.panelService.scrollablePanel.clientHeight;
        if (top - 150 <= this.panelService.scrollablePanel.scrollTop) {
            this.isAutoScroll = true;
        }
        else {
            this.isAutoScroll = false;
        }
    };
    ChatWindowComponent.prototype.updatePanelTitle = function () {
        if (this.chatTab) {
            this.panelService.title = 'チャットウィンドウ - ' + this.chatTab.name;
        }
        else {
            this.panelService.title = 'チャットウィンドウ';
        }
    };
    ChatWindowComponent.prototype.onSelectedTab = function (identifier) {
        this.updatePanelTitle();
    };
    ChatWindowComponent.prototype.showTabSetting = function () {
        var coordinate = this.pointerDeviceService.pointers[0];
        var option = { left: coordinate.x - 250, top: coordinate.y - 175, width: 500, height: 350 };
        var component = this.panelService.open(component_chat_tab_setting_chat_tab_setting_component__WEBPACK_IMPORTED_MODULE_3__["ChatTabSettingComponent"], option);
        component.selectedTab = this.chatTab;
    };
    ChatWindowComponent.prototype.sendChat = function (value) {
        if (this.chatTab) {
            this.chatMessageService.sendMessage(this.chatTab, value.text, value.gameType, value.sendFrom, value.sendTo);
        }
    };
    ChatWindowComponent.prototype.trackByChatTab = function (index, chatTab) {
        return chatTab.identifier;
    };
    ChatWindowComponent.ɵfac = function ChatWindowComponent_Factory(t) { return new (t || ChatWindowComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](service_chat_message_service__WEBPACK_IMPORTED_MODULE_5__["ChatMessageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_6__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_7__["PointerDeviceService"])); };
    ChatWindowComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({ type: ChatWindowComponent, selectors: [["chat-window"]], decls: 13, vars: 7, consts: [[1, "component"], [1, "log"], [3, "chatTab", "onAddMessage", 4, "ngIf"], [4, "ngIf"], [1, "sticky-bottom"], [1, "chat-tab"], [4, "ngFor", "ngForOf", "ngForTrackBy"], [1, "tab-setting", "small-font", 3, "click"], [1, "material-icons", "small-font"], [3, "chatTabidentifier", "gameType", "sendFrom", "gameTypeChange", "sendFromChange", "chat"], [3, "chatTab", "onAddMessage"], ["name", "chat-tab", "type", "radio", "ng-control", "options", 3, "value", "ngModel", "ngModelChange"], ["class", "badge", 3, "count", 4, "ngIf"], [1, "badge", 3, "count"]], template: function ChatWindowComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](2, ChatWindowComponent_chat_tab_2_Template, 1, 1, "chat-tab", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](3, ChatWindowComponent_div_3_Template, 2, 0, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](5, "form");
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "div", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](7, ChatWindowComponent_label_7_Template, 5, 4, "label", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](8, "button", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function ChatWindowComponent_Template_button_click_8_listener() { return ctx.showTabSetting(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](9, "i", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](10, "settings");
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](11, "\u30BF\u30D6\u8A2D\u5B9A");
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](12, "chat-input", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("gameTypeChange", function ChatWindowComponent_Template_chat_input_gameTypeChange_12_listener($event) { return ctx.gameType = $event; })("sendFromChange", function ChatWindowComponent_Template_chat_input_sendFromChange_12_listener($event) { return ctx.sendFrom = $event; })("chat", function ChatWindowComponent_Template_chat_input_chat_12_listener($event) { return ctx.sendChat($event); });
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx.chatTab);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", !ctx.chatTab);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", ctx.chatMessageService.chatTabs)("ngForTrackBy", ctx.trackByChatTab);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("chatTabidentifier", ctx.chatTabidentifier)("gameType", ctx.gameType)("sendFrom", ctx.sendFrom);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_8__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NgForm"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgForOf"], component_chat_input_chat_input_component__WEBPACK_IMPORTED_MODULE_10__["ChatInputComponent"], component_chat_tab_chat_tab_component__WEBPACK_IMPORTED_MODULE_11__["ChatTabComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["RadioControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NgModel"], component_badge_badge_component__WEBPACK_IMPORTED_MODULE_12__["BadgeComponent"]], styles: [".loop-anime[_ngcontent-%COMP%] {\n  animation: anime1 1.3s infinite ease-in-out;\n}\n.component[_ngcontent-%COMP%] {\n  min-height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-content: space-between;\n}\n.sticky-bottom[_ngcontent-%COMP%] {\n  position: sticky;\n  bottom : 0;\n  width: 100%;\n  background-color: rgba(240,218,189, 0.8);\n  border-top:1px dotted #666;\n  margin-bottom: 0;\n}\n.chat-tab[_ngcontent-%COMP%] {\n  padding : 5px;\n  -webkit-user-select: none;\n          user-select: none;\n}\n.chat-tab[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n  display: inline-block;\n  position: relative;\n}\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%] {\n  display: none;\n}\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%] {\n  display: inline-block;\n  vertical-align: middle;\n  outline: 0;\n  font-size: 12px;\n  background-color: transparent;\n  color: #444; \n  border: solid 1px #555;\n  padding: 2px 8px;\n  margin: 2px;\n  border-radius: 100px;\n  cursor: pointer;\n}\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%]:hover {\n  background-color: #888;\n  color: #eee;\n  border: solid 1px #555;\n}\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]:checked    + div[_ngcontent-%COMP%] {\n  background: #555;\n  color: #CCC;\n}\n.badge[_ngcontent-%COMP%] {\n  position: absolute;\n  top: -4px;\n  right: 0;\n}\n.tab-setting[_ngcontent-%COMP%] {\n  background-color: transparent;\n  color: #444; \n  border: solid 1px #555;\n  padding: 2px 4px;\n  border-radius: 5px;\n  cursor: pointer;\n}\n.tab-setting[_ngcontent-%COMP%]:hover {\n  background-color: #888;\n  color: #eee;\n  border: solid 1px #555;\n}\n.small-font[_ngcontent-%COMP%] {\n  font-size: 12px;\n  vertical-align: middle;\n}\n.material-icons[_ngcontent-%COMP%] {\n  vertical-align: middle;\n  font-size: 1.0rem;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtd2luZG93LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFRSwyQ0FBMkM7QUFDN0M7QUFDQTtFQUNFLGdCQUFnQjtFQUNoQixhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLDhCQUE4QjtFQUM5Qiw0QkFBNEI7QUFDOUI7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixVQUFVO0VBQ1YsV0FBVztFQUNYLHdDQUF3QztFQUN4QywwQkFBMEI7RUFDMUIsZ0JBQWdCO0FBQ2xCO0FBRUE7RUFDRSxhQUFhO0VBQ2IseUJBQWlCO1VBQWpCLGlCQUFpQjtBQUNuQjtBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLGtCQUFrQjtBQUNwQjtBQUVBO0VBQ0UsYUFBYTtBQUNmO0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsc0JBQXNCO0VBQ3RCLFVBQVU7RUFDVixlQUFlO0VBQ2YsNkJBQTZCO0VBQzdCLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLFdBQVc7RUFDWCxvQkFBb0I7RUFDcEIsZUFBZTtBQUNqQjtBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFdBQVc7RUFDWCxzQkFBc0I7QUFDeEI7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixXQUFXO0FBQ2I7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsUUFBUTtBQUNWO0FBRUE7RUFDRSw2QkFBNkI7RUFDN0IsV0FBVztFQUNYLHNCQUFzQjtFQUN0QixnQkFBZ0I7RUFDaEIsa0JBQWtCO0VBQ2xCLGVBQWU7QUFDakI7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixXQUFXO0VBQ1gsc0JBQXNCO0FBQ3hCO0FBRUE7RUFDRSxlQUFlO0VBQ2Ysc0JBQXNCO0FBQ3hCO0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsaUJBQWlCO0FBQ25CIiwiZmlsZSI6ImNoYXQtd2luZG93LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubG9vcC1hbmltZSB7XG4gIC13ZWJraXQtYW5pbWF0aW9uOiBhbmltZTEgMS4zcyBpbmZpbml0ZSBlYXNlLWluLW91dDtcbiAgYW5pbWF0aW9uOiBhbmltZTEgMS4zcyBpbmZpbml0ZSBlYXNlLWluLW91dDtcbn1cbi5jb21wb25lbnQge1xuICBtaW4taGVpZ2h0OiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGFsaWduLWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG59XG5cbi5zdGlja3ktYm90dG9tIHtcbiAgcG9zaXRpb246IHN0aWNreTtcbiAgYm90dG9tIDogMDtcbiAgd2lkdGg6IDEwMCU7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjQwLDIxOCwxODksIDAuOCk7XG4gIGJvcmRlci10b3A6MXB4IGRvdHRlZCAjNjY2O1xuICBtYXJnaW4tYm90dG9tOiAwO1xufVxuXG4uY2hhdC10YWIge1xuICBwYWRkaW5nIDogNXB4O1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbn1cblxuLmNoYXQtdGFiIGxhYmVsIHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG5cbi5jaGF0LXRhYiBpbnB1dFt0eXBlPVwicmFkaW9cIl0ge1xuICBkaXNwbGF5OiBub25lO1xufVxuXG4uY2hhdC10YWIgaW5wdXRbdHlwZT1cInJhZGlvXCJdICsgZGl2IHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICBvdXRsaW5lOiAwO1xuICBmb250LXNpemU6IDEycHg7XG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICBjb2xvcjogIzQ0NDsgXG4gIGJvcmRlcjogc29saWQgMXB4ICM1NTU7XG4gIHBhZGRpbmc6IDJweCA4cHg7XG4gIG1hcmdpbjogMnB4O1xuICBib3JkZXItcmFkaXVzOiAxMDBweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4uY2hhdC10YWIgaW5wdXRbdHlwZT1cInJhZGlvXCJdICsgZGl2OmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzg4ODtcbiAgY29sb3I6ICNlZWU7XG4gIGJvcmRlcjogc29saWQgMXB4ICM1NTU7XG59XG5cbi5jaGF0LXRhYiBpbnB1dFt0eXBlPVwicmFkaW9cIl06Y2hlY2tlZCArIGRpdiB7XG4gIGJhY2tncm91bmQ6ICM1NTU7XG4gIGNvbG9yOiAjQ0NDO1xufVxuXG4uYmFkZ2Uge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogLTRweDtcbiAgcmlnaHQ6IDA7XG59XG5cbi50YWItc2V0dGluZyB7XG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICBjb2xvcjogIzQ0NDsgXG4gIGJvcmRlcjogc29saWQgMXB4ICM1NTU7XG4gIHBhZGRpbmc6IDJweCA0cHg7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4udGFiLXNldHRpbmc6aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjODg4O1xuICBjb2xvcjogI2VlZTtcbiAgYm9yZGVyOiBzb2xpZCAxcHggIzU1NTtcbn1cblxuLnNtYWxsLWZvbnQge1xuICBmb250LXNpemU6IDEycHg7XG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG59XG5cbi5tYXRlcmlhbC1pY29ucyB7XG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG4gIGZvbnQtc2l6ZTogMS4wcmVtO1xufVxuIl19 */"] });
    return ChatWindowComponent;
}());



/***/ }),

/***/ "xKeS":
/*!****************************************************!*\
  !*** ./src/app/component/badge/badge.component.ts ***!
  \****************************************************/
/*! exports provided: BadgeComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BadgeComponent", function() { return BadgeComponent; });
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/animations */ "R0Ic");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");


var BadgeComponent = /** @class */ (function () {
    function BadgeComponent() {
        this.count = 0;
        this.animeState = 'active';
    }
    BadgeComponent.prototype.ngOnChanges = function () {
        var _this = this;
        this.animeState = 'inactive';
        setTimeout(function () { _this.animeState = 'active'; });
    };
    BadgeComponent.prototype.animationShuffleDone = function (event) {
        this.animeState = 'inactive';
    };
    BadgeComponent.ɵfac = function BadgeComponent_Factory(t) { return new (t || BadgeComponent)(); };
    BadgeComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: BadgeComponent, selectors: [["badge"]], inputs: { count: "count" }, features: [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵNgOnChangesFeature"]], decls: 2, vars: 2, consts: [[1, "badge"]], template: function BadgeComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("@bounce", ctx.animeState);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx.count);
        } }, styles: [".badge[_ngcontent-%COMP%] {\n  min-width: 8px;\n  min-height: 8px;\n  font-size: 8px;\n  padding: 2px 4px;\n  border-radius: 100px;\n  text-align: center;\n  color: #eee; \n  background-color: rgb(207, 82, 82);\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhZGdlLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFjO0VBQ2QsZUFBZTtFQUNmLGNBQWM7RUFDZCxnQkFBZ0I7RUFDaEIsb0JBQW9CO0VBQ3BCLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsa0NBQWtDO0FBQ3BDIiwiZmlsZSI6ImJhZGdlLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYmFkZ2Uge1xuICBtaW4td2lkdGg6IDhweDtcbiAgbWluLWhlaWdodDogOHB4O1xuICBmb250LXNpemU6IDhweDtcbiAgcGFkZGluZzogMnB4IDRweDtcbiAgYm9yZGVyLXJhZGl1czogMTAwcHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgY29sb3I6ICNlZWU7IFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjA3LCA4MiwgODIpO1xufVxuIl19 */"], data: { animation: [
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('bounce', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('active', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: '' })),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => active', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('600ms ease', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0.5, 0.5, 0.5)', offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(2, 2, 2)', offset: 0.5 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0.75, 0.75, 0.75)', offset: 0.75 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.125, 1.125, 1.125)', offset: 0.875 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.0, 1.0, 1.0)', offset: 1.0 })
                        ]))
                    ])
                ])
            ] } });
    return BadgeComponent;
}());



/***/ }),

/***/ "xbks":
/*!*****************************************************************!*\
  !*** ./src/app/class/core/file-storage/image-sharing-system.ts ***!
  \*****************************************************************/
/*! exports provided: ImageSharingSystem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageSharingSystem", function() { return ImageSharingSystem; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../system */ "yNnI");
/* harmony import */ var _system_util_uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../system/util/uuid */ "P9Dn");
/* harmony import */ var _buffer_sharing_task__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./buffer-sharing-task */ "PYk/");
/* harmony import */ var _file_reader_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./file-reader-util */ "N0uT");
/* harmony import */ var _image_file__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./image-file */ "FjwV");
/* harmony import */ var _image_storage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./image-storage */ "JQpJ");
/* harmony import */ var _mime_type__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./mime-type */ "NVMP");








var ImageSharingSystem = /** @class */ (function () {
    function ImageSharingSystem() {
        this.sendTaskMap = new Map();
        this.receiveTaskMap = new Map();
        this.maxSendTask = 2;
        this.maxReceiveTask = 4;
        console.log('FileSharingSystem ready...');
    }
    Object.defineProperty(ImageSharingSystem, "instance", {
        get: function () {
            if (!ImageSharingSystem._instance)
                ImageSharingSystem._instance = new ImageSharingSystem();
            return ImageSharingSystem._instance;
        },
        enumerable: false,
        configurable: true
    });
    ImageSharingSystem.prototype.initialize = function () {
        var _this = this;
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(this)
            .on('CONNECT_PEER', 1, function (event) {
            if (!event.isSendFromSelf)
                return;
            console.log('CONNECT_PEER ImageStorageService !!!', event.data.peerId);
            _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.synchronize();
        })
            .on('XML_LOADED', function (event) {
            convertUrlImage(event.data.xmlElement);
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            var e_1, _a;
            if (event.isSendFromSelf)
                return;
            console.log('SYNCHRONIZE_FILE_LIST ImageStorageService ' + event.sendFrom);
            var otherCatalog = event.data;
            var request = [];
            try {
                for (var otherCatalog_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(otherCatalog), otherCatalog_1_1 = otherCatalog_1.next(); !otherCatalog_1_1.done; otherCatalog_1_1 = otherCatalog_1.next()) {
                    var item = otherCatalog_1_1.value;
                    var image = _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.get(item.identifier);
                    if (image === null) {
                        image = _image_file__WEBPACK_IMPORTED_MODULE_5__["ImageFile"].createEmpty(item.identifier);
                        _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.add(image);
                    }
                    if (image.state < _image_file__WEBPACK_IMPORTED_MODULE_5__["ImageState"].COMPLETE && !_this.receiveTaskMap.has(item.identifier)) {
                        request.push({ identifier: item.identifier, state: image.state });
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (otherCatalog_1_1 && !otherCatalog_1_1.done && (_a = otherCatalog_1.return)) _a.call(otherCatalog_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            // Peer切断時などのエッジケースに対応する
            if (request.length < 1 && !_this.hasActiveTask() && otherCatalog.length < _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.getCatalog().length) {
                _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.synchronize(event.sendFrom);
            }
            if (request.length < 1 || _this.isLimitReceiveTask()) {
                return;
            }
            _this.request(request, event.sendFrom);
        })
            .on('REQUEST_FILE_RESOURE', function (event) { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(_this, void 0, void 0, function () {
            var request, randomRequest, request_1, request_1_1, item, image, updateImages, candidatePeers, index, candidatePeers_1, candidatePeers_1_1, peerId;
            var e_2, _a, e_3, _b;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_c) {
                if (event.isSendFromSelf)
                    return [2 /*return*/];
                request = event.data.identifiers;
                randomRequest = [];
                try {
                    for (request_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(request), request_1_1 = request_1.next(); !request_1_1.done; request_1_1 = request_1.next()) {
                        item = request_1_1.value;
                        image = _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.get(item.identifier);
                        if (image && item.state < image.state)
                            randomRequest.push({ identifier: item.identifier, state: item.state });
                    }
                }
                catch (e_2_1) { e_2 = { error: e_2_1 }; }
                finally {
                    try {
                        if (request_1_1 && !request_1_1.done && (_a = request_1.return)) _a.call(request_1);
                    }
                    finally { if (e_2) throw e_2.error; }
                }
                if (this.isLimitSendTask() === false && 0 < randomRequest.length && !this.existsSendTask(event.data.receiver)) {
                    updateImages = this.makeSendUpdateImages(randomRequest);
                    console.log('REQUEST_FILE_RESOURE ImageStorageService Send!!! ' + event.data.receiver + ' -> ' + updateImages.length);
                    this.startSendTask(updateImages, event.data.receiver);
                }
                else {
                    candidatePeers = event.data.candidatePeers;
                    index = candidatePeers.indexOf(_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerId);
                    if (-1 < index)
                        candidatePeers.splice(index, 1);
                    try {
                        for (candidatePeers_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(candidatePeers), candidatePeers_1_1 = candidatePeers_1.next(); !candidatePeers_1_1.done; candidatePeers_1_1 = candidatePeers_1.next()) {
                            peerId = candidatePeers_1_1.value;
                            console.log('REQUEST_FILE_RESOURE ImageStorageService Relay!!! ' + peerId + ' -> ' + event.data.identifiers);
                            _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call(event, peerId);
                            return [2 /*return*/];
                        }
                    }
                    catch (e_3_1) { e_3 = { error: e_3_1 }; }
                    finally {
                        try {
                            if (candidatePeers_1_1 && !candidatePeers_1_1.done && (_b = candidatePeers_1.return)) _b.call(candidatePeers_1);
                        }
                        finally { if (e_3) throw e_3.error; }
                    }
                    console.log('REQUEST_FILE_RESOURE ImageStorageService あぶれた...' + event.data.receiver, randomRequest.length);
                }
                return [2 /*return*/];
            });
        }); })
            .on('UPDATE_FILE_RESOURE', function (event) {
            var e_4, _a;
            var updateImages = event.data.updateImages;
            console.log('UPDATE_FILE_RESOURE ImageStorageService ' + event.sendFrom + ' -> ', updateImages);
            try {
                for (var updateImages_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(updateImages), updateImages_1_1 = updateImages_1.next(); !updateImages_1_1.done; updateImages_1_1 = updateImages_1.next()) {
                    var context = updateImages_1_1.value;
                    if (context.blob)
                        context.blob = new Blob([context.blob], { type: context.type });
                    if (context.thumbnail.blob)
                        context.thumbnail.blob = new Blob([context.thumbnail.blob], { type: context.thumbnail.type });
                    _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.add(context);
                }
            }
            catch (e_4_1) { e_4 = { error: e_4_1 }; }
            finally {
                try {
                    if (updateImages_1_1 && !updateImages_1_1.done && (_a = updateImages_1.return)) _a.call(updateImages_1);
                }
                finally { if (e_4) throw e_4.error; }
            }
        })
            .on('START_FILE_TRANSMISSION', function (event) {
            console.log('START_FILE_TRANSMISSION ' + event.data.taskIdentifier);
            var identifier = event.data.taskIdentifier;
            var image = _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.get(identifier);
            if (_this.receiveTaskMap.has(identifier) || (image && _image_file__WEBPACK_IMPORTED_MODULE_5__["ImageState"].COMPLETE <= image.state)) {
                console.warn('CANCEL_TASK_ ' + identifier);
                _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('CANCEL_TASK_' + identifier, null, event.sendFrom);
            }
            else {
                _this.startReceiveTask(identifier);
            }
        });
    };
    ImageSharingSystem.prototype.destroy = function () {
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(this);
    };
    ImageSharingSystem.prototype.startSendTask = function (updateImages, sendTo) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var identifier, task, updateImages_2, updateImages_2_1, context, _a, _b, e_5_1;
            var e_5, _c;
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        identifier = updateImages.length === 1 ? updateImages[0].identifier : _system_util_uuid__WEBPACK_IMPORTED_MODULE_2__["UUID"].generateUuid();
                        task = _buffer_sharing_task__WEBPACK_IMPORTED_MODULE_3__["BufferSharingTask"].createSendTask(identifier, sendTo);
                        this.sendTaskMap.set(task.identifier, task);
                        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('START_FILE_TRANSMISSION', { taskIdentifier: identifier }, sendTo);
                        _d.label = 1;
                    case 1:
                        _d.trys.push([1, 8, 9, 10]);
                        updateImages_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(updateImages), updateImages_2_1 = updateImages_2.next();
                        _d.label = 2;
                    case 2:
                        if (!!updateImages_2_1.done) return [3 /*break*/, 7];
                        context = updateImages_2_1.value;
                        if (!context.thumbnail.blob) return [3 /*break*/, 4];
                        _a = context.thumbnail;
                        return [4 /*yield*/, _file_reader_util__WEBPACK_IMPORTED_MODULE_4__["FileReaderUtil"].readAsArrayBufferAsync(context.thumbnail.blob)];
                    case 3:
                        _a.blob = (_d.sent());
                        return [3 /*break*/, 6];
                    case 4:
                        if (!context.blob) return [3 /*break*/, 6];
                        _b = context;
                        return [4 /*yield*/, _file_reader_util__WEBPACK_IMPORTED_MODULE_4__["FileReaderUtil"].readAsArrayBufferAsync(context.blob)];
                    case 5:
                        _b.blob = (_d.sent());
                        _d.label = 6;
                    case 6:
                        updateImages_2_1 = updateImages_2.next();
                        return [3 /*break*/, 2];
                    case 7: return [3 /*break*/, 10];
                    case 8:
                        e_5_1 = _d.sent();
                        e_5 = { error: e_5_1 };
                        return [3 /*break*/, 10];
                    case 9:
                        try {
                            if (updateImages_2_1 && !updateImages_2_1.done && (_c = updateImages_2.return)) _c.call(updateImages_2);
                        }
                        finally { if (e_5) throw e_5.error; }
                        return [7 /*endfinally*/];
                    case 10:
                        /* */
                        task.onfinish = function (task, data) {
                            _this.stopSendTask(task.identifier);
                            _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.synchronize();
                        };
                        task.start(updateImages);
                        return [2 /*return*/];
                }
            });
        });
    };
    ImageSharingSystem.prototype.startReceiveTask = function (identifier) {
        var _this = this;
        var task = _buffer_sharing_task__WEBPACK_IMPORTED_MODULE_3__["BufferSharingTask"].createReceiveTask(identifier);
        this.receiveTaskMap.set(identifier, task);
        task.onfinish = function (task, data) {
            _this.stopReceiveTask(task.identifier);
            if (data)
                _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].trigger('UPDATE_FILE_RESOURE', { identifier: task.identifier, updateImages: data });
            _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.synchronize();
        };
        task.start();
        console.log('startReceiveTask => ', this.receiveTaskMap.size);
    };
    ImageSharingSystem.prototype.stopSendTask = function (identifier) {
        var task = this.sendTaskMap.get(identifier);
        if (task) {
            task.cancel();
        }
        this.sendTaskMap.delete(identifier);
        console.log('stopSendTask => ', this.sendTaskMap.size);
    };
    ImageSharingSystem.prototype.stopReceiveTask = function (identifier) {
        var task = this.receiveTaskMap.get(identifier);
        if (task) {
            task.cancel();
        }
        this.receiveTaskMap.delete(identifier);
        console.log('stopReceiveTask => ', this.receiveTaskMap.size);
    };
    ImageSharingSystem.prototype.request = function (request, peerId) {
        console.log('requestFile() ' + peerId);
        var peerIds = _system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerIds;
        peerIds.splice(peerIds.indexOf(_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerId), 1);
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('REQUEST_FILE_RESOURE', { identifiers: request, receiver: _system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerId, candidatePeers: peerIds }, peerId);
    };
    ImageSharingSystem.prototype.makeSendUpdateImages = function (catalog, maxSize) {
        var _a;
        if (maxSize === void 0) { maxSize = 1024 * 1024 * 0.5; }
        var updateImages = [];
        var byteSize = 0;
        // Fisher-Yates
        for (var i = catalog.length - 1; 0 <= i; i--) {
            var rand = Math.floor(Math.random() * (i + 1));
            _a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__read"])([catalog[rand], catalog[i]], 2), catalog[i] = _a[0], catalog[rand] = _a[1];
        }
        catalog.sort(function (a, b) {
            if (a.state < b.state)
                return -1;
            if (a.state > b.state)
                return 1;
            return 0;
        });
        for (var i = 0; i < catalog.length; i++) {
            var item = catalog[i];
            var image = _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.get(item.identifier);
            var context = {
                identifier: image.identifier,
                name: image.name,
                type: '',
                blob: null,
                url: null,
                thumbnail: { type: '', blob: null, url: null, }
            };
            if (image.state === _image_file__WEBPACK_IMPORTED_MODULE_5__["ImageState"].URL) {
                context.url = image.url;
            }
            else if (item.state === _image_file__WEBPACK_IMPORTED_MODULE_5__["ImageState"].NULL) {
                context.thumbnail.blob = image.thumbnail.blob; //
                context.thumbnail.type = image.thumbnail.type;
            }
            else {
                context.blob = image.blob; //
                context.type = image.blob.type;
            }
            var size = context.blob
                ? context.blob.size
                : context.thumbnail.blob
                    ? context.thumbnail.blob.size
                    : 100;
            updateImages.push(context);
            byteSize += size;
            if (maxSize < byteSize)
                break;
        }
        return updateImages;
    };
    ImageSharingSystem.prototype.hasActiveTask = function () {
        return 0 < this.sendTaskMap.size || 0 < this.receiveTaskMap.size;
    };
    ImageSharingSystem.prototype.isLimitSendTask = function () {
        return this.maxSendTask <= this.sendTaskMap.size;
    };
    ImageSharingSystem.prototype.isLimitReceiveTask = function () {
        return this.maxReceiveTask <= this.receiveTaskMap.size;
    };
    ImageSharingSystem.prototype.existsSendTask = function (peerId) {
        var e_6, _a;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.sendTaskMap.values()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var task = _c.value;
                if (task && task.sendTo === peerId)
                    return true;
            }
        }
        catch (e_6_1) { e_6 = { error: e_6_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_6) throw e_6.error; }
        }
        return false;
    };
    return ImageSharingSystem;
}());

function convertUrlImage(xmlElement) {
    var e_7, _a;
    var urls = [];
    var imageElements = xmlElement.querySelectorAll('*[type="image"]');
    for (var i = 0; i < imageElements.length; i++) {
        var url = imageElements[i].innerHTML;
        if (!_image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.get(url) && 0 < _mime_type__WEBPACK_IMPORTED_MODULE_7__["MimeType"].type(url).length) {
            urls.push(url);
        }
    }
    imageElements = xmlElement.querySelectorAll('*[imageIdentifier]');
    for (var i = 0; i < imageElements.length; i++) {
        var url = imageElements[i].getAttribute('imageIdentifier');
        if (!_image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.get(url) && 0 < _mime_type__WEBPACK_IMPORTED_MODULE_7__["MimeType"].type(url).length) {
            urls.push(url);
        }
    }
    try {
        for (var urls_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(urls), urls_1_1 = urls_1.next(); !urls_1_1.done; urls_1_1 = urls_1.next()) {
            var url = urls_1_1.value;
            _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.add(url);
        }
    }
    catch (e_7_1) { e_7 = { error: e_7_1 }; }
    finally {
        try {
            if (urls_1_1 && !urls_1_1.done && (_a = urls_1.return)) _a.call(urls_1);
        }
        finally { if (e_7) throw e_7.error; }
    }
}


/***/ }),

/***/ "xdgh":
/*!**************************************************************!*\
  !*** ./src/app/class/core/synchronize-object/game-object.ts ***!
  \**************************************************************/
/*! exports provided: GameObject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameObject", function() { return GameObject; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _system_util_uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../system/util/uuid */ "P9Dn");
/* harmony import */ var _object_factory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./object-factory */ "+FYa");
/* harmony import */ var _object_serializer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./object-serializer */ "MDT1");
/* harmony import */ var _object_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./object-store */ "hm7o");





var GameObject = /** @class */ (function () {
    function GameObject(identifier) {
        if (identifier === void 0) { identifier = _system_util_uuid__WEBPACK_IMPORTED_MODULE_1__["UUID"].generateUuid(); }
        this.context = {
            aliasName: this.constructor.aliasName,
            identifier: '',
            majorVersion: 0,
            minorVersion: 0,
            syncData: {}
        };
        this.context.identifier = identifier;
    }
    Object.defineProperty(GameObject, "aliasName", {
        get: function () { return _object_factory__WEBPACK_IMPORTED_MODULE_2__["ObjectFactory"].instance.getAlias(this); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObject.prototype, "aliasName", {
        get: function () { return this.context.aliasName; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObject.prototype, "identifier", {
        get: function () { return this.context.identifier; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObject.prototype, "version", {
        get: function () { return this.context.majorVersion + this.context.minorVersion; },
        enumerable: false,
        configurable: true
    });
    GameObject.prototype.initialize = function () {
        _object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.add(this);
    };
    GameObject.prototype.destroy = function () {
        _object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.delete(this);
    };
    // GameObject Lifecycle
    GameObject.prototype.onStoreAdded = function () { };
    // GameObject Lifecycle
    GameObject.prototype.onStoreRemoved = function () { };
    GameObject.prototype.update = function () {
        this.versionUp();
        _object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.update(this.identifier);
    };
    GameObject.prototype.versionUp = function () {
        this.context.majorVersion += 1;
        this.context.minorVersion = Math.random();
    };
    GameObject.prototype.apply = function (context) {
        if (context !== null && this.identifier === context.identifier) {
            this.context.majorVersion = context.majorVersion;
            this.context.minorVersion = context.minorVersion;
            this.context.syncData = context.syncData;
        }
    };
    GameObject.prototype.clone = function () {
        var xmlString = this.toXml();
        return _object_serializer__WEBPACK_IMPORTED_MODULE_3__["ObjectSerializer"].instance.parseXml(xmlString);
    };
    GameObject.prototype.toContext = function () {
        return {
            aliasName: this.context.aliasName,
            identifier: this.context.identifier,
            majorVersion: this.context.majorVersion,
            minorVersion: this.context.minorVersion,
            syncData: deepCopy(this.context.syncData)
        };
    };
    GameObject.prototype.toXml = function () {
        return _object_serializer__WEBPACK_IMPORTED_MODULE_3__["ObjectSerializer"].instance.toXml(this);
    };
    return GameObject;
}());

function deepCopy(obj) {
    var e_1, _a;
    if (obj == null)
        return obj;
    var clone = Array.isArray(obj) ? [] : {};
    var keys = Object.getOwnPropertyNames(obj);
    try {
        for (var keys_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {
            var key = keys_1_1.value;
            var type = typeof obj[key];
            if (obj[key] != null && type === 'object') {
                clone[key] = deepCopy(obj[key]);
            }
            else if (type !== 'function') {
                clone[key] = obj[key];
            }
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (keys_1_1 && !keys_1_1.done && (_a = keys_1.return)) _a.call(keys_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return clone;
}


/***/ }),

/***/ "yNnI":
/*!********************************************!*\
  !*** ./src/app/class/core/system/index.ts ***!
  \********************************************/
/*! exports provided: Event, Listener, EventSystem, Network */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventSystem", function() { return EventSystem; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Network", function() { return Network; });
/* harmony import */ var _event_event_system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./event/event-system */ "Gipy");
/* harmony import */ var _network_network__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./network/network */ "qBBt");
/* harmony import */ var _event_event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./event/event */ "5MtU");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Event", function() { return _event_event__WEBPACK_IMPORTED_MODULE_2__["Event"]; });

/* harmony import */ var _event_listener__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./event/listener */ "39Ym");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Listener", function() { return _event_listener__WEBPACK_IMPORTED_MODULE_3__["Listener"]; });





var EventSystem = _event_event_system__WEBPACK_IMPORTED_MODULE_0__["EventSystem"].instance;
var Network = _network_network__WEBPACK_IMPORTED_MODULE_1__["Network"].instance;


/***/ }),

/***/ "ynNQ":
/*!****************************************************!*\
  !*** ./src/app/class/core/system/util/compress.ts ***!
  \****************************************************/
/*! exports provided: compressAsync, decompressAsync */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compressAsync", function() { return compressAsync; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "decompressAsync", function() { return decompressAsync; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var pako__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pako */ "rP9a");
/* harmony import */ var _zero_timeout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./zero-timeout */ "eS09");



function compressAsync(data, chunkSize) {
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
        var deflate, e_1;
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
            switch (_a.label) {
                case 0:
                    deflate = new pako__WEBPACK_IMPORTED_MODULE_1__["Deflate"]({ level: 2, gzip: true });
                    _a.label = 1;
                case 1:
                    _a.trys.push([1, 3, , 4]);
                    return [4 /*yield*/, processAsync(deflate, data, chunkSize)];
                case 2:
                    _a.sent();
                    return [2 /*return*/, deflate.result];
                case 3:
                    e_1 = _a.sent();
                    console.error(e_1);
                    return [3 /*break*/, 4];
                case 4: return [2 /*return*/, null];
            }
        });
    });
}
function decompressAsync(data, chunkSize) {
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
        var inflate, e_2;
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
            switch (_a.label) {
                case 0:
                    inflate = new pako__WEBPACK_IMPORTED_MODULE_1__["Inflate"]();
                    _a.label = 1;
                case 1:
                    _a.trys.push([1, 3, , 4]);
                    return [4 /*yield*/, processAsync(inflate, data, chunkSize)];
                case 2:
                    _a.sent();
                    return [2 /*return*/, inflate.result];
                case 3:
                    e_2 = _a.sent();
                    console.error(e_2);
                    return [3 /*break*/, 4];
                case 4: return [2 /*return*/, null];
            }
        });
    });
}
function processAsync(pakoObj, data, chunkSize) {
    if (chunkSize === void 0) { chunkSize = 16 * 1024; }
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
        var total, sliceData, sliceIndex;
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
            switch (_a.label) {
                case 0:
                    total = Math.ceil(data.byteLength / chunkSize);
                    sliceData = null;
                    sliceIndex = 0;
                    _a.label = 1;
                case 1:
                    if (!(sliceIndex < total)) return [3 /*break*/, 4];
                    return [4 /*yield*/, waitTickAsync()];
                case 2:
                    _a.sent();
                    sliceData = data.slice(sliceIndex * chunkSize, (sliceIndex + 1) * chunkSize);
                    pakoObj.push(sliceData, total <= sliceIndex + 1);
                    _a.label = 3;
                case 3:
                    sliceIndex++;
                    return [3 /*break*/, 1];
                case 4:
                    if (pakoObj.err)
                        throw new Error("error: " + pakoObj.err);
                    return [2 /*return*/, pakoObj];
            }
        });
    });
}
function waitTickAsync() {
    return new Promise(function (resolve) { return Object(_zero_timeout__WEBPACK_IMPORTED_MODULE_2__["setZeroTimeout"])(resolve); });
}


/***/ }),

/***/ "yrmS":
/*!**************************************************************************!*\
  !*** ./src/app/component/chat-tab-setting/chat-tab-setting.component.ts ***!
  \**************************************************************************/
/*! exports provided: ChatTabSettingComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatTabSettingComponent", function() { return ChatTabSettingComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/chat-tab-list */ "YZvQ");
/* harmony import */ var _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-serializer */ "MDT1");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_chat_message_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/chat-message.service */ "PEfN");
/* harmony import */ var service_save_data_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! service/save-data.service */ "Uvtn");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/common */ "ofXK");












function ChatTabSettingComponent_option_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "option", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} if (rf & 2) {
    var chatTab_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpropertyInterpolate"]("value", chatTab_r3.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](chatTab_r3.name);
} }
function ChatTabSettingComponent_ng_container_8_ng_container_6_div_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"]("", ctx_r6.progresPercent, "%");
} }
var _c0 = function (a0) { return { "is-hidden": a0 }; };
function ChatTabSettingComponent_ng_container_8_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    var _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "button", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function ChatTabSettingComponent_ng_container_8_ng_container_6_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r8); var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2); return ctx_r7.upTabIndex(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "\u2191");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "button", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function ChatTabSettingComponent_ng_container_8_ng_container_6_Template_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r8); var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2); return ctx_r9.downTabIndex(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4, "\u2193");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](5, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function ChatTabSettingComponent_ng_container_8_ng_container_6_Template_button_click_5_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r8); var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2); return ctx_r10.save(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](6, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](7, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](8, "\u4FDD\u5B58");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](9, ChatTabSettingComponent_ng_container_8_ng_container_6_div_9_Template, 2, 1, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](10, "button", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function ChatTabSettingComponent_ng_container_8_ng_container_6_Template_button_click_10_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r8); var ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2); return ctx_r11.delete(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](11, "\u524A\u9664");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("disabled", ctx_r4.isSaveing);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction1"](4, _c0, ctx_r4.isSaveing));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r4.isSaveing);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵattribute"]("disabled", ctx_r4.chatTabs.length <= 1 ? "" : null);
} }
function ChatTabSettingComponent_ng_container_8_ng_container_7_Template(rf, ctx) { if (rf & 1) {
    var _r13 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "button", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function ChatTabSettingComponent_ng_container_8_ng_container_7_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r13); var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2); return ctx_r12.restore(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "\u5143\u306B\u623B\u3059");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
} }
function ChatTabSettingComponent_ng_container_8_Template(rf, ctx) { if (rf & 1) {
    var _r15 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "\u30BF\u30D6\u540D : ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "input", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function ChatTabSettingComponent_ng_container_8_Template_input_ngModelChange_3_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r15); var ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](); return ctx_r14.tabName = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](4, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](5, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](6, ChatTabSettingComponent_ng_container_8_ng_container_6_Template, 12, 6, "ng-container", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](7, ChatTabSettingComponent_ng_container_8_ng_container_7_Template, 3, 0, "ng-container", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", ctx_r1.tabName);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx_r1.isDeleted);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r1.isDeleted);
} }
function ChatTabSettingComponent_ng_container_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "\u203B\u30C1\u30E3\u30C3\u30C8\u30BF\u30D6\u304C\uFF11\u3064\u3082\u4F5C\u6210\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002\u300C\u30C1\u30E3\u30C3\u30C8\u30BF\u30D6\u3092\u4F5C\u308B\u300D\u304B\u3089\u30C1\u30E3\u30C3\u30C8\u30BF\u30D6\u3092\u4F5C\u6210\u3059\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
} }
var ChatTabSettingComponent = /** @class */ (function () {
    function ChatTabSettingComponent(modalService, panelService, chatMessageService, saveDataService) {
        this.modalService = modalService;
        this.panelService = panelService;
        this.chatMessageService = chatMessageService;
        this.saveDataService = saveDataService;
        this.selectedTab = null;
        this.selectedTabXml = '';
        this.isSaveing = false;
        this.progresPercent = 0;
    }
    Object.defineProperty(ChatTabSettingComponent.prototype, "tabName", {
        get: function () { return this.selectedTab.name; },
        set: function (tabName) { if (this.isEditable)
            this.selectedTab.name = tabName; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabSettingComponent.prototype, "chatTabs", {
        get: function () { return this.chatMessageService.chatTabs; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabSettingComponent.prototype, "isEmpty", {
        get: function () { return this.chatMessageService.chatTabs.length < 1; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabSettingComponent.prototype, "isDeleted", {
        get: function () { return this.selectedTab ? _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.selectedTab.identifier) == null : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabSettingComponent.prototype, "isEditable", {
        get: function () { return !this.isEmpty && !this.isDeleted; },
        enumerable: false,
        configurable: true
    });
    ChatTabSettingComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.modalService.title = _this.panelService.title = 'チャットタブ設定'; });
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(this)
            .on('DELETE_GAME_OBJECT', 1000, function (event) {
            if (!_this.selectedTab || event.data.identifier !== _this.selectedTab.identifier)
                return;
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(event.data.identifier);
            if (object !== null) {
                _this.selectedTabXml = object.toXml();
            }
        });
    };
    ChatTabSettingComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(this);
    };
    ChatTabSettingComponent.prototype.onChangeSelectTab = function (identifier) {
        this.selectedTab = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(identifier);
        this.selectedTabXml = '';
    };
    ChatTabSettingComponent.prototype.create = function () {
        _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_1__["ChatTabList"].instance.addChatTab('タブ');
    };
    ChatTabSettingComponent.prototype.save = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var fileName;
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.selectedTab || this.isSaveing)
                            return [2 /*return*/];
                        this.isSaveing = true;
                        this.progresPercent = 0;
                        fileName = 'chat_' + this.selectedTab.name;
                        return [4 /*yield*/, this.saveDataService.saveGameObjectAsync(this.selectedTab, fileName, function (percent) {
                                _this.progresPercent = percent;
                            })];
                    case 1:
                        _a.sent();
                        setTimeout(function () {
                            _this.isSaveing = false;
                            _this.progresPercent = 0;
                        }, 500);
                        return [2 /*return*/];
                }
            });
        });
    };
    ChatTabSettingComponent.prototype.delete = function () {
        if (!this.isEmpty && this.selectedTab) {
            this.selectedTabXml = this.selectedTab.toXml();
            this.selectedTab.destroy();
        }
    };
    ChatTabSettingComponent.prototype.restore = function () {
        if (this.selectedTab && this.selectedTabXml) {
            var restoreTable = _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_2__["ObjectSerializer"].instance.parseXml(this.selectedTabXml);
            _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_1__["ChatTabList"].instance.addChatTab(restoreTable);
            this.selectedTabXml = '';
        }
    };
    ChatTabSettingComponent.prototype.upTabIndex = function () {
        if (!this.selectedTab)
            return;
        var parentElement = this.selectedTab.parent;
        var index = parentElement.children.indexOf(this.selectedTab);
        if (0 < index) {
            var prevElement = parentElement.children[index - 1];
            parentElement.insertBefore(this.selectedTab, prevElement);
        }
    };
    ChatTabSettingComponent.prototype.downTabIndex = function () {
        if (!this.selectedTab)
            return;
        var parentElement = this.selectedTab.parent;
        var index = parentElement.children.indexOf(this.selectedTab);
        if (index < parentElement.children.length - 1) {
            var nextElement = parentElement.children[index + 1];
            parentElement.insertBefore(nextElement, this.selectedTab);
        }
    };
    ChatTabSettingComponent.ɵfac = function ChatTabSettingComponent_Factory(t) { return new (t || ChatTabSettingComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_6__["ModalService"]), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](service_chat_message_service__WEBPACK_IMPORTED_MODULE_8__["ChatMessageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](service_save_data_service__WEBPACK_IMPORTED_MODULE_9__["SaveDataService"])); };
    ChatTabSettingComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({ type: ChatTabSettingComponent, selectors: [["app-chat-tab-setting"]], decls: 10, vars: 4, consts: [[1, "flex-container"], [1, "flex-item", "no-grow"], [3, "click"], ["size", "10", 2, "width", "10em", 3, "ngModel", "change"], [3, "value", 4, "ngFor", "ngForOf"], [1, "flex-item"], [4, "ngIf"], [3, "value"], ["placeholder", "Name", 3, "ngModel", "ngModelChange"], [3, "disabled", "click"], [2, "position", "relative"], [3, "ngClass"], ["class", "progress", 4, "ngIf"], [1, "danger", 3, "click"], [1, "progress"], [2, "font-size", "12px"]], template: function ChatTabSettingComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](2, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "button", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function ChatTabSettingComponent_Template_button_click_3_listener() { return ctx.create(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4, "\u30C1\u30E3\u30C3\u30C8\u30BF\u30D6\u3092\u4F5C\u308B");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](5, "select", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("change", function ChatTabSettingComponent_Template_select_change_5_listener($event) { return ctx.onChangeSelectTab($event.target.value); });
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](6, ChatTabSettingComponent_option_6_Template, 2, 2, "option", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](7, "div", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](8, ChatTabSettingComponent_ng_container_8_Template, 8, 4, "ng-container", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](9, ChatTabSettingComponent_ng_container_9_Template, 3, 0, "ng-container", 6);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", ctx.selectedTab == null ? null : ctx.selectedTab.identifier);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", ctx.chatTabs);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx.isEmpty && ctx.selectedTab);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.isEmpty);
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_10__["SelectControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgModel"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgForOf"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgSelectOption"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["ɵangular_packages_forms_forms_x"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["DefaultValueAccessor"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgClass"]], styles: [".flex-container[_ngcontent-%COMP%] { \n  display: flex; \n  flex-flow:  row wrap; \n  justify-content: flex-start; \n  align-items: stretch;\n\n}\n.flex-item[_ngcontent-%COMP%] {\n  margin: 5px; \n  flex: 1 0 auto;\n  box-sizing: border-box; \n  flex-grow: 1;\n  max-width: 100%;\n}\n.no-grow[_ngcontent-%COMP%]{ \n  flex-grow: 0;\n}\n.is-hidden[_ngcontent-%COMP%] {\n  visibility: hidden;\n}\n.progress[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  font-size: 0.9em;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtdGFiLXNldHRpbmcuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxrQkFDeUIsV0FBVztFQUNsQyxhQUFhLEVBRWdCLFdBQVc7RUFDeEMsb0JBQW9CLEVBRWlCLFdBQVc7RUFDaEQsMkJBQTJCLEVBRUcsV0FBVztFQUN6QyxvQkFBb0I7O0FBRXRCO0FBQ0E7RUFDRSxXQUFXLEVBQ2EsV0FBVztFQUNuQyxjQUFjO0VBQ2Qsc0JBQXNCLEVBQ0EsV0FBVztFQUNqQyxZQUFZO0VBQ1osZUFBZTtBQUNqQjtBQUVBLFVBQ3dCLFdBQVc7RUFDakMsWUFBWTtBQUNkO0FBRUE7RUFDRSxrQkFBa0I7QUFDcEI7QUFFQTtFQUNFLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsdUJBQXVCO0VBQ3ZCLGtCQUFrQjtFQUNsQixNQUFNO0VBQ04sU0FBUztFQUNULE9BQU87RUFDUCxRQUFRO0VBQ1IsZ0JBQWdCO0FBQ2xCIiwiZmlsZSI6ImNoYXQtdGFiLXNldHRpbmcuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5mbGV4LWNvbnRhaW5lciB7XG4gIGRpc3BsYXk6IC13ZWJraXQtZmxleDsgLyogU2FmYXJpICovXG4gIGRpc3BsYXk6IGZsZXg7XG5cbiAgLXdlYmtpdC1mbGV4LWZsb3c6IHJvdyB3cmFwOyAvKiBTYWZhcmkgKi9cbiAgZmxleC1mbG93OiAgcm93IHdyYXA7XG5cbiAgLXdlYmtpdC1qdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7IC8qIFNhZmFyaSAqL1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG5cbiAgLXdlYmtpdC1hbGlnbi1pdGVtczogc3RyZXRjaDsgLyogU2FmYXJpICovXG4gIGFsaWduLWl0ZW1zOiBzdHJldGNoO1xuXG59XG4uZmxleC1pdGVtIHtcbiAgbWFyZ2luOiA1cHg7XG4gIC13ZWJraXQtZmxleDogMSAwIGF1dG87IC8qIFNhZmFyaSAqL1xuICBmbGV4OiAxIDAgYXV0bztcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgLXdlYmtpdC1mbGV4LWdyb3c6IDE7IC8qIFNhZmFyaSAqL1xuICBmbGV4LWdyb3c6IDE7XG4gIG1heC13aWR0aDogMTAwJTtcbn1cblxuLm5vLWdyb3d7XG4gIC13ZWJraXQtZmxleC1ncm93OiAwOyAvKiBTYWZhcmkgKi9cbiAgZmxleC1ncm93OiAwO1xufVxuXG4uaXMtaGlkZGVuIHtcbiAgdmlzaWJpbGl0eTogaGlkZGVuO1xufVxuXG4ucHJvZ3Jlc3Mge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGZvbnQtc2l6ZTogMC45ZW07XG59XG4iXX0= */"] });
    return ChatTabSettingComponent;
}());



/***/ }),

/***/ "z2Us":
/*!**************************************************!*\
  !*** ./src/app/directive/draggable.directive.ts ***!
  \**************************************************/
/*! exports provided: DraggableDirective */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DraggableDirective", function() { return DraggableDirective; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_transform_css_number__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/transform/css-number */ "zAbn");
/* harmony import */ var _input_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./input-handler */ "96Ug");




var DraggableDirective = /** @class */ (function () {
    function DraggableDirective(ngZone, elementRef) {
        this.ngZone = ngZone;
        this.elementRef = elementRef;
        this.isDisable = false;
        this.boundsSelector = 'body';
        this.handleSelector = '';
        this.unhandleSelector = 'input,textarea,button,select,option,span';
        this.stackSelector = '';
        this.opacity = 0.7;
        this.onstart = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onmove = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onend = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.callbackOnResize = this.adjustPosition.bind(this);
        this.input = null;
        this.startPosition = { x: 0, y: 0, z: 0 };
        this.startPointer = { x: 0, y: 0, z: 0 };
        this.prevTrans = { x: 0, y: 0, z: 0 };
    }
    DraggableDirective.prototype.ngAfterViewInit = function () {
        this.initialize();
        this.adjustPosition();
        this.setForeground();
    };
    DraggableDirective.prototype.ngOnDestroy = function () {
        this.cancel();
        this.destroy();
    };
    DraggableDirective.prototype.initialize = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.input = new _input_handler__WEBPACK_IMPORTED_MODULE_2__["InputHandler"](_this.elementRef.nativeElement);
            window.addEventListener('resize', _this.callbackOnResize, false);
        });
        this.input.onStart = this.onInputStart.bind(this);
        this.input.onMove = this.onInputMove.bind(this);
        this.input.onEnd = this.onInputEnd.bind(this);
        this.input.onContextMenu = this.onContextMenu.bind(this);
    };
    DraggableDirective.prototype.cancel = function () {
        this.input.cancel();
    };
    DraggableDirective.prototype.destroy = function () {
        window.removeEventListener('resize', this.callbackOnResize, false);
        this.input.destroy();
    };
    DraggableDirective.prototype.onInputStart = function (e) {
        if (e.button === 1 || e.button === 2)
            return this.cancel();
        this.setForeground();
        this.startPosition = this.calcElementPosition(this.elementRef.nativeElement);
        this.startPointer = this.input.pointer;
        this.prevTrans = { x: 0, y: 0, z: 0 };
        var isHandle = this.isHandleElement(e.target);
        var isUnhandle = this.isUnhandleElement(e.target);
        var isScrollable = e.touches != null ? this.isScrollableElement(e.target) : false;
        if (!isHandle || isUnhandle || isScrollable) {
            this.cancel();
            return;
        }
        e.stopPropagation();
    };
    DraggableDirective.prototype.onInputMove = function (e) {
        var trans = {
            x: this.input.pointer.x - this.startPointer.x,
            y: this.input.pointer.y - this.startPointer.y,
            z: this.input.pointer.z - this.startPointer.z
        };
        var diff = {
            x: trans.x - this.prevTrans.x,
            y: trans.y - this.prevTrans.y,
            z: trans.z - this.prevTrans.z
        };
        var correction = this.calcCorrectionPosition(diff);
        trans.x += correction.x;
        trans.y += correction.y;
        trans.z += correction.z;
        if (0 < Math.pow(trans.x, 2) + Math.pow(trans.y, 2) + Math.pow(trans.z, 2)) {
            this.elementRef.nativeElement.style.opacity = this.opacity + '';
        }
        this.elementRef.nativeElement.style.left = trans.x + this.startPosition.x + 'px';
        this.elementRef.nativeElement.style.top = trans.y + this.startPosition.y + 'px';
        this.prevTrans = trans;
        if (e.cancelable)
            e.preventDefault();
        e.stopPropagation();
    };
    DraggableDirective.prototype.onInputEnd = function (e) {
        this.elementRef.nativeElement.style.opacity = null;
        if (this.input.isDragging && e.cancelable) {
            this.preventClickIfNeeded(e);
            e.preventDefault();
        }
        e.stopPropagation();
    };
    DraggableDirective.prototype.onContextMenu = function (e) {
        e.stopPropagation();
    };
    DraggableDirective.prototype.preventClickIfNeeded = function (e) {
        var _this = this;
        if (e.touches != null)
            return;
        var diffX = this.input.pointer.x - this.startPointer.x;
        var diffY = this.input.pointer.y - this.startPointer.y;
        var diffZ = this.input.pointer.z - this.startPointer.z;
        var distance = Math.pow(diffX, 2) + Math.pow(diffY, 2) + Math.pow(diffZ, 2);
        if (Math.pow(15, 2) > distance)
            return;
        var callback = function (e) {
            if (e.cancelable)
                e.preventDefault();
            e.stopPropagation();
        };
        this.elementRef.nativeElement.addEventListener('click', callback, true);
        setTimeout(function () { return _this.elementRef.nativeElement.removeEventListener('click', callback, true); });
    };
    DraggableDirective.prototype.adjustPosition = function () {
        var current = this.calcElementPosition(this.elementRef.nativeElement);
        var correction = this.calcCorrectionPosition();
        this.elementRef.nativeElement.style.left = correction.x + current.x + 'px';
        this.elementRef.nativeElement.style.top = correction.y + current.y + 'px';
    };
    DraggableDirective.prototype.isHandleElement = function (target) {
        if (this.handleSelector.length < 1)
            return true;
        return this.isContainsElement(target, this.handleSelector);
    };
    DraggableDirective.prototype.isUnhandleElement = function (target) {
        if (this.unhandleSelector.length < 1)
            return false;
        return this.isContainsElement(target, this.unhandleSelector);
    };
    DraggableDirective.prototype.isContainsElement = function (target, selectors) {
        var elms = this.elementRef.nativeElement.querySelectorAll(selectors);
        for (var i = 0; i < elms.length; i++) {
            if (elms[i].contains(target))
                return true;
        }
        return false;
    };
    DraggableDirective.prototype.isScrollableElement = function (target) {
        var boundsElm = this.elementRef.nativeElement.ownerDocument.querySelector(this.boundsSelector);
        var node = target;
        var overflowType = ['scroll', 'auto'];
        var positionType = ['fixed', 'sticky', '-webkit-sticky'];
        while (node && boundsElm !== node && this.elementRef.nativeElement !== node) {
            var css = window.getComputedStyle(node);
            if (0 <= overflowType.indexOf(css.overflowY) && node.offsetHeight < node.scrollHeight)
                return true;
            if (0 <= positionType.indexOf(css.position))
                return false;
            node = node.parentElement;
        }
        return false;
    };
    DraggableDirective.prototype.calcCorrectionPosition = function (diff) {
        if (diff === void 0) { diff = { x: 0, y: 0, z: 0 }; }
        var correction = { x: 0, y: 0, z: 0 };
        var box = this.elementRef.nativeElement.getBoundingClientRect();
        var bounds = this.elementRef.nativeElement.ownerDocument.querySelector(this.boundsSelector).getBoundingClientRect();
        if (bounds.right < box.right + diff.x) {
            correction.x += bounds.right - (box.right + diff.x);
        }
        if (box.left + diff.x < bounds.left) {
            correction.x += bounds.left - (box.left + diff.x);
        }
        if (bounds.bottom < box.bottom + diff.y) {
            correction.y += bounds.bottom - (box.bottom + diff.y);
        }
        if (box.top + diff.y < bounds.top) {
            correction.y += bounds.top - (box.top + diff.y);
        }
        return correction;
    };
    DraggableDirective.prototype.calcElementPosition = function (target) {
        var css = window.getComputedStyle(target);
        return {
            x: _udonarium_transform_css_number__WEBPACK_IMPORTED_MODULE_1__["CSSNumber"].relation(css.left, target.parentElement.offsetWidth, target.parentElement.offsetWidth * 0.5),
            y: _udonarium_transform_css_number__WEBPACK_IMPORTED_MODULE_1__["CSSNumber"].relation(css.top, target.parentElement.offsetHeight, target.parentElement.offsetHeight * 0.5),
            z: 0
        };
    };
    DraggableDirective.prototype.setForeground = function () {
        if (this.stackSelector.length < 1)
            return;
        var stacks = this.elementRef.nativeElement.ownerDocument.querySelectorAll(this.stackSelector);
        var topZindex = 0;
        var bottomZindex = 99999;
        stacks.forEach(function (elm) {
            var zIndex = parseInt(elm.style.zIndex);
            if (topZindex < zIndex)
                topZindex = zIndex;
            if (zIndex < bottomZindex)
                bottomZindex = zIndex;
        });
        if (topZindex <= parseInt(this.elementRef.nativeElement.style.zIndex))
            return;
        stacks.forEach(function (elm) {
            elm.style.zIndex = (parseInt(elm.style.zIndex) - bottomZindex) + '';
        });
        this.elementRef.nativeElement.style.zIndex = (topZindex + 1) + '';
    };
    DraggableDirective.ɵfac = function DraggableDirective_Factory(t) { return new (t || DraggableDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"])); };
    DraggableDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: DraggableDirective, selectors: [["", "appDraggable", ""]], inputs: { isDisable: ["draggable.disable", "isDisable"], boundsSelector: ["draggable.bounds", "boundsSelector"], handleSelector: ["draggable.handle", "handleSelector"], unhandleSelector: ["draggable.unhandle", "unhandleSelector"], stackSelector: ["draggable.stack", "stackSelector"], opacity: ["draggable.opacity", "opacity"] }, outputs: { onstart: "draggable.start", onmove: "draggable.move", onend: "draggable.end" } });
    return DraggableDirective;
}());



/***/ }),

/***/ "zAbn":
/*!***********************************************!*\
  !*** ./src/app/class/transform/css-number.ts ***!
  \***********************************************/
/*! exports provided: CSSNumber */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CSSNumber", function() { return CSSNumber; });
var CSSNumber;
(function (CSSNumber) {
    function relation(value, relativeSize, defaultValue) {
        if (defaultValue === void 0) { defaultValue = 0; }
        if (typeof value === 'number') {
            return value;
        }
        else if (typeof value === 'string') {
            value = value.trim().toLowerCase();
            if (value.indexOf('%') > 0)
                return (parse(value.replace('%', ''), defaultValue) / 100) * relativeSize;
            else if (value.indexOf('px') > 0 || value.indexOf('pt') > 0)
                return parse(value.replace('px', ''), defaultValue);
            else if (value.indexOf('vw') > 0)
                return (parse(value.replace('vw', ''), defaultValue) / 100) * window.innerWidth;
            else if (value.indexOf('vh') > 0)
                return (parse(value.replace('vh', ''), defaultValue) / 100) * window.innerHeight;
            else if (value.indexOf('vm') > 0)
                return (parse(value.replace('vm', ''), defaultValue) / 100) * Math.min(window.innerWidth, window.innerHeight);
            else if (value.indexOf('em') > 0)
                return parse(value.replace('em', ''), defaultValue);
            else if (value === 'top' || value === 'left')
                return 0;
            else if (value === 'center' || value === 'middle')
                return relativeSize * 0.5;
            else if (value === 'bottom' || value === 'right')
                return relativeSize;
            return defaultValue;
        }
        return defaultValue;
    }
    CSSNumber.relation = relation;
    function parse(value, defaultValue) {
        if (defaultValue === void 0) { defaultValue = 0; }
        value = parseFloat(value);
        if (isNaN(value))
            return defaultValue;
        return value;
    }
    CSSNumber.parse = parse;
})(CSSNumber || (CSSNumber = {}));


/***/ }),

/***/ "zP96":
/*!***********************************************!*\
  !*** ./src/app/class/data-summary-setting.ts ***!
  \***********************************************/
/*! exports provided: SortOrder, DataSummarySetting */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SortOrder", function() { return SortOrder; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataSummarySetting", function() { return DataSummarySetting; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/game-object */ "xdgh");



var SortOrder;
(function (SortOrder) {
    SortOrder["ASC"] = "ASC";
    SortOrder["DESC"] = "DESC";
})(SortOrder || (SortOrder = {}));
var DataSummarySetting = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(DataSummarySetting, _super);
    function DataSummarySetting() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.sortTag = 'name';
        _this.sortOrder = SortOrder.ASC;
        _this.dataTag = 'HP MP 敏捷度 生命力 精神力';
        return _this;
    }
    DataSummarySetting_1 = DataSummarySetting;
    Object.defineProperty(DataSummarySetting, "instance", {
        get: function () {
            if (!DataSummarySetting_1._instance) {
                DataSummarySetting_1._instance = new DataSummarySetting_1('DataSummarySetting');
                DataSummarySetting_1._instance.initialize();
            }
            return DataSummarySetting_1._instance;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DataSummarySetting.prototype, "dataTags", {
        get: function () {
            if (this._dataTag !== this.dataTag) {
                this._dataTag = this.dataTag;
                this._dataTags = this.dataTag != null && 0 < this.dataTag.trim().length ? this.dataTag.trim().split(/\s+/) : [];
            }
            return this._dataTags;
        },
        enumerable: false,
        configurable: true
    });
    DataSummarySetting.prototype.innerXml = function () { return ''; };
    DataSummarySetting.prototype.parseInnerXml = function (element) {
        // XMLからの新規作成を許可せず、既存のオブジェクトを更新する
        var context = DataSummarySetting_1.instance.toContext();
        context.syncData = this.toContext().syncData;
        DataSummarySetting_1.instance.apply(context);
        DataSummarySetting_1.instance.update();
        this.destroy();
    };
    var DataSummarySetting_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DataSummarySetting.prototype, "sortTag", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DataSummarySetting.prototype, "sortOrder", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DataSummarySetting.prototype, "dataTag", void 0);
    DataSummarySetting = DataSummarySetting_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('summary-setting')
    ], DataSummarySetting);
    return DataSummarySetting;
}(_core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_2__["GameObject"]));



/***/ }),

/***/ "zUnb":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/platform-browser */ "jhN1");
/* harmony import */ var hammerjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! hammerjs */ "yLV6");
/* harmony import */ var hammerjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(hammerjs__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _app_app_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/app.module */ "ZAI4");
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./environments/environment */ "AytR");





if (_environments_environment__WEBPACK_IMPORTED_MODULE_4__["environment"].production) {
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["enableProdMode"])();
}
_angular_platform_browser__WEBPACK_IMPORTED_MODULE_0__["platformBrowser"]().bootstrapModule(_app_app_module__WEBPACK_IMPORTED_MODULE_3__["AppModule"])
    .catch(function (err) { return console.error(err); });


/***/ }),

/***/ "zXSY":
/*!**********************************************************************************!*\
  !*** ./src/app/component/game-character-sheet/game-character-sheet.component.ts ***!
  \**********************************************************************************/
/*! exports provided: GameCharacterSheetComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameCharacterSheetComponent", function() { return GameCharacterSheetComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_data_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/data-element */ "gkrD");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! component/file-selecter/file-selecter.component */ "FR7b");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_save_data_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/save-data.service */ "Uvtn");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var component_game_data_element_game_data_element_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! component/game-data-element/game-data-element.component */ "CvDi");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");













function GameCharacterSheetComponent_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainer"](0);
} }
function GameCharacterSheetComponent_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    var _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "button", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function GameCharacterSheetComponent_ng_container_4_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r10); var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](); return ctx_r9.openModal("front"); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "\u8868\u9762\u306E\u753B\u50CF\u3092\u5909\u66F4");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "button", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function GameCharacterSheetComponent_ng_container_4_Template_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r10); var ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](); return ctx_r11.openModal("back"); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4, "\u88CF\u9762\u306E\u753B\u50CF\u3092\u5909\u66F4");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
} }
function GameCharacterSheetComponent_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainer"](0);
} }
function GameCharacterSheetComponent_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    var _r13 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "button", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function GameCharacterSheetComponent_ng_container_6_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r13); var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](); return ctx_r12.openModal("floor"); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "\u5E8A\u306E\u753B\u50CF\u3092\u5909\u66F4");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "button", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function GameCharacterSheetComponent_ng_container_6_Template_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r13); var ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](); return ctx_r14.openModal("wall"); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4, "\u58C1\u306E\u753B\u50CF\u3092\u5909\u66F4");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
} }
function GameCharacterSheetComponent_ng_container_7_Template(rf, ctx) { if (rf & 1) {
    var _r16 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "button", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function GameCharacterSheetComponent_ng_container_7_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r16); var ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](); return ctx_r15.openModal(ctx_r15.tabletopObject["face"]); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "\u30C0\u30A4\u30B9\u76EE\u306E\u753B\u50CF\u3092\u5909\u66F4");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("disabled", !ctx_r4.tabletopObject["isVisible"]);
} }
function GameCharacterSheetComponent_ng_container_8_Template(rf, ctx) { if (rf & 1) {
    var _r18 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "button", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function GameCharacterSheetComponent_ng_container_8_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r18); var ctx_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](); return ctx_r17.openModal("imageIdentifier", true); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "\u753B\u50CF\u5909\u66F4");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
} }
function GameCharacterSheetComponent_div_15_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"]("", ctx_r6.progresPercent, "%");
} }
function GameCharacterSheetComponent_ng_container_16_select_1_Template(rf, ctx) { if (rf & 1) {
    var _r21 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "select", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("change", function GameCharacterSheetComponent_ng_container_16_select_1_Template_select_change_0_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r21); var ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2); return ctx_r20.setLocation($event.target.value); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "option", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "\u30C6\u30FC\u30D6\u30EB");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "option", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4, "\u5171\u6709\u30A4\u30F3\u30D9\u30F3\u30C8\u30EA");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](5, "option", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](6, "\u500B\u4EBA\u30A4\u30F3\u30D9\u30F3\u30C8\u30EA");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](7, "option", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](8, "\u5893\u5730");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", ctx_r19.tabletopObject.location.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpropertyInterpolate"]("value", ctx_r19.networkService.peerId);
} }
function GameCharacterSheetComponent_ng_container_16_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](1, GameCharacterSheetComponent_ng_container_16_select_1_Template, 9, 2, "select", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r7.tabletopObject);
} }
function GameCharacterSheetComponent_div_17_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](1, "img", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind2"](2, 2, ctx_r22.tabletopObject.imageFile.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵsanitizeUrl"])("alt", ctx_r22.tabletopObject.imageFile.name);
} }
function GameCharacterSheetComponent_div_17_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](2, "div", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](3, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("gameDataElement", ctx_r23.tabletopObject.commonDataElement)("isTagLocked", true);
} }
function GameCharacterSheetComponent_div_17_ng_container_3_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "div", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](2, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} if (rf & 2) {
    var childElement_r27 = ctx.$implicit;
    var ctx_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("gameDataElement", childElement_r27)("isEdit", ctx_r26.isEdit);
} }
function GameCharacterSheetComponent_div_17_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](1, GameCharacterSheetComponent_div_17_ng_container_3_div_1_Template, 3, 2, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r24 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", ctx_r24.tabletopObject.detailDataElement.children);
} }
function GameCharacterSheetComponent_div_17_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    var _r29 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](2, "button", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function GameCharacterSheetComponent_div_17_ng_container_4_Template_button_click_2_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r29); var ctx_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2); return ctx_r28.addDataElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3, "\u65B0\u3057\u3044\u9805\u76EE\u3092\u8FFD\u52A0");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
} }
function GameCharacterSheetComponent_div_17_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](1, GameCharacterSheetComponent_div_17_div_1_Template, 3, 5, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](2, GameCharacterSheetComponent_div_17_ng_container_2_Template, 4, 2, "ng-container", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](3, GameCharacterSheetComponent_div_17_ng_container_3_Template, 2, 1, "ng-container", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](4, GameCharacterSheetComponent_div_17_ng_container_4_Template, 4, 0, "ng-container", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", 0 < (ctx_r8.tabletopObject.imageFile == null ? null : ctx_r8.tabletopObject.imageFile.url.length));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r8.tabletopObject.commonDataElement);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r8.tabletopObject.detailDataElement);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r8.isEdit);
} }
var _c0 = function (a0) { return { "is-hidden": a0 }; };
var GameCharacterSheetComponent = /** @class */ (function () {
    function GameCharacterSheetComponent(saveDataService, panelService, modalService) {
        this.saveDataService = saveDataService;
        this.panelService = panelService;
        this.modalService = modalService;
        this.tabletopObject = null;
        this.isEdit = false;
        this.networkService = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["Network"];
        this.isSaveing = false;
        this.progresPercent = 0;
    }
    GameCharacterSheetComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(this)
            .on('DELETE_GAME_OBJECT', -1000, function (event) {
            if (_this.tabletopObject && _this.tabletopObject.identifier === event.data.identifier) {
                _this.panelService.close();
            }
        });
    };
    GameCharacterSheetComponent.prototype.ngAfterViewInit = function () {
    };
    GameCharacterSheetComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(this);
    };
    GameCharacterSheetComponent.prototype.toggleEditMode = function () {
        this.isEdit = this.isEdit ? false : true;
    };
    GameCharacterSheetComponent.prototype.addDataElement = function () {
        if (this.tabletopObject.detailDataElement) {
            var title = _udonarium_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('見出し', '', {});
            var tag = _udonarium_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('タグ', '', {});
            title.appendChild(tag);
            this.tabletopObject.detailDataElement.appendChild(title);
        }
    };
    GameCharacterSheetComponent.prototype.clone = function () {
        var cloneObject = this.tabletopObject.clone();
        cloneObject.location.x += 50;
        cloneObject.location.y += 50;
        if (this.tabletopObject.parent)
            this.tabletopObject.parent.appendChild(cloneObject);
        cloneObject.update();
        switch (this.tabletopObject.aliasName) {
            case 'terrain':
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].blockPut);
                cloneObject.isLocked = false;
                break;
            case 'card':
            case 'card-stack':
                cloneObject.owner = '';
                cloneObject.toTopmost();
            case 'table-mask':
                cloneObject.isLock = false;
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].cardPut);
                break;
            case 'text-note':
                cloneObject.toTopmost();
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].cardPut);
                break;
            case 'dice-symbol':
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].dicePut);
            default:
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_3__["PresetSound"].piecePut);
                break;
        }
    };
    GameCharacterSheetComponent.prototype.saveToXML = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var element, objectName;
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.tabletopObject || this.isSaveing)
                            return [2 /*return*/];
                        this.isSaveing = true;
                        this.progresPercent = 0;
                        element = this.tabletopObject.commonDataElement.getFirstElementByName('name');
                        objectName = element ? element.value : '';
                        return [4 /*yield*/, this.saveDataService.saveGameObjectAsync(this.tabletopObject, 'xml_' + objectName, function (percent) {
                                _this.progresPercent = percent;
                            })];
                    case 1:
                        _a.sent();
                        setTimeout(function () {
                            _this.isSaveing = false;
                            _this.progresPercent = 0;
                        }, 500);
                        return [2 /*return*/];
                }
            });
        });
    };
    GameCharacterSheetComponent.prototype.setLocation = function (locationName) {
        this.tabletopObject.setLocation(locationName);
    };
    GameCharacterSheetComponent.prototype.openModal = function (name, isAllowedEmpty) {
        var _this = this;
        if (name === void 0) { name = ''; }
        if (isAllowedEmpty === void 0) { isAllowedEmpty = false; }
        this.modalService.open(component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_4__["FileSelecterComponent"], { isAllowedEmpty: isAllowedEmpty }).then(function (value) {
            if (!_this.tabletopObject || !_this.tabletopObject.imageDataElement || !value)
                return;
            var element = _this.tabletopObject.imageDataElement.getFirstElementByName(name);
            if (!element)
                return;
            element.value = value;
        });
    };
    GameCharacterSheetComponent.ɵfac = function GameCharacterSheetComponent_Factory(t) { return new (t || GameCharacterSheetComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](service_save_data_service__WEBPACK_IMPORTED_MODULE_6__["SaveDataService"]), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_8__["ModalService"])); };
    GameCharacterSheetComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({ type: GameCharacterSheetComponent, selectors: [["game-character-sheet"]], inputs: { tabletopObject: "tabletopObject" }, decls: 18, vars: 13, consts: [[3, "click"], [3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngSwitchDefault"], [3, "disabled", "click"], [2, "position", "relative"], [3, "ngClass"], ["class", "progress", 4, "ngIf"], [4, "ngIf"], ["class", "flex-container", 4, "ngIf"], [1, "progress"], [3, "ngModel", "change", 4, "ngIf"], [3, "ngModel", "change"], ["value", "table"], ["value", "common"], [3, "value"], ["value", "graveyard"], [1, "flex-container"], ["class", "box main-image-box", 4, "ngIf"], [1, "box", "main-image-box"], [1, "main-image", 3, "src", "alt"], [1, "flex-item"], [1, "table"], ["game-data-element", "", 1, "table-row", 3, "gameDataElement", "isTagLocked"], ["class", "flex-item", 4, "ngFor", "ngForOf"], ["game-data-element", "", 1, "table-row", 3, "gameDataElement", "isEdit"], [2, "width", "100%", "color", "#555", 3, "click"]], template: function GameCharacterSheetComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "button", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function GameCharacterSheetComponent_Template_button_click_0_listener() { return ctx.toggleEditMode(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1, "\u7DE8\u96C6\u5207\u308A\u66FF\u3048");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](2, 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](3, GameCharacterSheetComponent_ng_container_3_Template, 1, 0, "ng-container", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](4, GameCharacterSheetComponent_ng_container_4_Template, 5, 0, "ng-container", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](5, GameCharacterSheetComponent_ng_container_5_Template, 1, 0, "ng-container", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](6, GameCharacterSheetComponent_ng_container_6_Template, 5, 0, "ng-container", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](7, GameCharacterSheetComponent_ng_container_7_Template, 3, 1, "ng-container", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](8, GameCharacterSheetComponent_ng_container_8_Template, 3, 0, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](9, "button", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function GameCharacterSheetComponent_Template_button_click_9_listener() { return ctx.clone(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](10, "\u30B3\u30D4\u30FC\u3092\u4F5C\u308B");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](11, "button", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function GameCharacterSheetComponent_Template_button_click_11_listener() { return ctx.saveToXML(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](12, "div", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](13, "div", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](14, "\u4FDD\u5B58");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](15, GameCharacterSheetComponent_div_15_Template, 2, 1, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](16, GameCharacterSheetComponent_ng_container_16_Template, 2, 1, "ng-container", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](17, GameCharacterSheetComponent_div_17_Template, 5, 4, "div", 9);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngSwitch", ctx.tabletopObject.aliasName);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngSwitchCase", "numberResource");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngSwitchCase", "card");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngSwitchCase", "card-stack");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngSwitchCase", "terrain");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngSwitchCase", "dice-symbol");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("disabled", ctx.isSaveing);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction1"](11, _c0, ctx.isSaveing));
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.isSaveing);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.tabletopObject.aliasName === "character");
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.tabletopObject);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_9__["NgSwitch"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgSwitchCase"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgSwitchDefault"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["SelectControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgModel"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgSelectOption"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["ɵangular_packages_forms_forms_x"], component_game_data_element_game_data_element_component__WEBPACK_IMPORTED_MODULE_11__["GameDataElementComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgForOf"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_12__["SafePipe"]], styles: [".main-image-box[_ngcontent-%COMP%] {\n  \n  width: 250px;\n  height: 250px;\n}\n.main-image[_ngcontent-%COMP%] {\n  width: 250px;\n}\n.table[_ngcontent-%COMP%] {\n  display:table;\n  width :100%;\n  box-sizing: border-box;\n  \n}\n.table-row[_ngcontent-%COMP%] {\n  display:table-row;\n  box-sizing: border-box;\n}\n.table-row[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%] {\n  display:table-cell;\n  border:1px solid #FFF;\n  vertical-align: top;\n  box-sizing: border-box;\n}\n.box[_ngcontent-%COMP%] {\n  display: inline-block;\n  margin: 5px;\n  \n  box-sizing: border-box;\n}\n.flex-container[_ngcontent-%COMP%] { \n  display: flex; \n  flex-flow:  row wrap; \n  justify-content: flex-start; \n  align-items: stretch;\n\n  \n}\n.flex-item[_ngcontent-%COMP%] {\n  margin: 5px 0px;\n  padding: 10px; \n  flex: 1 0 auto;\n  \n  box-sizing: border-box;\n  min-width: 25px;\n\n  background-color: rgba(234,201,157, 0.8);\n  background-color: rgba(240,218,189, 0.8);\n  color: #444;\n\n  \n\n  \n\n}\n.flex-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .flex-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .flex-item[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .flex-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%] {\n  \n  color: #CCC;\n}\ninput[_ngcontent-%COMP%] {\n  \n  color: #CCC;\n}\n.is-hidden[_ngcontent-%COMP%] {\n  visibility: hidden;\n}\n.progress[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  font-size: 0.9em;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUtY2hhcmFjdGVyLXNoZWV0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRTs7O0dBR0M7RUFDRCxZQUFZO0VBQ1osYUFBYTtBQUNmO0FBQ0E7RUFDRSxZQUFZO0FBQ2Q7QUFFQTtFQUNFLGFBQWE7RUFDYixXQUFXO0VBQ1gsc0JBQXNCO0VBQ3RCLDRCQUE0QjtBQUM5QjtBQUNBO0VBQ0UsaUJBQWlCO0VBQ2pCLHNCQUFzQjtBQUN4QjtBQUNBO0VBQ0Usa0JBQWtCO0VBQ2xCLHFCQUFxQjtFQUNyQixtQkFBbUI7RUFDbkIsc0JBQXNCO0FBQ3hCO0FBQ0E7RUFDRSxxQkFBcUI7RUFDckIsV0FBVztFQUNYLHlCQUF5QjtFQUN6QixzQkFBc0I7QUFDeEI7QUFDQSxrQkFDeUIsV0FBVztFQUNsQyxhQUFhLEVBRWdCLFdBQVc7RUFDeEMsb0JBQW9CLEVBRWlCLFdBQVc7RUFDaEQsMkJBQTJCLEVBRUcsV0FBVztFQUN6QyxvQkFBb0I7O0VBRXBCLG9CQUFvQjtBQUN0QjtBQUNBO0VBQ0UsZUFBZTtFQUNmLGFBQWEsRUFDVyxXQUFXO0VBQ25DLGNBQWM7RUFDZCwwQkFBMEI7RUFDMUIsc0JBQXNCO0VBQ3RCLGVBQWU7O0VBRWYsd0NBQXdDO0VBQ3hDLHdDQUF3QztFQUN4QyxXQUFXOztFQUVYOzs7R0FHQzs7RUFFRDs7O0dBR0M7O0FBRUg7QUFDQTtFQUNFLGVBQWU7RUFDZixXQUFXO0FBQ2I7QUFDQTtFQUNFLGVBQWU7RUFDZixXQUFXO0FBQ2I7QUFFQTtFQUNFLGtCQUFrQjtBQUNwQjtBQUVBO0VBQ0UsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsa0JBQWtCO0VBQ2xCLE1BQU07RUFDTixTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7RUFDUixnQkFBZ0I7QUFDbEIiLCJmaWxlIjoiZ2FtZS1jaGFyYWN0ZXItc2hlZXQuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tYWluLWltYWdlLWJveCB7XG4gIC8qIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwcHg7XG4gIGxlZnQ6IDA7XG4gICovXG4gIHdpZHRoOiAyNTBweDtcbiAgaGVpZ2h0OiAyNTBweDtcbn1cbi5tYWluLWltYWdlIHtcbiAgd2lkdGg6IDI1MHB4O1xufVxuXG4udGFibGUge1xuICBkaXNwbGF5OnRhYmxlO1xuICB3aWR0aCA6MTAwJTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgLypib3JkZXI6MXB4IHNvbGlkICNGRkZGMDA7Ki9cbn1cbi50YWJsZS1yb3cge1xuICBkaXNwbGF5OnRhYmxlLXJvdztcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbn1cbi50YWJsZS1yb3cgPiBkaXYge1xuICBkaXNwbGF5OnRhYmxlLWNlbGw7XG4gIGJvcmRlcjoxcHggc29saWQgI0ZGRjtcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbn1cbi5ib3gge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIG1hcmdpbjogNXB4O1xuICAvKmJvcmRlcjoxcHggc29saWQgI0ZGRjsqL1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xufVxuLmZsZXgtY29udGFpbmVyIHtcbiAgZGlzcGxheTogLXdlYmtpdC1mbGV4OyAvKiBTYWZhcmkgKi9cbiAgZGlzcGxheTogZmxleDtcblxuICAtd2Via2l0LWZsZXgtZmxvdzogcm93IHdyYXA7IC8qIFNhZmFyaSAqL1xuICBmbGV4LWZsb3c6ICByb3cgd3JhcDtcblxuICAtd2Via2l0LWp1c3RpZnktY29udGVudDogZmxleC1zdGFydDsgLyogU2FmYXJpICovXG4gIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcblxuICAtd2Via2l0LWFsaWduLWl0ZW1zOiBzdHJldGNoOyAvKiBTYWZhcmkgKi9cbiAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XG5cbiAgLyptaW4td2lkdGg6IDI1MHB4OyovXG59XG4uZmxleC1pdGVtIHtcbiAgbWFyZ2luOiA1cHggMHB4O1xuICBwYWRkaW5nOiAxMHB4O1xuICAtd2Via2l0LWZsZXg6IDEgMCBhdXRvOyAvKiBTYWZhcmkgKi9cbiAgZmxleDogMSAwIGF1dG87XG4gIC8qYm9yZGVyOiAxcHggc29saWQgIzk5OTsqL1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBtaW4td2lkdGg6IDI1cHg7XG5cbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyMzQsMjAxLDE1NywgMC44KTtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDAsMjE4LDE4OSwgMC44KTtcbiAgY29sb3I6ICM0NDQ7XG5cbiAgLypcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICM0NDQ7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjNDQ0O1xuICAqL1xuXG4gIC8qXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoNzAsIDcwLCA3MCwgMC44KTtcbiAgY29sb3I6ICNDQ0M7XG4gICovXG5cbn1cbi5mbGV4LWl0ZW0gaW5wdXQsIC5mbGV4LWl0ZW0gYnV0dG9uLCAuZmxleC1pdGVtIHRleHRhcmVhLCAuZmxleC1pdGVtIHNlbGVjdCB7XG4gIC8qY29sb3I6ICM1NTU7Ki9cbiAgY29sb3I6ICNDQ0M7XG59XG5pbnB1dCB7XG4gIC8qY29sb3I6ICM1NTU7Ki9cbiAgY29sb3I6ICNDQ0M7XG59XG5cbi5pcy1oaWRkZW4ge1xuICB2aXNpYmlsaXR5OiBoaWRkZW47XG59XG5cbi5wcm9ncmVzcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgZm9udC1zaXplOiAwLjllbTtcbn1cbiJdfQ== */"] });
    return GameCharacterSheetComponent;
}());



/***/ }),

/***/ "zeEm":
/*!*********************************************************!*\
  !*** ./src/app/class/core/file-storage/audio-player.ts ***!
  \*********************************************************/
/*! exports provided: VolumeType, AudioPlayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VolumeType", function() { return VolumeType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioPlayer", function() { return AudioPlayer; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _audio_file__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./audio-file */ "eRQf");
/* harmony import */ var _file_reader_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./file-reader-util */ "N0uT");



var VolumeType;
(function (VolumeType) {
    VolumeType[VolumeType["MASTER"] = 0] = "MASTER";
    VolumeType[VolumeType["AUDITION"] = 1] = "AUDITION";
})(VolumeType || (VolumeType = {}));
var AudioPlayer = /** @class */ (function () {
    function AudioPlayer(audio) {
        this.volumeType = VolumeType.MASTER;
        this.audio = audio;
    }
    Object.defineProperty(AudioPlayer, "audioContext", {
        get: function () {
            if (!AudioPlayer._audioContext)
                AudioPlayer._audioContext = new (window.AudioContext || window.webkitAudioContext)();
            return AudioPlayer._audioContext;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer, "volume", {
        get: function () { return AudioPlayer._volume; },
        set: function (volume) {
            AudioPlayer._volume = volume;
            AudioPlayer.masterGainNode.gain.setTargetAtTime(AudioPlayer._volume, AudioPlayer.audioContext.currentTime, 0.01);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer, "auditionVolume", {
        get: function () { return AudioPlayer._auditionVolume; },
        set: function (auditionVolume) {
            AudioPlayer._auditionVolume = auditionVolume;
            AudioPlayer.auditionGainNode.gain.setTargetAtTime(AudioPlayer._auditionVolume, AudioPlayer.audioContext.currentTime, 0.01);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer, "masterGainNode", {
        get: function () {
            if (!AudioPlayer._masterGainNode) {
                var masterGain = AudioPlayer.audioContext.createGain();
                masterGain.gain.setValueAtTime(AudioPlayer._volume, AudioPlayer.audioContext.currentTime);
                masterGain.connect(AudioPlayer.audioContext.destination);
                AudioPlayer._masterGainNode = masterGain;
            }
            return AudioPlayer._masterGainNode;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer, "auditionGainNode", {
        get: function () {
            if (!AudioPlayer._auditionGainNode) {
                var auditionGain = AudioPlayer.audioContext.createGain();
                auditionGain.gain.setValueAtTime(AudioPlayer._auditionVolume, AudioPlayer.audioContext.currentTime);
                auditionGain.connect(AudioPlayer.audioContext.destination);
                AudioPlayer._auditionGainNode = auditionGain;
            }
            return AudioPlayer._auditionGainNode;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer, "rootNode", {
        get: function () { return AudioPlayer.masterGainNode; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer, "auditionNode", {
        get: function () { return AudioPlayer.auditionGainNode; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer.prototype, "audioElm", {
        get: function () {
            var _this = this;
            if (!this._audioElm) {
                this._audioElm = new Audio();
                this._audioElm.onplay = function () { };
                this._audioElm.onpause = function () { _this.mediaElementSource.disconnect(); };
                this._audioElm.onended = function () { _this.mediaElementSource.disconnect(); };
            }
            return this._audioElm;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer.prototype, "mediaElementSource", {
        get: function () {
            if (!this._mediaElementSource)
                this._mediaElementSource = AudioPlayer.audioContext.createMediaElementSource(this.audioElm);
            return this._mediaElementSource;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer.prototype, "volume", {
        get: function () { return this.audioElm.volume; },
        set: function (volume) { this.audioElm.volume = volume; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer.prototype, "loop", {
        get: function () { return this.audioElm.loop; },
        set: function (loop) { this.audioElm.loop = loop; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer.prototype, "paused", {
        get: function () { return this.audioElm.paused; },
        enumerable: false,
        configurable: true
    });
    AudioPlayer.play = function (audio, volume) {
        if (volume === void 0) { volume = 1.0; }
        this.playBufferAsync(audio, volume);
    };
    AudioPlayer.prototype.play = function (audio) {
        if (audio === void 0) { audio = this.audio; }
        this.stop();
        this.audio = audio;
        if (!this.audio)
            return;
        var url = this.audio.url;
        if (audio.state === _audio_file__WEBPACK_IMPORTED_MODULE_1__["AudioState"].URL) {
            if (AudioPlayer.cacheMap.has(audio.identifier)) {
                url = AudioPlayer.cacheMap.get(audio.identifier).url;
            }
            else {
                AudioPlayer.createCacheAsync(audio);
            }
        }
        this.mediaElementSource.connect(this.getConnectingAudioNode());
        this.audioElm.src = url;
        this.audioElm.load();
        this.audioElm.play().catch(function (reason) { console.warn(reason); });
    };
    AudioPlayer.prototype.pause = function () {
        this.audioElm.pause();
    };
    AudioPlayer.prototype.stop = function () {
        if (!this.audioElm)
            return;
        this.pause();
        this.audioElm.currentTime = 0;
        this.audioElm.src = '';
        this.audioElm.load();
        this.mediaElementSource.disconnect();
    };
    AudioPlayer.prototype.getConnectingAudioNode = function () {
        switch (this.volumeType) {
            case VolumeType.AUDITION:
                return AudioPlayer.auditionNode;
            default:
                return AudioPlayer.rootNode;
        }
    };
    AudioPlayer.playBufferAsync = function (audio, volume) {
        if (volume === void 0) { volume = 1.0; }
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var source, gain;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, AudioPlayer.createBufferSourceAsync(audio)];
                    case 1:
                        source = _a.sent();
                        if (!source)
                            return [2 /*return*/];
                        gain = AudioPlayer.audioContext.createGain();
                        gain.gain.setValueAtTime(volume, AudioPlayer.audioContext.currentTime);
                        gain.connect(AudioPlayer.rootNode);
                        source.connect(gain);
                        source.onended = function () {
                            source.stop();
                            source.disconnect();
                            gain.disconnect();
                            source.buffer = null;
                        };
                        source.start();
                        return [2 /*return*/];
                }
            });
        });
    };
    AudioPlayer.createBufferSourceAsync = function (audio) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var blob, cache, decodedData, source, reason_1;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!audio)
                            return [2 /*return*/, null];
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 6, , 7]);
                        blob = audio.blob;
                        if (!(audio.state === _audio_file__WEBPACK_IMPORTED_MODULE_1__["AudioState"].URL)) return [3 /*break*/, 4];
                        if (!AudioPlayer.cacheMap.has(audio.identifier)) return [3 /*break*/, 2];
                        blob = AudioPlayer.cacheMap.get(audio.identifier).blob;
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, AudioPlayer.createCacheAsync(audio)];
                    case 3:
                        cache = _a.sent();
                        blob = cache && cache.blob ? cache.blob : null;
                        _a.label = 4;
                    case 4:
                        if (!blob)
                            return [2 /*return*/, null];
                        return [4 /*yield*/, this.decodeAudioDataAsync(blob)];
                    case 5:
                        decodedData = _a.sent();
                        source = AudioPlayer.audioContext.createBufferSource();
                        source.buffer = decodedData;
                        return [2 /*return*/, source];
                    case 6:
                        reason_1 = _a.sent();
                        console.warn(reason_1);
                        return [2 /*return*/, null];
                    case 7: return [2 /*return*/];
                }
            });
        });
    };
    AudioPlayer.decodeAudioDataAsync = function (blob) {
        var _this = this;
        return new Promise(function (resolve, reject) { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(_this, void 0, void 0, function () {
            var _a, _b;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _b = (_a = AudioPlayer.audioContext).decodeAudioData;
                        return [4 /*yield*/, _file_reader_util__WEBPACK_IMPORTED_MODULE_2__["FileReaderUtil"].readAsArrayBufferAsync(blob)];
                    case 1:
                        _b.apply(_a, [_c.sent(),
                            function (decodedData) { return resolve(decodedData); },
                            function (error) { return reject(error); }]);
                        return [2 /*return*/];
                }
            });
        }); });
    };
    AudioPlayer.getBlobAsync = function (audio) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var response, blob, error_1;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (audio.blob)
                            return [2 /*return*/, audio.blob];
                        if (audio.url.length < 1)
                            throw new Error('えっ なにそれ怖い');
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 4, , 5]);
                        return [4 /*yield*/, fetch(audio.url)];
                    case 2:
                        response = _a.sent();
                        if (!response.ok)
                            throw new Error('Network response was not ok.');
                        return [4 /*yield*/, response.blob()];
                    case 3:
                        blob = _a.sent();
                        return [2 /*return*/, blob];
                    case 4:
                        error_1 = _a.sent();
                        console.warn('There has been a problem with your fetch operation: ', error_1.message);
                        throw error_1;
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    AudioPlayer.createCacheAsync = function (audio) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var cache, _a, e_1;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        cache = { url: audio.url, blob: null };
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        _a = cache;
                        return [4 /*yield*/, AudioPlayer.getBlobAsync(audio)];
                    case 2:
                        _a.blob = _b.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        e_1 = _b.sent();
                        console.error(e_1);
                        return [2 /*return*/, cache];
                    case 4:
                        if (AudioPlayer.cacheMap.has(audio.identifier)) {
                            return [2 /*return*/, AudioPlayer.cacheMap.get(audio.identifier)];
                        }
                        cache.url = URL.createObjectURL(cache.blob);
                        AudioPlayer.cacheMap.set(audio.identifier, cache);
                        return [2 /*return*/, cache];
                }
            });
        });
    };
    AudioPlayer.resumeAudioContext = function () {
        AudioPlayer.audioContext.resume();
        var callback = function () {
            AudioPlayer.audioContext.resume();
            document.removeEventListener('touchstart', callback, true);
            document.removeEventListener('mousedown', callback, true);
            console.log('resumeAudioContext');
        };
        document.addEventListener('touchstart', callback, true);
        document.addEventListener('mousedown', callback, true);
    };
    AudioPlayer._volume = 0.5;
    AudioPlayer._auditionVolume = 0.5;
    AudioPlayer.cacheMap = new Map();
    return AudioPlayer;
}());



/***/ }),

/***/ "zhae":
/*!******************************************************************************!*\
  !*** ./src/app/component/game-table-setting/game-table-setting.component.ts ***!
  \******************************************************************************/
/*! exports provided: GameTableSettingComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameTableSettingComponent", function() { return GameTableSettingComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-serializer */ "MDT1");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_game_table__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/game-table */ "RDF6");
/* harmony import */ var component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! component/file-selecter/file-selecter.component */ "FR7b");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var service_save_data_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/save-data.service */ "Uvtn");
/* harmony import */ var service_image_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! service/image.service */ "Hvpu");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");














function GameTableSettingComponent_option_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "option", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
} if (rf & 2) {
    var gameTable_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpropertyInterpolate"]("value", gameTable_r3.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate"](gameTable_r3.name);
} }
function GameTableSettingComponent_ng_container_8_div_9_Template(rf, ctx) { if (rf & 1) {
    var _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](1, "button", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function GameTableSettingComponent_ng_container_8_div_9_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r9); var ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2); return ctx_r8.openDistanceViewImageModal(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](2, "\u80CC\u666F\u753B\u50CF\u3092\u8FFD\u52A0");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
} }
function GameTableSettingComponent_ng_container_8_div_10_Template(rf, ctx) { if (rf & 1) {
    var _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function GameTableSettingComponent_ng_container_8_div_10_Template_div_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r11); var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2); return ctx_r10.openDistanceViewImageModal(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](1, "img", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](2, 1, ctx_r5.tableDistanceviewImage.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵsanitizeUrl"]);
} }
function GameTableSettingComponent_ng_container_8_ng_container_56_div_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"]("", ctx_r12.progresPercent, "%");
} }
var _c0 = function (a0) { return { "is-hidden": a0 }; };
function GameTableSettingComponent_ng_container_8_ng_container_56_Template(rf, ctx) { if (rf & 1) {
    var _r14 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](1, "button", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function GameTableSettingComponent_ng_container_8_ng_container_56_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r14); var ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2); return ctx_r13.save(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](2, "div", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](3, "div", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](4, "\u4FDD\u5B58");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](5, GameTableSettingComponent_ng_container_8_ng_container_56_div_5_Template, 2, 1, "div", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](6, "button", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function GameTableSettingComponent_ng_container_8_ng_container_56_Template_button_click_6_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r14); var ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2); return ctx_r15.delete(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](7, "\u524A\u9664");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("disabled", ctx_r6.isSaveing);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpureFunction1"](4, _c0, ctx_r6.isSaveing));
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx_r6.isSaveing);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵattribute"]("disabled", ctx_r6.getGameTables().length <= 1 ? "" : null);
} }
function GameTableSettingComponent_ng_container_8_ng_container_57_Template(rf, ctx) { if (rf & 1) {
    var _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](1, "button", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function GameTableSettingComponent_ng_container_8_ng_container_57_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r17); var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2); return ctx_r16.restore(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](2, "\u5143\u306B\u623B\u3059");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerEnd"]();
} }
function GameTableSettingComponent_ng_container_8_Template(rf, ctx) { if (rf & 1) {
    var _r19 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](1, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](3, " \u753B\u50CF ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](4, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function GameTableSettingComponent_ng_container_8_Template_div_click_4_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r19); var ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](); return ctx_r18.openBgImageModal(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](5, "img", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](6, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](7, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](8, " \u80CC\u666F ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](9, GameTableSettingComponent_ng_container_8_div_9_Template, 3, 0, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](10, GameTableSettingComponent_ng_container_8_div_10_Template, 3, 4, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](11, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](12, "Name : ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](13, "input", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_input_ngModelChange_13_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r19); var ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](); return ctx_r20.tableName = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](14, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](15, "input", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_input_ngModelChange_15_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r19); var ctx_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](); return ctx_r21.tableWidth = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](16, " Width : ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](17, "input", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_input_ngModelChange_17_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r19); var ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](); return ctx_r22.tableWidth = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](18, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](19, "input", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_input_ngModelChange_19_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r19); var ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](); return ctx_r23.tableHeight = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](20, " Height : ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](21, "input", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_input_ngModelChange_21_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r19); var ctx_r24 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](); return ctx_r24.tableHeight = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](22, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](23, " \u30B0\u30EA\u30C3\u30C9: ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](24, "select", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_select_ngModelChange_24_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r19); var ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](); return ctx_r25.tableGridType = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](25, "option", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](26, "\u306A\u3057");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](27, "option", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](28, "\u30B9\u30AF\u30A8\u30A2");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](29, "option", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](30, "\u30D8\u30AF\u30B9\uFF08\u7E26\u63C3\u3048\uFF09");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](31, "option", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](32, "\u30D8\u30AF\u30B9\uFF08\u6A2A\u63C3\u3048\uFF09");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](33, " \u8272: ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](34, "select", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_select_ngModelChange_34_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r19); var ctx_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](); return ctx_r26.tableGridColor = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](35, "option", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](36, "\u9ED2");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](37, "option", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](38, "\u767D");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](39, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](40, " \u80CC\u666F\u30D5\u30A3\u30EB\u30BF ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](41, "select", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_select_ngModelChange_41_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r19); var ctx_r27 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](); return ctx_r27.tableDistanceviewFilter = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](42, "option", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](43, "\u306A\u3057");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](44, "option", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](45, "\u30DB\u30EF\u30A4\u30C8");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](46, "option", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](47, "\u30D6\u30E9\u30C3\u30AF");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](48, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](49, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](50, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](51, "\u30B0\u30EA\u30C3\u30C9\u3092\u5E38\u306B\u8868\u793A: ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](52, "input", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_input_ngModelChange_52_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r19); var ctx_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](); return ctx_r28.tableGridShow = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](53, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](54, "\u30B9\u30CA\u30C3\u30D7: ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](55, "input", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_input_ngModelChange_55_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r19); var ctx_r29 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](); return ctx_r29.tableGridSnap = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](56, GameTableSettingComponent_ng_container_8_ng_container_56_Template, 8, 6, "ng-container", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](57, GameTableSettingComponent_ng_container_8_ng_container_57_Template, 3, 0, "ng-container", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](6, 31, ctx_r1.tableBackgroundImage.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵsanitizeUrl"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", !ctx_r1.tableDistanceviewImage.url);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx_r1.tableDistanceviewImage.url);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngModel", ctx_r1.tableName);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpropertyInterpolate"]("min", ctx_r1.minSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpropertyInterpolate"]("max", ctx_r1.maxSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngModel", ctx_r1.tableWidth);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpropertyInterpolate"]("min", ctx_r1.minSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpropertyInterpolate"]("max", ctx_r1.maxSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngModel", ctx_r1.tableWidth);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpropertyInterpolate"]("min", ctx_r1.minSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpropertyInterpolate"]("max", ctx_r1.maxSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngModel", ctx_r1.tableHeight);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpropertyInterpolate"]("min", ctx_r1.minSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpropertyInterpolate"]("max", ctx_r1.maxSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngModel", ctx_r1.tableHeight);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngModel", ctx_r1.tableGridType);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngModel", ctx_r1.tableGridColor);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngModel", ctx_r1.tableDistanceviewFilter);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngModel", ctx_r1.tableGridShow);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngModel", ctx_r1.tableGridSnap);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", !ctx_r1.isDeleted);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx_r1.isDeleted);
} }
function GameTableSettingComponent_ng_container_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](1, "div", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](2, "\u203B\u30C6\u30FC\u30D6\u30EB\u304C\uFF11\u3064\u3082\u4F5C\u6210\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002\u300C\u65B0\u3057\u3044\u30C6\u30FC\u30D6\u30EB\u3092\u4F5C\u308B\u300D\u304B\u3089\u65B0\u3057\u3044\u30C6\u30FC\u30D6\u30EB\u3092\u4F5C\u6210\u3059\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerEnd"]();
} }
var GameTableSettingComponent = /** @class */ (function () {
    function GameTableSettingComponent(modalService, saveDataService, imageService, panelService) {
        this.modalService = modalService;
        this.saveDataService = saveDataService;
        this.imageService = imageService;
        this.panelService = panelService;
        this.minSize = 1;
        this.maxSize = 100;
        this.selectedTable = null;
        this.selectedTableXml = '';
        this.isSaveing = false;
        this.progresPercent = 0;
    }
    Object.defineProperty(GameTableSettingComponent.prototype, "tableBackgroundImage", {
        get: function () {
            return this.imageService.getEmptyOr(this.selectedTable ? this.selectedTable.imageIdentifier : null);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableDistanceviewImage", {
        get: function () {
            return this.imageService.getEmptyOr(this.selectedTable ? this.selectedTable.backgroundImageIdentifier : null);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableName", {
        get: function () { return this.selectedTable.name; },
        set: function (tableName) { if (this.isEditable)
            this.selectedTable.name = tableName; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableWidth", {
        get: function () { return this.selectedTable.width; },
        set: function (tableWidth) { if (this.isEditable)
            this.selectedTable.width = tableWidth; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableHeight", {
        get: function () { return this.selectedTable.height; },
        set: function (tableHeight) { if (this.isEditable)
            this.selectedTable.height = tableHeight; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableGridColor", {
        get: function () { return this.selectedTable.gridColor; },
        set: function (tableGridColor) { if (this.isEditable)
            this.selectedTable.gridColor = tableGridColor; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableGridShow", {
        get: function () { return this.tableSelecter.gridShow; },
        set: function (tableGridShow) {
            this.tableSelecter.gridShow = tableGridShow;
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('UPDATE_GAME_OBJECT', this.tableSelecter.toContext()); // 自分にだけイベントを発行してグリッド更新を誘発
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableGridSnap", {
        get: function () { return this.tableSelecter.gridSnap; },
        set: function (tableGridSnap) {
            this.tableSelecter.gridSnap = tableGridSnap;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableGridType", {
        get: function () { return this.selectedTable.gridType; },
        set: function (gridType) { if (this.isEditable)
            this.selectedTable.gridType = Number(gridType); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableDistanceviewFilter", {
        get: function () { return this.selectedTable.backgroundFilterType; },
        set: function (filterType) { if (this.isEditable)
            this.selectedTable.backgroundFilterType = filterType; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableSelecter", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get('tableSelecter'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "isEmpty", {
        get: function () { return this.tableSelecter ? (this.tableSelecter.viewTable ? false : true) : true; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "isDeleted", {
        get: function () {
            if (!this.selectedTable)
                return true;
            return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(this.selectedTable.identifier) == null;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "isEditable", {
        get: function () {
            return !this.isEmpty && !this.isDeleted;
        },
        enumerable: false,
        configurable: true
    });
    GameTableSettingComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.modalService.title = _this.panelService.title = 'テーブル設定'; });
        this.selectedTable = this.tableSelecter.viewTable;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].register(this)
            .on('DELETE_GAME_OBJECT', 1000, function (event) {
            if (!_this.selectedTable || event.data.identifier !== _this.selectedTable.identifier)
                return;
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(event.data.identifier);
            if (object !== null) {
                _this.selectedTableXml = object.toXml();
            }
        });
    };
    GameTableSettingComponent.prototype.ngAfterViewInit = function () { };
    GameTableSettingComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].unregister(this);
    };
    GameTableSettingComponent.prototype.selectGameTable = function (identifier) {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].call('SELECT_GAME_TABLE', { identifier: identifier }, _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId);
        this.selectedTable = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(identifier);
        this.selectedTableXml = '';
    };
    GameTableSettingComponent.prototype.getGameTables = function () {
        return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.getObjects(_udonarium_game_table__WEBPACK_IMPORTED_MODULE_4__["GameTable"]);
    };
    GameTableSettingComponent.prototype.createGameTable = function () {
        var gameTable = new _udonarium_game_table__WEBPACK_IMPORTED_MODULE_4__["GameTable"]();
        gameTable.name = '白紙のテーブル';
        gameTable.imageIdentifier = 'testTableBackgroundImage_image';
        gameTable.initialize();
        this.selectGameTable(gameTable.identifier);
    };
    GameTableSettingComponent.prototype.save = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.selectedTable || this.isSaveing)
                            return [2 /*return*/];
                        this.isSaveing = true;
                        this.progresPercent = 0;
                        this.selectedTable.selected = true;
                        return [4 /*yield*/, this.saveDataService.saveGameObjectAsync(this.selectedTable, 'map_' + this.selectedTable.name, function (percent) {
                                _this.progresPercent = percent;
                            })];
                    case 1:
                        _a.sent();
                        setTimeout(function () {
                            _this.isSaveing = false;
                            _this.progresPercent = 0;
                        }, 500);
                        return [2 /*return*/];
                }
            });
        });
    };
    GameTableSettingComponent.prototype.delete = function () {
        if (!this.isEmpty && this.selectedTable) {
            this.selectedTableXml = this.selectedTable.toXml();
            this.selectedTable.destroy();
        }
    };
    GameTableSettingComponent.prototype.restore = function () {
        if (this.selectedTable && this.selectedTableXml) {
            var restoreTable = _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_1__["ObjectSerializer"].instance.parseXml(this.selectedTableXml);
            this.selectGameTable(restoreTable.identifier);
            this.selectedTableXml = '';
        }
    };
    GameTableSettingComponent.prototype.openBgImageModal = function () {
        var _this = this;
        if (this.isDeleted)
            return;
        this.modalService.open(component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_5__["FileSelecterComponent"]).then(function (value) {
            if (!_this.selectedTable || !value)
                return;
            _this.selectedTable.imageIdentifier = value;
        });
    };
    GameTableSettingComponent.prototype.openDistanceViewImageModal = function () {
        var _this = this;
        if (this.isDeleted)
            return;
        this.modalService.open(component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_5__["FileSelecterComponent"], { isAllowedEmpty: true }).then(function (value) {
            if (!_this.selectedTable || !value)
                return;
            _this.selectedTable.backgroundImageIdentifier = value;
        });
    };
    GameTableSettingComponent.ɵfac = function GameTableSettingComponent_Factory(t) { return new (t || GameTableSettingComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_7__["ModalService"]), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](service_save_data_service__WEBPACK_IMPORTED_MODULE_8__["SaveDataService"]), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](service_image_service__WEBPACK_IMPORTED_MODULE_9__["ImageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_10__["PanelService"])); };
    GameTableSettingComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdefineComponent"]({ type: GameTableSettingComponent, selectors: [["game-table-setting"]], decls: 10, vars: 4, consts: [[1, "flex-container"], [1, "flex-item", "no-grow"], [3, "click"], ["size", "10", 2, "width", "10em", 3, "ngModel", "change"], [3, "value", 4, "ngFor", "ngForOf"], [1, "flex-item"], [4, "ngIf"], [3, "value"], [1, "images-select"], ["height", "120", 3, "src"], [3, "click", 4, "ngIf"], ["placeholder", "Name", 3, "ngModel", "ngModelChange"], ["type", "range", "name", "tableWidth", 3, "ngModel", "min", "max", "ngModelChange"], ["type", "number", 2, "width", "5em", 3, "ngModel", "min", "max", "ngModelChange"], ["type", "range", "name", "tableHeight", 3, "ngModel", "min", "max", "ngModelChange"], ["name", "tableGridType", 3, "ngModel", "ngModelChange"], ["value", "-1"], ["value", "0"], ["value", "1"], ["value", "2"], ["name", "tableGridColor", 3, "ngModel", "ngModelChange"], ["value", "#000000e6"], ["value", "#dddddde6"], ["name", "tableDistanceviewFilter", 3, "ngModel", "ngModelChange"], ["value", ""], ["value", "white"], ["value", "black"], ["type", "checkbox", "name", "tableGridShow", 3, "ngModel", "ngModelChange"], ["type", "checkbox", "name", "tableGridSnap", 3, "ngModel", "ngModelChange"], [2, "height", "120px", 3, "click"], [3, "disabled", "click"], [2, "position", "relative"], [3, "ngClass"], ["class", "progress", 4, "ngIf"], [1, "danger", 3, "click"], [1, "progress"], [2, "font-size", "12px"]], template: function GameTableSettingComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](2, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](3, "button", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function GameTableSettingComponent_Template_button_click_3_listener() { return ctx.createGameTable(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](4, "\u65B0\u3057\u3044\u30C6\u30FC\u30D6\u30EB\u3092\u4F5C\u308B");
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](5, "select", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("change", function GameTableSettingComponent_Template_select_change_5_listener($event) { return ctx.selectGameTable($event.target.value); });
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](6, GameTableSettingComponent_option_6_Template, 2, 2, "option", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](7, "div", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](8, GameTableSettingComponent_ng_container_8_Template, 58, 34, "ng-container", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](9, GameTableSettingComponent_ng_container_9_Template, 3, 0, "ng-container", 6);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngModel", ctx.selectedTable == null ? null : ctx.selectedTable.identifier);
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngForOf", ctx.getGameTables());
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", !ctx.isEmpty || ctx.selectedTable);
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx.isEmpty);
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_11__["SelectControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["NgModel"], _angular_common__WEBPACK_IMPORTED_MODULE_12__["NgForOf"], _angular_common__WEBPACK_IMPORTED_MODULE_12__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["NgSelectOption"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["ɵangular_packages_forms_forms_x"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["RangeValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["NumberValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["CheckboxControlValueAccessor"], _angular_common__WEBPACK_IMPORTED_MODULE_12__["NgClass"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_13__["SafePipe"]], styles: [".flex-container[_ngcontent-%COMP%] { \n  display: flex; \n  flex-flow:  row wrap; \n  justify-content: flex-start; \n  align-items: stretch;\n\n}\n.flex-item[_ngcontent-%COMP%] {\n  margin: 5px; \n  flex: 1 0 auto;\n  box-sizing: border-box; \n  flex-grow: 1;\n  max-width: 100%;\n}\n.no-grow[_ngcontent-%COMP%]{ \n  flex-grow: 0;\n}\n.images-select[_ngcontent-%COMP%] {\n  display: flex;\n}\n.is-hidden[_ngcontent-%COMP%] {\n  visibility: hidden;\n}\n.progress[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  font-size: 0.9em;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUtdGFibGUtc2V0dGluZy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGtCQUN5QixXQUFXO0VBQ2xDLGFBQWEsRUFFZ0IsV0FBVztFQUN4QyxvQkFBb0IsRUFFaUIsV0FBVztFQUNoRCwyQkFBMkIsRUFFRyxXQUFXO0VBQ3pDLG9CQUFvQjs7QUFFdEI7QUFDQTtFQUNFLFdBQVcsRUFDYSxXQUFXO0VBQ25DLGNBQWM7RUFDZCxzQkFBc0IsRUFDQSxXQUFXO0VBQ2pDLFlBQVk7RUFDWixlQUFlO0FBQ2pCO0FBRUEsVUFDd0IsV0FBVztFQUNqQyxZQUFZO0FBQ2Q7QUFFQTtFQUNFLGFBQWE7QUFDZjtBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCO0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixrQkFBa0I7RUFDbEIsTUFBTTtFQUNOLFNBQVM7RUFDVCxPQUFPO0VBQ1AsUUFBUTtFQUNSLGdCQUFnQjtBQUNsQiIsImZpbGUiOiJnYW1lLXRhYmxlLXNldHRpbmcuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5mbGV4LWNvbnRhaW5lciB7XG4gIGRpc3BsYXk6IC13ZWJraXQtZmxleDsgLyogU2FmYXJpICovXG4gIGRpc3BsYXk6IGZsZXg7XG5cbiAgLXdlYmtpdC1mbGV4LWZsb3c6IHJvdyB3cmFwOyAvKiBTYWZhcmkgKi9cbiAgZmxleC1mbG93OiAgcm93IHdyYXA7XG5cbiAgLXdlYmtpdC1qdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7IC8qIFNhZmFyaSAqL1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG5cbiAgLXdlYmtpdC1hbGlnbi1pdGVtczogc3RyZXRjaDsgLyogU2FmYXJpICovXG4gIGFsaWduLWl0ZW1zOiBzdHJldGNoO1xuXG59XG4uZmxleC1pdGVtIHtcbiAgbWFyZ2luOiA1cHg7XG4gIC13ZWJraXQtZmxleDogMSAwIGF1dG87IC8qIFNhZmFyaSAqL1xuICBmbGV4OiAxIDAgYXV0bztcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgLXdlYmtpdC1mbGV4LWdyb3c6IDE7IC8qIFNhZmFyaSAqL1xuICBmbGV4LWdyb3c6IDE7XG4gIG1heC13aWR0aDogMTAwJTtcbn1cblxuLm5vLWdyb3d7XG4gIC13ZWJraXQtZmxleC1ncm93OiAwOyAvKiBTYWZhcmkgKi9cbiAgZmxleC1ncm93OiAwO1xufVxuXG4uaW1hZ2VzLXNlbGVjdCB7XG4gIGRpc3BsYXk6IGZsZXg7XG59XG5cbi5pcy1oaWRkZW4ge1xuICB2aXNpYmlsaXR5OiBoaWRkZW47XG59XG5cbi5wcm9ncmVzcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgZm9udC1zaXplOiAwLjllbTtcbn1cbiJdfQ== */"] });
    return GameTableSettingComponent;
}());



/***/ }),

/***/ "zn8P":
/*!******************************************************!*\
  !*** ./$$_lazy_route_resource lazy namespace object ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncaught exception popping up in devtools
	return Promise.resolve().then(function() {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = "zn8P";

/***/ }),

/***/ "ztsr":
/*!***********************************************************!*\
  !*** ./src/app/class/core/system/network/peer-context.ts ***!
  \***********************************************************/
/*! exports provided: PeerContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PeerContext", function() { return PeerContext; });
/* harmony import */ var lzbase62__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lzbase62 */ "zqaK");
/* harmony import */ var lzbase62__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lzbase62__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var crypto_js_sha256__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto-js/sha256 */ "lPiR");
/* harmony import */ var crypto_js_sha256__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto_js_sha256__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _util_base_x__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/base-x */ "pVQh");



var Base62 = Object(_util_base_x__WEBPACK_IMPORTED_MODULE_2__["base"])('0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ');
var roomIdPattern = /^(\w{6})(\w{3})(\w*)-(\w*)/i;
var PeerContext = /** @class */ (function () {
    function PeerContext(peerId) {
        this.peerId = '';
        this.userId = '';
        this.roomId = '';
        this.roomName = '';
        this.password = '';
        this.digestUserId = '';
        this.digestPassword = '';
        this.isOpen = false;
        this.parse(peerId);
    }
    Object.defineProperty(PeerContext.prototype, "isRoom", {
        get: function () { return 0 < this.roomId.length; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PeerContext.prototype, "hasPassword", {
        get: function () { return 0 < this.password.length + this.digestPassword.length; },
        enumerable: false,
        configurable: true
    });
    PeerContext.prototype.parse = function (peerId) {
        try {
            this.peerId = peerId;
            var regArray = roomIdPattern.exec(peerId);
            var isRoom = regArray != null;
            if (isRoom) {
                this.digestUserId = regArray[1];
                this.roomId = regArray[2];
                this.roomName = lzbase62__WEBPACK_IMPORTED_MODULE_0__["decompress"](regArray[3]);
                this.digestPassword = regArray[4];
                return;
            }
        }
        catch (e) {
            console.warn(e);
        }
        this.digestUserId = peerId;
        return;
    };
    PeerContext.prototype.verifyPassword = function (password) {
        var digest = calcDigestPassword(this.roomId, password);
        var isCorrect = digest === this.digestPassword;
        return isCorrect;
    };
    PeerContext.parse = function (peerId) {
        return new PeerContext(peerId);
    };
    PeerContext.create = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (args.length <= 1) {
            return PeerContext._create.apply(this, args);
        }
        else {
            return PeerContext._createRoom.apply(this, args);
        }
    };
    PeerContext._create = function (userId) {
        if (userId === void 0) { userId = ''; }
        var digestUserId = calcDigestUserId(userId);
        var peerContext = new PeerContext(digestUserId);
        peerContext.userId = userId;
        return peerContext;
    };
    PeerContext._createRoom = function (userId, roomId, roomName, password) {
        if (userId === void 0) { userId = ''; }
        if (roomId === void 0) { roomId = ''; }
        if (roomName === void 0) { roomName = ''; }
        if (password === void 0) { password = ''; }
        var digestUserId = this.generateId('******');
        var digestPassword = calcDigestPassword(roomId, password);
        var peerId = "" + digestUserId + roomId + lzbase62__WEBPACK_IMPORTED_MODULE_0__["compress"](roomName) + "-" + digestPassword;
        var peerContext = new PeerContext(peerId);
        peerContext.userId = userId;
        peerContext.password = password;
        return peerContext;
    };
    PeerContext.generateId = function (format) {
        if (format === void 0) { format = '********'; }
        var h = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
        var k = format;
        k = format.replace(/\*/g, function (c) { return h[Math.floor(Math.random() * (h.length))]; });
        return k;
    };
    return PeerContext;
}());

function calcDigestUserId(userId) {
    if (userId == null)
        return '';
    return calcDigest(userId);
}
function calcDigestPassword(roomId, password) {
    if (roomId == null || password == null)
        return '';
    return 0 < password.length ? calcDigest(roomId + password, 7) : '';
}
function calcDigest(str, truncateLength) {
    if (truncateLength === void 0) { truncateLength = -1; }
    if (str == null)
        return '';
    var hash = crypto_js_sha256__WEBPACK_IMPORTED_MODULE_1__(str);
    var array = new Uint8Array(Uint32Array.from(hash.words).buffer);
    var base62 = Base62.encode(array);
    if (truncateLength < 0)
        truncateLength = base62.length;
    if (base62.length < truncateLength)
        truncateLength = base62.length;
    base62 = base62.slice(0, truncateLength);
    return base62;
}


/***/ })

},[[0,"runtime","vendor"]]]);
//# sourceMappingURL=main.js.map